<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 3ea05538-c588-4d41-9c56-bd1c885ddf57 (2025-12-19 08:23Z) -->

# 勤務表カレンダーのデータソース (2025-12-19 08:23Z)

_**User**_

勤務表のカレンダーの部分はDBからではないですよね？

---

_**Agent (model composer-1, mode Agent)**_



---


カレンダー実装を確認中。フロントエンドとバックエンドのコードを確認します。


---

<tool-use data-tool-type="unknown" data-tool-name="list_dir_v2">
<details>
<summary>Tool use: **list_dir_v2**</summary>


Parameters:

```json
{
  "targetDirectory": "frontend/src"
}
```
Result:

```json
{
  "directoryTreeRoot": {
    "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src",
    "childrenDirs": [
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\components",
        "childrenDirs": [
          {
            "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\components\\dialog",
            "childrenFiles": [
              {
                "name": "AttendanceApplicationDialog.vue"
              },
              {
                "name": "AttendanceInputDialog.vue"
              },
              {
                "name": "WorkHoursInputDialog.vue"
              }
            ],
            "childrenWereProcessed": true
          }
        ],
        "childrenFiles": [
          {
            "name": "AppHeader.vue"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\router",
        "childrenFiles": [
          {
            "name": "index.js"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\services",
        "childrenFiles": [
          {
            "name": "api.js"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\views",
        "childrenFiles": [
          {
            "name": "EffortScreen.vue"
          },
          {
            "name": "HomeScreen.vue"
          },
          {
            "name": "LoginScreen.vue"
          },
          {
            "name": "MonthlySummaryScreen.vue"
          },
          {
            "name": "ReportScreen.vue"
          },
          {
            "name": "TimesheetScreen.vue"
          }
        ],
        "childrenWereProcessed": true
      }
    ],
    "childrenFiles": [
      {
        "name": "App.vue"
      },
      {
        "name": "main.js"
      }
    ],
    "childrenWereProcessed": true
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **undefined** (0 file)

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **undefined** (0 file)

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "calendar|カレンダー",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "calendar|カレンダー",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "SVGファイル/teamspirit-home.svg",
              "matches": [
                {
                  "lineNumber": 75,
                  "content": "  &lt;!-- カレンダーセクションの開始 --&gt;"
                },
                {
                  "lineNumber": 76,
                  "content": "  &lt;g id=\"calendar\"&gt;"
                },
                {
                  "lineNumber": 88,
                  "content": "    &lt;!-- カレンダーヘッダー --&gt;"
                },
                {
                  "lineNumber": 99,
                  "content": "    &lt;!-- カレンダー行 --&gt;"
                }
              ]
            },
            {
              "file": "feture_list/TeamSpirit機能一覧.md",
              "matches": [
                {
                  "lineNumber": 23,
                  "content": "| 19 | 勤務表 | 画面 | SCR_TS_0201 | 勤務表 | AttendanceTable | N/A | N/A | SCR_TS_020101 | メイン | Main |従業員 | 月間の勤務表を表示し、各種勤務情報の入力・確認を行う | 初期表示 | 月間カレンダー形式で勤務表を表示。出退勤時刻、休憩時間、工数などを表示。出退勤時刻は背景色で手入力と打刻を区別（打刻は黄色、手入力は白色） |"
                },
                {
                  "lineNumber": 46,
                  "content": "| 42 | 勤務表 | 画面 | SCR_TS_0207 | UI表示勤務表 | DisplayAttendanceTable | N/A | N/A | SCR_TS_020501 | 勤務表 | AttendanceTable | 従業員 | 月間勤務表の表示（カレンダー形式） | 初期表示 | カレンダー形式で勤務状況を可視化。日別の勤務時間、休憩時間をグラフィカルに表示 |"
                },
                {
                  "lineNumber": 165,
                  "content": "7. 勤務表は月間カレンダー形式で表示し、グラフィカルに勤務状況を可視化"
                }
              ]
            },
            {
              "file": "figma-plugin/figma-json-split/blue-header.json",
              "matches": [
                {
                  "lineNumber": 438,
                  "content": "          \"name\": \"Calendar Icon\","
                },
                {
                  "lineNumber": 447,
                  "content": "              \"name\": \"Calendar\","
                }
              ]
            },
            {
              "file": "docs/detailed-design/ui/attendance-table-screen.md",
              "matches": [
                {
                  "lineNumber": 5,
                  "content": "本画面は、月間の勤務表をカレンダー形式で表示し、各種勤務情報の入力・確認を行う機能です。"
                },
                {
                  "lineNumber": 1322,
                  "content": "- システム内の祝日マスタまたはカレンダーAPIを使用"
                }
              ]
            },
            {
              "file": "frontend/src/views/TimesheetScreen.vue",
              "matches": [
                {
                  "lineNumber": 56,
                  "content": "        &lt;!-- カレンダーアイコン --&gt;"
                },
                {
                  "lineNumber": 57,
                  "content": "        &lt;div class=\"calendar-icon\"&gt;"
                },
                {
                  "lineNumber": 3284,
                  "content": "/* カレンダーアイコン */"
                },
                {
                  "lineNumber": 3285,
                  "content": ".calendar-icon {"
                }
              ]
            },
            {
              "file": "figma-plugin/figma-json-split/teamspirit-calendar-1.json",
              "matches": [
                {
                  "lineNumber": 3,
                  "content": "  \"name\": \"teamspirit-calendar 1\","
                },
                {
                  "lineNumber": 252,
                  "content": "                  \"name\": \"Calendar\","
                }
              ]
            },
            {
              "file": "figma-plugin/figma-json-split/calendar.json",
              "matches": [
                {
                  "lineNumber": 3,
                  "content": "  \"name\": \"Calendar\","
                }
              ]
            },
            {
              "file": "docs/detailed-design/ui/attendance-application-screen.md",
              "matches": [
                {
                  "lineNumber": 74,
                  "content": "| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | 入力 | 日付ピッカー | 日付 | | | | YYYY/MM/DD | 表示 | 条件付き活性 | 対象日付 | 休暇終了日。チェックボックスがチェックされている場合のみ入力可能。チェックが外れている場合、無効化され、開始日と同じ日付に設定される。カレンダーで開始日より前の日付は選択不可（グレーアウト表示） |"
                },
                {
                  "lineNumber": 75,
                  "content": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;カレンダーアイコンボタン | ボタン | | | | | | | 表示 | 条件付き活性 | | 日付ピッカーを開く。終了日が有効な場合のみ操作可能 |"
                },
                {
                  "lineNumber": 765,
                  "content": "| &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | 入出力項目定義.対象日付を初期値として設定。チェックボックスがチェックされている場合のみ入力可能。チェックが外れている場合、無効化され、開始日と同じ日付に設定される。カレンダーで開始日より前の日付は選択不可（min属性で開始日を設定） | |"
                },
                {
                  "lineNumber": 1469,
                  "content": "  - **終了日**: チェックボックスがチェックされている場合のみ入力可能。カレンダーで開始日より前の日付は選択不可（グレーアウト表示）。チェックが外れている場合、無効化され、開始日と同じ日付に設定される"
                },
                {
                  "lineNumber": 1786,
                  "content": "| 2025-12-22 | 休暇申請フォームの期間入力仕様を変更。開始日を常に無効化（グレーアウト）し、操作不可にする仕様を追加。開始日と終了日の間にチェックボックスを追加し、終了日の入力可否を制御する仕様を追加。終了日のカレンダーで開始日より前の日付を選択不可にする仕様を追加。チェック仕様、編集仕様、補足説明を更新 | AI Assistant |"
                }
              ]
            },
            {
              "file": "SVGファイル/teamspirit-calendar-full.svg",
              "matches": [
                {
                  "lineNumber": 43,
                  "content": "  &lt;!-- カレンダーヘッダー --&gt;"
                }
              ]
            },
            {
              "file": "SVGファイル/teamspirit-calendar-full-fixed.svg",
              "matches": [
                {
                  "lineNumber": 43,
                  "content": "  &lt;!-- カレンダーヘッダー --&gt;"
                }
              ]
            },
            {
              "file": "SVGファイル/teamspirit-monthly-report.svg",
              "matches": [
                {
                  "lineNumber": 54,
                  "content": "  &lt;!-- 出勤カレンダーテーブル --&gt;"
                }
              ]
            },
            {
              "file": ".specstory/history/2025-12-18_00-55Z-githubでの管理.md",
              "matches": [
                {
                  "lineNumber": 5893,
                  "content": "            \"name\": \"teamspirit-calendar-full-fixed.svg\""
                },
                {
                  "lineNumber": 5896,
                  "content": "            \"name\": \"teamspirit-calendar-full.svg\""
                },
                {
                  "lineNumber": 5899,
                  "content": "            \"name\": \"teamspirit-calendar.svg\""
                },
                {
                  "lineNumber": 9360,
                  "content": "warning: LF will be replaced by CRLF in SVGファイル/teamspirit-calendar-full-fixed.svg."
                },
                {
                  "lineNumber": 9362,
                  "content": "warning: LF will be replaced by CRLF in SVGファイル/teamspirit-calendar-full.svg."
                },
                {
                  "lineNumber": 9488,
                  "content": "warning: LF will be replaced by CRLF in figma-plugin/figma-json-split/teamspirit-calendar-1.json."
                },
                {
                  "lineNumber": 9957,
                  "content": " create mode 100644 \"SVG\\343\\203\\225\\343\\202\\241\\343\\202\\244\\343\\203\\253/teamspirit-calendar-full-fixed.svg\""
                },
                {
                  "lineNumber": 9958,
                  "content": " create mode 100644 \"SVG\\343\\203\\225\\343\\202\\241\\343\\202\\244\\343\\203\\253/teamspirit-calendar-full.svg\""
                },
                {
                  "lineNumber": 9959,
                  "content": " create mode 100644 \"SVG\\343\\203\\225\\343\\202\\241\\343\\202\\244\\343\\203\\253/teamspirit-calendar.svg\""
                },
                {
                  "lineNumber": 10049,
                  "content": " create mode 100644 figma-plugin/figma-json-split/calendar.json"
                },
                {
                  "lineNumber": 10075,
                  "content": " create mode 100644 figma-plugin/figma-json-split/teamspirit-calendar-1.json"
                }
              ]
            },
            {
              "file": "IMPLEMENTATION_GUIDE.md",
              "matches": [
                {
                  "lineNumber": 119,
                  "content": "   - 2024年12月のカレンダーが表示されること"
                }
              ]
            },
            {
              "file": "figma-plugin/figma-json-split/blue-header/blue-header.html",
              "matches": [
                {
                  "lineNumber": 74,
                  "content": "            &lt;!-- カレンダーアイコン --&gt;"
                }
              ]
            },
            {
              "file": "frontend/src/components/dialog/AttendanceApplicationDialog.vue",
              "matches": [
                {
                  "lineNumber": 3389,
                  "content": ".time-input-narrow::-webkit-calendar-picker-indicator {"
                }
              ]
            },
            {
              "file": "backend/services/monthlySummaryService.js",
              "matches": [
                {
                  "lineNumber": 231,
                  "content": "  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）"
                }
              ]
            },
            {
              "file": "SVGファイル/teamspirit-calendar.svg",
              "matches": [
                {
                  "lineNumber": 5,
                  "content": "  &lt;!-- カレンダー枠 --&gt;"
                },
                {
                  "lineNumber": 20,
                  "content": "  &lt;!-- カレンダーヘッダー --&gt;"
                },
                {
                  "lineNumber": 31,
                  "content": "  &lt;!-- カレンダー行 --&gt;"
                }
              ]
            }
          ],
          "totalLines": 44,
          "totalMatchedLines": 44
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


勤務表画面のコードを確認中。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/TimesheetScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "calendar|カレンダー|getDays|generateCalendar",
  "path": "backend",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "calendar|カレンダー|getDays|generateCalendar",
    "path": "backend",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "backend/utils/dateUtils.js",
              "matches": [
                {
                  "lineNumber": 106,
                  "content": "const getDaysInMonth = (year, month) =&gt; {"
                },
                {
                  "lineNumber": 122,
                  "content": "  const daysInMonth = getDaysInMonth(year, month);"
                },
                {
                  "lineNumber": 235,
                  "content": "  getDaysInMonth,"
                }
              ]
            },
            {
              "file": "backend/services/monthlySummaryService.js",
              "matches": [
                {
                  "lineNumber": 231,
                  "content": "  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）"
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


カレンダー生成部分を確認中。


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getDaysInMonth|generateCalendar|カレンダー|calendar.*days|days.*month",
  "path": "frontend/src/views/TimesheetScreen.vue",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "getDaysInMonth|generateCalendar|カレンダー|calendar.*days|days.*month",
    "path": "frontend/src/views/TimesheetScreen.vue",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "frontend/src/views/TimesheetScreen.vue",
              "matches": [
                {
                  "lineNumber": 56,
                  "content": "        &lt;!-- カレンダーアイコン --&gt;"
                },
                {
                  "lineNumber": 1352,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 1355,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 1639,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 1641,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 2799,
                  "content": "      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)"
                },
                {
                  "lineNumber": 2912,
                  "content": "      const scheduledWorkDaysUntilCutoff = this.getScheduledWorkDaysUntilDate(year, month, cutoffDateStr)"
                },
                {
                  "lineNumber": 2974,
                  "content": "      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)"
                },
                {
                  "lineNumber": 3005,
                  "content": "    getScheduledWorkDaysForMonth(year, month) {"
                },
                {
                  "lineNumber": 3006,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 3009,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 3035,
                  "content": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {"
                },
                {
                  "lineNumber": 3038,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 3284,
                  "content": "/* カレンダーアイコン */"
                }
              ]
            }
          ],
          "totalLines": 14,
          "totalMatchedLines": 14
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/TimesheetScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: backend/utils/dateUtils.js</summary>

</details>
</tool-use>

---



---


カレンダー生成部分を確認中。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/TimesheetScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/TimesheetScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "API|fetch|axios|get.*attendance|get.*calendar",
  "path": "frontend/src/views/TimesheetScreen.vue",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "API|fetch|axios|get.*attendance|get.*calendar",
    "path": "frontend/src/views/TimesheetScreen.vue",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "frontend/src/views/TimesheetScreen.vue",
              "matches": [
                {
                  "lineNumber": 1082,
                  "content": "import { getMonthlyAttendance, getEmployeeInfo, submitDailyConfirmation, updateAttendanceRecord, getDailyAttendance, getWorkHours } from '@/services/api'"
                },
                {
                  "lineNumber": 1109,
                  "content": "      remarksApiRecord: null, // APIから取得した勤怠データ"
                },
                {
                  "lineNumber": 1323,
                  "content": "        const response = await getMonthlyAttendance(this.employeeId, year, month)"
                },
                {
                  "lineNumber": 1326,
                  "content": "          // APIレスポンスをフロントエンド用のデータ形式に変換"
                },
                {
                  "lineNumber": 1327,
                  "content": "          const newData = this.convertApiDataToDisplayData(response.dailyData, year, month)"
                },
                {
                  "lineNumber": 1349,
                  "content": "    // APIレスポンスをフロントエンド用のデータ形式に変換"
                },
                {
                  "lineNumber": 1350,
                  "content": "    convertApiDataToDisplayData(apiData, year, month) {"
                },
                {
                  "lineNumber": 1361,
                  "content": "        // APIデータから該当日のデータを取得"
                },
                {
                  "lineNumber": 1363,
                  "content": "        const apiRecord = apiData.find(record =&gt; {"
                },
                {
                  "lineNumber": 1429,
                  "content": "        const totalWorkHours = apiRecord?.workHours?.reduce((sum, wh) =&gt; sum + (parseFloat(wh.WORK_HOURS_VALUE) || 0), 0) || 0"
                },
                {
                  "lineNumber": 1433,
                  "content": "        if (apiRecord?.breakTimes &amp;&amp; apiRecord.breakTimes.length &gt; 0) {"
                },
                {
                  "lineNumber": 1434,
                  "content": "          // APIから取得した休憩時間を変換"
                },
                {
                  "lineNumber": 1435,
                  "content": "          for (const bt of apiRecord.breakTimes) {"
                },
                {
                  "lineNumber": 1462,
                  "content": "        const clockIn = formatTime(apiRecord?.CLOCK_IN_TIME)"
                },
                {
                  "lineNumber": 1463,
                  "content": "        const clockOut = formatTime(apiRecord?.CLOCK_OUT_TIME)"
                },
                {
                  "lineNumber": 1466,
                  "content": "        const originalClockIn = formatTime(apiRecord?.ORIGINAL_CLOCK_IN_TIME)"
                },
                {
                  "lineNumber": 1467,
                  "content": "        const originalClockOut = formatTime(apiRecord?.ORIGINAL_CLOCK_OUT_TIME)"
                },
                {
                  "lineNumber": 1473,
                  "content": "          clockInType = apiRecord?.CLOCK_IN_TYPE || ''"
                },
                {
                  "lineNumber": 1480,
                  "content": "          clockOutType = apiRecord?.CLOCK_OUT_TYPE || ''"
                },
                {
                  "lineNumber": 1494,
                  "content": "        const holidayWorkApp = apiRecord?.holidayWorkApplication"
                },
                {
                  "lineNumber": 1522,
                  "content": "        const vacation = apiRecord?.vacation"
                },
                {
                  "lineNumber": 1536,
                  "content": "          approvalStatus: apiRecord?.APPROVAL_STATUS || 'NOT_SUBMITTED',"
                },
                {
                  "lineNumber": 1541,
                  "content": "          location: apiRecord?.WORK_LOCATION_NAME || apiRecord?.WORK_LOCATION_CODE || '',"
                },
                {
                  "lineNumber": 1543,
                  "content": "          hasWorkHoursError: apiRecord?.ACTUAL_WORK_HOURS &amp;&amp; Math.abs((apiRecord.ACTUAL_WORK_HOURS - totalWorkHours)) &gt; 0.01,"
                },
                {
                  "lineNumber": 1544,
                  "content": "          canEdit: !apiRecord?.IS_DAILY_CONFIRMED,"
                },
                {
                  "lineNumber": 1549,
                  "content": "          attendanceId: apiRecord?.ATTENDANCE_ID,"
                },
                {
                  "lineNumber": 1550,
                  "content": "          actualWorkHours: apiRecord?.ACTUAL_WORK_HOURS || 0,"
                },
                {
                  "lineNumber": 1558,
                  "content": "            if (apiRecord?.REMARK_TEXT !== null &amp;&amp; apiRecord?.REMARK_TEXT !== undefined) {"
                },
                {
                  "lineNumber": 1559,
                  "content": "              return String(apiRecord.REMARK_TEXT)"
                },
                {
                  "lineNumber": 2091,
                  "content": "          // その他の申請タイプはAPIで取得する必要があるが、とりあえずnull"
                }
              ]
            }
          ],
          "totalLines": 30,
          "totalMatchedLines": 30,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


コードを確認しました。結論: カレンダーの日付構造（1日から月末日まで）はDBからではなく、フロントエンド側でJavaScriptの`Date`オブジェクトを使って生成されています。

具体的には、`TimesheetScreen.vue`の以下の部分で生成しています：

```1352:1355:frontend/src/views/TimesheetScreen.vue
      const daysInMonth = new Date(year, month, 0).getDate()

      // 月の全日付分のデータを生成
      for (let day = 1; day <= daysInMonth; day++) {
```

```1639:1641:frontend/src/views/TimesheetScreen.vue
      const daysInMonth = new Date(year, month, 0).getDate()
      
      for (let day = 1; day <= daysInMonth; day++) {
```

つまり：
- カレンダーの日付構造（1日〜月末日、曜日など）: フロントエンドで生成
- 各日の勤怠データ（出退勤時刻、休憩時間、工数など）: API（DB）から取得

この実装により、カレンダー構造はクライアント側で計算され、各日の実データのみをAPIで取得する構成になっています。

---

_**User**_



---

_**Agent (model composer-1, mode Agent)**_



---


カレンダー生成ロジックの共通化に向けて、関連コードを確認中です。


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "new Date\\(year, month, 0\\)\\.getDate\\(\\)|daysInMonth|getDaysInMonth",
  "path": "frontend/src",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "new Date\\(year, month, 0\\)\\.getDate\\(\\)|daysInMonth|getDaysInMonth",
    "path": "frontend/src",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "frontend/src/views/MonthlySummaryScreen.vue",
              "matches": [
                {
                  "lineNumber": 829,
                  "content": "      const lastDay = new Date(year, month, 0).getDate()"
                }
              ]
            },
            {
              "file": "frontend/src/views/TimesheetScreen.vue",
              "matches": [
                {
                  "lineNumber": 1352,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 1355,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 1639,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 1641,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 3006,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                },
                {
                  "lineNumber": 3009,
                  "content": "      for (let day = 1; day &lt;= daysInMonth; day++) {"
                },
                {
                  "lineNumber": 3038,
                  "content": "      const daysInMonth = new Date(year, month, 0).getDate()"
                }
              ]
            }
          ],
          "totalLines": 8,
          "totalMatchedLines": 8
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/components/dialog/AttendanceApplicationDialog.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is calendar date generation implemented in frontend components?",
  "includePattern": "frontend/src",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1640
          },
          "endPosition": {
            "line": 1679
          }
        },
        "contents": "      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n        \n        // 祝日判定\n        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;\n        const holiday = HolidayJp.isHoliday(date)\n        \n        // 日付表示を数字部分と曜日部分に分ける\n        let dateNumber = ''\n        let dateDayOfWeek = ''\n        \n        if (day === 1) {\n          // 月初めの日のみMM/DD形式\n          dateNumber = &#96;${Number(month)}/${day}&#96;\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        } else {\n          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる\n          const dayStr = String(day).padStart(2, ' ')\n          dateNumber = dayStr\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        }\n        \n        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）\n        const breakTimes = []\n        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {\n          breakTimes.push({\n            startTime: '12:00',\n            endTime: '13:00',\n            startHour: 12,\n            startMinute: 0,\n            endHour: 13,\n            endMinute: 0\n          })\n        }\n\n        sampleData.push({\n          date: dateStr,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 1641
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 1642
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 1643
          },
          {
            "text": "        const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 1644
          },
          {
            "text": "        ",
            "lineNumber": 1645
          },
          {
            "text": "        // 祝日判定",
            "lineNumber": 1646
          },
          {
            "text": "        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;",
            "lineNumber": 1647
          },
          {
            "text": "        const holiday = HolidayJp.isHoliday(date)",
            "lineNumber": 1648
          },
          {
            "text": "        ",
            "lineNumber": 1649
          },
          {
            "text": "        // 日付表示を数字部分と曜日部分に分ける",
            "lineNumber": 1650
          },
          {
            "text": "        let dateNumber = ''",
            "lineNumber": 1651
          },
          {
            "text": "        let dateDayOfWeek = ''",
            "lineNumber": 1652
          },
          {
            "text": "        ",
            "lineNumber": 1653
          },
          {
            "text": "        if (day === 1) {",
            "lineNumber": 1654
          },
          {
            "text": "          // 月初めの日のみMM/DD形式",
            "lineNumber": 1655
          },
          {
            "text": "          dateNumber = &#96;${Number(month)}/${day}&#96;",
            "lineNumber": 1656
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1657
          },
          {
            "text": "        } else {",
            "lineNumber": 1658
          },
          {
            "text": "          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる",
            "lineNumber": 1659
          },
          {
            "text": "          const dayStr = String(day).padStart(2, ' ')",
            "lineNumber": 1660
          },
          {
            "text": "          dateNumber = dayStr",
            "lineNumber": 1661
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1662
          },
          {
            "text": "        }",
            "lineNumber": 1663
          },
          {
            "text": "        ",
            "lineNumber": 1664
          },
          {
            "text": "        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）",
            "lineNumber": 1665
          },
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1666
          },
          {
            "text": "        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {",
            "lineNumber": 1667
          },
          {
            "text": "          breakTimes.push({",
            "lineNumber": 1668
          },
          {
            "text": "            startTime: '12:00',",
            "lineNumber": 1669
          },
          {
            "text": "            endTime: '13:00',",
            "lineNumber": 1670
          },
          {
            "text": "            startHour: 12,",
            "lineNumber": 1671
          },
          {
            "text": "            startMinute: 0,",
            "lineNumber": 1672
          },
          {
            "text": "            endHour: 13,",
            "lineNumber": 1673
          },
          {
            "text": "            endMinute: 0",
            "lineNumber": 1674
          },
          {
            "text": "          })",
            "lineNumber": 1675
          },
          {
            "text": "        }",
            "lineNumber": 1676
          },
          {
            "lineNumber": 1677
          },
          {
            "text": "        sampleData.push({",
            "lineNumber": 1678
          },
          {
            "text": "          date: dateStr,",
            "lineNumber": 1679
          }
        ]
      },
      "score": 0.3840622901916504
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1255,
            "column": 6
          },
          "endPosition": {
            "line": 1291
          }
        },
        "contents": "this.loadAttendanceData()\n    }\n  },\n  methods: {\n    handleMenuClick(menuId) {\n      this.currentPage = menuId\n    },\n    \n    // 年月選択肢の初期化\n    initializeYearMonthOptions() {\n      const options = []\n      const today = new Date()\n      const currentYear = today.getFullYear()\n      const currentMonth = today.getMonth() + 1\n      \n      // 2ヶ月先の年月から降順で24ヶ月分の選択肢を生成\n      // 2ヶ月先（+2）から過去に23ヶ月分（合計24ヶ月分）\n      for (let i = 2; i &gt;= -21; i--) {\n        const date = new Date(currentYear, currentMonth - 1 + i, 1)\n        const year = date.getFullYear()\n        const month = date.getMonth() + 1\n        const value = &#96;${year}-${String(month).padStart(2, '0')}&#96;\n        const label = &#96;${year}年${String(month).padStart(2, '0')}月&#96;\n        options.push({ value, label })\n      }\n      \n      this.yearMonthOptions = options\n      this.selectedYearMonth = &#96;${currentYear}-${String(currentMonth).padStart(2, '0')}&#96;\n    },\n    \n    // 初期表示処理\n    async initializeScreen() {\n      try {\n        this.loading = true\n        this.error = null",
        "signatures": {},
        "detailedLines": [
          {
            "text": "this.loadAttendanceData()",
            "lineNumber": 1256
          },
          {
            "text": "    }",
            "lineNumber": 1257
          },
          {
            "text": "  },",
            "lineNumber": 1258
          },
          {
            "text": "  methods: {",
            "lineNumber": 1259
          },
          {
            "text": "    handleMenuClick(menuId) {",
            "lineNumber": 1260
          },
          {
            "text": "      this.currentPage = menuId",
            "lineNumber": 1261
          },
          {
            "text": "    },",
            "lineNumber": 1262
          },
          {
            "text": "    ",
            "lineNumber": 1263
          },
          {
            "text": "    // 年月選択肢の初期化",
            "lineNumber": 1264
          },
          {
            "text": "    initializeYearMonthOptions() {",
            "lineNumber": 1265
          },
          {
            "text": "      const options = []",
            "lineNumber": 1266
          },
          {
            "text": "      const today = new Date()",
            "lineNumber": 1267
          },
          {
            "text": "      const currentYear = today.getFullYear()",
            "lineNumber": 1268
          },
          {
            "text": "      const currentMonth = today.getMonth() + 1",
            "lineNumber": 1269
          },
          {
            "text": "      ",
            "lineNumber": 1270
          },
          {
            "text": "      // 2ヶ月先の年月から降順で24ヶ月分の選択肢を生成",
            "lineNumber": 1271
          },
          {
            "text": "      // 2ヶ月先（+2）から過去に23ヶ月分（合計24ヶ月分）",
            "lineNumber": 1272
          },
          {
            "text": "      for (let i = 2; i &gt;= -21; i--) {",
            "lineNumber": 1273
          },
          {
            "text": "        const date = new Date(currentYear, currentMonth - 1 + i, 1)",
            "lineNumber": 1274
          },
          {
            "text": "        const year = date.getFullYear()",
            "lineNumber": 1275
          },
          {
            "text": "        const month = date.getMonth() + 1",
            "lineNumber": 1276
          },
          {
            "text": "        const value = &#96;${year}-${String(month).padStart(2, '0')}&#96;",
            "lineNumber": 1277
          },
          {
            "text": "        const label = &#96;${year}年${String(month).padStart(2, '0')}月&#96;",
            "lineNumber": 1278
          },
          {
            "text": "        options.push({ value, label })",
            "lineNumber": 1279
          },
          {
            "text": "      }",
            "lineNumber": 1280
          },
          {
            "text": "      ",
            "lineNumber": 1281
          },
          {
            "text": "      this.yearMonthOptions = options",
            "lineNumber": 1282
          },
          {
            "text": "      this.selectedYearMonth = &#96;${currentYear}-${String(currentMonth).padStart(2, '0')}&#96;",
            "lineNumber": 1283
          },
          {
            "text": "    },",
            "lineNumber": 1284
          },
          {
            "text": "    ",
            "lineNumber": 1285
          },
          {
            "text": "    // 初期表示処理",
            "lineNumber": 1286
          },
          {
            "text": "    async initializeScreen() {",
            "lineNumber": 1287
          },
          {
            "text": "      try {",
            "lineNumber": 1288
          },
          {
            "text": "        this.loading = true",
            "lineNumber": 1289
          },
          {
            "text": "        this.error = null",
            "lineNumber": 1290
          }
        ]
      },
      "score": 0.3325713872909546
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1349
          },
          "endPosition": {
            "line": 1383
          }
        },
        "contents": "    convertApiDataToDisplayData(apiData, year, month) {\n      const displayData = []\n      const daysInMonth = new Date(year, month, 0).getDate()\n\n      // 月の全日付分のデータを生成\n      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n\n        // APIデータから該当日のデータを取得\n        // WORK_DATEがDateオブジェクト、タイムスタンプ、または文字列の場合に対応\n        const apiRecord = apiData.find(record =&gt; {\n          if (!record.WORK_DATE) return false;\n          \n          let recordDateStr = '';\n          if (record.WORK_DATE instanceof Date) {\n            // Dateオブジェクトの場合はYYYY-MM-DD形式に変換\n            const year = record.WORK_DATE.getFullYear();\n            const month = String(record.WORK_DATE.getMonth() + 1).padStart(2, '0');\n            const day = String(record.WORK_DATE.getDate()).padStart(2, '0');\n            recordDateStr = &#96;${year}-${month}-${day}&#96;;\n          } else if (typeof record.WORK_DATE === 'string') {\n            // タイムスタンプ形式（2025-12-10T15:00:00.000Z）の場合は日付部分のみを取得\n            // または既にYYYY-MM-DD形式の文字列の場合\n            if (record.WORK_DATE.includes('T')) {\n              recordDateStr = record.WORK_DATE.split('T')[0];\n            } else {\n              // 既にYYYY-MM-DD形式の場合は最初の10文字を取得\n              recordDateStr = record.WORK_DATE.substring(0, 10);\n            }\n          } else {\n            // その他の型の場合は文字列に変換してから処理",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    convertApiDataToDisplayData(apiData, year, month) {",
            "lineNumber": 1350
          },
          {
            "text": "      const displayData = []",
            "lineNumber": 1351
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 1352
          },
          {
            "lineNumber": 1353
          },
          {
            "text": "      // 月の全日付分のデータを生成",
            "lineNumber": 1354
          },
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 1355
          },
          {
            "text": "        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;",
            "lineNumber": 1356
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 1357
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 1358
          },
          {
            "text": "        const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 1359
          },
          {
            "lineNumber": 1360
          },
          {
            "text": "        // APIデータから該当日のデータを取得",
            "lineNumber": 1361
          },
          {
            "text": "        // WORK_DATEがDateオブジェクト、タイムスタンプ、または文字列の場合に対応",
            "lineNumber": 1362
          },
          {
            "text": "        const apiRecord = apiData.find(record =&gt; {",
            "lineNumber": 1363
          },
          {
            "text": "          if (!record.WORK_DATE) return false;",
            "lineNumber": 1364
          },
          {
            "text": "          ",
            "lineNumber": 1365
          },
          {
            "text": "          let recordDateStr = '';",
            "lineNumber": 1366
          },
          {
            "text": "          if (record.WORK_DATE instanceof Date) {",
            "lineNumber": 1367
          },
          {
            "text": "            // Dateオブジェクトの場合はYYYY-MM-DD形式に変換",
            "lineNumber": 1368
          },
          {
            "text": "            const year = record.WORK_DATE.getFullYear();",
            "lineNumber": 1369
          },
          {
            "text": "            const month = String(record.WORK_DATE.getMonth() + 1).padStart(2, '0');",
            "lineNumber": 1370
          },
          {
            "text": "            const day = String(record.WORK_DATE.getDate()).padStart(2, '0');",
            "lineNumber": 1371
          },
          {
            "text": "            recordDateStr = &#96;${year}-${month}-${day}&#96;;",
            "lineNumber": 1372
          },
          {
            "text": "          } else if (typeof record.WORK_DATE === 'string') {",
            "lineNumber": 1373
          },
          {
            "text": "            // タイムスタンプ形式（2025-12-10T15:00:00.000Z）の場合は日付部分のみを取得",
            "lineNumber": 1374
          },
          {
            "text": "            // または既にYYYY-MM-DD形式の文字列の場合",
            "lineNumber": 1375
          },
          {
            "text": "            if (record.WORK_DATE.includes('T')) {",
            "lineNumber": 1376
          },
          {
            "text": "              recordDateStr = record.WORK_DATE.split('T')[0];",
            "lineNumber": 1377
          },
          {
            "text": "            } else {",
            "lineNumber": 1378
          },
          {
            "text": "              // 既にYYYY-MM-DD形式の場合は最初の10文字を取得",
            "lineNumber": 1379
          },
          {
            "text": "              recordDateStr = record.WORK_DATE.substring(0, 10);",
            "lineNumber": 1380
          },
          {
            "text": "            }",
            "lineNumber": 1381
          },
          {
            "text": "          } else {",
            "lineNumber": 1382
          },
          {
            "text": "            // その他の型の場合は文字列に変換してから処理",
            "lineNumber": 1383
          }
        ]
      },
      "score": 0.3299903869628906
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 549
          },
          "endPosition": {
            "line": 595
          }
        },
        "contents": "    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''\n      // YYYY-MM-DD形式の日付文字列を確実にパースする\n      const dateParts = dateStr.split('-')\n      let date\n      if (dateParts.length === 3) {\n        const year = parseInt(dateParts[0], 10)\n        const month = parseInt(dateParts[1], 10) - 1 // 月は0から始まる\n        const day = parseInt(dateParts[2], 10)\n        date = new Date(year, month, day)\n      } else {\n        date = new Date(dateStr)\n      }\n      const days = ['日', '月', '火', '水', '木', '金', '土']\n      return days[date.getDay()]\n    },\n    isLegalHoliday(dateStr) {\n      // 法定休日（日曜日）を判定\n      if (!dateStr) return false\n      \n      // 日付文字列を正規化（YYYY-MM-DD形式に統一）\n      let normalizedDateStr = dateStr\n      if (dateStr.includes('T')) {\n        // ISO形式の場合、日付部分のみを抽出\n        normalizedDateStr = dateStr.split('T')[0]\n      } else if (dateStr.includes(' ')) {\n        // スペース区切りの場合、最初の部分を取得\n        normalizedDateStr = dateStr.split(' ')[0]\n      }\n      \n      // YYYY-MM-DD形式の日付文字列を確実にパースする\n      const dateParts = normalizedDateStr.split('-')\n      if (dateParts.length === 3) {\n        const year = parseInt(dateParts[0], 10)\n        const month = parseInt(dateParts[1], 10) - 1 // 月は0から始まる\n        const day = parseInt(dateParts[2], 10)\n        const date = new Date(year, month, day)\n        return date.getDay() === 0 // 日曜日\n      }\n      // フォールバック: 通常のDateパース\n      const date = new Date(normalizedDateStr)\n      const day = date.getDay()\n      return day === 0 // 日曜日\n    },\n    isScheduledHoliday(dateStr, dayData = null) {\n      // 所定休日（土曜日・祝日）を判定",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 550
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 551
          },
          {
            "text": "      // YYYY-MM-DD形式の日付文字列を確実にパースする",
            "lineNumber": 552
          },
          {
            "text": "      const dateParts = dateStr.split('-')",
            "lineNumber": 553
          },
          {
            "text": "      let date",
            "lineNumber": 554
          },
          {
            "text": "      if (dateParts.length === 3) {",
            "lineNumber": 555
          },
          {
            "text": "        const year = parseInt(dateParts[0], 10)",
            "lineNumber": 556
          },
          {
            "text": "        const month = parseInt(dateParts[1], 10) - 1 // 月は0から始まる",
            "lineNumber": 557
          },
          {
            "text": "        const day = parseInt(dateParts[2], 10)",
            "lineNumber": 558
          },
          {
            "text": "        date = new Date(year, month, day)",
            "lineNumber": 559
          },
          {
            "text": "      } else {",
            "lineNumber": 560
          },
          {
            "text": "        date = new Date(dateStr)",
            "lineNumber": 561
          },
          {
            "text": "      }",
            "lineNumber": 562
          },
          {
            "text": "      const days = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 563
          },
          {
            "text": "      return days[date.getDay()]",
            "lineNumber": 564
          },
          {
            "text": "    },",
            "lineNumber": 565
          },
          {
            "text": "    isLegalHoliday(dateStr) {",
            "lineNumber": 566
          },
          {
            "text": "      // 法定休日（日曜日）を判定",
            "lineNumber": 567
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 568
          },
          {
            "text": "      ",
            "lineNumber": 569
          },
          {
            "text": "      // 日付文字列を正規化（YYYY-MM-DD形式に統一）",
            "lineNumber": 570
          },
          {
            "text": "      let normalizedDateStr = dateStr",
            "lineNumber": 571
          },
          {
            "text": "      if (dateStr.includes('T')) {",
            "lineNumber": 572
          },
          {
            "text": "        // ISO形式の場合、日付部分のみを抽出",
            "lineNumber": 573
          },
          {
            "text": "        normalizedDateStr = dateStr.split('T')[0]",
            "lineNumber": 574
          },
          {
            "text": "      } else if (dateStr.includes(' ')) {",
            "lineNumber": 575
          },
          {
            "text": "        // スペース区切りの場合、最初の部分を取得",
            "lineNumber": 576
          },
          {
            "text": "        normalizedDateStr = dateStr.split(' ')[0]",
            "lineNumber": 577
          },
          {
            "text": "      }",
            "lineNumber": 578
          },
          {
            "text": "      ",
            "lineNumber": 579
          },
          {
            "text": "      // YYYY-MM-DD形式の日付文字列を確実にパースする",
            "lineNumber": 580
          },
          {
            "text": "      const dateParts = normalizedDateStr.split('-')",
            "lineNumber": 581
          },
          {
            "text": "      if (dateParts.length === 3) {",
            "lineNumber": 582
          },
          {
            "text": "        const year = parseInt(dateParts[0], 10)",
            "lineNumber": 583
          },
          {
            "text": "        const month = parseInt(dateParts[1], 10) - 1 // 月は0から始まる",
            "lineNumber": 584
          },
          {
            "text": "        const day = parseInt(dateParts[2], 10)",
            "lineNumber": 585
          },
          {
            "text": "        const date = new Date(year, month, day)",
            "lineNumber": 586
          },
          {
            "text": "        return date.getDay() === 0 // 日曜日",
            "lineNumber": 587
          },
          {
            "text": "      }",
            "lineNumber": 588
          },
          {
            "text": "      // フォールバック: 通常のDateパース",
            "lineNumber": 589
          },
          {
            "text": "      const date = new Date(normalizedDateStr)",
            "lineNumber": 590
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 591
          },
          {
            "text": "      return day === 0 // 日曜日",
            "lineNumber": 592
          },
          {
            "text": "    },",
            "lineNumber": 593
          },
          {
            "text": "    isScheduledHoliday(dateStr, dayData = null) {",
            "lineNumber": 594
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 595
          }
        ]
      },
      "score": 0.31710994243621826
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 458
          },
          "endPosition": {
            "line": 494
          }
        },
        "contents": "    updateClock() {\n      const now = new Date()\n      const year = now.getFullYear()\n      const month = String(now.getMonth() + 1).padStart(2, '0')\n      const date = String(now.getDate()).padStart(2, '0')\n      const hours = String(now.getHours()).padStart(2, '0')\n      const minutes = String(now.getMinutes()).padStart(2, '0')\n      \n      this.currentDate = &#96;${year}/${month}/${date}&#96;\n      this.currentTime = &#96;${hours}:${minutes}&#96;\n      \n      const dayNames = ['(SUN)', '(MON)', '(TUE)', '(WED)', '(THU)', '(FRI)', '(SAT)']\n      this.currentDay = dayNames[now.getDay()]\n    },\n    \n    // 勤務場所選択処理\n    selectWorkLocation(locationCode) {\n      if (!this.isWorkplaceSelectable) return\n      this.selectedWorkplace = locationCode\n    },\n    \n    // 勤務場所コードをバックエンド形式に変換\n    convertWorkLocationCode(frontendCode) {\n      const codeMap = {\n        'commute': 'COMMUTE',\n        'home': 'REMOTE',\n        'direct': 'DIRECT',\n        'business': 'BUSINESS_TRIP'\n      }\n      return codeMap[frontendCode] || 'COMMUTE'\n    },\n    \n    // 出勤打刻処理（通常の出勤または中断後の再開）\n    async clockIn() {\n      if (!this.isClockInEnabled) return\n      ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    updateClock() {",
            "lineNumber": 459
          },
          {
            "text": "      const now = new Date()",
            "lineNumber": 460
          },
          {
            "text": "      const year = now.getFullYear()",
            "lineNumber": 461
          },
          {
            "text": "      const month = String(now.getMonth() + 1).padStart(2, '0')",
            "lineNumber": 462
          },
          {
            "text": "      const date = String(now.getDate()).padStart(2, '0')",
            "lineNumber": 463
          },
          {
            "text": "      const hours = String(now.getHours()).padStart(2, '0')",
            "lineNumber": 464
          },
          {
            "text": "      const minutes = String(now.getMinutes()).padStart(2, '0')",
            "lineNumber": 465
          },
          {
            "text": "      ",
            "lineNumber": 466
          },
          {
            "text": "      this.currentDate = &#96;${year}/${month}/${date}&#96;",
            "lineNumber": 467
          },
          {
            "text": "      this.currentTime = &#96;${hours}:${minutes}&#96;",
            "lineNumber": 468
          },
          {
            "text": "      ",
            "lineNumber": 469
          },
          {
            "text": "      const dayNames = ['(SUN)', '(MON)', '(TUE)', '(WED)', '(THU)', '(FRI)', '(SAT)']",
            "lineNumber": 470
          },
          {
            "text": "      this.currentDay = dayNames[now.getDay()]",
            "lineNumber": 471
          },
          {
            "text": "    },",
            "lineNumber": 472
          },
          {
            "text": "    ",
            "lineNumber": 473
          },
          {
            "text": "    // 勤務場所選択処理",
            "lineNumber": 474
          },
          {
            "text": "    selectWorkLocation(locationCode) {",
            "lineNumber": 475
          },
          {
            "text": "      if (!this.isWorkplaceSelectable) return",
            "lineNumber": 476
          },
          {
            "text": "      this.selectedWorkplace = locationCode",
            "lineNumber": 477
          },
          {
            "text": "    },",
            "lineNumber": 478
          },
          {
            "text": "    ",
            "lineNumber": 479
          },
          {
            "text": "    // 勤務場所コードをバックエンド形式に変換",
            "lineNumber": 480
          },
          {
            "text": "    convertWorkLocationCode(frontendCode) {",
            "lineNumber": 481
          },
          {
            "text": "      const codeMap = {",
            "lineNumber": 482
          },
          {
            "text": "        'commute': 'COMMUTE',",
            "lineNumber": 483
          },
          {
            "text": "        'home': 'REMOTE',",
            "lineNumber": 484
          },
          {
            "text": "        'direct': 'DIRECT',",
            "lineNumber": 485
          },
          {
            "text": "        'business': 'BUSINESS_TRIP'",
            "lineNumber": 486
          },
          {
            "text": "      }",
            "lineNumber": 487
          },
          {
            "text": "      return codeMap[frontendCode] || 'COMMUTE'",
            "lineNumber": 488
          },
          {
            "text": "    },",
            "lineNumber": 489
          },
          {
            "text": "    ",
            "lineNumber": 490
          },
          {
            "text": "    // 出勤打刻処理（通常の出勤または中断後の再開）",
            "lineNumber": 491
          },
          {
            "text": "    async clockIn() {",
            "lineNumber": 492
          },
          {
            "text": "      if (!this.isClockInEnabled) return",
            "lineNumber": 493
          },
          {
            "text": "      ",
            "lineNumber": 494
          }
        ]
      },
      "score": 0.3143742084503174
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 492
          },
          "endPosition": {
            "line": 551
          }
        },
        "contents": "  },\n  methods: {\n    async loadData(employeeId, yearMonth) {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getMonthlySummaryDetail(employeeId, yearMonth)\n        \n        if (response.success) {\n          this.employee = response.employee\n          this.dailyData = response.dailyData || []\n          this.monthlySummary = response.monthlySummary || {}\n          this.vacationInfo = response.vacationInfo || {}\n          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'\n        } else {\n          this.error = response.message || 'データの取得に失敗しました。'\n        }\n      } catch (err) {\n        console.error('月次サマリー情報の取得エラー:', err)\n        this.error = err.message || 'データの取得に失敗しました。'\n      } finally {\n        this.loading = false\n      }\n    },\n    formatDate(dateStr, index) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      // 最初の行だけ月を含める\n      if (index === 0) {\n        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;\n      }\n      return &#96;${date.getDate()}&#96;\n    },\n    getDatePaddingLeft(index, dateStr) {\n      // 最初の行の日付の1桁目の位置に合わせる\n      if (index === 0) return 0\n      \n      if (!dateStr) return 18\n      const date = new Date(dateStr)\n      const day = date.getDate()\n      \n      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）\n      // 約18px程度の幅があると仮定\n      let baseOffset = 18\n      \n      // 2~9は4px左にずらす\n      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {\n        baseOffset -= 4\n      }\n      // 10~31は9px左にずらす\n      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {\n        baseOffset -= 9\n      }\n      \n      return baseOffset\n    },\n    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  },",
            "lineNumber": 493
          },
          {
            "text": "  methods: {",
            "lineNumber": 494
          },
          {
            "text": "    async loadData(employeeId, yearMonth) {",
            "lineNumber": 495
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 496
          },
          {
            "text": "      this.error = null",
            "lineNumber": 497
          },
          {
            "text": "      ",
            "lineNumber": 498
          },
          {
            "text": "      try {",
            "lineNumber": 499
          },
          {
            "text": "        const response = await getMonthlySummaryDetail(employeeId, yearMonth)",
            "lineNumber": 500
          },
          {
            "text": "        ",
            "lineNumber": 501
          },
          {
            "text": "        if (response.success) {",
            "lineNumber": 502
          },
          {
            "text": "          this.employee = response.employee",
            "lineNumber": 503
          },
          {
            "text": "          this.dailyData = response.dailyData || []",
            "lineNumber": 504
          },
          {
            "text": "          this.monthlySummary = response.monthlySummary || {}",
            "lineNumber": 505
          },
          {
            "text": "          this.vacationInfo = response.vacationInfo || {}",
            "lineNumber": 506
          },
          {
            "text": "          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'",
            "lineNumber": 507
          },
          {
            "text": "        } else {",
            "lineNumber": 508
          },
          {
            "text": "          this.error = response.message || 'データの取得に失敗しました。'",
            "lineNumber": 509
          },
          {
            "text": "        }",
            "lineNumber": 510
          },
          {
            "text": "      } catch (err) {",
            "lineNumber": 511
          },
          {
            "text": "        console.error('月次サマリー情報の取得エラー:', err)",
            "lineNumber": 512
          },
          {
            "text": "        this.error = err.message || 'データの取得に失敗しました。'",
            "lineNumber": 513
          },
          {
            "text": "      } finally {",
            "lineNumber": 514
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 515
          },
          {
            "text": "      }",
            "lineNumber": 516
          },
          {
            "text": "    },",
            "lineNumber": 517
          },
          {
            "text": "    formatDate(dateStr, index) {",
            "lineNumber": 518
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 519
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 520
          },
          {
            "text": "      // 最初の行だけ月を含める",
            "lineNumber": 521
          },
          {
            "text": "      if (index === 0) {",
            "lineNumber": 522
          },
          {
            "text": "        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;",
            "lineNumber": 523
          },
          {
            "text": "      }",
            "lineNumber": 524
          },
          {
            "text": "      return &#96;${date.getDate()}&#96;",
            "lineNumber": 525
          },
          {
            "text": "    },",
            "lineNumber": 526
          },
          {
            "text": "    getDatePaddingLeft(index, dateStr) {",
            "lineNumber": 527
          },
          {
            "text": "      // 最初の行の日付の1桁目の位置に合わせる",
            "lineNumber": 528
          },
          {
            "text": "      if (index === 0) return 0",
            "lineNumber": 529
          },
          {
            "text": "      ",
            "lineNumber": 530
          },
          {
            "text": "      if (!dateStr) return 18",
            "lineNumber": 531
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 532
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 533
          },
          {
            "text": "      ",
            "lineNumber": 534
          },
          {
            "text": "      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）",
            "lineNumber": 535
          },
          {
            "text": "      // 約18px程度の幅があると仮定",
            "lineNumber": 536
          },
          {
            "text": "      let baseOffset = 18",
            "lineNumber": 537
          },
          {
            "text": "      ",
            "lineNumber": 538
          },
          {
            "text": "      // 2~9は4px左にずらす",
            "lineNumber": 539
          },
          {
            "text": "      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {",
            "lineNumber": 540
          },
          {
            "text": "        baseOffset -= 4",
            "lineNumber": 541
          },
          {
            "text": "      }",
            "lineNumber": 542
          },
          {
            "text": "      // 10~31は9px左にずらす",
            "lineNumber": 543
          },
          {
            "text": "      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {",
            "lineNumber": 544
          },
          {
            "text": "        baseOffset -= 9",
            "lineNumber": 545
          },
          {
            "text": "      }",
            "lineNumber": 546
          },
          {
            "text": "      ",
            "lineNumber": 547
          },
          {
            "text": "      return baseOffset",
            "lineNumber": 548
          },
          {
            "text": "    },",
            "lineNumber": 549
          },
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 550
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 551
          }
        ]
      },
      "score": 0.2977924346923828
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 593
          },
          "endPosition": {
            "line": 641
          }
        },
        "contents": "    isScheduledHoliday(dateStr, dayData = null) {\n      // 所定休日（土曜日・祝日）を判定\n      if (!dateStr) return false\n      \n      // 日付文字列を正規化（YYYY-MM-DD形式に統一）\n      let normalizedDateStr = dateStr\n      if (dateStr.includes('T')) {\n        // ISO形式の場合、日付部分のみを抽出\n        normalizedDateStr = dateStr.split('T')[0]\n      } else if (dateStr.includes(' ')) {\n        // スペース区切りの場合、最初の部分を取得\n        normalizedDateStr = dateStr.split(' ')[0]\n      }\n      \n      // 祝日名がある場合は祝日として判定（ただし日曜日でない場合のみ）\n      // 日曜日に祝日イベントがあっても日曜日と同じ扱いにするため、日曜日の場合はfalseを返す\n      if (dayData &amp;&amp; dayData.holidayName) {\n        // 日曜日かどうかを先にチェック\n        const dateParts = normalizedDateStr.split('-')\n        let isSunday = false\n        if (dateParts.length === 3) {\n          const year = parseInt(dateParts[0], 10)\n          const month = parseInt(dateParts[1], 10) - 1\n          const day = parseInt(dateParts[2], 10)\n          const date = new Date(year, month, day)\n          isSunday = date.getDay() === 0\n        } else {\n          const date = new Date(normalizedDateStr)\n          isSunday = date.getDay() === 0\n        }\n        // 日曜日の場合はfalseを返す（日曜日として扱う）\n        if (isSunday) return false\n        return true\n      }\n      \n      // 土曜日を所定休日として判定\n      const dateParts = normalizedDateStr.split('-')\n      if (dateParts.length === 3) {\n        const year = parseInt(dateParts[0], 10)\n        const month = parseInt(dateParts[1], 10) - 1\n        const day = parseInt(dateParts[2], 10)\n        const date = new Date(year, month, day)\n        return date.getDay() === 6 // 土曜日\n      }\n      const date = new Date(normalizedDateStr)\n      const day = date.getDay()\n      return day === 6 // 土曜日\n    },",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    isScheduledHoliday(dateStr, dayData = null) {",
            "lineNumber": 594
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 595
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 596
          },
          {
            "text": "      ",
            "lineNumber": 597
          },
          {
            "text": "      // 日付文字列を正規化（YYYY-MM-DD形式に統一）",
            "lineNumber": 598
          },
          {
            "text": "      let normalizedDateStr = dateStr",
            "lineNumber": 599
          },
          {
            "text": "      if (dateStr.includes('T')) {",
            "lineNumber": 600
          },
          {
            "text": "        // ISO形式の場合、日付部分のみを抽出",
            "lineNumber": 601
          },
          {
            "text": "        normalizedDateStr = dateStr.split('T')[0]",
            "lineNumber": 602
          },
          {
            "text": "      } else if (dateStr.includes(' ')) {",
            "lineNumber": 603
          },
          {
            "text": "        // スペース区切りの場合、最初の部分を取得",
            "lineNumber": 604
          },
          {
            "text": "        normalizedDateStr = dateStr.split(' ')[0]",
            "lineNumber": 605
          },
          {
            "text": "      }",
            "lineNumber": 606
          },
          {
            "text": "      ",
            "lineNumber": 607
          },
          {
            "text": "      // 祝日名がある場合は祝日として判定（ただし日曜日でない場合のみ）",
            "lineNumber": 608
          },
          {
            "text": "      // 日曜日に祝日イベントがあっても日曜日と同じ扱いにするため、日曜日の場合はfalseを返す",
            "lineNumber": 609
          },
          {
            "text": "      if (dayData &amp;&amp; dayData.holidayName) {",
            "lineNumber": 610
          },
          {
            "text": "        // 日曜日かどうかを先にチェック",
            "lineNumber": 611
          },
          {
            "text": "        const dateParts = normalizedDateStr.split('-')",
            "lineNumber": 612
          },
          {
            "text": "        let isSunday = false",
            "lineNumber": 613
          },
          {
            "text": "        if (dateParts.length === 3) {",
            "lineNumber": 614
          },
          {
            "text": "          const year = parseInt(dateParts[0], 10)",
            "lineNumber": 615
          },
          {
            "text": "          const month = parseInt(dateParts[1], 10) - 1",
            "lineNumber": 616
          },
          {
            "text": "          const day = parseInt(dateParts[2], 10)",
            "lineNumber": 617
          },
          {
            "text": "          const date = new Date(year, month, day)",
            "lineNumber": 618
          },
          {
            "text": "          isSunday = date.getDay() === 0",
            "lineNumber": 619
          },
          {
            "text": "        } else {",
            "lineNumber": 620
          },
          {
            "text": "          const date = new Date(normalizedDateStr)",
            "lineNumber": 621
          },
          {
            "text": "          isSunday = date.getDay() === 0",
            "lineNumber": 622
          },
          {
            "text": "        }",
            "lineNumber": 623
          },
          {
            "text": "        // 日曜日の場合はfalseを返す（日曜日として扱う）",
            "lineNumber": 624
          },
          {
            "text": "        if (isSunday) return false",
            "lineNumber": 625
          },
          {
            "text": "        return true",
            "lineNumber": 626
          },
          {
            "text": "      }",
            "lineNumber": 627
          },
          {
            "text": "      ",
            "lineNumber": 628
          },
          {
            "text": "      // 土曜日を所定休日として判定",
            "lineNumber": 629
          },
          {
            "text": "      const dateParts = normalizedDateStr.split('-')",
            "lineNumber": 630
          },
          {
            "text": "      if (dateParts.length === 3) {",
            "lineNumber": 631
          },
          {
            "text": "        const year = parseInt(dateParts[0], 10)",
            "lineNumber": 632
          },
          {
            "text": "        const month = parseInt(dateParts[1], 10) - 1",
            "lineNumber": 633
          },
          {
            "text": "        const day = parseInt(dateParts[2], 10)",
            "lineNumber": 634
          },
          {
            "text": "        const date = new Date(year, month, day)",
            "lineNumber": 635
          },
          {
            "text": "        return date.getDay() === 6 // 土曜日",
            "lineNumber": 636
          },
          {
            "text": "      }",
            "lineNumber": 637
          },
          {
            "text": "      const date = new Date(normalizedDateStr)",
            "lineNumber": 638
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 639
          },
          {
            "text": "      return day === 6 // 土曜日",
            "lineNumber": 640
          },
          {
            "text": "    },",
            "lineNumber": 641
          }
        ]
      },
      "score": 0.2961992621421814
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 89
          },
          "endPosition": {
            "line": 109
          }
        },
        "contents": "      &lt;/svg&gt;\n      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;\n        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;\n          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"getRowBackgroundColor(day, index)\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;\n        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px', color: getDayOfWeekColor(day.workDate, day) }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;\n        &lt;!-- 所定休日（土曜日・祝日）: ○ - 祝日は所定休日として優先表示 --&gt;\n        &lt;svg v-if=\"isScheduledHoliday(day.workDate, day)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;!-- 法定休日（日曜日、祝日でない場合）: ◎ --&gt;\n        &lt;svg v-else-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 90
          },
          {
            "text": "      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;",
            "lineNumber": 91
          },
          {
            "text": "        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"getRowBackgroundColor(day, index)\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;",
            "lineNumber": 93
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 94
          },
          {
            "text": "        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;",
            "lineNumber": 95
          },
          {
            "text": "        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px', color: getDayOfWeekColor(day.workDate, day) }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;!-- 所定休日（土曜日・祝日）: ○ - 祝日は所定休日として優先表示 --&gt;",
            "lineNumber": 97
          },
          {
            "text": "        &lt;svg v-if=\"isScheduledHoliday(day.workDate, day)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 99
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 100
          },
          {
            "text": "        &lt;!-- 法定休日（日曜日、祝日でない場合）: ◎ --&gt;",
            "lineNumber": 101
          },
          {
            "text": "        &lt;svg v-else-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 103
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 104
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 105
          },
          {
            "text": "        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;",
            "lineNumber": 106
          },
          {
            "text": "        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;",
            "lineNumber": 107
          },
          {
            "text": "        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;",
            "lineNumber": 108
          },
          {
            "text": "        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;",
            "lineNumber": 109
          }
        ]
      },
      "score": 0.2960793375968933
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1554
          },
          "endPosition": {
            "line": 1619
          }
        },
        "contents": "          holidayWorkEndTime: holidayWorkEndTime,\n          holidayWorkBreakHours: holidayWorkBreakHours,\n          remarkText: (() =&gt; {\n            if (apiRecord?.REMARK_TEXT !== null &amp;&amp; apiRecord?.REMARK_TEXT !== undefined) {\n              return String(apiRecord.REMARK_TEXT)\n            }\n\n            return ''\n          })()\n        })\n      }\n\n      return displayData\n    },\n\n    // 年月変更処理（テーブル上部）\n    async changeYearMonthTable() {\n      this.loading = true\n      try {\n        await this.loadAttendanceData()\n      } catch (error) {\n        console.error('年月変更エラー:', error)\n        this.error = error.message\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 前月リンク押下処理\n    previousMonthLink() {\n      const [year, month] = this.selectedYearMonth.split('-').map(Number)\n      const prevDate = new Date(year, month - 2, 1)\n      const prevYear = prevDate.getFullYear()\n      const prevMonth = prevDate.getMonth() + 1\n      this.selectedYearMonth = &#96;${prevYear}-${String(prevMonth).padStart(2, '0')}&#96;\n      this.changeYearMonthTable()\n    },\n    \n    // 今月リンク押下処理\n    currentMonthLink() {\n      const today = new Date()\n      const currentYear = today.getFullYear()\n      const currentMonth = today.getMonth() + 1\n      this.selectedYearMonth = &#96;${currentYear}-${String(currentMonth).padStart(2, '0')}&#96;\n      this.changeYearMonthTable()\n    },\n    \n    // 次月リンク押下処理\n    nextMonthLink() {\n      const [year, month] = this.selectedYearMonth.split('-').map(Number)\n      const nextDate = new Date(year, month, 1)\n      const nextYear = nextDate.getFullYear()\n      const nextMonth = nextDate.getMonth() + 1\n      this.selectedYearMonth = &#96;${nextYear}-${String(nextMonth).padStart(2, '0')}&#96;\n      this.changeYearMonthTable()\n    },\n    \n    // お知らせリンク押下処理\n    showNotice() {\n      // TODO: お知らせ画面への遷移\n    },\n    \n    // 月次サマリーリンク押下処理\n    showMonthlySummary() {\n      // 新規ウィンドウで月次サマリー画面を開く",
        "signatures": {},
        "detailedLines": [
          {
            "text": "          holidayWorkEndTime: holidayWorkEndTime,",
            "lineNumber": 1555
          },
          {
            "text": "          holidayWorkBreakHours: holidayWorkBreakHours,",
            "lineNumber": 1556
          },
          {
            "text": "          remarkText: (() =&gt; {",
            "lineNumber": 1557
          },
          {
            "text": "            if (apiRecord?.REMARK_TEXT !== null &amp;&amp; apiRecord?.REMARK_TEXT !== undefined) {",
            "lineNumber": 1558
          },
          {
            "text": "              return String(apiRecord.REMARK_TEXT)",
            "lineNumber": 1559
          },
          {
            "text": "            }",
            "lineNumber": 1560
          },
          {
            "lineNumber": 1561
          },
          {
            "text": "            return ''",
            "lineNumber": 1562
          },
          {
            "text": "          })()",
            "lineNumber": 1563
          },
          {
            "text": "        })",
            "lineNumber": 1564
          },
          {
            "text": "      }",
            "lineNumber": 1565
          },
          {
            "lineNumber": 1566
          },
          {
            "text": "      return displayData",
            "lineNumber": 1567
          },
          {
            "text": "    },",
            "lineNumber": 1568
          },
          {
            "lineNumber": 1569
          },
          {
            "text": "    // 年月変更処理（テーブル上部）",
            "lineNumber": 1570
          },
          {
            "text": "    async changeYearMonthTable() {",
            "lineNumber": 1571
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 1572
          },
          {
            "text": "      try {",
            "lineNumber": 1573
          },
          {
            "text": "        await this.loadAttendanceData()",
            "lineNumber": 1574
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 1575
          },
          {
            "text": "        console.error('年月変更エラー:', error)",
            "lineNumber": 1576
          },
          {
            "text": "        this.error = error.message",
            "lineNumber": 1577
          },
          {
            "text": "      } finally {",
            "lineNumber": 1578
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 1579
          },
          {
            "text": "      }",
            "lineNumber": 1580
          },
          {
            "text": "    },",
            "lineNumber": 1581
          },
          {
            "text": "    ",
            "lineNumber": 1582
          },
          {
            "text": "    // 前月リンク押下処理",
            "lineNumber": 1583
          },
          {
            "text": "    previousMonthLink() {",
            "lineNumber": 1584
          },
          {
            "text": "      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
            "lineNumber": 1585
          },
          {
            "text": "      const prevDate = new Date(year, month - 2, 1)",
            "lineNumber": 1586
          },
          {
            "text": "      const prevYear = prevDate.getFullYear()",
            "lineNumber": 1587
          },
          {
            "text": "      const prevMonth = prevDate.getMonth() + 1",
            "lineNumber": 1588
          },
          {
            "text": "      this.selectedYearMonth = &#96;${prevYear}-${String(prevMonth).padStart(2, '0')}&#96;",
            "lineNumber": 1589
          },
          {
            "text": "      this.changeYearMonthTable()",
            "lineNumber": 1590
          },
          {
            "text": "    },",
            "lineNumber": 1591
          },
          {
            "text": "    ",
            "lineNumber": 1592
          },
          {
            "text": "    // 今月リンク押下処理",
            "lineNumber": 1593
          },
          {
            "text": "    currentMonthLink() {",
            "lineNumber": 1594
          },
          {
            "text": "      const today = new Date()",
            "lineNumber": 1595
          },
          {
            "text": "      const currentYear = today.getFullYear()",
            "lineNumber": 1596
          },
          {
            "text": "      const currentMonth = today.getMonth() + 1",
            "lineNumber": 1597
          },
          {
            "text": "      this.selectedYearMonth = &#96;${currentYear}-${String(currentMonth).padStart(2, '0')}&#96;",
            "lineNumber": 1598
          },
          {
            "text": "      this.changeYearMonthTable()",
            "lineNumber": 1599
          },
          {
            "text": "    },",
            "lineNumber": 1600
          },
          {
            "text": "    ",
            "lineNumber": 1601
          },
          {
            "text": "    // 次月リンク押下処理",
            "lineNumber": 1602
          },
          {
            "text": "    nextMonthLink() {",
            "lineNumber": 1603
          },
          {
            "text": "      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
            "lineNumber": 1604
          },
          {
            "text": "      const nextDate = new Date(year, month, 1)",
            "lineNumber": 1605
          },
          {
            "text": "      const nextYear = nextDate.getFullYear()",
            "lineNumber": 1606
          },
          {
            "text": "      const nextMonth = nextDate.getMonth() + 1",
            "lineNumber": 1607
          },
          {
            "text": "      this.selectedYearMonth = &#96;${nextYear}-${String(nextMonth).padStart(2, '0')}&#96;",
            "lineNumber": 1608
          },
          {
            "text": "      this.changeYearMonthTable()",
            "lineNumber": 1609
          },
          {
            "text": "    },",
            "lineNumber": 1610
          },
          {
            "text": "    ",
            "lineNumber": 1611
          },
          {
            "text": "    // お知らせリンク押下処理",
            "lineNumber": 1612
          },
          {
            "text": "    showNotice() {",
            "lineNumber": 1613
          },
          {
            "text": "      // TODO: お知らせ画面への遷移",
            "lineNumber": 1614
          },
          {
            "text": "    },",
            "lineNumber": 1615
          },
          {
            "text": "    ",
            "lineNumber": 1616
          },
          {
            "text": "    // 月次サマリーリンク押下処理",
            "lineNumber": 1617
          },
          {
            "text": "    showMonthlySummary() {",
            "lineNumber": 1618
          },
          {
            "text": "      // 新規ウィンドウで月次サマリー画面を開く",
            "lineNumber": 1619
          }
        ]
      },
      "score": 0.2872687578201294
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1381
          },
          "endPosition": {
            "line": 1434
          }
        },
        "contents": "          } else {\n            // その他の型の場合は文字列に変換してから処理\n            const dateStr = String(record.WORK_DATE);\n            if (dateStr.includes('T')) {\n              recordDateStr = dateStr.split('T')[0];\n            } else {\n              recordDateStr = dateStr.substring(0, 10);\n            }\n          }\n          \n          return recordDateStr === dateStr;\n        })\n\n        // 祝日判定\n        const holiday = HolidayJp.isHoliday(date)\n\n        // 日付表示を数字部分と曜日部分に分ける\n        let dateNumber = ''\n        let dateDayOfWeek = ''\n\n        if (day === 1) {\n          dateNumber = &#96;${Number(month)}/${day}&#96;\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        } else {\n          const dayStr = String(day).padStart(2, ' ')\n          dateNumber = dayStr\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        }\n\n        // 出社・退社時刻をH:MM形式に変換（時の先頭0を削除）\n        const formatTime = (datetime) =&gt; {\n          if (!datetime) return ''\n          const date = new Date(datetime)\n          const hours = String(date.getHours()) // 先頭0なし\n          const minutes = String(date.getMinutes()).padStart(2, '0')\n          return &#96;${hours}:${minutes}&#96;\n        }\n\n        // 工数を時間:分形式に変換（例: 7.5 → 7:30, 7.75 → 7:45）\n        const formatWorkHours = (hours) =&gt; {\n          if (!hours || hours === 0) return ''\n          const wholeHours = Math.floor(hours)\n          const minutes = Math.round((hours - wholeHours) * 60)\n          return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;\n        }\n\n        // 工数合計を計算\n        const totalWorkHours = apiRecord?.workHours?.reduce((sum, wh) =&gt; sum + (parseFloat(wh.WORK_HOURS_VALUE) || 0), 0) || 0\n\n        // 休憩時間データを取得・変換\n        const breakTimes = []\n        if (apiRecord?.breakTimes &amp;&amp; apiRecord.breakTimes.length &gt; 0) {\n          // APIから取得した休憩時間を変換",
        "signatures": {},
        "detailedLines": [
          {
            "text": "          } else {",
            "lineNumber": 1382
          },
          {
            "text": "            // その他の型の場合は文字列に変換してから処理",
            "lineNumber": 1383
          },
          {
            "text": "            const dateStr = String(record.WORK_DATE);",
            "lineNumber": 1384
          },
          {
            "text": "            if (dateStr.includes('T')) {",
            "lineNumber": 1385
          },
          {
            "text": "              recordDateStr = dateStr.split('T')[0];",
            "lineNumber": 1386
          },
          {
            "text": "            } else {",
            "lineNumber": 1387
          },
          {
            "text": "              recordDateStr = dateStr.substring(0, 10);",
            "lineNumber": 1388
          },
          {
            "text": "            }",
            "lineNumber": 1389
          },
          {
            "text": "          }",
            "lineNumber": 1390
          },
          {
            "text": "          ",
            "lineNumber": 1391
          },
          {
            "text": "          return recordDateStr === dateStr;",
            "lineNumber": 1392
          },
          {
            "text": "        })",
            "lineNumber": 1393
          },
          {
            "lineNumber": 1394
          },
          {
            "text": "        // 祝日判定",
            "lineNumber": 1395
          },
          {
            "text": "        const holiday = HolidayJp.isHoliday(date)",
            "lineNumber": 1396
          },
          {
            "lineNumber": 1397
          },
          {
            "text": "        // 日付表示を数字部分と曜日部分に分ける",
            "lineNumber": 1398
          },
          {
            "text": "        let dateNumber = ''",
            "lineNumber": 1399
          },
          {
            "text": "        let dateDayOfWeek = ''",
            "lineNumber": 1400
          },
          {
            "lineNumber": 1401
          },
          {
            "text": "        if (day === 1) {",
            "lineNumber": 1402
          },
          {
            "text": "          dateNumber = &#96;${Number(month)}/${day}&#96;",
            "lineNumber": 1403
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1404
          },
          {
            "text": "        } else {",
            "lineNumber": 1405
          },
          {
            "text": "          const dayStr = String(day).padStart(2, ' ')",
            "lineNumber": 1406
          },
          {
            "text": "          dateNumber = dayStr",
            "lineNumber": 1407
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1408
          },
          {
            "text": "        }",
            "lineNumber": 1409
          },
          {
            "lineNumber": 1410
          },
          {
            "text": "        // 出社・退社時刻をH:MM形式に変換（時の先頭0を削除）",
            "lineNumber": 1411
          },
          {
            "text": "        const formatTime = (datetime) =&gt; {",
            "lineNumber": 1412
          },
          {
            "text": "          if (!datetime) return ''",
            "lineNumber": 1413
          },
          {
            "text": "          const date = new Date(datetime)",
            "lineNumber": 1414
          },
          {
            "text": "          const hours = String(date.getHours()) // 先頭0なし",
            "lineNumber": 1415
          },
          {
            "text": "          const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 1416
          },
          {
            "text": "          return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 1417
          },
          {
            "text": "        }",
            "lineNumber": 1418
          },
          {
            "lineNumber": 1419
          },
          {
            "text": "        // 工数を時間:分形式に変換（例: 7.5 → 7:30, 7.75 → 7:45）",
            "lineNumber": 1420
          },
          {
            "text": "        const formatWorkHours = (hours) =&gt; {",
            "lineNumber": 1421
          },
          {
            "text": "          if (!hours || hours === 0) return ''",
            "lineNumber": 1422
          },
          {
            "text": "          const wholeHours = Math.floor(hours)",
            "lineNumber": 1423
          },
          {
            "text": "          const minutes = Math.round((hours - wholeHours) * 60)",
            "lineNumber": 1424
          },
          {
            "text": "          return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;",
            "lineNumber": 1425
          },
          {
            "text": "        }",
            "lineNumber": 1426
          },
          {
            "lineNumber": 1427
          },
          {
            "text": "        // 工数合計を計算",
            "lineNumber": 1428
          },
          {
            "text": "        const totalWorkHours = apiRecord?.workHours?.reduce((sum, wh) =&gt; sum + (parseFloat(wh.WORK_HOURS_VALUE) || 0), 0) || 0",
            "lineNumber": 1429
          },
          {
            "lineNumber": 1430
          },
          {
            "text": "        // 休憩時間データを取得・変換",
            "lineNumber": 1431
          },
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1432
          },
          {
            "text": "        if (apiRecord?.breakTimes &amp;&amp; apiRecord.breakTimes.length &gt; 0) {",
            "lineNumber": 1433
          },
          {
            "text": "          // APIから取得した休憩時間を変換",
            "lineNumber": 1434
          }
        ]
      },
      "score": 0.2844356894493103
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 250
          },
          "endPosition": {
            "line": 299
          }
        },
        "contents": "    }\n  },\n  computed: {\n    // 当日が土日祝かどうか\n    isHoliday() {\n      const today = new Date()\n      const dayOfWeek = today.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土日を判定\n      if (dayOfWeek === 0 || dayOfWeek === 6) {\n        return true\n      }\n      \n      // 祝日を判定\n      try {\n        return HolidayJp.isHoliday(today)\n      } catch (error) {\n        console.error('祝日判定エラー:', error)\n        return false\n      }\n    },\n    // 打刻可能かどうか（平日、または土日祝で休日出勤申請が承認済み）\n    canClock() {\n      return !this.isHoliday || this.isHolidayWorkApproved\n    },\n    // 勤務場所選択可能かどうか（常に選択可能）\n    isWorkplaceSelectable() {\n      // いつでも選択可能\n      return true\n    },\n    // 出勤ボタンが有効かどうか（未出勤、または中断中、かつ打刻可能）\n    isClockInEnabled() {\n      return this.canClock &amp;&amp; (!this.isClockInDone || this.isOnBreak)\n    },\n    // 定時出勤ボタンが有効かどうか（未出勤、かつ現在時刻が9:00以前、かつ打刻可能）\n    isScheduledClockInEnabled() {\n      if (!this.canClock || this.isClockInDone) return false\n      const now = new Date()\n      const hours = now.getHours()\n      const minutes = now.getMinutes()\n      return hours &lt; 9 || (hours === 9 &amp;&amp; minutes === 0)\n    },\n    // 退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ打刻可能）\n    isClockOutEnabled() {\n      return this.canClock &amp;&amp; this.isClockInDone &amp;&amp; !this.isClockOutDone &amp;&amp; !this.isOnBreak\n    },\n    // 定時退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ現在時刻が17:30以降、かつ打刻可能）\n    isScheduledClockOutEnabled() {\n      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    }",
            "lineNumber": 251
          },
          {
            "text": "  },",
            "lineNumber": 252
          },
          {
            "text": "  computed: {",
            "lineNumber": 253
          },
          {
            "text": "    // 当日が土日祝かどうか",
            "lineNumber": 254
          },
          {
            "text": "    isHoliday() {",
            "lineNumber": 255
          },
          {
            "text": "      const today = new Date()",
            "lineNumber": 256
          },
          {
            "text": "      const dayOfWeek = today.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 257
          },
          {
            "text": "      ",
            "lineNumber": 258
          },
          {
            "text": "      // 土日を判定",
            "lineNumber": 259
          },
          {
            "text": "      if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 260
          },
          {
            "text": "        return true",
            "lineNumber": 261
          },
          {
            "text": "      }",
            "lineNumber": 262
          },
          {
            "text": "      ",
            "lineNumber": 263
          },
          {
            "text": "      // 祝日を判定",
            "lineNumber": 264
          },
          {
            "text": "      try {",
            "lineNumber": 265
          },
          {
            "text": "        return HolidayJp.isHoliday(today)",
            "lineNumber": 266
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 267
          },
          {
            "text": "        console.error('祝日判定エラー:', error)",
            "lineNumber": 268
          },
          {
            "text": "        return false",
            "lineNumber": 269
          },
          {
            "text": "      }",
            "lineNumber": 270
          },
          {
            "text": "    },",
            "lineNumber": 271
          },
          {
            "text": "    // 打刻可能かどうか（平日、または土日祝で休日出勤申請が承認済み）",
            "lineNumber": 272
          },
          {
            "text": "    canClock() {",
            "lineNumber": 273
          },
          {
            "text": "      return !this.isHoliday || this.isHolidayWorkApproved",
            "lineNumber": 274
          },
          {
            "text": "    },",
            "lineNumber": 275
          },
          {
            "text": "    // 勤務場所選択可能かどうか（常に選択可能）",
            "lineNumber": 276
          },
          {
            "text": "    isWorkplaceSelectable() {",
            "lineNumber": 277
          },
          {
            "text": "      // いつでも選択可能",
            "lineNumber": 278
          },
          {
            "text": "      return true",
            "lineNumber": 279
          },
          {
            "text": "    },",
            "lineNumber": 280
          },
          {
            "text": "    // 出勤ボタンが有効かどうか（未出勤、または中断中、かつ打刻可能）",
            "lineNumber": 281
          },
          {
            "text": "    isClockInEnabled() {",
            "lineNumber": 282
          },
          {
            "text": "      return this.canClock &amp;&amp; (!this.isClockInDone || this.isOnBreak)",
            "lineNumber": 283
          },
          {
            "text": "    },",
            "lineNumber": 284
          },
          {
            "text": "    // 定時出勤ボタンが有効かどうか（未出勤、かつ現在時刻が9:00以前、かつ打刻可能）",
            "lineNumber": 285
          },
          {
            "text": "    isScheduledClockInEnabled() {",
            "lineNumber": 286
          },
          {
            "text": "      if (!this.canClock || this.isClockInDone) return false",
            "lineNumber": 287
          },
          {
            "text": "      const now = new Date()",
            "lineNumber": 288
          },
          {
            "text": "      const hours = now.getHours()",
            "lineNumber": 289
          },
          {
            "text": "      const minutes = now.getMinutes()",
            "lineNumber": 290
          },
          {
            "text": "      return hours &lt; 9 || (hours === 9 &amp;&amp; minutes === 0)",
            "lineNumber": 291
          },
          {
            "text": "    },",
            "lineNumber": 292
          },
          {
            "text": "    // 退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ打刻可能）",
            "lineNumber": 293
          },
          {
            "text": "    isClockOutEnabled() {",
            "lineNumber": 294
          },
          {
            "text": "      return this.canClock &amp;&amp; this.isClockInDone &amp;&amp; !this.isClockOutDone &amp;&amp; !this.isOnBreak",
            "lineNumber": 295
          },
          {
            "text": "    },",
            "lineNumber": 296
          },
          {
            "text": "    // 定時退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ現在時刻が17:30以降、かつ打刻可能）",
            "lineNumber": 297
          },
          {
            "text": "    isScheduledClockOutEnabled() {",
            "lineNumber": 298
          },
          {
            "text": "      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false",
            "lineNumber": 299
          }
        ]
      },
      "score": 0.2778894007205963
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1512
          },
          "endPosition": {
            "line": 1556
          }
        },
        "contents": "          }\n        }\n        \n        // 休日出勤申請が申請中または承認済みの場合、休憩時間が設定されていない場合はデフォルト値を設定\n        if (hasHolidayWorkApplication &amp;&amp; holidayWorkBreakHours === null) {\n          holidayWorkBreakHours = 1.0\n        }\n        \n        // 休暇申請の情報を取得\n        const vacation = apiRecord?.vacation\n        const hasVacation = !!(vacation &amp;&amp; \n          (vacation.APPROVAL_STATUS === 'PENDING' || vacation.APPROVAL_STATUS === 'APPROVED'))\n        const vacationTypeCode = vacation?.VACATION_TYPE_CODE || null\n        const vacationApplicationStatus = vacation?.APPROVAL_STATUS || null\n        \n        displayData.push({\n          date: dateStr,\n          dateNumber: dateNumber,\n          dateDayOfWeek: dateDayOfWeek,\n          dayOfWeek: dayNames[dayOfWeek],\n          dayOfWeekNum: dayOfWeek,\n          hasWarning: false,\n          hasStampManualMismatch: hasStampManualMismatch,\n          approvalStatus: apiRecord?.APPROVAL_STATUS || 'NOT_SUBMITTED',\n          clockIn: clockIn,\n          clockOut: clockOut,\n          clockInType: clockInType,\n          clockOutType: clockOutType,\n          location: apiRecord?.WORK_LOCATION_NAME || apiRecord?.WORK_LOCATION_CODE || '',\n          workHours: formatWorkHours(totalWorkHours),\n          hasWorkHoursError: apiRecord?.ACTUAL_WORK_HOURS &amp;&amp; Math.abs((apiRecord.ACTUAL_WORK_HOURS - totalWorkHours)) &gt; 0.01,\n          canEdit: !apiRecord?.IS_DAILY_CONFIRMED,\n          isHoliday: holiday,\n          hasVacation: hasVacation,\n          vacationTypeCode: vacationTypeCode,\n          vacationApplicationStatus: vacationApplicationStatus,\n          attendanceId: apiRecord?.ATTENDANCE_ID,\n          actualWorkHours: apiRecord?.ACTUAL_WORK_HOURS || 0,\n          breakTimes: breakTimes,\n          hasHolidayWorkApplication: hasHolidayWorkApplication,\n          holidayWorkApplicationStatus: holidayWorkApplicationStatus,\n          holidayWorkStartTime: holidayWorkStartTime,\n          holidayWorkEndTime: holidayWorkEndTime,\n          holidayWorkBreakHours: holidayWorkBreakHours,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "          }",
            "lineNumber": 1513
          },
          {
            "text": "        }",
            "lineNumber": 1514
          },
          {
            "text": "        ",
            "lineNumber": 1515
          },
          {
            "text": "        // 休日出勤申請が申請中または承認済みの場合、休憩時間が設定されていない場合はデフォルト値を設定",
            "lineNumber": 1516
          },
          {
            "text": "        if (hasHolidayWorkApplication &amp;&amp; holidayWorkBreakHours === null) {",
            "lineNumber": 1517
          },
          {
            "text": "          holidayWorkBreakHours = 1.0",
            "lineNumber": 1518
          },
          {
            "text": "        }",
            "lineNumber": 1519
          },
          {
            "text": "        ",
            "lineNumber": 1520
          },
          {
            "text": "        // 休暇申請の情報を取得",
            "lineNumber": 1521
          },
          {
            "text": "        const vacation = apiRecord?.vacation",
            "lineNumber": 1522
          },
          {
            "text": "        const hasVacation = !!(vacation &amp;&amp; ",
            "lineNumber": 1523
          },
          {
            "text": "          (vacation.APPROVAL_STATUS === 'PENDING' || vacation.APPROVAL_STATUS === 'APPROVED'))",
            "lineNumber": 1524
          },
          {
            "text": "        const vacationTypeCode = vacation?.VACATION_TYPE_CODE || null",
            "lineNumber": 1525
          },
          {
            "text": "        const vacationApplicationStatus = vacation?.APPROVAL_STATUS || null",
            "lineNumber": 1526
          },
          {
            "text": "        ",
            "lineNumber": 1527
          },
          {
            "text": "        displayData.push({",
            "lineNumber": 1528
          },
          {
            "text": "          date: dateStr,",
            "lineNumber": 1529
          },
          {
            "text": "          dateNumber: dateNumber,",
            "lineNumber": 1530
          },
          {
            "text": "          dateDayOfWeek: dateDayOfWeek,",
            "lineNumber": 1531
          },
          {
            "text": "          dayOfWeek: dayNames[dayOfWeek],",
            "lineNumber": 1532
          },
          {
            "text": "          dayOfWeekNum: dayOfWeek,",
            "lineNumber": 1533
          },
          {
            "text": "          hasWarning: false,",
            "lineNumber": 1534
          },
          {
            "text": "          hasStampManualMismatch: hasStampManualMismatch,",
            "lineNumber": 1535
          },
          {
            "text": "          approvalStatus: apiRecord?.APPROVAL_STATUS || 'NOT_SUBMITTED',",
            "lineNumber": 1536
          },
          {
            "text": "          clockIn: clockIn,",
            "lineNumber": 1537
          },
          {
            "text": "          clockOut: clockOut,",
            "lineNumber": 1538
          },
          {
            "text": "          clockInType: clockInType,",
            "lineNumber": 1539
          },
          {
            "text": "          clockOutType: clockOutType,",
            "lineNumber": 1540
          },
          {
            "text": "          location: apiRecord?.WORK_LOCATION_NAME || apiRecord?.WORK_LOCATION_CODE || '',",
            "lineNumber": 1541
          },
          {
            "text": "          workHours: formatWorkHours(totalWorkHours),",
            "lineNumber": 1542
          },
          {
            "text": "          hasWorkHoursError: apiRecord?.ACTUAL_WORK_HOURS &amp;&amp; Math.abs((apiRecord.ACTUAL_WORK_HOURS - totalWorkHours)) &gt; 0.01,",
            "lineNumber": 1543
          },
          {
            "text": "          canEdit: !apiRecord?.IS_DAILY_CONFIRMED,",
            "lineNumber": 1544
          },
          {
            "text": "          isHoliday: holiday,",
            "lineNumber": 1545
          },
          {
            "text": "          hasVacation: hasVacation,",
            "lineNumber": 1546
          },
          {
            "text": "          vacationTypeCode: vacationTypeCode,",
            "lineNumber": 1547
          },
          {
            "text": "          vacationApplicationStatus: vacationApplicationStatus,",
            "lineNumber": 1548
          },
          {
            "text": "          attendanceId: apiRecord?.ATTENDANCE_ID,",
            "lineNumber": 1549
          },
          {
            "text": "          actualWorkHours: apiRecord?.ACTUAL_WORK_HOURS || 0,",
            "lineNumber": 1550
          },
          {
            "text": "          breakTimes: breakTimes,",
            "lineNumber": 1551
          },
          {
            "text": "          hasHolidayWorkApplication: hasHolidayWorkApplication,",
            "lineNumber": 1552
          },
          {
            "text": "          holidayWorkApplicationStatus: holidayWorkApplicationStatus,",
            "lineNumber": 1553
          },
          {
            "text": "          holidayWorkStartTime: holidayWorkStartTime,",
            "lineNumber": 1554
          },
          {
            "text": "          holidayWorkEndTime: holidayWorkEndTime,",
            "lineNumber": 1555
          },
          {
            "text": "          holidayWorkBreakHours: holidayWorkBreakHours,",
            "lineNumber": 1556
          }
        ]
      },
      "score": 0.2663346529006958
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2785
          },
          "endPosition": {
            "line": 2828
          }
        },
        "contents": "    calculateDailyWorkHourBreakdown(day) {\n      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {\n        return {\n          scheduledWorkHours: 0,\n          withinLegalOvertime: 0,\n          overLegalOvertime: 0\n        }\n      }\n      \n      // 年月を取得\n      const [year, month] = day.date.split('-').map(Number)\n      \n      // 月全体の所定出勤日数を計算\n      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)\n      \n      // 月の所定労働時間と法定労働時間\n      const monthlyScheduledWorkHours = scheduledWorkDays * 7.5\n      const monthlyLegalWorkHours = scheduledWorkDays * 8\n      \n      // 前日までの累積実労働時間\n      const previousCumulativeWorkHours = this.getPreviousDayCumulativeWorkHours(day)\n      \n      // その日の実労働時間\n      const dailyActualWorkHours = parseFloat(day.actualWorkHours) || 0\n      \n      // 月の所定労働時間の残り（浮動小数点数の誤差を考慮して、分単位で計算）\n      const remainingScheduledWorkHoursRaw = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours)\n      // 分単位に変換してから時間単位に戻すことで、精度を向上\n      const remainingScheduledWorkHoursMinutes = Math.round(remainingScheduledWorkHoursRaw * 60)\n      const remainingScheduledWorkHours = remainingScheduledWorkHoursMinutes / 60\n      \n      // 月の法定労働時間の残り（浮動小数点数の誤差を考慮して、分単位で計算）\n      const remainingLegalWorkHoursRaw = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours)\n      const remainingLegalWorkHoursMinutes = Math.round(remainingLegalWorkHoursRaw * 60)\n      const remainingLegalWorkHours = remainingLegalWorkHoursMinutes / 60\n      \n      let scheduledWorkHours = 0\n      let withinLegalOvertime = 0\n      let overLegalOvertime = 0\n      \n      // 前日までの累積が月の所定労働時間以下の場合\n      if (previousCumulativeWorkHours &lt; monthlyScheduledWorkHours) {\n        // 所定内労働: 月の所定労働時間の残りまで（分単位で計算して精度を保つ）",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    calculateDailyWorkHourBreakdown(day) {",
            "lineNumber": 2786
          },
          {
            "text": "      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {",
            "lineNumber": 2787
          },
          {
            "text": "        return {",
            "lineNumber": 2788
          },
          {
            "text": "          scheduledWorkHours: 0,",
            "lineNumber": 2789
          },
          {
            "text": "          withinLegalOvertime: 0,",
            "lineNumber": 2790
          },
          {
            "text": "          overLegalOvertime: 0",
            "lineNumber": 2791
          },
          {
            "text": "        }",
            "lineNumber": 2792
          },
          {
            "text": "      }",
            "lineNumber": 2793
          },
          {
            "text": "      ",
            "lineNumber": 2794
          },
          {
            "text": "      // 年月を取得",
            "lineNumber": 2795
          },
          {
            "text": "      const [year, month] = day.date.split('-').map(Number)",
            "lineNumber": 2796
          },
          {
            "text": "      ",
            "lineNumber": 2797
          },
          {
            "text": "      // 月全体の所定出勤日数を計算",
            "lineNumber": 2798
          },
          {
            "text": "      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)",
            "lineNumber": 2799
          },
          {
            "text": "      ",
            "lineNumber": 2800
          },
          {
            "text": "      // 月の所定労働時間と法定労働時間",
            "lineNumber": 2801
          },
          {
            "text": "      const monthlyScheduledWorkHours = scheduledWorkDays * 7.5",
            "lineNumber": 2802
          },
          {
            "text": "      const monthlyLegalWorkHours = scheduledWorkDays * 8",
            "lineNumber": 2803
          },
          {
            "text": "      ",
            "lineNumber": 2804
          },
          {
            "text": "      // 前日までの累積実労働時間",
            "lineNumber": 2805
          },
          {
            "text": "      const previousCumulativeWorkHours = this.getPreviousDayCumulativeWorkHours(day)",
            "lineNumber": 2806
          },
          {
            "text": "      ",
            "lineNumber": 2807
          },
          {
            "text": "      // その日の実労働時間",
            "lineNumber": 2808
          },
          {
            "text": "      const dailyActualWorkHours = parseFloat(day.actualWorkHours) || 0",
            "lineNumber": 2809
          },
          {
            "text": "      ",
            "lineNumber": 2810
          },
          {
            "text": "      // 月の所定労働時間の残り（浮動小数点数の誤差を考慮して、分単位で計算）",
            "lineNumber": 2811
          },
          {
            "text": "      const remainingScheduledWorkHoursRaw = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours)",
            "lineNumber": 2812
          },
          {
            "text": "      // 分単位に変換してから時間単位に戻すことで、精度を向上",
            "lineNumber": 2813
          },
          {
            "text": "      const remainingScheduledWorkHoursMinutes = Math.round(remainingScheduledWorkHoursRaw * 60)",
            "lineNumber": 2814
          },
          {
            "text": "      const remainingScheduledWorkHours = remainingScheduledWorkHoursMinutes / 60",
            "lineNumber": 2815
          },
          {
            "text": "      ",
            "lineNumber": 2816
          },
          {
            "text": "      // 月の法定労働時間の残り（浮動小数点数の誤差を考慮して、分単位で計算）",
            "lineNumber": 2817
          },
          {
            "text": "      const remainingLegalWorkHoursRaw = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours)",
            "lineNumber": 2818
          },
          {
            "text": "      const remainingLegalWorkHoursMinutes = Math.round(remainingLegalWorkHoursRaw * 60)",
            "lineNumber": 2819
          },
          {
            "text": "      const remainingLegalWorkHours = remainingLegalWorkHoursMinutes / 60",
            "lineNumber": 2820
          },
          {
            "text": "      ",
            "lineNumber": 2821
          },
          {
            "text": "      let scheduledWorkHours = 0",
            "lineNumber": 2822
          },
          {
            "text": "      let withinLegalOvertime = 0",
            "lineNumber": 2823
          },
          {
            "text": "      let overLegalOvertime = 0",
            "lineNumber": 2824
          },
          {
            "text": "      ",
            "lineNumber": 2825
          },
          {
            "text": "      // 前日までの累積が月の所定労働時間以下の場合",
            "lineNumber": 2826
          },
          {
            "text": "      if (previousCumulativeWorkHours &lt; monthlyScheduledWorkHours) {",
            "lineNumber": 2827
          },
          {
            "text": "        // 所定内労働: 月の所定労働時間の残りまで（分単位で計算して精度を保つ）",
            "lineNumber": 2828
          }
        ]
      },
      "score": 0.2630828619003296
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1674
          },
          "endPosition": {
            "line": 1726
          }
        },
        "contents": "          })\n        }\n\n        sampleData.push({\n          date: dateStr,\n          dateNumber: dateNumber,\n          dateDayOfWeek: dateDayOfWeek,\n          dayOfWeek: dayNames[dayOfWeek],\n          dayOfWeekNum: dayOfWeek,\n          hasWarning: false,\n          approvalStatus: 'NOT_SUBMITTED',\n          clockIn: '',\n          clockOut: '',\n          clockInType: '',\n          clockOutType: '',\n          location: '',\n          workHours: '',\n          hasWorkHoursError: false,\n          canEdit: true,\n          isHoliday: holiday, // 祝日判定\n          hasVacation: false,\n          vacationTypeCode: null,\n          vacationApplicationStatus: null,\n          attendanceId: null,\n          actualWorkHours: 0,\n          breakTimes: breakTimes,\n          remarkText: ''\n        })\n      }\n      \n      this.attendanceData = sampleData\n    },\n    \n    // 行のクラスを取得\n    getRowClass(day) {\n      // 優先順位: 休暇申請済み &gt; 日曜日 &gt; 祝日 &gt; 土曜日 &gt; 平日\n      // 日曜日に祝日イベントがあっても日曜日と同じ扱いにする\n      if (day.hasVacation) {\n        return 'vacation-row'\n      } else if (day.dayOfWeekNum === 0) {\n        return 'sunday-row' // 日曜日（祝日より優先）\n      } else if (day.isHoliday) {\n        return 'saturday-row' // 祝日は土曜日と同じ背景色（ただし日曜日でない場合のみ）\n      } else if (day.dayOfWeekNum === 6) {\n        return 'saturday-row'\n      }\n      return ''\n    },\n    \n    // 曜日の色クラスを取得\n    getDayOfWeekClass(day) {\n      // 優先順位: 日曜日 &gt; 祝日 &gt; 土曜日 &gt; 平日",
        "signatures": {},
        "detailedLines": [
          {
            "text": "          })",
            "lineNumber": 1675
          },
          {
            "text": "        }",
            "lineNumber": 1676
          },
          {
            "lineNumber": 1677
          },
          {
            "text": "        sampleData.push({",
            "lineNumber": 1678
          },
          {
            "text": "          date: dateStr,",
            "lineNumber": 1679
          },
          {
            "text": "          dateNumber: dateNumber,",
            "lineNumber": 1680
          },
          {
            "text": "          dateDayOfWeek: dateDayOfWeek,",
            "lineNumber": 1681
          },
          {
            "text": "          dayOfWeek: dayNames[dayOfWeek],",
            "lineNumber": 1682
          },
          {
            "text": "          dayOfWeekNum: dayOfWeek,",
            "lineNumber": 1683
          },
          {
            "text": "          hasWarning: false,",
            "lineNumber": 1684
          },
          {
            "text": "          approvalStatus: 'NOT_SUBMITTED',",
            "lineNumber": 1685
          },
          {
            "text": "          clockIn: '',",
            "lineNumber": 1686
          },
          {
            "text": "          clockOut: '',",
            "lineNumber": 1687
          },
          {
            "text": "          clockInType: '',",
            "lineNumber": 1688
          },
          {
            "text": "          clockOutType: '',",
            "lineNumber": 1689
          },
          {
            "text": "          location: '',",
            "lineNumber": 1690
          },
          {
            "text": "          workHours: '',",
            "lineNumber": 1691
          },
          {
            "text": "          hasWorkHoursError: false,",
            "lineNumber": 1692
          },
          {
            "text": "          canEdit: true,",
            "lineNumber": 1693
          },
          {
            "text": "          isHoliday: holiday, // 祝日判定",
            "lineNumber": 1694
          },
          {
            "text": "          hasVacation: false,",
            "lineNumber": 1695
          },
          {
            "text": "          vacationTypeCode: null,",
            "lineNumber": 1696
          },
          {
            "text": "          vacationApplicationStatus: null,",
            "lineNumber": 1697
          },
          {
            "text": "          attendanceId: null,",
            "lineNumber": 1698
          },
          {
            "text": "          actualWorkHours: 0,",
            "lineNumber": 1699
          },
          {
            "text": "          breakTimes: breakTimes,",
            "lineNumber": 1700
          },
          {
            "text": "          remarkText: ''",
            "lineNumber": 1701
          },
          {
            "text": "        })",
            "lineNumber": 1702
          },
          {
            "text": "      }",
            "lineNumber": 1703
          },
          {
            "text": "      ",
            "lineNumber": 1704
          },
          {
            "text": "      this.attendanceData = sampleData",
            "lineNumber": 1705
          },
          {
            "text": "    },",
            "lineNumber": 1706
          },
          {
            "text": "    ",
            "lineNumber": 1707
          },
          {
            "text": "    // 行のクラスを取得",
            "lineNumber": 1708
          },
          {
            "text": "    getRowClass(day) {",
            "lineNumber": 1709
          },
          {
            "text": "      // 優先順位: 休暇申請済み &gt; 日曜日 &gt; 祝日 &gt; 土曜日 &gt; 平日",
            "lineNumber": 1710
          },
          {
            "text": "      // 日曜日に祝日イベントがあっても日曜日と同じ扱いにする",
            "lineNumber": 1711
          },
          {
            "text": "      if (day.hasVacation) {",
            "lineNumber": 1712
          },
          {
            "text": "        return 'vacation-row'",
            "lineNumber": 1713
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 0) {",
            "lineNumber": 1714
          },
          {
            "text": "        return 'sunday-row' // 日曜日（祝日より優先）",
            "lineNumber": 1715
          },
          {
            "text": "      } else if (day.isHoliday) {",
            "lineNumber": 1716
          },
          {
            "text": "        return 'saturday-row' // 祝日は土曜日と同じ背景色（ただし日曜日でない場合のみ）",
            "lineNumber": 1717
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 6) {",
            "lineNumber": 1718
          },
          {
            "text": "        return 'saturday-row'",
            "lineNumber": 1719
          },
          {
            "text": "      }",
            "lineNumber": 1720
          },
          {
            "text": "      return ''",
            "lineNumber": 1721
          },
          {
            "text": "    },",
            "lineNumber": 1722
          },
          {
            "text": "    ",
            "lineNumber": 1723
          },
          {
            "text": "    // 曜日の色クラスを取得",
            "lineNumber": 1724
          },
          {
            "text": "    getDayOfWeekClass(day) {",
            "lineNumber": 1725
          },
          {
            "text": "      // 優先順位: 日曜日 &gt; 祝日 &gt; 土曜日 &gt; 平日",
            "lineNumber": 1726
          }
        ]
      },
      "score": 0.26033973693847656
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 1441
          },
          "endPosition": {
            "line": 1489,
            "column": 10
          }
        },
        "contents": "    initializeForms() {\n      // 日次確定申請フォームの初期化\n      this.dailyConfirmationForm = {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      }\n      // エラーメッセージをクリア\n      this.dailyConfirmationError = ''\n      \n      // 休暇申請フォームの初期化（年次有給休暇を選択）\n      this.vacationForm.vacationType = 'PAID_LEAVE'\n      this.vacationForm.startDate = this.targetDate\n      this.vacationForm.endDate = this.targetDate\n      this.vacationForm.enableEndDate = false\n      this.vacationForm.reason = ''\n      this.vacationForm.contact = ''\n      \n      // 休日出勤申請フォームの初期値は既に設定済み（startTime: '09:00', endTime: '17:30'）\n      this.overtimeForm.startDate = this.targetDate\n      this.overtimeForm.endDate = this.targetDate\n      this.earlyWorkForm.startDate = this.targetDate\n      this.earlyWorkForm.endDate = this.targetDate\n      this.transferForm.fromDate = this.targetDate\n      this.transferForm.toDate = this.targetDate\n    },\n    \n    async loadVacationTypes() {\n      try {\n        const response = await fetch('http://localhost:3000/api/master/vacation-types')\n        const data = await response.json()\n        if (data.success) {\n          this.vacationTypes = data.vacationTypes.map(type =&gt; ({\n            code: type.VACATION_TYPE_CODE,\n            name: type.VACATION_TYPE_NAME,\n            isPaid: type.IS_PAID\n          }))\n        }\n      } catch (error) {\n        console.error('休暇種別マスタ取得エラー:', error)\n      }\n    },\n    \n    async loadPaidLeaveBalance() {\n      try {\n        const response = await fetch(\n          ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    initializeForms() {",
            "lineNumber": 1442
          },
          {
            "text": "      // 日次確定申請フォームの初期化",
            "lineNumber": 1443
          },
          {
            "text": "      this.dailyConfirmationForm = {",
            "lineNumber": 1444
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 1445
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 1446
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 1447
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 1448
          },
          {
            "text": "        remark: ''",
            "lineNumber": 1449
          },
          {
            "text": "      }",
            "lineNumber": 1450
          },
          {
            "text": "      // エラーメッセージをクリア",
            "lineNumber": 1451
          },
          {
            "text": "      this.dailyConfirmationError = ''",
            "lineNumber": 1452
          },
          {
            "text": "      ",
            "lineNumber": 1453
          },
          {
            "text": "      // 休暇申請フォームの初期化（年次有給休暇を選択）",
            "lineNumber": 1454
          },
          {
            "text": "      this.vacationForm.vacationType = 'PAID_LEAVE'",
            "lineNumber": 1455
          },
          {
            "text": "      this.vacationForm.startDate = this.targetDate",
            "lineNumber": 1456
          },
          {
            "text": "      this.vacationForm.endDate = this.targetDate",
            "lineNumber": 1457
          },
          {
            "text": "      this.vacationForm.enableEndDate = false",
            "lineNumber": 1458
          },
          {
            "text": "      this.vacationForm.reason = ''",
            "lineNumber": 1459
          },
          {
            "text": "      this.vacationForm.contact = ''",
            "lineNumber": 1460
          },
          {
            "text": "      ",
            "lineNumber": 1461
          },
          {
            "text": "      // 休日出勤申請フォームの初期値は既に設定済み（startTime: '09:00', endTime: '17:30'）",
            "lineNumber": 1462
          },
          {
            "text": "      this.overtimeForm.startDate = this.targetDate",
            "lineNumber": 1463
          },
          {
            "text": "      this.overtimeForm.endDate = this.targetDate",
            "lineNumber": 1464
          },
          {
            "text": "      this.earlyWorkForm.startDate = this.targetDate",
            "lineNumber": 1465
          },
          {
            "text": "      this.earlyWorkForm.endDate = this.targetDate",
            "lineNumber": 1466
          },
          {
            "text": "      this.transferForm.fromDate = this.targetDate",
            "lineNumber": 1467
          },
          {
            "text": "      this.transferForm.toDate = this.targetDate",
            "lineNumber": 1468
          },
          {
            "text": "    },",
            "lineNumber": 1469
          },
          {
            "text": "    ",
            "lineNumber": 1470
          },
          {
            "text": "    async loadVacationTypes() {",
            "lineNumber": 1471
          },
          {
            "text": "      try {",
            "lineNumber": 1472
          },
          {
            "text": "        const response = await fetch('http://localhost:3000/api/master/vacation-types')",
            "lineNumber": 1473
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 1474
          },
          {
            "text": "        if (data.success) {",
            "lineNumber": 1475
          },
          {
            "text": "          this.vacationTypes = data.vacationTypes.map(type =&gt; ({",
            "lineNumber": 1476
          },
          {
            "text": "            code: type.VACATION_TYPE_CODE,",
            "lineNumber": 1477
          },
          {
            "text": "            name: type.VACATION_TYPE_NAME,",
            "lineNumber": 1478
          },
          {
            "text": "            isPaid: type.IS_PAID",
            "lineNumber": 1479
          },
          {
            "text": "          }))",
            "lineNumber": 1480
          },
          {
            "text": "        }",
            "lineNumber": 1481
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 1482
          },
          {
            "text": "        console.error('休暇種別マスタ取得エラー:', error)",
            "lineNumber": 1483
          },
          {
            "text": "      }",
            "lineNumber": 1484
          },
          {
            "text": "    },",
            "lineNumber": 1485
          },
          {
            "text": "    ",
            "lineNumber": 1486
          },
          {
            "text": "    async loadPaidLeaveBalance() {",
            "lineNumber": 1487
          },
          {
            "text": "      try {",
            "lineNumber": 1488
          },
          {
            "text": "        const response = await fetch(",
            "lineNumber": 1489
          },
          {
            "text": "          ",
            "lineNumber": 1490
          }
        ]
      },
      "score": 0.25750789046287537
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 418
          },
          "endPosition": {
            "line": 460
          }
        },
        "contents": "    async fetchHolidayWorkStatus() {\n      // 当日が土日祝の場合のみ取得\n      if (!this.isHoliday) {\n        this.isHolidayWorkApproved = false\n        return\n      }\n      \n      try {\n        const employeeId = localStorage.getItem('employeeId') || '000001'\n        const today = new Date()\n        const year = today.getFullYear()\n        const month = String(today.getMonth() + 1).padStart(2, '0')\n        const date = String(today.getDate()).padStart(2, '0')\n        const targetDate = &#96;${year}-${month}-${date}&#96;\n        \n        const response = await getHolidayWorkStatus(employeeId, targetDate)\n        \n        if (response.success) {\n          // 申請が存在し、申請中（PENDING）または承認済み（APPROVED）の場合にtrue\n          this.isHolidayWorkApproved = response.hasHolidayWorkApplication &amp;&amp; \n            (response.applicationStatus === 'PENDING' || response.applicationStatus === 'APPROVED')\n        } else {\n          this.isHolidayWorkApproved = false\n        }\n      } catch (error) {\n        console.error('休日出勤申請状態の取得に失敗しました:', error)\n        // エラー時はfalseとして扱う（打刻不可）\n        this.isHolidayWorkApproved = false\n      }\n    },\n    \n    // 時計表示の開始（1秒ごとに更新）\n    startClock() {\n      this.updateClock()\n      this.clockInterval = setInterval(() =&gt; {\n        this.updateClock()\n      }, 1000)\n    },\n    \n    // 時計の更新\n    updateClock() {\n      const now = new Date()",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    async fetchHolidayWorkStatus() {",
            "lineNumber": 419
          },
          {
            "text": "      // 当日が土日祝の場合のみ取得",
            "lineNumber": 420
          },
          {
            "text": "      if (!this.isHoliday) {",
            "lineNumber": 421
          },
          {
            "text": "        this.isHolidayWorkApproved = false",
            "lineNumber": 422
          },
          {
            "text": "        return",
            "lineNumber": 423
          },
          {
            "text": "      }",
            "lineNumber": 424
          },
          {
            "text": "      ",
            "lineNumber": 425
          },
          {
            "text": "      try {",
            "lineNumber": 426
          },
          {
            "text": "        const employeeId = localStorage.getItem('employeeId') || '000001'",
            "lineNumber": 427
          },
          {
            "text": "        const today = new Date()",
            "lineNumber": 428
          },
          {
            "text": "        const year = today.getFullYear()",
            "lineNumber": 429
          },
          {
            "text": "        const month = String(today.getMonth() + 1).padStart(2, '0')",
            "lineNumber": 430
          },
          {
            "text": "        const date = String(today.getDate()).padStart(2, '0')",
            "lineNumber": 431
          },
          {
            "text": "        const targetDate = &#96;${year}-${month}-${date}&#96;",
            "lineNumber": 432
          },
          {
            "text": "        ",
            "lineNumber": 433
          },
          {
            "text": "        const response = await getHolidayWorkStatus(employeeId, targetDate)",
            "lineNumber": 434
          },
          {
            "text": "        ",
            "lineNumber": 435
          },
          {
            "text": "        if (response.success) {",
            "lineNumber": 436
          },
          {
            "text": "          // 申請が存在し、申請中（PENDING）または承認済み（APPROVED）の場合にtrue",
            "lineNumber": 437
          },
          {
            "text": "          this.isHolidayWorkApproved = response.hasHolidayWorkApplication &amp;&amp; ",
            "lineNumber": 438
          },
          {
            "text": "            (response.applicationStatus === 'PENDING' || response.applicationStatus === 'APPROVED')",
            "lineNumber": 439
          },
          {
            "text": "        } else {",
            "lineNumber": 440
          },
          {
            "text": "          this.isHolidayWorkApproved = false",
            "lineNumber": 441
          },
          {
            "text": "        }",
            "lineNumber": 442
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 443
          },
          {
            "text": "        console.error('休日出勤申請状態の取得に失敗しました:', error)",
            "lineNumber": 444
          },
          {
            "text": "        // エラー時はfalseとして扱う（打刻不可）",
            "lineNumber": 445
          },
          {
            "text": "        this.isHolidayWorkApproved = false",
            "lineNumber": 446
          },
          {
            "text": "      }",
            "lineNumber": 447
          },
          {
            "text": "    },",
            "lineNumber": 448
          },
          {
            "text": "    ",
            "lineNumber": 449
          },
          {
            "text": "    // 時計表示の開始（1秒ごとに更新）",
            "lineNumber": 450
          },
          {
            "text": "    startClock() {",
            "lineNumber": 451
          },
          {
            "text": "      this.updateClock()",
            "lineNumber": 452
          },
          {
            "text": "      this.clockInterval = setInterval(() =&gt; {",
            "lineNumber": 453
          },
          {
            "text": "        this.updateClock()",
            "lineNumber": 454
          },
          {
            "text": "      }, 1000)",
            "lineNumber": 455
          },
          {
            "text": "    },",
            "lineNumber": 456
          },
          {
            "text": "    ",
            "lineNumber": 457
          },
          {
            "text": "    // 時計の更新",
            "lineNumber": 458
          },
          {
            "text": "    updateClock() {",
            "lineNumber": 459
          },
          {
            "text": "      const now = new Date()",
            "lineNumber": 460
          }
        ]
      },
      "score": 0.2528550922870636
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 297
          },
          "endPosition": {
            "line": 339
          }
        },
        "contents": "    isScheduledClockOutEnabled() {\n      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false\n      const now = new Date()\n      const hours = now.getHours()\n      const minutes = now.getMinutes()\n      return hours &gt; 17 || (hours === 17 &amp;&amp; minutes &gt;= 30)\n    }\n  },\n  mounted() {\n    this.initializeHomeScreen()\n  },\n  beforeUnmount() {\n    // 時計更新のインターバルをクリア\n    if (this.clockInterval) {\n      clearInterval(this.clockInterval)\n    }\n  },\n  methods: {\n    // 初期表示処理\n    async initializeHomeScreen() {\n      // 1. ログイン情報の確認\n      // TODO: セッションストレージまたはVuexストアからログイン情報を取得\n      \n      // 2. お知らせ情報の取得\n      await this.fetchNotifications()\n      \n      // 3. 当日の勤怠情報の取得\n      await this.fetchTodayAttendance()\n      \n      // 4. 休日出勤申請の確認（当日が土日祝の場合のみ）\n      await this.fetchHolidayWorkStatus()\n      \n      // 5. ボタンの活性/非活性制御はcomputedプロパティで自動制御\n      \n      // 6. 時計表示の開始\n      this.startClock()\n    },\n    \n    // お知らせ情報の取得\n    async fetchNotifications() {\n      try {\n        const employeeId = localStorage.getItem('employeeId') || '000001'",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    isScheduledClockOutEnabled() {",
            "lineNumber": 298
          },
          {
            "text": "      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false",
            "lineNumber": 299
          },
          {
            "text": "      const now = new Date()",
            "lineNumber": 300
          },
          {
            "text": "      const hours = now.getHours()",
            "lineNumber": 301
          },
          {
            "text": "      const minutes = now.getMinutes()",
            "lineNumber": 302
          },
          {
            "text": "      return hours &gt; 17 || (hours === 17 &amp;&amp; minutes &gt;= 30)",
            "lineNumber": 303
          },
          {
            "text": "    }",
            "lineNumber": 304
          },
          {
            "text": "  },",
            "lineNumber": 305
          },
          {
            "text": "  mounted() {",
            "lineNumber": 306
          },
          {
            "text": "    this.initializeHomeScreen()",
            "lineNumber": 307
          },
          {
            "text": "  },",
            "lineNumber": 308
          },
          {
            "text": "  beforeUnmount() {",
            "lineNumber": 309
          },
          {
            "text": "    // 時計更新のインターバルをクリア",
            "lineNumber": 310
          },
          {
            "text": "    if (this.clockInterval) {",
            "lineNumber": 311
          },
          {
            "text": "      clearInterval(this.clockInterval)",
            "lineNumber": 312
          },
          {
            "text": "    }",
            "lineNumber": 313
          },
          {
            "text": "  },",
            "lineNumber": 314
          },
          {
            "text": "  methods: {",
            "lineNumber": 315
          },
          {
            "text": "    // 初期表示処理",
            "lineNumber": 316
          },
          {
            "text": "    async initializeHomeScreen() {",
            "lineNumber": 317
          },
          {
            "text": "      // 1. ログイン情報の確認",
            "lineNumber": 318
          },
          {
            "text": "      // TODO: セッションストレージまたはVuexストアからログイン情報を取得",
            "lineNumber": 319
          },
          {
            "text": "      ",
            "lineNumber": 320
          },
          {
            "text": "      // 2. お知らせ情報の取得",
            "lineNumber": 321
          },
          {
            "text": "      await this.fetchNotifications()",
            "lineNumber": 322
          },
          {
            "text": "      ",
            "lineNumber": 323
          },
          {
            "text": "      // 3. 当日の勤怠情報の取得",
            "lineNumber": 324
          },
          {
            "text": "      await this.fetchTodayAttendance()",
            "lineNumber": 325
          },
          {
            "text": "      ",
            "lineNumber": 326
          },
          {
            "text": "      // 4. 休日出勤申請の確認（当日が土日祝の場合のみ）",
            "lineNumber": 327
          },
          {
            "text": "      await this.fetchHolidayWorkStatus()",
            "lineNumber": 328
          },
          {
            "text": "      ",
            "lineNumber": 329
          },
          {
            "text": "      // 5. ボタンの活性/非活性制御はcomputedプロパティで自動制御",
            "lineNumber": 330
          },
          {
            "text": "      ",
            "lineNumber": 331
          },
          {
            "text": "      // 6. 時計表示の開始",
            "lineNumber": 332
          },
          {
            "text": "      this.startClock()",
            "lineNumber": 333
          },
          {
            "text": "    },",
            "lineNumber": 334
          },
          {
            "text": "    ",
            "lineNumber": 335
          },
          {
            "text": "    // お知らせ情報の取得",
            "lineNumber": 336
          },
          {
            "text": "    async fetchNotifications() {",
            "lineNumber": 337
          },
          {
            "text": "      try {",
            "lineNumber": 338
          },
          {
            "text": "        const employeeId = localStorage.getItem('employeeId') || '000001'",
            "lineNumber": 339
          }
        ]
      },
      "score": 0.2499077022075653
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2954
          },
          "endPosition": {
            "line": 2987
          }
        },
        "contents": "    calculateCumulativeOvertime(cutoffDateStr) {\n      if (!this.attendanceData || this.attendanceData.length === 0) {\n        return { withinLegalOvertime: 0, overLegalOvertime: 0 }\n      }\n      \n      // 年月を取得（最初の日付から）\n      const firstDate = this.attendanceData[0].date\n      const [year, month] = firstDate.split('-').map(Number)\n      \n      // その日付までの実労働時間の合計を計算\n      let totalWorkHours = 0\n      for (const day of this.attendanceData) {\n        if (day.date &gt; cutoffDateStr) break\n        if (day.clockIn &amp;&amp; day.clockOut &amp;&amp; day.actualWorkHours) {\n          totalWorkHours += parseFloat(day.actualWorkHours) || 0\n        }\n      }\n      \n      // 月全体の所定出勤日数を計算（その日付までの日数ではなく、月全体）\n      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)\n      \n      // 月全体の所定労働時間（7.5時間/日 × 月全体の所定出勤日数）\n      const scheduledWorkHours = scheduledWorkDays * 7.5\n      \n      // 月全体の法定労働時間（8時間/日 × 月全体の所定出勤日数）\n      const legalWorkHours = scheduledWorkDays * 8\n      \n      // 実労働時間が月全体の所定労働時間を超えている場合のみ残業を計算\n      let withinLegalOvertime = 0\n      let overLegalOvertime = 0\n      \n      if (totalWorkHours &gt; scheduledWorkHours) {\n        // 実労働時間が月全体の所定労働時間を超えている",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    calculateCumulativeOvertime(cutoffDateStr) {",
            "lineNumber": 2955
          },
          {
            "text": "      if (!this.attendanceData || this.attendanceData.length === 0) {",
            "lineNumber": 2956
          },
          {
            "text": "        return { withinLegalOvertime: 0, overLegalOvertime: 0 }",
            "lineNumber": 2957
          },
          {
            "text": "      }",
            "lineNumber": 2958
          },
          {
            "text": "      ",
            "lineNumber": 2959
          },
          {
            "text": "      // 年月を取得（最初の日付から）",
            "lineNumber": 2960
          },
          {
            "text": "      const firstDate = this.attendanceData[0].date",
            "lineNumber": 2961
          },
          {
            "text": "      const [year, month] = firstDate.split('-').map(Number)",
            "lineNumber": 2962
          },
          {
            "text": "      ",
            "lineNumber": 2963
          },
          {
            "text": "      // その日付までの実労働時間の合計を計算",
            "lineNumber": 2964
          },
          {
            "text": "      let totalWorkHours = 0",
            "lineNumber": 2965
          },
          {
            "text": "      for (const day of this.attendanceData) {",
            "lineNumber": 2966
          },
          {
            "text": "        if (day.date &gt; cutoffDateStr) break",
            "lineNumber": 2967
          },
          {
            "text": "        if (day.clockIn &amp;&amp; day.clockOut &amp;&amp; day.actualWorkHours) {",
            "lineNumber": 2968
          },
          {
            "text": "          totalWorkHours += parseFloat(day.actualWorkHours) || 0",
            "lineNumber": 2969
          },
          {
            "text": "        }",
            "lineNumber": 2970
          },
          {
            "text": "      }",
            "lineNumber": 2971
          },
          {
            "text": "      ",
            "lineNumber": 2972
          },
          {
            "text": "      // 月全体の所定出勤日数を計算（その日付までの日数ではなく、月全体）",
            "lineNumber": 2973
          },
          {
            "text": "      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)",
            "lineNumber": 2974
          },
          {
            "text": "      ",
            "lineNumber": 2975
          },
          {
            "text": "      // 月全体の所定労働時間（7.5時間/日 × 月全体の所定出勤日数）",
            "lineNumber": 2976
          },
          {
            "text": "      const scheduledWorkHours = scheduledWorkDays * 7.5",
            "lineNumber": 2977
          },
          {
            "text": "      ",
            "lineNumber": 2978
          },
          {
            "text": "      // 月全体の法定労働時間（8時間/日 × 月全体の所定出勤日数）",
            "lineNumber": 2979
          },
          {
            "text": "      const legalWorkHours = scheduledWorkDays * 8",
            "lineNumber": 2980
          },
          {
            "text": "      ",
            "lineNumber": 2981
          },
          {
            "text": "      // 実労働時間が月全体の所定労働時間を超えている場合のみ残業を計算",
            "lineNumber": 2982
          },
          {
            "text": "      let withinLegalOvertime = 0",
            "lineNumber": 2983
          },
          {
            "text": "      let overLegalOvertime = 0",
            "lineNumber": 2984
          },
          {
            "text": "      ",
            "lineNumber": 2985
          },
          {
            "text": "      if (totalWorkHours &gt; scheduledWorkHours) {",
            "lineNumber": 2986
          },
          {
            "text": "        // 実労働時間が月全体の所定労働時間を超えている",
            "lineNumber": 2987
          }
        ]
      },
      "score": 0.24822205305099487
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 3034
          },
          "endPosition": {
            "line": 3109
          }
        },
        "contents": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {\n      const cutoffDate = new Date(cutoffDateStr)\n      const cutoffDay = cutoffDate.getDate()\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      let scheduledWorkDays = 0\n      for (let day = 1; day &lt;= cutoffDay; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        \n        // 土日を除外\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\n          continue\n        }\n        \n        // 祝日を除外\n        try {\n          if (HolidayJp.isHoliday(date)) {\n            continue\n          }\n        } catch (error) {\n          // 祝日判定でエラーが発生した場合は、平日として扱う\n          console.error('祝日判定エラー:', error)\n        }\n        \n        scheduledWorkDays++\n      }\n      \n      return scheduledWorkDays\n    },\n    \n    // H:MM形式の時間を小数に変換\n    parseHoursToDecimal(timeStr) {\n      if (!timeStr || timeStr === '0:00' || timeStr === '-') {\n        return 0\n      }\n      \n      const parts = timeStr.split(':')\n      if (parts.length !== 2) {\n        return 0\n      }\n      \n      const hours = parseInt(parts[0], 10) || 0\n      const minutes = parseInt(parts[1], 10) || 0\n      \n      return hours + minutes / 60\n    },\n    \n    // 時間（小数）をH:MM形式に変換\n    formatHoursToHMM(hours) {\n      if (!hours || hours === 0) {\n        return '0:00'\n      }\n      \n      // 浮動小数点数の誤差を考慮して、分単位で計算\n      // 例: 0.75時間 = 45分、0.733333...時間 = 44分\n      const totalMinutes = Math.round(hours * 60)\n      const wholeHours = Math.floor(totalMinutes / 60)\n      const minutes = totalMinutes % 60\n      \n      return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.timesheet-container {\n  position: relative;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {",
            "lineNumber": 3035
          },
          {
            "text": "      const cutoffDate = new Date(cutoffDateStr)",
            "lineNumber": 3036
          },
          {
            "text": "      const cutoffDay = cutoffDate.getDate()",
            "lineNumber": 3037
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 3038
          },
          {
            "text": "      ",
            "lineNumber": 3039
          },
          {
            "text": "      let scheduledWorkDays = 0",
            "lineNumber": 3040
          },
          {
            "text": "      for (let day = 1; day &lt;= cutoffDay; day++) {",
            "lineNumber": 3041
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 3042
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 3043
          },
          {
            "text": "        ",
            "lineNumber": 3044
          },
          {
            "text": "        // 土日を除外",
            "lineNumber": 3045
          },
          {
            "text": "        if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 3046
          },
          {
            "text": "          continue",
            "lineNumber": 3047
          },
          {
            "text": "        }",
            "lineNumber": 3048
          },
          {
            "text": "        ",
            "lineNumber": 3049
          },
          {
            "text": "        // 祝日を除外",
            "lineNumber": 3050
          },
          {
            "text": "        try {",
            "lineNumber": 3051
          },
          {
            "text": "          if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 3052
          },
          {
            "text": "            continue",
            "lineNumber": 3053
          },
          {
            "text": "          }",
            "lineNumber": 3054
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 3055
          },
          {
            "text": "          // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 3056
          },
          {
            "text": "          console.error('祝日判定エラー:', error)",
            "lineNumber": 3057
          },
          {
            "text": "        }",
            "lineNumber": 3058
          },
          {
            "text": "        ",
            "lineNumber": 3059
          },
          {
            "text": "        scheduledWorkDays++",
            "lineNumber": 3060
          },
          {
            "text": "      }",
            "lineNumber": 3061
          },
          {
            "text": "      ",
            "lineNumber": 3062
          },
          {
            "text": "      return scheduledWorkDays",
            "lineNumber": 3063
          },
          {
            "text": "    },",
            "lineNumber": 3064
          },
          {
            "text": "    ",
            "lineNumber": 3065
          },
          {
            "text": "    // H:MM形式の時間を小数に変換",
            "lineNumber": 3066
          },
          {
            "text": "    parseHoursToDecimal(timeStr) {",
            "lineNumber": 3067
          },
          {
            "text": "      if (!timeStr || timeStr === '0:00' || timeStr === '-') {",
            "lineNumber": 3068
          },
          {
            "text": "        return 0",
            "lineNumber": 3069
          },
          {
            "text": "      }",
            "lineNumber": 3070
          },
          {
            "text": "      ",
            "lineNumber": 3071
          },
          {
            "text": "      const parts = timeStr.split(':')",
            "lineNumber": 3072
          },
          {
            "text": "      if (parts.length !== 2) {",
            "lineNumber": 3073
          },
          {
            "text": "        return 0",
            "lineNumber": 3074
          },
          {
            "text": "      }",
            "lineNumber": 3075
          },
          {
            "text": "      ",
            "lineNumber": 3076
          },
          {
            "text": "      const hours = parseInt(parts[0], 10) || 0",
            "lineNumber": 3077
          },
          {
            "text": "      const minutes = parseInt(parts[1], 10) || 0",
            "lineNumber": 3078
          },
          {
            "text": "      ",
            "lineNumber": 3079
          },
          {
            "text": "      return hours + minutes / 60",
            "lineNumber": 3080
          },
          {
            "text": "    },",
            "lineNumber": 3081
          },
          {
            "text": "    ",
            "lineNumber": 3082
          },
          {
            "text": "    // 時間（小数）をH:MM形式に変換",
            "lineNumber": 3083
          },
          {
            "text": "    formatHoursToHMM(hours) {",
            "lineNumber": 3084
          },
          {
            "text": "      if (!hours || hours === 0) {",
            "lineNumber": 3085
          },
          {
            "text": "        return '0:00'",
            "lineNumber": 3086
          },
          {
            "text": "      }",
            "lineNumber": 3087
          },
          {
            "text": "      ",
            "lineNumber": 3088
          },
          {
            "text": "      // 浮動小数点数の誤差を考慮して、分単位で計算",
            "lineNumber": 3089
          },
          {
            "text": "      // 例: 0.75時間 = 45分、0.733333...時間 = 44分",
            "lineNumber": 3090
          },
          {
            "text": "      const totalMinutes = Math.round(hours * 60)",
            "lineNumber": 3091
          },
          {
            "text": "      const wholeHours = Math.floor(totalMinutes / 60)",
            "lineNumber": 3092
          },
          {
            "text": "      const minutes = totalMinutes % 60",
            "lineNumber": 3093
          },
          {
            "text": "      ",
            "lineNumber": 3094
          },
          {
            "text": "      return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;",
            "lineNumber": 3095
          },
          {
            "text": "    }",
            "lineNumber": 3096
          },
          {
            "text": "  }",
            "lineNumber": 3097
          },
          {
            "text": "}",
            "lineNumber": 3098
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 3099
          },
          {
            "lineNumber": 3100
          },
          {
            "text": "&lt;style scoped&gt;",
            "lineNumber": 3101
          },
          {
            "text": "* {",
            "lineNumber": 3102
          },
          {
            "text": "  margin: 0;",
            "lineNumber": 3103
          },
          {
            "text": "  padding: 0;",
            "lineNumber": 3104
          },
          {
            "text": "  box-sizing: border-box;",
            "lineNumber": 3105
          },
          {
            "text": "}",
            "lineNumber": 3106
          },
          {
            "lineNumber": 3107
          },
          {
            "text": ".timesheet-container {",
            "lineNumber": 3108
          },
          {
            "text": "  position: relative;",
            "lineNumber": 3109
          }
        ]
      },
      "score": 0.24509860575199127
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2892
          },
          "endPosition": {
            "line": 2933,
            "column": 8
          }
        },
        "contents": "    calculateCumulativeWorkHours(cutoffDateStr) {\n      if (!this.attendanceData || this.attendanceData.length === 0) {\n        return { totalWorkHours: 0, scheduledWorkHoursUntilCutoff: 0 }\n      }\n      \n      // 年月を取得（最初の日付から）\n      const firstDate = this.attendanceData[0].date\n      const [year, month] = firstDate.split('-').map(Number)\n      \n      // その日付までの実労働時間の合計を計算\n      let totalWorkHours = 0\n      for (const day of this.attendanceData) {\n        if (day.date &gt; cutoffDateStr) break\n        if (day.clockIn &amp;&amp; day.clockOut &amp;&amp; day.actualWorkHours) {\n          totalWorkHours += parseFloat(day.actualWorkHours) || 0\n        }\n      }\n      \n      // その日付までの所定出勤日数を計算\n      const scheduledWorkDaysUntilCutoff = this.getScheduledWorkDaysUntilDate(year, month, cutoffDateStr)\n      \n      // 所定労働時間（7.5時間/日 × 所定出勤日数）\n      const scheduledWorkHoursUntilCutoff = scheduledWorkDaysUntilCutoff * 7.5\n      \n      return { totalWorkHours, scheduledWorkHoursUntilCutoff }\n    },\n    \n    // ツールチップ: 法定時間内残業を表示するかどうか\n    shouldShowMonthlyWithinLegalOvertime(day) {\n      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {\n        return false\n      }\n      \n      const { withinLegalOvertime } = this.calculateDailyWorkHourBreakdown(day)\n      // 浮動小数点数の誤差を考慮して、分単位で判定（1分以上の場合のみ表示）\n      return Math.round(withinLegalOvertime * 60) &gt;= 1\n    },\n    \n    // ツールチップ: 法定時間外残業を表示するかどうか\n    shouldShowMonthlyOverLegalOvertime(day) {\n      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    calculateCumulativeWorkHours(cutoffDateStr) {",
            "lineNumber": 2893
          },
          {
            "text": "      if (!this.attendanceData || this.attendanceData.length === 0) {",
            "lineNumber": 2894
          },
          {
            "text": "        return { totalWorkHours: 0, scheduledWorkHoursUntilCutoff: 0 }",
            "lineNumber": 2895
          },
          {
            "text": "      }",
            "lineNumber": 2896
          },
          {
            "text": "      ",
            "lineNumber": 2897
          },
          {
            "text": "      // 年月を取得（最初の日付から）",
            "lineNumber": 2898
          },
          {
            "text": "      const firstDate = this.attendanceData[0].date",
            "lineNumber": 2899
          },
          {
            "text": "      const [year, month] = firstDate.split('-').map(Number)",
            "lineNumber": 2900
          },
          {
            "text": "      ",
            "lineNumber": 2901
          },
          {
            "text": "      // その日付までの実労働時間の合計を計算",
            "lineNumber": 2902
          },
          {
            "text": "      let totalWorkHours = 0",
            "lineNumber": 2903
          },
          {
            "text": "      for (const day of this.attendanceData) {",
            "lineNumber": 2904
          },
          {
            "text": "        if (day.date &gt; cutoffDateStr) break",
            "lineNumber": 2905
          },
          {
            "text": "        if (day.clockIn &amp;&amp; day.clockOut &amp;&amp; day.actualWorkHours) {",
            "lineNumber": 2906
          },
          {
            "text": "          totalWorkHours += parseFloat(day.actualWorkHours) || 0",
            "lineNumber": 2907
          },
          {
            "text": "        }",
            "lineNumber": 2908
          },
          {
            "text": "      }",
            "lineNumber": 2909
          },
          {
            "text": "      ",
            "lineNumber": 2910
          },
          {
            "text": "      // その日付までの所定出勤日数を計算",
            "lineNumber": 2911
          },
          {
            "text": "      const scheduledWorkDaysUntilCutoff = this.getScheduledWorkDaysUntilDate(year, month, cutoffDateStr)",
            "lineNumber": 2912
          },
          {
            "text": "      ",
            "lineNumber": 2913
          },
          {
            "text": "      // 所定労働時間（7.5時間/日 × 所定出勤日数）",
            "lineNumber": 2914
          },
          {
            "text": "      const scheduledWorkHoursUntilCutoff = scheduledWorkDaysUntilCutoff * 7.5",
            "lineNumber": 2915
          },
          {
            "text": "      ",
            "lineNumber": 2916
          },
          {
            "text": "      return { totalWorkHours, scheduledWorkHoursUntilCutoff }",
            "lineNumber": 2917
          },
          {
            "text": "    },",
            "lineNumber": 2918
          },
          {
            "text": "    ",
            "lineNumber": 2919
          },
          {
            "text": "    // ツールチップ: 法定時間内残業を表示するかどうか",
            "lineNumber": 2920
          },
          {
            "text": "    shouldShowMonthlyWithinLegalOvertime(day) {",
            "lineNumber": 2921
          },
          {
            "text": "      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {",
            "lineNumber": 2922
          },
          {
            "text": "        return false",
            "lineNumber": 2923
          },
          {
            "text": "      }",
            "lineNumber": 2924
          },
          {
            "text": "      ",
            "lineNumber": 2925
          },
          {
            "text": "      const { withinLegalOvertime } = this.calculateDailyWorkHourBreakdown(day)",
            "lineNumber": 2926
          },
          {
            "text": "      // 浮動小数点数の誤差を考慮して、分単位で判定（1分以上の場合のみ表示）",
            "lineNumber": 2927
          },
          {
            "text": "      return Math.round(withinLegalOvertime * 60) &gt;= 1",
            "lineNumber": 2928
          },
          {
            "text": "    },",
            "lineNumber": 2929
          },
          {
            "text": "    ",
            "lineNumber": 2930
          },
          {
            "text": "    // ツールチップ: 法定時間外残業を表示するかどうか",
            "lineNumber": 2931
          },
          {
            "text": "    shouldShowMonthlyOverLegalOvertime(day) {",
            "lineNumber": 2932
          },
          {
            "text": "      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {",
            "lineNumber": 2933
          },
          {
            "text": "        ",
            "lineNumber": 2934
          }
        ]
      },
      "score": 0.2420327067375183
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 996
          },
          "endPosition": {
            "line": 1080
          }
        },
        "contents": "export default {\n  name: 'AttendanceApplicationDialog',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    targetDate: {\n      type: String,\n      required: true\n    },\n    employeeId: {\n      type: String,\n      required: true\n    },\n    initialApplicationType: {\n      type: String,\n      default: null\n    },\n    initialApplicationStatus: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      currentTab: 'menu',\n      activeApplicationTab: null,\n      loading: false,\n      showErrorDialog: false,\n      errorMessage: '',\n      \n      // 休暇種別マスタ\n      vacationTypes: [],\n      paidLeaveBalance: 0,\n      // 休日出勤申請状態\n      hasHolidayWorkApplication: false,\n      // 代休取得可能日数\n      compensatoryLeaveBalance: 0,\n      \n      // 勤怠データ（打刻時刻の状態確認用）\n      attendanceData: null,\n      \n      // 打刻時刻の状態\n      hasClockIn: false,\n      hasClockOut: false,\n      \n      // 選択中のメニュー項目\n      selectedMenuItem: 'dailyConfirmation',\n      \n      // 日次確定申請フォーム\n      dailyConfirmationForm: {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      },\n      // 日次確定申請のエラーメッセージ\n      dailyConfirmationError: '',\n      \n      // 休暇申請フォーム\n      vacationForm: {\n        vacationType: '',\n        startDate: '',\n        endDate: '',\n        enableEndDate: false, // 終了日を有効にするかどうか（初期値はfalse）\n        reason: '',\n        contact: ''\n      },\n      \n      // 休日出勤申請フォーム\n      holidayWorkForm: {\n        startTime: '09:00',\n        endTime: '17:30',\n        breakHours: 1.0, // 時間単位（小数）\n        reason: ''\n      },\n      \n      // 残業申請フォーム\n      overtimeForm: {\n        startDate: '',\n        endDate: '',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "export default {",
            "lineNumber": 998
          },
          {
            "text": "  name: 'AttendanceApplicationDialog',",
            "lineNumber": 999
          },
          {
            "text": "  props: {",
            "lineNumber": 1000
          },
          {
            "text": "    visible: {",
            "lineNumber": 1001
          },
          {
            "text": "      type: Boolean,",
            "lineNumber": 1002
          },
          {
            "text": "      default: false",
            "lineNumber": 1003
          },
          {
            "text": "    },",
            "lineNumber": 1004
          },
          {
            "text": "    targetDate: {",
            "lineNumber": 1005
          },
          {
            "text": "      type: String,",
            "lineNumber": 1006
          },
          {
            "text": "      required: true",
            "lineNumber": 1007
          },
          {
            "text": "    },",
            "lineNumber": 1008
          },
          {
            "text": "    employeeId: {",
            "lineNumber": 1009
          },
          {
            "text": "      type: String,",
            "lineNumber": 1010
          },
          {
            "text": "      required: true",
            "lineNumber": 1011
          },
          {
            "text": "    },",
            "lineNumber": 1012
          },
          {
            "text": "    initialApplicationType: {",
            "lineNumber": 1013
          },
          {
            "text": "      type: String,",
            "lineNumber": 1014
          },
          {
            "text": "      default: null",
            "lineNumber": 1015
          },
          {
            "text": "    },",
            "lineNumber": 1016
          },
          {
            "text": "    initialApplicationStatus: {",
            "lineNumber": 1017
          },
          {
            "text": "      type: String,",
            "lineNumber": 1018
          },
          {
            "text": "      default: null",
            "lineNumber": 1019
          },
          {
            "text": "    }",
            "lineNumber": 1020
          },
          {
            "text": "  },",
            "lineNumber": 1021
          },
          {
            "text": "  data() {",
            "lineNumber": 1022
          },
          {
            "text": "    return {",
            "lineNumber": 1023
          },
          {
            "text": "      currentTab: 'menu',",
            "lineNumber": 1024
          },
          {
            "text": "      activeApplicationTab: null,",
            "lineNumber": 1025
          },
          {
            "text": "      loading: false,",
            "lineNumber": 1026
          },
          {
            "text": "      showErrorDialog: false,",
            "lineNumber": 1027
          },
          {
            "text": "      errorMessage: '',",
            "lineNumber": 1028
          },
          {
            "text": "      ",
            "lineNumber": 1029
          },
          {
            "text": "      // 休暇種別マスタ",
            "lineNumber": 1030
          },
          {
            "text": "      vacationTypes: [],",
            "lineNumber": 1031
          },
          {
            "text": "      paidLeaveBalance: 0,",
            "lineNumber": 1032
          },
          {
            "text": "      // 休日出勤申請状態",
            "lineNumber": 1033
          },
          {
            "text": "      hasHolidayWorkApplication: false,",
            "lineNumber": 1034
          },
          {
            "text": "      // 代休取得可能日数",
            "lineNumber": 1035
          },
          {
            "text": "      compensatoryLeaveBalance: 0,",
            "lineNumber": 1036
          },
          {
            "text": "      ",
            "lineNumber": 1037
          },
          {
            "text": "      // 勤怠データ（打刻時刻の状態確認用）",
            "lineNumber": 1038
          },
          {
            "text": "      attendanceData: null,",
            "lineNumber": 1039
          },
          {
            "text": "      ",
            "lineNumber": 1040
          },
          {
            "text": "      // 打刻時刻の状態",
            "lineNumber": 1041
          },
          {
            "text": "      hasClockIn: false,",
            "lineNumber": 1042
          },
          {
            "text": "      hasClockOut: false,",
            "lineNumber": 1043
          },
          {
            "text": "      ",
            "lineNumber": 1044
          },
          {
            "text": "      // 選択中のメニュー項目",
            "lineNumber": 1045
          },
          {
            "text": "      selectedMenuItem: 'dailyConfirmation',",
            "lineNumber": 1046
          },
          {
            "text": "      ",
            "lineNumber": 1047
          },
          {
            "text": "      // 日次確定申請フォーム",
            "lineNumber": 1048
          },
          {
            "text": "      dailyConfirmationForm: {",
            "lineNumber": 1049
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 1050
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 1051
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 1052
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 1053
          },
          {
            "text": "        remark: ''",
            "lineNumber": 1054
          },
          {
            "text": "      },",
            "lineNumber": 1055
          },
          {
            "text": "      // 日次確定申請のエラーメッセージ",
            "lineNumber": 1056
          },
          {
            "text": "      dailyConfirmationError: '',",
            "lineNumber": 1057
          },
          {
            "text": "      ",
            "lineNumber": 1058
          },
          {
            "text": "      // 休暇申請フォーム",
            "lineNumber": 1059
          },
          {
            "text": "      vacationForm: {",
            "lineNumber": 1060
          },
          {
            "text": "        vacationType: '',",
            "lineNumber": 1061
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 1062
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 1063
          },
          {
            "text": "        enableEndDate: false, // 終了日を有効にするかどうか（初期値はfalse）",
            "lineNumber": 1064
          },
          {
            "text": "        reason: '',",
            "lineNumber": 1065
          },
          {
            "text": "        contact: ''",
            "lineNumber": 1066
          },
          {
            "text": "      },",
            "lineNumber": 1067
          },
          {
            "text": "      ",
            "lineNumber": 1068
          },
          {
            "text": "      // 休日出勤申請フォーム",
            "lineNumber": 1069
          },
          {
            "text": "      holidayWorkForm: {",
            "lineNumber": 1070
          },
          {
            "text": "        startTime: '09:00',",
            "lineNumber": 1071
          },
          {
            "text": "        endTime: '17:30',",
            "lineNumber": 1072
          },
          {
            "text": "        breakHours: 1.0, // 時間単位（小数）",
            "lineNumber": 1073
          },
          {
            "text": "        reason: ''",
            "lineNumber": 1074
          },
          {
            "text": "      },",
            "lineNumber": 1075
          },
          {
            "text": "      ",
            "lineNumber": 1076
          },
          {
            "text": "      // 残業申請フォーム",
            "lineNumber": 1077
          },
          {
            "text": "      overtimeForm: {",
            "lineNumber": 1078
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 1079
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 1080
          }
        ]
      },
      "score": 0.2396458387374878
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 1550
          },
          "endPosition": {
            "line": 1587,
            "column": 8
          }
        },
        "contents": "    \n    async loadCompensatoryLeaveBalance() {\n      try {\n        // 代休取得可能日数は、承認済みまたは申請中の休日出勤申請の日数をカウント\n        // 対象日から過去1年間の休日出勤申請を取得\n        const oneYearAgo = new Date(this.targetDate);\n        oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);\n        const oneYearAgoStr = oneYearAgo.toISOString().split('T')[0];\n        \n        const response = await fetch(\n          &#96;http://localhost:3000/api/application/holiday-work-list?employeeId=${this.employeeId}&amp;startDate=${oneYearAgoStr}&amp;endDate=${this.targetDate}&#96;\n        );\n        const data = await response.json();\n        \n        if (data.success &amp;&amp; data.applications) {\n          // 承認済みまたは申請中の休日出勤申請の日数をカウント\n          let totalDays = 0;\n          for (const app of data.applications) {\n            if (app.APPROVAL_STATUS === 'PENDING' || app.APPROVAL_STATUS === 'APPROVED') {\n              const startDate = new Date(app.TARGET_START_DATE);\n              const endDate = new Date(app.TARGET_END_DATE);\n              const days = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\n              totalDays += days;\n            }\n          }\n          this.compensatoryLeaveBalance = totalDays;\n        } else {\n          this.compensatoryLeaveBalance = 0;\n        }\n      } catch (error) {\n        console.error('代休取得可能日数取得エラー:', error)\n        this.compensatoryLeaveBalance = 0\n      }\n    },\n    \n    async loadClockStatus() {\n      try {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    ",
            "lineNumber": 1551
          },
          {
            "text": "    async loadCompensatoryLeaveBalance() {",
            "lineNumber": 1552
          },
          {
            "text": "      try {",
            "lineNumber": 1553
          },
          {
            "text": "        // 代休取得可能日数は、承認済みまたは申請中の休日出勤申請の日数をカウント",
            "lineNumber": 1554
          },
          {
            "text": "        // 対象日から過去1年間の休日出勤申請を取得",
            "lineNumber": 1555
          },
          {
            "text": "        const oneYearAgo = new Date(this.targetDate);",
            "lineNumber": 1556
          },
          {
            "text": "        oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);",
            "lineNumber": 1557
          },
          {
            "text": "        const oneYearAgoStr = oneYearAgo.toISOString().split('T')[0];",
            "lineNumber": 1558
          },
          {
            "text": "        ",
            "lineNumber": 1559
          },
          {
            "text": "        const response = await fetch(",
            "lineNumber": 1560
          },
          {
            "text": "          &#96;http://localhost:3000/api/application/holiday-work-list?employeeId=${this.employeeId}&amp;startDate=${oneYearAgoStr}&amp;endDate=${this.targetDate}&#96;",
            "lineNumber": 1561
          },
          {
            "text": "        );",
            "lineNumber": 1562
          },
          {
            "text": "        const data = await response.json();",
            "lineNumber": 1563
          },
          {
            "text": "        ",
            "lineNumber": 1564
          },
          {
            "text": "        if (data.success &amp;&amp; data.applications) {",
            "lineNumber": 1565
          },
          {
            "text": "          // 承認済みまたは申請中の休日出勤申請の日数をカウント",
            "lineNumber": 1566
          },
          {
            "text": "          let totalDays = 0;",
            "lineNumber": 1567
          },
          {
            "text": "          for (const app of data.applications) {",
            "lineNumber": 1568
          },
          {
            "text": "            if (app.APPROVAL_STATUS === 'PENDING' || app.APPROVAL_STATUS === 'APPROVED') {",
            "lineNumber": 1569
          },
          {
            "text": "              const startDate = new Date(app.TARGET_START_DATE);",
            "lineNumber": 1570
          },
          {
            "text": "              const endDate = new Date(app.TARGET_END_DATE);",
            "lineNumber": 1571
          },
          {
            "text": "              const days = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;",
            "lineNumber": 1572
          },
          {
            "text": "              totalDays += days;",
            "lineNumber": 1573
          },
          {
            "text": "            }",
            "lineNumber": 1574
          },
          {
            "text": "          }",
            "lineNumber": 1575
          },
          {
            "text": "          this.compensatoryLeaveBalance = totalDays;",
            "lineNumber": 1576
          },
          {
            "text": "        } else {",
            "lineNumber": 1577
          },
          {
            "text": "          this.compensatoryLeaveBalance = 0;",
            "lineNumber": 1578
          },
          {
            "text": "        }",
            "lineNumber": 1579
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 1580
          },
          {
            "text": "        console.error('代休取得可能日数取得エラー:', error)",
            "lineNumber": 1581
          },
          {
            "text": "        this.compensatoryLeaveBalance = 0",
            "lineNumber": 1582
          },
          {
            "text": "      }",
            "lineNumber": 1583
          },
          {
            "text": "    },",
            "lineNumber": 1584
          },
          {
            "text": "    ",
            "lineNumber": 1585
          },
          {
            "text": "    async loadClockStatus() {",
            "lineNumber": 1586
          },
          {
            "text": "      try {",
            "lineNumber": 1587
          },
          {
            "text": "        ",
            "lineNumber": 1588
          }
        ]
      },
      "score": 0.23951099812984467
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 375
          },
          "endPosition": {
            "line": 420
          }
        },
        "contents": "    async fetchTodayAttendance() {\n      try {\n        const employeeId = localStorage.getItem('employeeId') || '000001'\n        const response = await fetch(&#96;http://localhost:3000/api/clock/today?employeeId=${employeeId}&#96;)\n        const data = await response.json()\n        \n        if (data.success &amp;&amp; data.attendance) {\n          const attendance = data.attendance\n          this.attendanceRecordId = attendance.attendanceId\n          this.isClockInDone = attendance.clockInTime !== null\n          this.isClockOutDone = attendance.clockOutTime !== null\n          this.isOnBreak = attendance.isOnBreak || false\n          // 勤務場所は初回表示時のみ設定（ユーザーの選択を上書きしない）\n          // バックエンドのコードをフロントエンド形式に変換\n          if (!this.selectedWorkplace &amp;&amp; attendance.workLocationCode) {\n            const codeMap = {\n              'COMMUTE': 'commute',\n              'REMOTE': 'home',\n              'DIRECT': 'direct',\n              'BUSINESS_TRIP': 'business'\n            }\n            this.selectedWorkplace = codeMap[attendance.workLocationCode] || null\n          }\n        } else {\n          // 当日の勤怠記録がない場合は初期状態\n          this.attendanceRecordId = null\n          this.isClockInDone = false\n          this.isClockOutDone = false\n          this.isOnBreak = false\n          // 勤務場所はユーザーの選択を維持\n        }\n      } catch (error) {\n        console.error('当日の勤怠情報の取得に失敗しました:', error)\n        // エラー時は初期状態を設定\n        this.attendanceRecordId = null\n        this.isClockInDone = false\n        this.isClockOutDone = false\n        this.isOnBreak = false\n        // 勤務場所はユーザーの選択を維持\n      }\n    },\n    \n    // 休日出勤申請状態の取得\n    async fetchHolidayWorkStatus() {\n      // 当日が土日祝の場合のみ取得",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    async fetchTodayAttendance() {",
            "lineNumber": 376
          },
          {
            "text": "      try {",
            "lineNumber": 377
          },
          {
            "text": "        const employeeId = localStorage.getItem('employeeId') || '000001'",
            "lineNumber": 378
          },
          {
            "text": "        const response = await fetch(&#96;http://localhost:3000/api/clock/today?employeeId=${employeeId}&#96;)",
            "lineNumber": 379
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 380
          },
          {
            "text": "        ",
            "lineNumber": 381
          },
          {
            "text": "        if (data.success &amp;&amp; data.attendance) {",
            "lineNumber": 382
          },
          {
            "text": "          const attendance = data.attendance",
            "lineNumber": 383
          },
          {
            "text": "          this.attendanceRecordId = attendance.attendanceId",
            "lineNumber": 384
          },
          {
            "text": "          this.isClockInDone = attendance.clockInTime !== null",
            "lineNumber": 385
          },
          {
            "text": "          this.isClockOutDone = attendance.clockOutTime !== null",
            "lineNumber": 386
          },
          {
            "text": "          this.isOnBreak = attendance.isOnBreak || false",
            "lineNumber": 387
          },
          {
            "text": "          // 勤務場所は初回表示時のみ設定（ユーザーの選択を上書きしない）",
            "lineNumber": 388
          },
          {
            "text": "          // バックエンドのコードをフロントエンド形式に変換",
            "lineNumber": 389
          },
          {
            "text": "          if (!this.selectedWorkplace &amp;&amp; attendance.workLocationCode) {",
            "lineNumber": 390
          },
          {
            "text": "            const codeMap = {",
            "lineNumber": 391
          },
          {
            "text": "              'COMMUTE': 'commute',",
            "lineNumber": 392
          },
          {
            "text": "              'REMOTE': 'home',",
            "lineNumber": 393
          },
          {
            "text": "              'DIRECT': 'direct',",
            "lineNumber": 394
          },
          {
            "text": "              'BUSINESS_TRIP': 'business'",
            "lineNumber": 395
          },
          {
            "text": "            }",
            "lineNumber": 396
          },
          {
            "text": "            this.selectedWorkplace = codeMap[attendance.workLocationCode] || null",
            "lineNumber": 397
          },
          {
            "text": "          }",
            "lineNumber": 398
          },
          {
            "text": "        } else {",
            "lineNumber": 399
          },
          {
            "text": "          // 当日の勤怠記録がない場合は初期状態",
            "lineNumber": 400
          },
          {
            "text": "          this.attendanceRecordId = null",
            "lineNumber": 401
          },
          {
            "text": "          this.isClockInDone = false",
            "lineNumber": 402
          },
          {
            "text": "          this.isClockOutDone = false",
            "lineNumber": 403
          },
          {
            "text": "          this.isOnBreak = false",
            "lineNumber": 404
          },
          {
            "text": "          // 勤務場所はユーザーの選択を維持",
            "lineNumber": 405
          },
          {
            "text": "        }",
            "lineNumber": 406
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 407
          },
          {
            "text": "        console.error('当日の勤怠情報の取得に失敗しました:', error)",
            "lineNumber": 408
          },
          {
            "text": "        // エラー時は初期状態を設定",
            "lineNumber": 409
          },
          {
            "text": "        this.attendanceRecordId = null",
            "lineNumber": 410
          },
          {
            "text": "        this.isClockInDone = false",
            "lineNumber": 411
          },
          {
            "text": "        this.isClockOutDone = false",
            "lineNumber": 412
          },
          {
            "text": "        this.isOnBreak = false",
            "lineNumber": 413
          },
          {
            "text": "        // 勤務場所はユーザーの選択を維持",
            "lineNumber": 414
          },
          {
            "text": "      }",
            "lineNumber": 415
          },
          {
            "text": "    },",
            "lineNumber": 416
          },
          {
            "text": "    ",
            "lineNumber": 417
          },
          {
            "text": "    // 休日出勤申請状態の取得",
            "lineNumber": 418
          },
          {
            "text": "    async fetchHolidayWorkStatus() {",
            "lineNumber": 419
          },
          {
            "text": "      // 当日が土日祝の場合のみ取得",
            "lineNumber": 420
          }
        ]
      },
      "score": 0.23690545558929443
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2985
          },
          "endPosition": {
            "line": 3036
          }
        },
        "contents": "      if (totalWorkHours &gt; scheduledWorkHours) {\n        // 実労働時間が月全体の所定労働時間を超えている\n        const overtimeHours = totalWorkHours - scheduledWorkHours\n        \n        // 法定時間内残業: 超過分のうち、月全体の法定労働時間以内の部分\n        // 上限: (月全体の所定出勤日数 * 8:00) - 月全体の所定労働時間\n        const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours\n        withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime)\n        \n        // 法定時間外残業: 実労働時間が月全体の法定労働時間を超えた部分\n        if (totalWorkHours &gt; legalWorkHours) {\n          overLegalOvertime = totalWorkHours - legalWorkHours\n        }\n      }\n      \n      return { withinLegalOvertime, overLegalOvertime }\n    },\n    \n    // 月全体の所定出勤日数を計算\n    getScheduledWorkDaysForMonth(year, month) {\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      let scheduledWorkDays = 0\n      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        \n        // 土日を除外\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\n          continue\n        }\n        \n        // 祝日を除外\n        try {\n          if (HolidayJp.isHoliday(date)) {\n            continue\n          }\n        } catch (error) {\n          // 祝日判定でエラーが発生した場合は、平日として扱う\n          console.error('祝日判定エラー:', error)\n        }\n        \n        scheduledWorkDays++\n      }\n      \n      return scheduledWorkDays\n    },\n    \n    // その日付までの所定出勤日数を計算\n    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {\n      const cutoffDate = new Date(cutoffDateStr)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      if (totalWorkHours &gt; scheduledWorkHours) {",
            "lineNumber": 2986
          },
          {
            "text": "        // 実労働時間が月全体の所定労働時間を超えている",
            "lineNumber": 2987
          },
          {
            "text": "        const overtimeHours = totalWorkHours - scheduledWorkHours",
            "lineNumber": 2988
          },
          {
            "text": "        ",
            "lineNumber": 2989
          },
          {
            "text": "        // 法定時間内残業: 超過分のうち、月全体の法定労働時間以内の部分",
            "lineNumber": 2990
          },
          {
            "text": "        // 上限: (月全体の所定出勤日数 * 8:00) - 月全体の所定労働時間",
            "lineNumber": 2991
          },
          {
            "text": "        const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours",
            "lineNumber": 2992
          },
          {
            "text": "        withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime)",
            "lineNumber": 2993
          },
          {
            "text": "        ",
            "lineNumber": 2994
          },
          {
            "text": "        // 法定時間外残業: 実労働時間が月全体の法定労働時間を超えた部分",
            "lineNumber": 2995
          },
          {
            "text": "        if (totalWorkHours &gt; legalWorkHours) {",
            "lineNumber": 2996
          },
          {
            "text": "          overLegalOvertime = totalWorkHours - legalWorkHours",
            "lineNumber": 2997
          },
          {
            "text": "        }",
            "lineNumber": 2998
          },
          {
            "text": "      }",
            "lineNumber": 2999
          },
          {
            "text": "      ",
            "lineNumber": 3000
          },
          {
            "text": "      return { withinLegalOvertime, overLegalOvertime }",
            "lineNumber": 3001
          },
          {
            "text": "    },",
            "lineNumber": 3002
          },
          {
            "text": "    ",
            "lineNumber": 3003
          },
          {
            "text": "    // 月全体の所定出勤日数を計算",
            "lineNumber": 3004
          },
          {
            "text": "    getScheduledWorkDaysForMonth(year, month) {",
            "lineNumber": 3005
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 3006
          },
          {
            "text": "      ",
            "lineNumber": 3007
          },
          {
            "text": "      let scheduledWorkDays = 0",
            "lineNumber": 3008
          },
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 3009
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 3010
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 3011
          },
          {
            "text": "        ",
            "lineNumber": 3012
          },
          {
            "text": "        // 土日を除外",
            "lineNumber": 3013
          },
          {
            "text": "        if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 3014
          },
          {
            "text": "          continue",
            "lineNumber": 3015
          },
          {
            "text": "        }",
            "lineNumber": 3016
          },
          {
            "text": "        ",
            "lineNumber": 3017
          },
          {
            "text": "        // 祝日を除外",
            "lineNumber": 3018
          },
          {
            "text": "        try {",
            "lineNumber": 3019
          },
          {
            "text": "          if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 3020
          },
          {
            "text": "            continue",
            "lineNumber": 3021
          },
          {
            "text": "          }",
            "lineNumber": 3022
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 3023
          },
          {
            "text": "          // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 3024
          },
          {
            "text": "          console.error('祝日判定エラー:', error)",
            "lineNumber": 3025
          },
          {
            "text": "        }",
            "lineNumber": 3026
          },
          {
            "text": "        ",
            "lineNumber": 3027
          },
          {
            "text": "        scheduledWorkDays++",
            "lineNumber": 3028
          },
          {
            "text": "      }",
            "lineNumber": 3029
          },
          {
            "text": "      ",
            "lineNumber": 3030
          },
          {
            "text": "      return scheduledWorkDays",
            "lineNumber": 3031
          },
          {
            "text": "    },",
            "lineNumber": 3032
          },
          {
            "text": "    ",
            "lineNumber": 3033
          },
          {
            "text": "    // その日付までの所定出勤日数を計算",
            "lineNumber": 3034
          },
          {
            "text": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {",
            "lineNumber": 3035
          },
          {
            "text": "      const cutoffDate = new Date(cutoffDateStr)",
            "lineNumber": 3036
          }
        ]
      },
      "score": 0.2363174557685852
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceInputDialog.vue",
        "range": {
          "startPosition": {
            "line": 535
          },
          "endPosition": {
            "line": 586
          }
        },
        "contents": "    // 勤務場所マスタ取得\n    async loadWorkLocations() {\n      try {\n        const response = await getWorkLocations()\n        if (response.success &amp;&amp; response.workLocations) {\n          this.workLocations = response.workLocations.map(loc =&gt; ({\n            code: loc.WORK_LOCATION_CODE,\n            name: loc.WORK_LOCATION_NAME\n          }))\n        }\n      } catch (error) {\n        console.error('勤務場所マスタ取得エラー:', error)\n        // フォールバック（ホーム画面と同じ4種類）\n        this.workLocations = [\n          { code: 'COMMUTE', name: '通勤' },\n          { code: 'REMOTE', name: '在宅' },\n          { code: 'DIRECT', name: '直行、直帰、直行直帰' },\n          { code: 'BUSINESS_TRIP', name: '出張' }\n        ]\n      }\n    },\n    \n    // 日次勤務データ取得\n    async loadDailyData() {\n      try {\n        // 現在のフォームの値をバックアップ（初期データを保持）\n        const currentForm = JSON.parse(JSON.stringify(this.form))\n        \n        const response = await getDailyAttendance(this.employeeId, this.targetDate)\n        \n        if (response.success &amp;&amp; response.attendance) {\n          const data = response.attendance\n          \n          // 勤怠データを保存（打刻時刻の状態確認用）\n          this.attendanceData = data\n          \n          // 時刻のフォーマット（HH:MM形式）\n          const formatTime = (datetime) =&gt; {\n            if (!datetime) return null\n            // datetimeが文字列の場合とDateオブジェクトの場合に対応\n            let date = datetime\n\n            if (typeof datetime === 'string') {\n              date = new Date(datetime)\n            }\n            if (isNaN(date.getTime())) return null\n            const hours = date.getHours()\n            const minutes = String(date.getMinutes()).padStart(2, '0')\n            return &#96;${hours}:${minutes}&#96;\n          }\n          ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    // 勤務場所マスタ取得",
            "lineNumber": 536
          },
          {
            "text": "    async loadWorkLocations() {",
            "lineNumber": 537
          },
          {
            "text": "      try {",
            "lineNumber": 538
          },
          {
            "text": "        const response = await getWorkLocations()",
            "lineNumber": 539
          },
          {
            "text": "        if (response.success &amp;&amp; response.workLocations) {",
            "lineNumber": 540
          },
          {
            "text": "          this.workLocations = response.workLocations.map(loc =&gt; ({",
            "lineNumber": 541
          },
          {
            "text": "            code: loc.WORK_LOCATION_CODE,",
            "lineNumber": 542
          },
          {
            "text": "            name: loc.WORK_LOCATION_NAME",
            "lineNumber": 543
          },
          {
            "text": "          }))",
            "lineNumber": 544
          },
          {
            "text": "        }",
            "lineNumber": 545
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 546
          },
          {
            "text": "        console.error('勤務場所マスタ取得エラー:', error)",
            "lineNumber": 547
          },
          {
            "text": "        // フォールバック（ホーム画面と同じ4種類）",
            "lineNumber": 548
          },
          {
            "text": "        this.workLocations = [",
            "lineNumber": 549
          },
          {
            "text": "          { code: 'COMMUTE', name: '通勤' },",
            "lineNumber": 550
          },
          {
            "text": "          { code: 'REMOTE', name: '在宅' },",
            "lineNumber": 551
          },
          {
            "text": "          { code: 'DIRECT', name: '直行、直帰、直行直帰' },",
            "lineNumber": 552
          },
          {
            "text": "          { code: 'BUSINESS_TRIP', name: '出張' }",
            "lineNumber": 553
          },
          {
            "text": "        ]",
            "lineNumber": 554
          },
          {
            "text": "      }",
            "lineNumber": 555
          },
          {
            "text": "    },",
            "lineNumber": 556
          },
          {
            "text": "    ",
            "lineNumber": 557
          },
          {
            "text": "    // 日次勤務データ取得",
            "lineNumber": 558
          },
          {
            "text": "    async loadDailyData() {",
            "lineNumber": 559
          },
          {
            "text": "      try {",
            "lineNumber": 560
          },
          {
            "text": "        // 現在のフォームの値をバックアップ（初期データを保持）",
            "lineNumber": 561
          },
          {
            "text": "        const currentForm = JSON.parse(JSON.stringify(this.form))",
            "lineNumber": 562
          },
          {
            "text": "        ",
            "lineNumber": 563
          },
          {
            "text": "        const response = await getDailyAttendance(this.employeeId, this.targetDate)",
            "lineNumber": 564
          },
          {
            "text": "        ",
            "lineNumber": 565
          },
          {
            "text": "        if (response.success &amp;&amp; response.attendance) {",
            "lineNumber": 566
          },
          {
            "text": "          const data = response.attendance",
            "lineNumber": 567
          },
          {
            "text": "          ",
            "lineNumber": 568
          },
          {
            "text": "          // 勤怠データを保存（打刻時刻の状態確認用）",
            "lineNumber": 569
          },
          {
            "text": "          this.attendanceData = data",
            "lineNumber": 570
          },
          {
            "text": "          ",
            "lineNumber": 571
          },
          {
            "text": "          // 時刻のフォーマット（HH:MM形式）",
            "lineNumber": 572
          },
          {
            "text": "          const formatTime = (datetime) =&gt; {",
            "lineNumber": 573
          },
          {
            "text": "            if (!datetime) return null",
            "lineNumber": 574
          },
          {
            "text": "            // datetimeが文字列の場合とDateオブジェクトの場合に対応",
            "lineNumber": 575
          },
          {
            "text": "            let date = datetime",
            "lineNumber": 576
          },
          {
            "lineNumber": 577
          },
          {
            "text": "            if (typeof datetime === 'string') {",
            "lineNumber": 578
          },
          {
            "text": "              date = new Date(datetime)",
            "lineNumber": 579
          },
          {
            "text": "            }",
            "lineNumber": 580
          },
          {
            "text": "            if (isNaN(date.getTime())) return null",
            "lineNumber": 581
          },
          {
            "text": "            const hours = date.getHours()",
            "lineNumber": 582
          },
          {
            "text": "            const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 583
          },
          {
            "text": "            return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 584
          },
          {
            "text": "          }",
            "lineNumber": 585
          },
          {
            "text": "          ",
            "lineNumber": 586
          }
        ]
      },
      "score": 0.23630303144454956
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


カレンダー生成ロジックの共通化を進めます。まず、使用箇所を確認します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/TimesheetScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: frontend/src/views/MonthlySummaryScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="list_dir_v2">
<details>
<summary>Tool use: **list_dir_v2**</summary>


Parameters:

```json
{
  "targetDirectory": "frontend/src"
}
```
Result:

```json
{
  "directoryTreeRoot": {
    "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src",
    "childrenDirs": [
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\components",
        "childrenDirs": [
          {
            "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\components\\dialog",
            "childrenFiles": [
              {
                "name": "AttendanceApplicationDialog.vue"
              },
              {
                "name": "AttendanceInputDialog.vue"
              },
              {
                "name": "WorkHoursInputDialog.vue"
              }
            ],
            "childrenWereProcessed": true
          }
        ],
        "childrenFiles": [
          {
            "name": "AppHeader.vue"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\router",
        "childrenFiles": [
          {
            "name": "index.js"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\services",
        "childrenFiles": [
          {
            "name": "api.js"
          }
        ],
        "childrenWereProcessed": true
      },
      {
        "absPath": "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\frontend\\src\\views",
        "childrenFiles": [
          {
            "name": "EffortScreen.vue"
          },
          {
            "name": "HomeScreen.vue"
          },
          {
            "name": "LoginScreen.vue"
          },
          {
            "name": "MonthlySummaryScreen.vue"
          },
          {
            "name": "ReportScreen.vue"
          },
          {
            "name": "TimesheetScreen.vue"
          }
        ],
        "childrenWereProcessed": true
      }
    ],
    "childrenFiles": [
      {
        "name": "App.vue"
      },
      {
        "name": "main.js"
      }
    ],
    "childrenWereProcessed": true
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


共通化対象の機能を特定。フロントエンド用の日付ユーティリティを作成し、各コンポーネントで使用します。


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] フロントエンド用の日付ユーティリティファイル（dateUtils.js）を作成
- [ ] TimesheetScreen.vueで共通ユーティリティを使用するように修正
- [ ] MonthlySummaryScreen.vueで共通ユーティリティを使用するように修正

</details>
</tool-use>

---

Cancelled

---

