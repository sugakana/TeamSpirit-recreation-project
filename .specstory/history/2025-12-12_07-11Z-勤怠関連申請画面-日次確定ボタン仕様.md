<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session b047af7d-17ac-47c2-951b-a21470edfffe (2025-12-12 07:11Z) -->

# 勤怠関連申請画面 日次確定ボタン仕様 (2025-12-12 07:11Z)

_**User (2025-12-11 01:02Z)**_

勤怠関連申請画面の詳細設計書で日次確定ボタンの仕様はどうなっていますか

---

_**Agent (model composer-1, mode Agent)**_



---

勤怠関連申請画面の詳細設計書を確認し、日次確定ボタンの仕様を調べます。


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: docs/detailed-design/ui/attendance-application-screen.md</summary>

</details>
</tool-use>

---



---

詳細設計書の日次確定ボタンの仕様をまとめます。


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: docs/detailed-design/ui/attendance-application-screen.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: docs/detailed-design/ui/attendance-application-screen.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: docs/detailed-design/ui/attendance-application-screen.md</summary>

</details>
</tool-use>

---



---

詳細設計書の日次確定ボタンの仕様は以下の通りです。

## 日次確定ボタンの仕様

### 1. 基本仕様（画面項目定義 No.5）

```41:41:docs/detailed-design/ui/attendance-application-screen.md
| 5 | &nbsp;&nbsp;&nbsp;&nbsp;日次確定 | ボタン | | | | | | | 表示 | 条件付き活性 | | 日次確定申請を行うメニュー項目。対象日が休日（土曜日、日曜日、祝日）かつ休日出勤申請が未申請の場合、または出社と退社の両方の打刻時刻が未入力の場合、または出社の打刻時刻は入力されているが退社の打刻時刻が未入力の場合、非活性（押せない状態）。非活性時はボタンラベルの色が白（rgb(255, 255, 255)）になる |
```

- 種別: ボタン
- 表示: 常に表示
- 活性/非活性: 条件付き活性

### 2. 非活性になる条件

以下のいずれかに該当する場合、非活性（押せない状態）になります：

1. 対象日が休日（土曜日、日曜日、祝日）かつ休日出勤申請が未申請の場合
2. 出社と退社の両方の打刻時刻が未入力の場合
3. 出社の打刻時刻は入力されているが退社の打刻時刻が未入力の場合（勤務中）

非活性時は、ボタンラベルの色が白（rgb(255, 255, 255)）になります。

### 3. 承認申請ボタン押下時の処理

```217:241:docs/detailed-design/ui/attendance-application-screen.md
#### 名称：日次確定承認申請ボタン押下処理、英名：submitDailyConfirmation、処理タイミング：日次確定申請フォーム.承認申請ボタン.押下

1. 入力チェック
   - チェック仕様に従い、日次確定申請の入力チェックを行う。
   - 【チェック仕様 No.1（日次確定申請チェック）】
   
   - エラー処理
     1. エラーがある場合、備考欄の下に赤文字でエラーメッセージを表示する。
     2. エラーメッセージは、チェック仕様No.1で定義されたメッセージを表示する。
     3. エラーが解消されるまで、エラーメッセージは表示され続ける。
     4. エラーがある場合は、処理を終了する（API呼び出しは行わない）。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 日次確定申請
   - API利用仕様に従い、日次確定申請を行う。
   - 【API利用仕様 No.3（日次確定申請API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. ダイアログ閉じる
   - 申請成功後、ダイアログを閉じる。
   - 勤務表画面に戻り、該当日の申請状況アイコンが↑マークに更新される。
```

### 4. 申請条件

```807:812:docs/detailed-design/ui/attendance-application-screen.md
#### 申請条件
日次確定申請を行うには、以下の条件を満たす必要があります：
1. 出退社時刻が入力されていること
2. 勤務場所が設定されていること
3. 工数合計と実労働時間が一致していること
4. 手入力の場合は備考に理由が入力されていること
```

### 5. エラーメッセージ

```814:823:docs/detailed-design/ui/attendance-application-screen.md
#### エラーメッセージの表示
承認申請ボタンを押下した際にチェックエラーがある場合、備考欄の下に赤文字でエラーメッセージが表示されます。
エラーメッセージは、チェック仕様No.1で定義されたメッセージが表示されます。
主なエラーメッセージの例：
- 「出退社時刻が未入力のため、日次確定できません。」
- 「勤務場所を選択してください。」
- 「工数の合計と実労働時間が合いません。」
- 「手入力の場合は備考に理由を入力してください。」

エラーメッセージは、エラーが解消されるまで表示され続けます。
```

### 6. 申請後の動作

```825:828:docs/detailed-design/ui/attendance-application-screen.md
#### 申請後の動作
- 承認申請ボタンを押下すると、日次確定申請が送信されます
- 申請成功後、ATTENDANCE_RECORDテーブルのIS_DAILY_CONFIRMEDがTRUE、APPROVAL_STATUSがPENDINGに更新されます
- 勤務表画面に戻ると、該当日の日付列と申請列の+アイコンが↑マーク（申請中）に変更されます
```

以上が日次確定ボタンの仕様です。

---

