<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session a8249796-cae3-41e8-b0e0-31c33ace3166 (2025-12-15 04:00Z) -->

# SQL文の選択 (2025-12-15 04:00Z)

_**User**_

色々SQL文があるが、どれを実行すればよいかわからない。

---

_**Agent (model composer-1, mode Agent)**_



---


SQLファイルの内容を確認し、実行順序を整理します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\entities\mysql_table_design.sql</summary>

</details>
</tool-use>

---



---


このSQLファイルは、最初から最後まで全体を実行する前提で構成されています。実行順序と内容を整理します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\entities\mysql_table_design.sql</summary>

</details>
</tool-use>

---



---


このSQLファイルは、最初から最後まで全体を実行する前提です。実行順序と内容を整理します。

## 実行すべきSQLファイル

**`mysql_table_design.sql` を最初から最後まで全体を実行してください。**

## ファイルの構成と実行順序

このファイルは以下の順序で実行されます：

1. **データベース作成**（16-18行目）
   - 既存の`teamspirit_db`を削除して新規作成

2. **テーブル作成**（24-309行目）
   - マスタテーブル（EMPLOYEE、WORK_LOCATION、JOB_MASTER等）
   - トランザクションテーブル（ATTENDANCE_RECORD、BREAK_TIME等）

3. **マスタデータ投入**（315-373行目）
   - 勤務場所、休暇種別、ジョブ、従業員、休暇残日数、お知らせ等の初期データ

4. **サンプルデータ投入**（375-462行目）
   - 勤怠記録、休憩時間、工数実績、休暇取得履歴、月次勤怠等のサンプルデータ

5. **ビュー作成**（489-601行目）
   - 月次勤怠集計ビュー、工数実績集計ビュー等

6. **追加データ**（708-719行目）
   - 追加のジョブマスタと休暇種別データ

7. **データ移行**（735-747行目）
   - 既存データの移行処理

## 実行方法

MySQLクライアントで以下のように実行してください：

```bash
mysql -u [ユーザー名] -p < mysql_table_design.sql
```

または、MySQLクライアント内で：

```sql
source mysql_table_design.sql;
```

## 注意事項

- 既存の`teamspirit_db`データベースは削除されます
- ファイル全体を一度に実行してください（部分実行は非推奨）
- コメントアウトされたクエリ（607行目以降）は動作確認用で、実行不要です

このファイルを実行すれば、データベースの初期セットアップが完了します。

---

