<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 636e7c37-e071-49bd-89ba-12b9ae0a41f3 (2025-12-15 13:26Z) -->

# 日次確定チェックボックスの活性非活性仕様 (2025-12-15 13:26Z)

_**User**_

勤怠情報入力画面の日次確定をするのチェックボックスの活性非活性を勤怠関連申請画面の日次確定ボタンの仕様と同じようにしてください。
詳細設計書の修正と実装を反映させてください。
なお、勤怠関連申請画面の日次確定ボタンの仕様と同じようにするという書き方ではなくてちゃんと詳細を書いてください。
Sequential Thinking MCPを活用してください。

---

_**Agent (model composer-1, mode Agent)**_



---


Sequential Thinking MCPで整理し、両画面の日次確定の活性/非活性ロジックを確認中。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\components\Dialog\AttendanceApplicationDialog.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="mcp-sequential-thinking-user-sequential-thinking-sequentialthinking">
<details>
<summary>Tool use: **mcp-sequential-thinking-user-sequential-thinking-sequentialthinking**</summary>


Parameters:

```json
{
  "tools": [
    {
      "name": "sequentialthinking",
      "parameters": "{\"thought\":\"まず、勤怠関連申請画面（AttendanceApplicationDialog.vue）の日次確定ボタンの仕様を確認する必要があります。このボタンがどのような条件で活性/非活性になるのかを理解する必要があります。\",\"nextThoughtNeeded\":true,\"thoughtNumber\":1,\"totalThoughts\":8}",
      "serverName": "sequential-thinking"
    }
  ]
}
```
Additional data:

```json
{
  "status": "success",
  "reviewData": {
    "status": "None",
    "selectedOption": "rejectAndTellWhatToDoDifferently",
    "isShowingInput": false
  }
}
```
Result:

```json
{
  "result": "{\"content\":[{\"type\":\"text\",\"text\":\"{\\n  \\\"thoughtNumber\\\": 1,\\n  \\\"totalThoughts\\\": 8,\\n  \\\"nextThoughtNeeded\\\": true,\\n  \\\"branches\\\": [],\\n  \\\"thoughtHistoryLength\\\": 17\\n}\"}]}"
}
```
User decision: **accepted**

Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\components\dialog\AttendanceInputDialog.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "詳細設計書 日次確定 勤怠",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {
            "line": 531,
            "column": 2
          },
          "endPosition": {
            "line": 600,
            "column": 3
          }
        },
        "contents": "/**\n * 日次確定申請を行う。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;void&gt;}\n */\nconst confirmDailyAttendance = async (employeeId, workDate) =&gt; {\n  const attendance = await attendanceModel.getAttendanceDetail(employeeId, workDate);\n  \n  if (!attendance) {\n    throw new Error('勤怠記録が見つかりません。');\n  }\n\n  // バリデーション\n  const errors = [];\n\n  const hasClockIn = !!attendance.CLOCK_IN_TIME;\n  const hasClockOut = !!attendance.CLOCK_OUT_TIME;\n  \n  if (!hasClockIn &amp;&amp; !hasClockOut) {\n    errors.push('出退社時刻が未入力のため、日次確定できません。');\n  } else if (!hasClockIn) {\n    errors.push('出社時刻が未入力のため、日次確定できません。');\n  } else if (!hasClockOut) {\n    errors.push('退社時刻が未入力のため、日次確定できません。');\n  }\n  \n  if (!attendance.WORK_LOCATION_CODE) {\n    errors.push('勤務場所を選択してください');\n  }\n  \n  if ((attendance.CLOCK_IN_TYPE === 'MANUAL' || attendance.CLOCK_OUT_TYPE === 'MANUAL') &amp;&amp; !attendance.REMARK_TEXT) {\n    errors.push('手入力の場合は備考に理由を入力してください');\n  }\n  \n  const totalWorkHours = await workHoursModel.getTotalWorkHours(attendance.ATTENDANCE_ID);\n  const actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;\n\n  if (totalWorkHours === 0) {\n    errors.push('工数実績が入力されていません。');\n  }\n  \n  if (totalWorkHours &gt; 0 &amp;&amp; actualWorkHours &gt; 0 &amp;&amp; Math.abs(totalWorkHours - actualWorkHours) &gt; 0.01) {\n    errors.push('工数の合計と実労働時間が合いません。');\n  }\n  \n  if (errors.length &gt; 0) {\n    throw new Error(errors.join('\\n'));\n  }\n\n  // 日次確定を実行\n  const now = getNow();\n  await attendanceModel.updateAttendance(attendance.ATTENDANCE_ID, {\n    isDailyConfirmed: true,\n    dailyConfirmedAt: now,\n    approvalStatus: 'PENDING',\n    updatedAt: now\n  });\n};\n\n/**\n * 日次確定申請を取り消す。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;void&gt;}\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 534
          },
          {
            "text": " * 日次確定申請を行う。",
            "lineNumber": 535
          },
          {
            "text": " *",
            "lineNumber": 536
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 537
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 538
          },
          {
            "text": " * @returns {Promise&lt;void&gt;}",
            "lineNumber": 539
          },
          {
            "text": " */",
            "lineNumber": 540
          },
          {
            "text": "const confirmDailyAttendance = async (employeeId, workDate) =&gt; {",
            "lineNumber": 541
          },
          {
            "text": "  const attendance = await attendanceModel.getAttendanceDetail(employeeId, workDate);",
            "lineNumber": 542
          },
          {
            "text": "  ",
            "lineNumber": 543
          },
          {
            "text": "  if (!attendance) {",
            "lineNumber": 544
          },
          {
            "text": "    throw new Error('勤怠記録が見つかりません。');",
            "lineNumber": 545
          },
          {
            "text": "  }",
            "lineNumber": 546
          },
          {
            "lineNumber": 547
          },
          {
            "text": "  // バリデーション",
            "lineNumber": 548
          },
          {
            "text": "  const errors = [];",
            "lineNumber": 549
          },
          {
            "lineNumber": 550
          },
          {
            "text": "  const hasClockIn = !!attendance.CLOCK_IN_TIME;",
            "lineNumber": 551
          },
          {
            "text": "  const hasClockOut = !!attendance.CLOCK_OUT_TIME;",
            "lineNumber": 552
          },
          {
            "text": "  ",
            "lineNumber": 553
          },
          {
            "text": "  if (!hasClockIn &amp;&amp; !hasClockOut) {",
            "lineNumber": 554
          },
          {
            "text": "    errors.push('出退社時刻が未入力のため、日次確定できません。');",
            "lineNumber": 555
          },
          {
            "text": "  } else if (!hasClockIn) {",
            "lineNumber": 556
          },
          {
            "text": "    errors.push('出社時刻が未入力のため、日次確定できません。');",
            "lineNumber": 557
          },
          {
            "text": "  } else if (!hasClockOut) {",
            "lineNumber": 558
          },
          {
            "text": "    errors.push('退社時刻が未入力のため、日次確定できません。');",
            "lineNumber": 559
          },
          {
            "text": "  }",
            "lineNumber": 560
          },
          {
            "text": "  ",
            "lineNumber": 561
          },
          {
            "text": "  if (!attendance.WORK_LOCATION_CODE) {",
            "lineNumber": 562
          },
          {
            "text": "    errors.push('勤務場所を選択してください');",
            "lineNumber": 563
          },
          {
            "text": "  }",
            "lineNumber": 564
          },
          {
            "text": "  ",
            "lineNumber": 565
          },
          {
            "text": "  if ((attendance.CLOCK_IN_TYPE === 'MANUAL' || attendance.CLOCK_OUT_TYPE === 'MANUAL') &amp;&amp; !attendance.REMARK_TEXT) {",
            "lineNumber": 566
          },
          {
            "text": "    errors.push('手入力の場合は備考に理由を入力してください');",
            "lineNumber": 567
          },
          {
            "text": "  }",
            "lineNumber": 568
          },
          {
            "text": "  ",
            "lineNumber": 569
          },
          {
            "text": "  const totalWorkHours = await workHoursModel.getTotalWorkHours(attendance.ATTENDANCE_ID);",
            "lineNumber": 570
          },
          {
            "text": "  const actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;",
            "lineNumber": 571
          },
          {
            "lineNumber": 572
          },
          {
            "text": "  if (totalWorkHours === 0) {",
            "lineNumber": 573
          },
          {
            "text": "    errors.push('工数実績が入力されていません。');",
            "lineNumber": 574
          },
          {
            "text": "  }",
            "lineNumber": 575
          },
          {
            "text": "  ",
            "lineNumber": 576
          },
          {
            "text": "  if (totalWorkHours &gt; 0 &amp;&amp; actualWorkHours &gt; 0 &amp;&amp; Math.abs(totalWorkHours - actualWorkHours) &gt; 0.01) {",
            "lineNumber": 577
          },
          {
            "text": "    errors.push('工数の合計と実労働時間が合いません。');",
            "lineNumber": 578
          },
          {
            "text": "  }",
            "lineNumber": 579
          },
          {
            "text": "  ",
            "lineNumber": 580
          },
          {
            "text": "  if (errors.length &gt; 0) {",
            "lineNumber": 581
          },
          {
            "text": "    throw new Error(errors.join('\\n'));",
            "lineNumber": 582
          },
          {
            "text": "  }",
            "lineNumber": 583
          },
          {
            "lineNumber": 584
          },
          {
            "text": "  // 日次確定を実行",
            "lineNumber": 585
          },
          {
            "text": "  const now = getNow();",
            "lineNumber": 586
          },
          {
            "text": "  await attendanceModel.updateAttendance(attendance.ATTENDANCE_ID, {",
            "lineNumber": 587
          },
          {
            "text": "    isDailyConfirmed: true,",
            "lineNumber": 588
          },
          {
            "text": "    dailyConfirmedAt: now,",
            "lineNumber": 589
          },
          {
            "text": "    approvalStatus: 'PENDING',",
            "lineNumber": 590
          },
          {
            "text": "    updatedAt: now",
            "lineNumber": 591
          },
          {
            "text": "  });",
            "lineNumber": 592
          },
          {
            "text": "};",
            "lineNumber": 593
          },
          {
            "lineNumber": 594
          },
          {
            "text": "/**",
            "lineNumber": 595
          },
          {
            "text": " * 日次確定申請を取り消す。",
            "lineNumber": 596
          },
          {
            "text": " *",
            "lineNumber": 597
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 598
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 599
          },
          {
            "text": " * @returns {Promise&lt;void&gt;}",
            "lineNumber": 600
          },
          {
            "text": " */",
            "lineNumber": 601
          }
        ]
      },
      "score": 0.47570866346359253
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-input-dialog.md",
        "range": {
          "startPosition": {
            "line": 208
          },
          "endPosition": {
            "line": 242,
            "column": 5
          }
        },
        "contents": "1. 未来日付・勤務当日チェック\n   - チェック仕様に従い、未来日付・勤務当日チェックを行う。\n   - 【チェック仕様 No.4（未来日付・勤務当日チェック）】\n   \n   - エラー処理\n     1. エラー内容をエラーメッセージ表示エリア（グレーの四角形の左下）に表示させ、処理を終了する。\n     - 注意: 勤務場所のみの変更の場合は、未来日付・勤務当日でもエラーを表示しない。\n\n2. 入力チェック\n   - チェック仕様に従い、入力チェックを行う。\n   - 【チェック仕様 No.1（時刻入力チェック）】\n   - 【チェック仕様 No.2（時刻整合性チェック）】\n   - 【チェック仕様 No.5（休憩・公用外出入力時の出社・退社時刻チェック）】\n   \n   - エラー処理\n     1. エラー内容をエラーメッセージ表示エリア（グレーの四角形の左下）に表示させ、処理を終了する。\n\n3. 日次確定チェック（日次確定するチェックボックスがONの場合のみ）\n   - 画面項目定義.日次確定するチェックボックスがONの場合:\n     - チェック仕様に従い、日次確定のための事前チェックを行う。\n     - 【チェック仕様 No.3（日次確定事前チェック）】\n     \n     - エラー処理\n       1. エラーダイアログを表示する。\n       2. エラーダイアログにはエラーメッセージと「OK」ボタンを表示する。\n       3. 「OK」ボタン押下でエラーダイアログを閉じ、処理を終了する。\n\n4. 勤怠データ更新\n   - API利用仕様に従い、勤怠データを更新する。\n   - 【API利用仕様 No.3（勤怠データ更新API）】\n\n5. 日次確定処理\n   - 画面項目定義.日次確定するチェックボックスがONの場合:\n     ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "1. 未来日付・勤務当日チェック",
            "lineNumber": 210
          },
          {
            "text": "   - チェック仕様に従い、未来日付・勤務当日チェックを行う。",
            "lineNumber": 211
          },
          {
            "text": "   - 【チェック仕様 No.4（未来日付・勤務当日チェック）】",
            "lineNumber": 212
          },
          {
            "text": "   ",
            "lineNumber": 213
          },
          {
            "text": "   - エラー処理",
            "lineNumber": 214
          },
          {
            "text": "     1. エラー内容をエラーメッセージ表示エリア（グレーの四角形の左下）に表示させ、処理を終了する。",
            "lineNumber": 215
          },
          {
            "text": "     - 注意: 勤務場所のみの変更の場合は、未来日付・勤務当日でもエラーを表示しない。",
            "lineNumber": 216
          },
          {
            "lineNumber": 217
          },
          {
            "text": "2. 入力チェック",
            "lineNumber": 218
          },
          {
            "text": "   - チェック仕様に従い、入力チェックを行う。",
            "lineNumber": 219
          },
          {
            "text": "   - 【チェック仕様 No.1（時刻入力チェック）】",
            "lineNumber": 220
          },
          {
            "text": "   - 【チェック仕様 No.2（時刻整合性チェック）】",
            "lineNumber": 221
          },
          {
            "text": "   - 【チェック仕様 No.5（休憩・公用外出入力時の出社・退社時刻チェック）】",
            "lineNumber": 222
          },
          {
            "text": "   ",
            "lineNumber": 223
          },
          {
            "text": "   - エラー処理",
            "lineNumber": 224
          },
          {
            "text": "     1. エラー内容をエラーメッセージ表示エリア（グレーの四角形の左下）に表示させ、処理を終了する。",
            "lineNumber": 225
          },
          {
            "lineNumber": 226
          },
          {
            "text": "3. 日次確定チェック（日次確定するチェックボックスがONの場合のみ）",
            "lineNumber": 227
          },
          {
            "text": "   - 画面項目定義.日次確定するチェックボックスがONの場合:",
            "lineNumber": 228
          },
          {
            "text": "     - チェック仕様に従い、日次確定のための事前チェックを行う。",
            "lineNumber": 229
          },
          {
            "text": "     - 【チェック仕様 No.3（日次確定事前チェック）】",
            "lineNumber": 230
          },
          {
            "text": "     ",
            "lineNumber": 231
          },
          {
            "text": "     - エラー処理",
            "lineNumber": 232
          },
          {
            "text": "       1. エラーダイアログを表示する。",
            "lineNumber": 233
          },
          {
            "text": "       2. エラーダイアログにはエラーメッセージと「OK」ボタンを表示する。",
            "lineNumber": 234
          },
          {
            "text": "       3. 「OK」ボタン押下でエラーダイアログを閉じ、処理を終了する。",
            "lineNumber": 235
          },
          {
            "lineNumber": 236
          },
          {
            "text": "4. 勤怠データ更新",
            "lineNumber": 237
          },
          {
            "text": "   - API利用仕様に従い、勤怠データを更新する。",
            "lineNumber": 238
          },
          {
            "text": "   - 【API利用仕様 No.3（勤怠データ更新API）】",
            "lineNumber": 239
          },
          {
            "lineNumber": 240
          },
          {
            "text": "5. 日次確定処理",
            "lineNumber": 241
          },
          {
            "text": "   - 画面項目定義.日次確定するチェックボックスがONの場合:",
            "lineNumber": 242
          },
          {
            "text": "     ",
            "lineNumber": 243
          }
        ]
      },
      "score": 0.4369766116142273
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 518
          },
          "endPosition": {
            "line": 557
          }
        },
        "contents": "   \n3. 承認状態による表示制御\n   - APPROVAL_STATUS = PENDING（申請中）またはAPPROVED（承認済み）の場合:\n     - 備考入力欄: グレー背景、編集不可（disabled）\n     - ボタン: 「閉じる」ボタンのみ表示\n   - APPROVAL_STATUS = NOT_SUBMITTED（未申請）またはREJECTED（却下）の場合:\n     - 備考入力欄: 白色背景、編集可能\n     - ボタン: 「登録」ボタンと「キャンセル」ボタンを表示\n\n4. 登録ボタン押下時\n   - 備考内容をAPI経由で保存\n   - 【API利用仕様 No.5（勤怠記録更新API）】\n   - 保存成功後、ダイアログを閉じる\n   - 月間勤務データを再取得して画面を更新\n\n5. キャンセルボタン/閉じるボタン押下時\n   - 変更を保存せずダイアログを閉じる\n\n#### 名称：日次確定ボタン押下処理、英名：clickDailyConfirmButton、処理タイミング：勤務表テーブル.日次確定ボタン（+アイコン）.押下\n\n1. 日次確定チェック\n   - チェック仕様に従い、日次確定が可能かチェックする。\n   - 【チェック仕様 No.1（日次確定チェック）】\n\n   - エラー処理\n     1. エラー内容を「確認」ダイアログで表示する。\n     2. ダイアログにはエラーメッセージと「OK」ボタンを表示する。\n     3. 「OK」ボタン押下で処理を終了する。\n     \n     - エラーメッセージの例:\n       - 出退社時刻が未入力の場合: 「出退社時刻が未入力のため、日次確定できません。」\n       - 工数合計と実労働時間が一致しない場合: 「工数の合計と実労働時間が合いません」\n       - 勤務場所が未選択の場合: 「勤務場所を選択してください」\n\n2. ローディング表示開始\n   - ローディングマークを表示する。\n\n3. 日次確定申請\n   - API利用仕様に従い、日次確定申請を行う。",
        "signatures": {},
        "detailedLines": [
          {
            "text": "   ",
            "lineNumber": 519
          },
          {
            "text": "3. 承認状態による表示制御",
            "lineNumber": 520
          },
          {
            "text": "   - APPROVAL_STATUS = PENDING（申請中）またはAPPROVED（承認済み）の場合:",
            "lineNumber": 521
          },
          {
            "text": "     - 備考入力欄: グレー背景、編集不可（disabled）",
            "lineNumber": 522
          },
          {
            "text": "     - ボタン: 「閉じる」ボタンのみ表示",
            "lineNumber": 523
          },
          {
            "text": "   - APPROVAL_STATUS = NOT_SUBMITTED（未申請）またはREJECTED（却下）の場合:",
            "lineNumber": 524
          },
          {
            "text": "     - 備考入力欄: 白色背景、編集可能",
            "lineNumber": 525
          },
          {
            "text": "     - ボタン: 「登録」ボタンと「キャンセル」ボタンを表示",
            "lineNumber": 526
          },
          {
            "lineNumber": 527
          },
          {
            "text": "4. 登録ボタン押下時",
            "lineNumber": 528
          },
          {
            "text": "   - 備考内容をAPI経由で保存",
            "lineNumber": 529
          },
          {
            "text": "   - 【API利用仕様 No.5（勤怠記録更新API）】",
            "lineNumber": 530
          },
          {
            "text": "   - 保存成功後、ダイアログを閉じる",
            "lineNumber": 531
          },
          {
            "text": "   - 月間勤務データを再取得して画面を更新",
            "lineNumber": 532
          },
          {
            "lineNumber": 533
          },
          {
            "text": "5. キャンセルボタン/閉じるボタン押下時",
            "lineNumber": 534
          },
          {
            "text": "   - 変更を保存せずダイアログを閉じる",
            "lineNumber": 535
          },
          {
            "lineNumber": 536
          },
          {
            "text": "#### 名称：日次確定ボタン押下処理、英名：clickDailyConfirmButton、処理タイミング：勤務表テーブル.日次確定ボタン（+アイコン）.押下",
            "lineNumber": 537
          },
          {
            "lineNumber": 538
          },
          {
            "text": "1. 日次確定チェック",
            "lineNumber": 539
          },
          {
            "text": "   - チェック仕様に従い、日次確定が可能かチェックする。",
            "lineNumber": 540
          },
          {
            "text": "   - 【チェック仕様 No.1（日次確定チェック）】",
            "lineNumber": 541
          },
          {
            "lineNumber": 542
          },
          {
            "text": "   - エラー処理",
            "lineNumber": 543
          },
          {
            "text": "     1. エラー内容を「確認」ダイアログで表示する。",
            "lineNumber": 544
          },
          {
            "text": "     2. ダイアログにはエラーメッセージと「OK」ボタンを表示する。",
            "lineNumber": 545
          },
          {
            "text": "     3. 「OK」ボタン押下で処理を終了する。",
            "lineNumber": 546
          },
          {
            "text": "     ",
            "lineNumber": 547
          },
          {
            "text": "     - エラーメッセージの例:",
            "lineNumber": 548
          },
          {
            "text": "       - 出退社時刻が未入力の場合: 「出退社時刻が未入力のため、日次確定できません。」",
            "lineNumber": 549
          },
          {
            "text": "       - 工数合計と実労働時間が一致しない場合: 「工数の合計と実労働時間が合いません」",
            "lineNumber": 550
          },
          {
            "text": "       - 勤務場所が未選択の場合: 「勤務場所を選択してください」",
            "lineNumber": 551
          },
          {
            "lineNumber": 552
          },
          {
            "text": "2. ローディング表示開始",
            "lineNumber": 553
          },
          {
            "text": "   - ローディングマークを表示する。",
            "lineNumber": 554
          },
          {
            "lineNumber": 555
          },
          {
            "text": "3. 日次確定申請",
            "lineNumber": 556
          },
          {
            "text": "   - API利用仕様に従い、日次確定申請を行う。",
            "lineNumber": 557
          }
        ]
      },
      "score": 0.43658143281936646
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1955
          },
          "endPosition": {
            "line": 2006,
            "column": 14
          }
        },
        "contents": "      async checkDailyConfirmation(day) {\n        try {\n          // 日次勤務データ取得\n          const attendanceResponse = await getDailyAttendance(this.employeeId, day.date)\n          \n          // データが取得できない場合、出退社時刻が未入力として扱う\n          let attendance = null\n          if (attendanceResponse.success &amp;&amp; attendanceResponse.attendance) {\n            attendance = attendanceResponse.attendance\n          }\n          \n          // 1. 出退社時刻チェック\n          const hasClockIn = attendance ? !!attendance.CLOCK_IN_TIME : false\n          const hasClockOut = attendance ? !!attendance.CLOCK_OUT_TIME : false\n          \n          if (!hasClockIn &amp;&amp; !hasClockOut) {\n            return {\n              isValid: false,\n              errorMessage: '出退社時刻が未入力のため、日次確定できません。'\n            }\n          } else if (!hasClockIn) {\n            return {\n              isValid: false,\n              errorMessage: '出社時刻が未入力のため、日次確定できません。'\n            }\n          } else if (!hasClockOut) {\n            return {\n              isValid: false,\n              errorMessage: '退社時刻が未入力のため、日次確定できません。'\n            }\n          }\n          \n          // データが存在しない場合は、ここで終了\n          if (!attendance) {\n            return { isValid: false, errorMessage: '出退社時刻が未入力のため、日次確定できません。' }\n          }\n          \n          // 2. 勤務場所チェック\n          if (!attendance.WORK_LOCATION_CODE) {\n            return {\n              isValid: false,\n              errorMessage: '勤務場所を選択してください'\n            }\n          }\n          \n          // 3. 工数実績取得\n          const workHoursResponse = await getWorkHours(this.employeeId, day.date)\n          let workHoursTotal = 0\n          \n          if (workHoursResponse.success &amp;&amp; workHoursResponse.workHours) {\n            workHoursTotal = workHoursResponse.workHours.reduce(\n              ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      async checkDailyConfirmation(day) {",
            "lineNumber": 1956
          },
          {
            "text": "        try {",
            "lineNumber": 1957
          },
          {
            "text": "          // 日次勤務データ取得",
            "lineNumber": 1958
          },
          {
            "text": "          const attendanceResponse = await getDailyAttendance(this.employeeId, day.date)",
            "lineNumber": 1959
          },
          {
            "text": "          ",
            "lineNumber": 1960
          },
          {
            "text": "          // データが取得できない場合、出退社時刻が未入力として扱う",
            "lineNumber": 1961
          },
          {
            "text": "          let attendance = null",
            "lineNumber": 1962
          },
          {
            "text": "          if (attendanceResponse.success &amp;&amp; attendanceResponse.attendance) {",
            "lineNumber": 1963
          },
          {
            "text": "            attendance = attendanceResponse.attendance",
            "lineNumber": 1964
          },
          {
            "text": "          }",
            "lineNumber": 1965
          },
          {
            "text": "          ",
            "lineNumber": 1966
          },
          {
            "text": "          // 1. 出退社時刻チェック",
            "lineNumber": 1967
          },
          {
            "text": "          const hasClockIn = attendance ? !!attendance.CLOCK_IN_TIME : false",
            "lineNumber": 1968
          },
          {
            "text": "          const hasClockOut = attendance ? !!attendance.CLOCK_OUT_TIME : false",
            "lineNumber": 1969
          },
          {
            "text": "          ",
            "lineNumber": 1970
          },
          {
            "text": "          if (!hasClockIn &amp;&amp; !hasClockOut) {",
            "lineNumber": 1971
          },
          {
            "text": "            return {",
            "lineNumber": 1972
          },
          {
            "text": "              isValid: false,",
            "lineNumber": 1973
          },
          {
            "text": "              errorMessage: '出退社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1974
          },
          {
            "text": "            }",
            "lineNumber": 1975
          },
          {
            "text": "          } else if (!hasClockIn) {",
            "lineNumber": 1976
          },
          {
            "text": "            return {",
            "lineNumber": 1977
          },
          {
            "text": "              isValid: false,",
            "lineNumber": 1978
          },
          {
            "text": "              errorMessage: '出社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1979
          },
          {
            "text": "            }",
            "lineNumber": 1980
          },
          {
            "text": "          } else if (!hasClockOut) {",
            "lineNumber": 1981
          },
          {
            "text": "            return {",
            "lineNumber": 1982
          },
          {
            "text": "              isValid: false,",
            "lineNumber": 1983
          },
          {
            "text": "              errorMessage: '退社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1984
          },
          {
            "text": "            }",
            "lineNumber": 1985
          },
          {
            "text": "          }",
            "lineNumber": 1986
          },
          {
            "text": "          ",
            "lineNumber": 1987
          },
          {
            "text": "          // データが存在しない場合は、ここで終了",
            "lineNumber": 1988
          },
          {
            "text": "          if (!attendance) {",
            "lineNumber": 1989
          },
          {
            "text": "            return { isValid: false, errorMessage: '出退社時刻が未入力のため、日次確定できません。' }",
            "lineNumber": 1990
          },
          {
            "text": "          }",
            "lineNumber": 1991
          },
          {
            "text": "          ",
            "lineNumber": 1992
          },
          {
            "text": "          // 2. 勤務場所チェック",
            "lineNumber": 1993
          },
          {
            "text": "          if (!attendance.WORK_LOCATION_CODE) {",
            "lineNumber": 1994
          },
          {
            "text": "            return {",
            "lineNumber": 1995
          },
          {
            "text": "              isValid: false,",
            "lineNumber": 1996
          },
          {
            "text": "              errorMessage: '勤務場所を選択してください'",
            "lineNumber": 1997
          },
          {
            "text": "            }",
            "lineNumber": 1998
          },
          {
            "text": "          }",
            "lineNumber": 1999
          },
          {
            "text": "          ",
            "lineNumber": 2000
          },
          {
            "text": "          // 3. 工数実績取得",
            "lineNumber": 2001
          },
          {
            "text": "          const workHoursResponse = await getWorkHours(this.employeeId, day.date)",
            "lineNumber": 2002
          },
          {
            "text": "          let workHoursTotal = 0",
            "lineNumber": 2003
          },
          {
            "text": "          ",
            "lineNumber": 2004
          },
          {
            "text": "          if (workHoursResponse.success &amp;&amp; workHoursResponse.workHours) {",
            "lineNumber": 2005
          },
          {
            "text": "            workHoursTotal = workHoursResponse.workHours.reduce(",
            "lineNumber": 2006
          },
          {
            "text": "              ",
            "lineNumber": 2007
          }
        ]
      },
      "score": 0.40310919284820557
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-input-dialog.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 31
          }
        },
        "contents": "# TeamSpirit勤怠管理システム\n# 勤怠情報入力画面\n\n## 概要\n本画面は、勤務表画面の「出社」「退社」「勤務場所」のテキストボックスを押下すると表示されるダイアログ形式の入力画面です。\n出社時刻、退社時刻、休憩時間、公用外出時間、勤務場所を手入力で入力・変更することができます。\n出社時刻・退社時刻を手入力で入力して登録すると、勤務表画面の該当箇所の背景色が黄色に変更されます。（勤務場所は背景色変更の対象外）\nまた、日次確定チェックボックスをONにして登録すると、日次確定申請が同時に行われます。\n日次確定後に承認中となった場合は、本画面は閲覧専用モードとなり編集ができなくなります。\n\n## 画面レイアウト\n\n### 参考画像\n\n- 編集可能状態（初期画面）\n  - （提供された画像1枚目を参照）\n\n- 閲覧専用状態（承認中）\n  - （提供された画像2枚目を参照）\n\n## 画面項目定義\n\n| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |\n| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |\n| | &lt;ヘッダー部分&gt; | | | | | | | | | | | |\n| 1 | タイトル | 出力 | | 文字 | | | | | 表示 | 活性 | 勤怠情報入力 | ダイアログのタイトル「勤怠情報入力」を表示 |\n| 2 | 閉じるボタン | ボタン | | | | | | | 表示 | 活性 | | ダイアログを閉じる。「X」アイコン |\n| 3 | 日付表示 | 出力 | | 文字 | | | | YYYY年MM月DD日X曜日 | 表示 | 活性 | | 対象日の日付を表示（例: 2025年11月26日水曜日） |\n| | &lt;入力エリア&gt; | | | | | | | | | | | |\n| 4 | 出社ラベル | ラベル | | 文字 | | | | | 表示 | 活性 | 出社 | 出社時刻入力欄のラベル |\n| 5 | 出社時刻 | 入力 | テキストボックス | 時間 | | 5 | 5 | H:MM | 表示 | 条件付き活性 | | 出社時刻を入力。承認中・申請中の場合はグレー表示。プレースホルダーは表示しない |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TeamSpirit勤怠管理システム",
            "lineNumber": 1
          },
          {
            "text": "# 勤怠情報入力画面",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "## 概要",
            "lineNumber": 4
          },
          {
            "text": "本画面は、勤務表画面の「出社」「退社」「勤務場所」のテキストボックスを押下すると表示されるダイアログ形式の入力画面です。",
            "lineNumber": 5
          },
          {
            "text": "出社時刻、退社時刻、休憩時間、公用外出時間、勤務場所を手入力で入力・変更することができます。",
            "lineNumber": 6
          },
          {
            "text": "出社時刻・退社時刻を手入力で入力して登録すると、勤務表画面の該当箇所の背景色が黄色に変更されます。（勤務場所は背景色変更の対象外）",
            "lineNumber": 7
          },
          {
            "text": "また、日次確定チェックボックスをONにして登録すると、日次確定申請が同時に行われます。",
            "lineNumber": 8
          },
          {
            "text": "日次確定後に承認中となった場合は、本画面は閲覧専用モードとなり編集ができなくなります。",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "## 画面レイアウト",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### 参考画像",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "- 編集可能状態（初期画面）",
            "lineNumber": 15
          },
          {
            "text": "  - （提供された画像1枚目を参照）",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "- 閲覧専用状態（承認中）",
            "lineNumber": 18
          },
          {
            "text": "  - （提供された画像2枚目を参照）",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "## 画面項目定義",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |",
            "lineNumber": 23
          },
          {
            "text": "| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |",
            "lineNumber": 24
          },
          {
            "text": "| | &lt;ヘッダー部分&gt; | | | | | | | | | | | |",
            "lineNumber": 25
          },
          {
            "text": "| 1 | タイトル | 出力 | | 文字 | | | | | 表示 | 活性 | 勤怠情報入力 | ダイアログのタイトル「勤怠情報入力」を表示 |",
            "lineNumber": 26
          },
          {
            "text": "| 2 | 閉じるボタン | ボタン | | | | | | | 表示 | 活性 | | ダイアログを閉じる。「X」アイコン |",
            "lineNumber": 27
          },
          {
            "text": "| 3 | 日付表示 | 出力 | | 文字 | | | | YYYY年MM月DD日X曜日 | 表示 | 活性 | | 対象日の日付を表示（例: 2025年11月26日水曜日） |",
            "lineNumber": 28
          },
          {
            "text": "| | &lt;入力エリア&gt; | | | | | | | | | | | |",
            "lineNumber": 29
          },
          {
            "text": "| 4 | 出社ラベル | ラベル | | 文字 | | | | | 表示 | 活性 | 出社 | 出社時刻入力欄のラベル |",
            "lineNumber": 30
          },
          {
            "text": "| 5 | 出社時刻 | 入力 | テキストボックス | 時間 | | 5 | 5 | H:MM | 表示 | 条件付き活性 | | 出社時刻を入力。承認中・申請中の場合はグレー表示。プレースホルダーは表示しない |",
            "lineNumber": 31
          }
        ]
      },
      "score": 0.40281373262405396
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 161
          },
          "endPosition": {
            "line": 184
          }
        },
        "contents": "## その他の項目定義\n\n| No | 項目名 | ドメイン | 正常異常区分 | デフォルト値 | 備考 |\n| :----- | :----- | :----- | :----- | :----- | :----- |\n| 1 | 月間勤務データ | リスト | 正常 | | 月間の勤務記録リスト |\n| 2 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次勤務データ | オブジェクト | 正常 | | 1日分の勤務記録 |\n| 3 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤怠ID | 整数 | 正常 | | ATTENDANCE_ID |\n| 4 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |\n| 5 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務日 | 日付 | 正常 | | WORK_DATE |\n| 6 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤時刻 | 日時 | 正常 | | CLOCK_IN_TIME |\n| 7 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤時刻 | 日時 | 正常 | | CLOCK_OUT_TIME |\n| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤打刻種別 | 文字 | 正常 | | CLOCK_IN_TYPE (STAMP/MANUAL/SCHEDULED) |\n| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤打刻種別 | 文字 | 正常 | | CLOCK_OUT_TYPE (STAMP/MANUAL/SCHEDULED) |\n| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |\n| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |\n| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | 8.00 | SCHEDULED_WORK_HOURS |\n| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | 0 | OVERTIME_HOURS |\n| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | 0 | NIGHT_WORK_HOURS |\n| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | 0 | HOLIDAY_WORK_HOURS |\n| 16 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |\n| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | 日時 | 正常 | | DAILY_CONFIRMED_AT |\n| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | 文字 | 正常 | NOT_SUBMITTED | APPROVAL_STATUS (NOT_SUBMITTED/PENDING/APPROVED/REJECTED) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "## その他の項目定義",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "| No | 項目名 | ドメイン | 正常異常区分 | デフォルト値 | 備考 |",
            "lineNumber": 165
          },
          {
            "text": "| :----- | :----- | :----- | :----- | :----- | :----- |",
            "lineNumber": 166
          },
          {
            "text": "| 1 | 月間勤務データ | リスト | 正常 | | 月間の勤務記録リスト |",
            "lineNumber": 167
          },
          {
            "text": "| 2 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次勤務データ | オブジェクト | 正常 | | 1日分の勤務記録 |",
            "lineNumber": 168
          },
          {
            "text": "| 3 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤怠ID | 整数 | 正常 | | ATTENDANCE_ID |",
            "lineNumber": 169
          },
          {
            "text": "| 4 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |",
            "lineNumber": 170
          },
          {
            "text": "| 5 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務日 | 日付 | 正常 | | WORK_DATE |",
            "lineNumber": 171
          },
          {
            "text": "| 6 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤時刻 | 日時 | 正常 | | CLOCK_IN_TIME |",
            "lineNumber": 172
          },
          {
            "text": "| 7 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤時刻 | 日時 | 正常 | | CLOCK_OUT_TIME |",
            "lineNumber": 173
          },
          {
            "text": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤打刻種別 | 文字 | 正常 | | CLOCK_IN_TYPE (STAMP/MANUAL/SCHEDULED) |",
            "lineNumber": 174
          },
          {
            "text": "| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤打刻種別 | 文字 | 正常 | | CLOCK_OUT_TYPE (STAMP/MANUAL/SCHEDULED) |",
            "lineNumber": 175
          },
          {
            "text": "| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |",
            "lineNumber": 176
          },
          {
            "text": "| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |",
            "lineNumber": 177
          },
          {
            "text": "| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | 8.00 | SCHEDULED_WORK_HOURS |",
            "lineNumber": 178
          },
          {
            "text": "| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | 0 | OVERTIME_HOURS |",
            "lineNumber": 179
          },
          {
            "text": "| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | 0 | NIGHT_WORK_HOURS |",
            "lineNumber": 180
          },
          {
            "text": "| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | 0 | HOLIDAY_WORK_HOURS |",
            "lineNumber": 181
          },
          {
            "text": "| 16 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |",
            "lineNumber": 182
          },
          {
            "text": "| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | 日時 | 正常 | | DAILY_CONFIRMED_AT |",
            "lineNumber": 183
          },
          {
            "text": "| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | 文字 | 正常 | NOT_SUBMITTED | APPROVAL_STATUS (NOT_SUBMITTED/PENDING/APPROVED/REJECTED) |",
            "lineNumber": 184
          }
        ]
      },
      "score": 0.3993096351623535
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1434
          },
          "endPosition": {
            "line": 1471
          }
        },
        "contents": "- **表示条件**: \n  - 有給休暇、特別休暇など、休暇種別が設定されている日\n  - VACATION_HISTORYテーブルに該当日の休暇申請レコードが存在する\n  - APPROVAL_STATUS=PENDING（申請中）またはAPPROVED（承認済み）\n\n#### 休暇申請の扱い\n- 休暇申請が承認されると、その日は標準労働時間（7.5時間）を勤務したものとみなされる\n- 清算期間の所定労働時間に算入される\n- 休暇申請中（オレンジ色の行）は、出勤時刻・退勤時刻の編集不可\n\n### 日次確定申請の条件\n以下の条件を満たす必要があります:\n1. 出退社時刻が入力されていること\n2. 勤務場所が設定されていること\n3. 工数合計と実労働時間が一致していること\n4. 手入力の場合は備考に理由が入力されていること\n\n### 工数合計と実労働時間の不一致\n工数合計と実労働時間が一致しない場合、該当日の行に赤い!マークが表示され、日次確定申請ができません。\n\n### 日次確定申請時のエラーダイアログ\n日次確定申請時に以下のエラーが発生した場合、「確認」ダイアログが表示されます:\n\n1. **出退社時刻が未入力の場合**\n   - メッセージ: 「出退社時刻が未入力のため、日次確定できません。」\n   - 出勤時刻または退勤時刻が空の場合に表示されます。\n\n2. **工数合計と実労働時間が一致しない場合**\n   - メッセージ: 「工数の合計と実労働時間が合いません」\n   - 工数実績として登録された作業時間の合計が実労働時間と異なる場合に表示されます。\n\n3. **勤務場所が未選択の場合**\n   - メッセージ: 「勤務場所を選択してください」\n   - 勤務場所が設定されていない場合に表示されます。\n\n4. **手入力で備考が未入力の場合**\n   - メッセージ: 「手入力の場合は備考に理由を入力してください」",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **表示条件**: ",
            "lineNumber": 1435
          },
          {
            "text": "  - 有給休暇、特別休暇など、休暇種別が設定されている日",
            "lineNumber": 1436
          },
          {
            "text": "  - VACATION_HISTORYテーブルに該当日の休暇申請レコードが存在する",
            "lineNumber": 1437
          },
          {
            "text": "  - APPROVAL_STATUS=PENDING（申請中）またはAPPROVED（承認済み）",
            "lineNumber": 1438
          },
          {
            "lineNumber": 1439
          },
          {
            "text": "#### 休暇申請の扱い",
            "lineNumber": 1440
          },
          {
            "text": "- 休暇申請が承認されると、その日は標準労働時間（7.5時間）を勤務したものとみなされる",
            "lineNumber": 1441
          },
          {
            "text": "- 清算期間の所定労働時間に算入される",
            "lineNumber": 1442
          },
          {
            "text": "- 休暇申請中（オレンジ色の行）は、出勤時刻・退勤時刻の編集不可",
            "lineNumber": 1443
          },
          {
            "lineNumber": 1444
          },
          {
            "text": "### 日次確定申請の条件",
            "lineNumber": 1445
          },
          {
            "text": "以下の条件を満たす必要があります:",
            "lineNumber": 1446
          },
          {
            "text": "1. 出退社時刻が入力されていること",
            "lineNumber": 1447
          },
          {
            "text": "2. 勤務場所が設定されていること",
            "lineNumber": 1448
          },
          {
            "text": "3. 工数合計と実労働時間が一致していること",
            "lineNumber": 1449
          },
          {
            "text": "4. 手入力の場合は備考に理由が入力されていること",
            "lineNumber": 1450
          },
          {
            "lineNumber": 1451
          },
          {
            "text": "### 工数合計と実労働時間の不一致",
            "lineNumber": 1452
          },
          {
            "text": "工数合計と実労働時間が一致しない場合、該当日の行に赤い!マークが表示され、日次確定申請ができません。",
            "lineNumber": 1453
          },
          {
            "lineNumber": 1454
          },
          {
            "text": "### 日次確定申請時のエラーダイアログ",
            "lineNumber": 1455
          },
          {
            "text": "日次確定申請時に以下のエラーが発生した場合、「確認」ダイアログが表示されます:",
            "lineNumber": 1456
          },
          {
            "lineNumber": 1457
          },
          {
            "text": "1. **出退社時刻が未入力の場合**",
            "lineNumber": 1458
          },
          {
            "text": "   - メッセージ: 「出退社時刻が未入力のため、日次確定できません。」",
            "lineNumber": 1459
          },
          {
            "text": "   - 出勤時刻または退勤時刻が空の場合に表示されます。",
            "lineNumber": 1460
          },
          {
            "lineNumber": 1461
          },
          {
            "text": "2. **工数合計と実労働時間が一致しない場合**",
            "lineNumber": 1462
          },
          {
            "text": "   - メッセージ: 「工数の合計と実労働時間が合いません」",
            "lineNumber": 1463
          },
          {
            "text": "   - 工数実績として登録された作業時間の合計が実労働時間と異なる場合に表示されます。",
            "lineNumber": 1464
          },
          {
            "lineNumber": 1465
          },
          {
            "text": "3. **勤務場所が未選択の場合**",
            "lineNumber": 1466
          },
          {
            "text": "   - メッセージ: 「勤務場所を選択してください」",
            "lineNumber": 1467
          },
          {
            "text": "   - 勤務場所が設定されていない場合に表示されます。",
            "lineNumber": 1468
          },
          {
            "lineNumber": 1469
          },
          {
            "text": "4. **手入力で備考が未入力の場合**",
            "lineNumber": 1470
          },
          {
            "text": "   - メッセージ: 「手入力の場合は備考に理由を入力してください」",
            "lineNumber": 1471
          }
        ]
      },
      "score": 0.3990527391433716
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 130
          },
          "endPosition": {
            "line": 145
          }
        },
        "contents": "    ACTUAL_WORK_HOURS DECIMAL(5,2) COMMENT '実労働時間: 出退勤時刻と休憩時間から自動計算される実際の労働時間（時間単位）。例: 8.50=8時間30分',\n    SCHEDULED_WORK_HOURS DECIMAL(5,2) DEFAULT 7.50 COMMENT '所定労働時間: 標準勤務時間（9:00-17:30）から休憩1時間を除いた7.5時間。例: 7.50=7時間30分',\n    OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '残業時間: 実労働時間が所定労働時間を超えた分（時間単位）。例: 0.50=30分残業',\n    WITHIN_LEGAL_OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定時間内残業: 1日8時間以内の残業時間（時間単位）。例: 0.50=30分',\n    OVER_LEGAL_OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定時間外残業: 1日8時間を超える残業時間（時間単位）。例: 2.00=2時間',\n    NIGHT_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '深夜労働時間: 22時〜5時の労働時間（時間単位）。例: 2.00=2時間',\n    LEGAL_HOLIDAY_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定休日労働: 法定休日に働いた時間（時間単位）。例: 8.00=8時間',\n    HOLIDAY_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '休日労働時間: 休日に働いた時間（時間単位）。例: 8.00=8時間',\n    IS_DAILY_CONFIRMED BOOLEAN DEFAULT FALSE COMMENT '日次確定フラグ: TRUE=その日の勤怠を確定申請済み。日次確定ボタンで変更される',\n    DAILY_CONFIRMED_AT DATETIME COMMENT '日次確定日時: いつ確定申請したか。形式YYYY-MM-DD HH:MM:SS',\n    IS_MONTHLY_CONFIRMED BOOLEAN DEFAULT FALSE COMMENT '月次確定フラグ: TRUE=月次の勤怠を確定申請済み',\n    MONTHLY_CONFIRMED_AT DATETIME COMMENT '月次確定日時: いつ月次確定申請したか。形式YYYY-MM-DD HH:MM:SS',\n    APPROVAL_STATUS VARCHAR(20) DEFAULT 'NOT_SUBMITTED' COMMENT '承認状態: NOT_SUBMITTED=未申請、PENDING=申請中、APPROVED=承認済、REJECTED=却下',\n    REMARK_TEXT TEXT COMMENT '備考内容: 打刻できなかった理由やその他の備考。手入力の場合は必須入力',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時: レコード作成日時（自動設定）',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    ACTUAL_WORK_HOURS DECIMAL(5,2) COMMENT '実労働時間: 出退勤時刻と休憩時間から自動計算される実際の労働時間（時間単位）。例: 8.50=8時間30分',",
            "lineNumber": 131
          },
          {
            "text": "    SCHEDULED_WORK_HOURS DECIMAL(5,2) DEFAULT 7.50 COMMENT '所定労働時間: 標準勤務時間（9:00-17:30）から休憩1時間を除いた7.5時間。例: 7.50=7時間30分',",
            "lineNumber": 132
          },
          {
            "text": "    OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '残業時間: 実労働時間が所定労働時間を超えた分（時間単位）。例: 0.50=30分残業',",
            "lineNumber": 133
          },
          {
            "text": "    WITHIN_LEGAL_OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定時間内残業: 1日8時間以内の残業時間（時間単位）。例: 0.50=30分',",
            "lineNumber": 134
          },
          {
            "text": "    OVER_LEGAL_OVERTIME_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定時間外残業: 1日8時間を超える残業時間（時間単位）。例: 2.00=2時間',",
            "lineNumber": 135
          },
          {
            "text": "    NIGHT_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '深夜労働時間: 22時〜5時の労働時間（時間単位）。例: 2.00=2時間',",
            "lineNumber": 136
          },
          {
            "text": "    LEGAL_HOLIDAY_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '法定休日労働: 法定休日に働いた時間（時間単位）。例: 8.00=8時間',",
            "lineNumber": 137
          },
          {
            "text": "    HOLIDAY_WORK_HOURS DECIMAL(5,2) DEFAULT 0 COMMENT '休日労働時間: 休日に働いた時間（時間単位）。例: 8.00=8時間',",
            "lineNumber": 138
          },
          {
            "text": "    IS_DAILY_CONFIRMED BOOLEAN DEFAULT FALSE COMMENT '日次確定フラグ: TRUE=その日の勤怠を確定申請済み。日次確定ボタンで変更される',",
            "lineNumber": 139
          },
          {
            "text": "    DAILY_CONFIRMED_AT DATETIME COMMENT '日次確定日時: いつ確定申請したか。形式YYYY-MM-DD HH:MM:SS',",
            "lineNumber": 140
          },
          {
            "text": "    IS_MONTHLY_CONFIRMED BOOLEAN DEFAULT FALSE COMMENT '月次確定フラグ: TRUE=月次の勤怠を確定申請済み',",
            "lineNumber": 141
          },
          {
            "text": "    MONTHLY_CONFIRMED_AT DATETIME COMMENT '月次確定日時: いつ月次確定申請したか。形式YYYY-MM-DD HH:MM:SS',",
            "lineNumber": 142
          },
          {
            "text": "    APPROVAL_STATUS VARCHAR(20) DEFAULT 'NOT_SUBMITTED' COMMENT '承認状態: NOT_SUBMITTED=未申請、PENDING=申請中、APPROVED=承認済、REJECTED=却下',",
            "lineNumber": 143
          },
          {
            "text": "    REMARK_TEXT TEXT COMMENT '備考内容: 打刻できなかった理由やその他の備考。手入力の場合は必須入力',",
            "lineNumber": 144
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時: レコード作成日時（自動設定）',",
            "lineNumber": 145
          }
        ]
      },
      "score": 0.39840009808540344
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 1422
          },
          "endPosition": {
            "line": 1468,
            "column": 12
          }
        },
        "contents": "    async submitDailyConfirmation() {\n      // エラーメッセージをクリア\n      this.dailyConfirmationError = ''\n      \n      // チェック仕様No.1に基づくバリデーション\n      try {\n        // 1. 対象日付の勤怠記録が存在するかチェック\n        const attendanceResponse = await fetch(\n          &#96;http://localhost:3000/api/attendance/daily?employeeId=${this.employeeId}&amp;workDate=${this.targetDate}&#96;\n        )\n        const attendanceData = await attendanceResponse.json()\n        \n        if (!attendanceData.success || !attendanceData.attendance) {\n          this.dailyConfirmationError = '対象日の勤怠記録が存在しません。'\n          return\n        }\n        \n        const attendance = attendanceData.attendance\n        \n        // 2. 出退社時刻が未入力の場合のチェック（E_APP_002）\n        const hasClockIn = !!attendance.CLOCK_IN_TIME\n        const hasClockOut = !!attendance.CLOCK_OUT_TIME\n        \n        if (!hasClockIn &amp;&amp; !hasClockOut) {\n          this.dailyConfirmationError = '出退社時刻が未入力のため、日次確定できません。'\n          return\n        } else if (!hasClockIn) {\n          this.dailyConfirmationError = '出社時刻が未入力のため、日次確定できません。'\n          return\n        } else if (!hasClockOut) {\n          this.dailyConfirmationError = '退社時刻が未入力のため、日次確定できません。'\n          return\n        }\n        \n        // 3. 勤務場所が未選択の場合のチェック（E_APP_003）\n        if (!attendance.WORK_LOCATION_CODE) {\n          this.dailyConfirmationError = '勤務場所を選択してください。'\n          return\n        }\n        \n        // 4. 工数合計と実労働時間が一致しない場合のチェック（E_APP_004）\n        const workHoursResponse = await getWorkHours(this.employeeId, this.targetDate)\n        let workHoursTotal = 0\n        \n        if (workHoursResponse.success &amp;&amp; workHoursResponse.workHours) {\n          workHoursTotal = workHoursResponse.workHours.reduce(\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    async submitDailyConfirmation() {",
            "lineNumber": 1423
          },
          {
            "text": "      // エラーメッセージをクリア",
            "lineNumber": 1424
          },
          {
            "text": "      this.dailyConfirmationError = ''",
            "lineNumber": 1425
          },
          {
            "text": "      ",
            "lineNumber": 1426
          },
          {
            "text": "      // チェック仕様No.1に基づくバリデーション",
            "lineNumber": 1427
          },
          {
            "text": "      try {",
            "lineNumber": 1428
          },
          {
            "text": "        // 1. 対象日付の勤怠記録が存在するかチェック",
            "lineNumber": 1429
          },
          {
            "text": "        const attendanceResponse = await fetch(",
            "lineNumber": 1430
          },
          {
            "text": "          &#96;http://localhost:3000/api/attendance/daily?employeeId=${this.employeeId}&amp;workDate=${this.targetDate}&#96;",
            "lineNumber": 1431
          },
          {
            "text": "        )",
            "lineNumber": 1432
          },
          {
            "text": "        const attendanceData = await attendanceResponse.json()",
            "lineNumber": 1433
          },
          {
            "text": "        ",
            "lineNumber": 1434
          },
          {
            "text": "        if (!attendanceData.success || !attendanceData.attendance) {",
            "lineNumber": 1435
          },
          {
            "text": "          this.dailyConfirmationError = '対象日の勤怠記録が存在しません。'",
            "lineNumber": 1436
          },
          {
            "text": "          return",
            "lineNumber": 1437
          },
          {
            "text": "        }",
            "lineNumber": 1438
          },
          {
            "text": "        ",
            "lineNumber": 1439
          },
          {
            "text": "        const attendance = attendanceData.attendance",
            "lineNumber": 1440
          },
          {
            "text": "        ",
            "lineNumber": 1441
          },
          {
            "text": "        // 2. 出退社時刻が未入力の場合のチェック（E_APP_002）",
            "lineNumber": 1442
          },
          {
            "text": "        const hasClockIn = !!attendance.CLOCK_IN_TIME",
            "lineNumber": 1443
          },
          {
            "text": "        const hasClockOut = !!attendance.CLOCK_OUT_TIME",
            "lineNumber": 1444
          },
          {
            "text": "        ",
            "lineNumber": 1445
          },
          {
            "text": "        if (!hasClockIn &amp;&amp; !hasClockOut) {",
            "lineNumber": 1446
          },
          {
            "text": "          this.dailyConfirmationError = '出退社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1447
          },
          {
            "text": "          return",
            "lineNumber": 1448
          },
          {
            "text": "        } else if (!hasClockIn) {",
            "lineNumber": 1449
          },
          {
            "text": "          this.dailyConfirmationError = '出社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1450
          },
          {
            "text": "          return",
            "lineNumber": 1451
          },
          {
            "text": "        } else if (!hasClockOut) {",
            "lineNumber": 1452
          },
          {
            "text": "          this.dailyConfirmationError = '退社時刻が未入力のため、日次確定できません。'",
            "lineNumber": 1453
          },
          {
            "text": "          return",
            "lineNumber": 1454
          },
          {
            "text": "        }",
            "lineNumber": 1455
          },
          {
            "text": "        ",
            "lineNumber": 1456
          },
          {
            "text": "        // 3. 勤務場所が未選択の場合のチェック（E_APP_003）",
            "lineNumber": 1457
          },
          {
            "text": "        if (!attendance.WORK_LOCATION_CODE) {",
            "lineNumber": 1458
          },
          {
            "text": "          this.dailyConfirmationError = '勤務場所を選択してください。'",
            "lineNumber": 1459
          },
          {
            "text": "          return",
            "lineNumber": 1460
          },
          {
            "text": "        }",
            "lineNumber": 1461
          },
          {
            "text": "        ",
            "lineNumber": 1462
          },
          {
            "text": "        // 4. 工数合計と実労働時間が一致しない場合のチェック（E_APP_004）",
            "lineNumber": 1463
          },
          {
            "text": "        const workHoursResponse = await getWorkHours(this.employeeId, this.targetDate)",
            "lineNumber": 1464
          },
          {
            "text": "        let workHoursTotal = 0",
            "lineNumber": 1465
          },
          {
            "text": "        ",
            "lineNumber": 1466
          },
          {
            "text": "        if (workHoursResponse.success &amp;&amp; workHoursResponse.workHours) {",
            "lineNumber": 1467
          },
          {
            "text": "          workHoursTotal = workHoursResponse.workHours.reduce(",
            "lineNumber": 1468
          },
          {
            "text": "            ",
            "lineNumber": 1469
          }
        ]
      },
      "score": 0.3909933567047119
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1469
          },
          "endPosition": {
            "line": 1496
          }
        },
        "contents": "4. **手入力で備考が未入力の場合**\n   - メッセージ: 「手入力の場合は備考に理由を入力してください」\n   - 打刻種別がMANUALで備考が空の場合に表示されます。\n\n確認ダイアログには「OK」ボタンが表示され、押下するとダイアログが閉じます。\n\n### 時間外労働・休日労働の扱い\n\n#### 事前申請と承認\n- フレックスタイム制における所定労働時間を超えての勤務、および休日勤務を行う場合は、事前に所属長の許可を得る必要がある\n- 許可を受けた社員は、実際に課される労働を前提とした時間外労働または休日労働に従事する\n- 清算期間を平均し、その期間における所定労働時間を超えた労働については、会社は時間外労働手当を支給する\n\n#### 割増賃金\n- 会社は、所定の割増率に基づき割増賃金を算定する\n- 第5条および第8条に基づく業者相談または割増賃金の体系を定時期において認識する\n\n### 深夜勤務時間の課税\n- 一清算期間における所定労働時間を超える実定労働時間（プラス）と、マイナスの時間部分が清算される\n- プラスの時間部分が所定労働時間を超える部分については、翌清算期間における人の実定労働時間から控除し勤務したものとみなし振り替えることができる\n- 一清算期間の実定労働時間が所定労働時間を超えた場合は、時間外労働手当の対象となる\n- マイナスの場合、一清算期間の実定労働時間が所定労働時間より不足した場合は、マイナス時間部分の賃金を控除することができる\n\n### 日次確定ボタン（+マーク）\n日付列に表示される+マーク（グレー色）は、日次確定申請を行うためのボタンです。このマークは申請状況アイコンの一部として、未申請状態（APPROVAL_STATUS=NOT_SUBMITTED）を表します。\n\n- **表示条件**: 日次確定が未完了の日（APPROVAL_STATUS=NOT_SUBMITTED）のみ表示",
        "signatures": {},
        "detailedLines": [
          {
            "text": "4. **手入力で備考が未入力の場合**",
            "lineNumber": 1470
          },
          {
            "text": "   - メッセージ: 「手入力の場合は備考に理由を入力してください」",
            "lineNumber": 1471
          },
          {
            "text": "   - 打刻種別がMANUALで備考が空の場合に表示されます。",
            "lineNumber": 1472
          },
          {
            "lineNumber": 1473
          },
          {
            "text": "確認ダイアログには「OK」ボタンが表示され、押下するとダイアログが閉じます。",
            "lineNumber": 1474
          },
          {
            "lineNumber": 1475
          },
          {
            "text": "### 時間外労働・休日労働の扱い",
            "lineNumber": 1476
          },
          {
            "lineNumber": 1477
          },
          {
            "text": "#### 事前申請と承認",
            "lineNumber": 1478
          },
          {
            "text": "- フレックスタイム制における所定労働時間を超えての勤務、および休日勤務を行う場合は、事前に所属長の許可を得る必要がある",
            "lineNumber": 1479
          },
          {
            "text": "- 許可を受けた社員は、実際に課される労働を前提とした時間外労働または休日労働に従事する",
            "lineNumber": 1480
          },
          {
            "text": "- 清算期間を平均し、その期間における所定労働時間を超えた労働については、会社は時間外労働手当を支給する",
            "lineNumber": 1481
          },
          {
            "lineNumber": 1482
          },
          {
            "text": "#### 割増賃金",
            "lineNumber": 1483
          },
          {
            "text": "- 会社は、所定の割増率に基づき割増賃金を算定する",
            "lineNumber": 1484
          },
          {
            "text": "- 第5条および第8条に基づく業者相談または割増賃金の体系を定時期において認識する",
            "lineNumber": 1485
          },
          {
            "lineNumber": 1486
          },
          {
            "text": "### 深夜勤務時間の課税",
            "lineNumber": 1487
          },
          {
            "text": "- 一清算期間における所定労働時間を超える実定労働時間（プラス）と、マイナスの時間部分が清算される",
            "lineNumber": 1488
          },
          {
            "text": "- プラスの時間部分が所定労働時間を超える部分については、翌清算期間における人の実定労働時間から控除し勤務したものとみなし振り替えることができる",
            "lineNumber": 1489
          },
          {
            "text": "- 一清算期間の実定労働時間が所定労働時間を超えた場合は、時間外労働手当の対象となる",
            "lineNumber": 1490
          },
          {
            "text": "- マイナスの場合、一清算期間の実定労働時間が所定労働時間より不足した場合は、マイナス時間部分の賃金を控除することができる",
            "lineNumber": 1491
          },
          {
            "lineNumber": 1492
          },
          {
            "text": "### 日次確定ボタン（+マーク）",
            "lineNumber": 1493
          },
          {
            "text": "日付列に表示される+マーク（グレー色）は、日次確定申請を行うためのボタンです。このマークは申請状況アイコンの一部として、未申請状態（APPROVAL_STATUS=NOT_SUBMITTED）を表します。",
            "lineNumber": 1494
          },
          {
            "lineNumber": 1495
          },
          {
            "text": "- **表示条件**: 日次確定が未完了の日（APPROVAL_STATUS=NOT_SUBMITTED）のみ表示",
            "lineNumber": 1496
          }
        ]
      },
      "score": 0.3863515853881836
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40
          }
        },
        "contents": "# TeamSpirit勤怠管理システム\n# 勤務表画面\n\n## 概要\n本画面は、月間の勤務表をカレンダー形式で表示し、各種勤務情報の入力・確認を行う機能です。\n出退勤時刻、休憩時間、公用外出、工数実績、備考などを日次で管理し、日次確定申請を行うことができます。\nホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、該当日の出社・退社の列に時刻が記録されます。\n打刻（STAMP）と手入力（MANUAL）は背景色で区別され、打刻は白色、手入力は黄色で表示されます。\n\n## 画面レイアウト\n\n### Figmaデザイン\n\n**勤務表画面のデザイン（Figma）**\n\nhttps://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=37-1005&amp;t=UudYlcZ8FhU0XfxI-4\n\n### 参考画像（操作マニュアルより）\n\n以下の画像は参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。\n\n- 勤務表メイン画面（参考）\n\n![勤務表画面](../../OperationManual/スクリーンショット%202025-12-01%20114925.png)\n\n- 勤怠情報入力画面（参考）\n\n![勤怠情報入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114931.png)\n\n- 工数実績入力画面（参考）\n\n![工数実績入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114937.png)\n\n## 画面項目定義\n\n| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |\n| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |\n| | &lt;ヘッダー部分（青色バー）&gt; | | | | | | | | | | | |\n| 1 | メニューアイコン | ボタン | | | | | | | 表示 | 活性 | | メニューを開く。「≡」アイコン |\n| 2 | 勤務表タイトル | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 画面タイトル「勤務表」を表示 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TeamSpirit勤怠管理システム",
            "lineNumber": 1
          },
          {
            "text": "# 勤務表画面",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "## 概要",
            "lineNumber": 4
          },
          {
            "text": "本画面は、月間の勤務表をカレンダー形式で表示し、各種勤務情報の入力・確認を行う機能です。",
            "lineNumber": 5
          },
          {
            "text": "出退勤時刻、休憩時間、公用外出、工数実績、備考などを日次で管理し、日次確定申請を行うことができます。",
            "lineNumber": 6
          },
          {
            "text": "ホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、該当日の出社・退社の列に時刻が記録されます。",
            "lineNumber": 7
          },
          {
            "text": "打刻（STAMP）と手入力（MANUAL）は背景色で区別され、打刻は白色、手入力は黄色で表示されます。",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## 画面レイアウト",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "### Figmaデザイン",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**勤務表画面のデザイン（Figma）**",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "https://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=37-1005&amp;t=UudYlcZ8FhU0XfxI-4",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "### 参考画像（操作マニュアルより）",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "以下の画像は参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "- 勤務表メイン画面（参考）",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "![勤務表画面](../../OperationManual/スクリーンショット%202025-12-01%20114925.png)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "- 勤怠情報入力画面（参考）",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "![勤怠情報入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114931.png)",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "- 工数実績入力画面（参考）",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "![工数実績入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114937.png)",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 画面項目定義",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |",
            "lineNumber": 36
          },
          {
            "text": "| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |",
            "lineNumber": 37
          },
          {
            "text": "| | &lt;ヘッダー部分（青色バー）&gt; | | | | | | | | | | | |",
            "lineNumber": 38
          },
          {
            "text": "| 1 | メニューアイコン | ボタン | | | | | | | 表示 | 活性 | | メニューを開く。「≡」アイコン |",
            "lineNumber": 39
          },
          {
            "text": "| 2 | 勤務表タイトル | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 画面タイトル「勤務表」を表示 |",
            "lineNumber": 40
          }
        ]
      },
      "score": 0.37715280055999756
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 85,
            "column": 1
          }
        },
        "contents": "/**\n * 勤怠サービス\n */\nconst attendanceModel = require('../models/attendanceModel');\nconst breakTimeModel = require('../models/breakTimeModel');\nconst workHoursModel = require('../models/workHoursModel');\nconst applicationModel = require('../models/applicationModel');\nconst { \n  getTodayJST, \n  getNow, \n  toDateTime, \n  formatHours, \n  formatOverUnder,\n  getMonthRange,\n  getScheduledWorkDays,\n  normalizeDate,\n  calculateMinutes\n} = require('../utils/dateUtils');\nconst db = require('../config/database');\n\n/**\n * 日次勤怠記録を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;Object|null&gt;} 勤怠記録\n */\nconst getDailyAttendance = async (employeeId, workDate) =&gt; {\n  const attendance = await attendanceModel.getAttendanceDetail(employeeId, workDate);\n  \n  if (!attendance) {\n    return null;\n  }\n  \n  const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n  const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);\n  \n  // 休憩時間と公用外出を統合\n  const combinedBreakTimes = [];\n  \n  for (const breakTime of breakTimes) {\n    combinedBreakTimes.push({\n      ...breakTime,\n      BREAK_TYPE: 'BREAK'\n    });\n  }\n  \n  for (const outing of officialOutings) {\n    combinedBreakTimes.push({\n      BREAK_ID: outing.OUTING_ID,\n      BREAK_SEQ: outing.OUTING_SEQ,\n      BREAK_START_TIME: outing.OUTING_START_TIME,\n      BREAK_END_TIME: outing.OUTING_END_TIME,\n      BREAK_DURATION_MINUTES: outing.OUTING_DURATION_MINUTES,\n      BREAK_TYPE: 'OFFICIAL_OUTING',\n      OUTING_PURPOSE: outing.OUTING_PURPOSE\n    });\n  }\n  \n  const isClockInManual = attendance.CLOCK_IN_TYPE === 'MANUAL';\n  const isClockOutManual = attendance.CLOCK_OUT_TYPE === 'MANUAL';\n\n  // ORIGINAL_CLOCK_IN_TIMEとORIGINAL_CLOCK_OUT_TIMEはデータベースから直接取得\n  // データベースに値が存在しない場合は、CLOCK_IN_TYPEがSTAMPの場合にCLOCK_IN_TIMEを使用\n  let originalClockInTime = attendance.ORIGINAL_CLOCK_IN_TIME;\n\n  if (!originalClockInTime &amp;&amp; attendance.CLOCK_IN_TYPE === 'STAMP')\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 勤怠サービス",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const attendanceModel = require('../models/attendanceModel');",
            "lineNumber": 4
          },
          {
            "text": "const breakTimeModel = require('../models/breakTimeModel');",
            "lineNumber": 5
          },
          {
            "text": "const workHoursModel = require('../models/workHoursModel');",
            "lineNumber": 6
          },
          {
            "text": "const applicationModel = require('../models/applicationModel');",
            "lineNumber": 7
          },
          {
            "text": "const { ",
            "lineNumber": 8
          },
          {
            "text": "  getTodayJST, ",
            "lineNumber": 9
          },
          {
            "text": "  getNow, ",
            "lineNumber": 10
          },
          {
            "text": "  toDateTime, ",
            "lineNumber": 11
          },
          {
            "text": "  formatHours, ",
            "lineNumber": 12
          },
          {
            "text": "  formatOverUnder,",
            "lineNumber": 13
          },
          {
            "text": "  getMonthRange,",
            "lineNumber": 14
          },
          {
            "text": "  getScheduledWorkDays,",
            "lineNumber": 15
          },
          {
            "text": "  normalizeDate,",
            "lineNumber": 16
          },
          {
            "text": "  calculateMinutes",
            "lineNumber": 17
          },
          {
            "text": "} = require('../utils/dateUtils');",
            "lineNumber": 18
          },
          {
            "text": "const db = require('../config/database');",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "/**",
            "lineNumber": 21
          },
          {
            "text": " * 日次勤怠記録を取得する。",
            "lineNumber": 22
          },
          {
            "text": " *",
            "lineNumber": 23
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 24
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 25
          },
          {
            "text": " * @returns {Promise&lt;Object|null&gt;} 勤怠記録",
            "lineNumber": 26
          },
          {
            "text": " */",
            "lineNumber": 27
          },
          {
            "text": "const getDailyAttendance = async (employeeId, workDate) =&gt; {",
            "lineNumber": 28
          },
          {
            "text": "  const attendance = await attendanceModel.getAttendanceDetail(employeeId, workDate);",
            "lineNumber": 29
          },
          {
            "text": "  ",
            "lineNumber": 30
          },
          {
            "text": "  if (!attendance) {",
            "lineNumber": 31
          },
          {
            "text": "    return null;",
            "lineNumber": 32
          },
          {
            "text": "  }",
            "lineNumber": 33
          },
          {
            "text": "  ",
            "lineNumber": 34
          },
          {
            "text": "  const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 35
          },
          {
            "text": "  const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);",
            "lineNumber": 36
          },
          {
            "text": "  ",
            "lineNumber": 37
          },
          {
            "text": "  // 休憩時間と公用外出を統合",
            "lineNumber": 38
          },
          {
            "text": "  const combinedBreakTimes = [];",
            "lineNumber": 39
          },
          {
            "text": "  ",
            "lineNumber": 40
          },
          {
            "text": "  for (const breakTime of breakTimes) {",
            "lineNumber": 41
          },
          {
            "text": "    combinedBreakTimes.push({",
            "lineNumber": 42
          },
          {
            "text": "      ...breakTime,",
            "lineNumber": 43
          },
          {
            "text": "      BREAK_TYPE: 'BREAK'",
            "lineNumber": 44
          },
          {
            "text": "    });",
            "lineNumber": 45
          },
          {
            "text": "  }",
            "lineNumber": 46
          },
          {
            "text": "  ",
            "lineNumber": 47
          },
          {
            "text": "  for (const outing of officialOutings) {",
            "lineNumber": 48
          },
          {
            "text": "    combinedBreakTimes.push({",
            "lineNumber": 49
          },
          {
            "text": "      BREAK_ID: outing.OUTING_ID,",
            "lineNumber": 50
          },
          {
            "text": "      BREAK_SEQ: outing.OUTING_SEQ,",
            "lineNumber": 51
          },
          {
            "text": "      BREAK_START_TIME: outing.OUTING_START_TIME,",
            "lineNumber": 52
          },
          {
            "text": "      BREAK_END_TIME: outing.OUTING_END_TIME,",
            "lineNumber": 53
          },
          {
            "text": "      BREAK_DURATION_MINUTES: outing.OUTING_DURATION_MINUTES,",
            "lineNumber": 54
          },
          {
            "text": "      BREAK_TYPE: 'OFFICIAL_OUTING',",
            "lineNumber": 55
          },
          {
            "text": "      OUTING_PURPOSE: outing.OUTING_PURPOSE",
            "lineNumber": 56
          },
          {
            "text": "    });",
            "lineNumber": 57
          },
          {
            "text": "  }",
            "lineNumber": 58
          },
          {
            "text": "  ",
            "lineNumber": 59
          },
          {
            "text": "  const isClockInManual = attendance.CLOCK_IN_TYPE === 'MANUAL';",
            "lineNumber": 60
          },
          {
            "text": "  const isClockOutManual = attendance.CLOCK_OUT_TYPE === 'MANUAL';",
            "lineNumber": 61
          },
          {
            "lineNumber": 62
          },
          {
            "text": "  // ORIGINAL_CLOCK_IN_TIMEとORIGINAL_CLOCK_OUT_TIMEはデータベースから直接取得",
            "lineNumber": 63
          },
          {
            "text": "  // データベースに値が存在しない場合は、CLOCK_IN_TYPEがSTAMPの場合にCLOCK_IN_TIMEを使用",
            "lineNumber": 64
          },
          {
            "text": "  let originalClockInTime = attendance.ORIGINAL_CLOCK_IN_TIME;",
            "lineNumber": 65
          },
          {
            "lineNumber": 66
          },
          {
            "text": "  if (!originalClockInTime &amp;&amp; attendance.CLOCK_IN_TYPE === 'STAMP')",
            "lineNumber": 67
          },
          {
            "text": ";",
            "lineNumber": 86
          }
        ]
      },
      "score": 0.3760693073272705
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1808
          },
          "endPosition": {
            "line": 1814
          }
        },
        "contents": "| 2025-12-05 | 勤務グラフの時間軸を1-24時から0-48時に修正。グラフ凡例に法定時間内残業（#B0B000 黄緑色）と法定時間外残業（#E28E1C オレンジ色）を明記 | AI Assistant |\n| 2025-12-05 | 日次確定ボタン（+アイコン）を追加（No.13）。ローディングマーク表示機能を追加（No.53）。日付欄押下処理を日次確定ボタン押下処理に変更。初期表示、年月変更、前月/次月ボタン押下処理にローディング表示を追加。補足説明に日次確定ボタンとローディング表示のセクションを追加 | AI Assistant |\n| 2025-12-05 | 月次サマリー項目の詳細を更新。所定出勤日数、実出勤日数、所定労働時間、過不足時間、法定休日労働、法定時間内残業、法定時間外残業を追加。実出勤日数の定義を「出勤時刻と退勤時刻が両方記録されている日数」に変更。標準勤務時間を9:00-17:30（所定労働7.5時間）に設定。勤務グラフに標準勤務時間帯のグレー表示を追加 | AI Assistant |\n| 2025-12-05 | フレックスタイム制に基づく労働時間管理の詳細を追加。標準勤務時間（9:00-17:30）、最小勤務時間（3時間45分）、清算期間（1ヶ月）、遅刻・早退の扱い（適用しない）を明記。残業時間の計算方法（日次判定と月次判定）を詳細化。欠勤・休暇の扱い、時間外労働の事前申請と承認、割増賃金、深夜勤務時間の課税に関する規定を追加 | AI Assistant |\n| 2025-12-05 | 打刻と手入力の背景色を修正（手入力=黄色、打刻=白色）。出勤時刻・退勤時刻の項目種別を「入出力」に変更し、日次確定前または未来の日付の場合はテキストボックスで編集可能とする仕様を追加。出勤時刻編集処理・退勤時刻編集処理をイベント処理説明に追加。API利用仕様No.5として勤怠記録更新APIを追加（既存のNo.5-7をNo.6-8にリナンバリング）。補足説明の「打刻と手入力の区別」セクションを詳細化し、編集可能性について明記 | AI Assistant |\n| 2025-12-05 | 申請状況アイコンの仕様を明確化。未申請（+マーク・グレー色）、申請中（↑マーク・黒色）、承認済み（青色の丸に白✓）、却下（×マーク・赤色）を定義。休暇申請時の行表示をオレンジ色の背景に設定。入出力項目定義にAPPROVAL_STATUS（承認状態）を追加（No.18）。休暇申請データ（VACATION_HISTORY）を入出力項目定義に追加（No.33）。編集仕様の勤務表表示に休暇申請時の行の背景色と申請状況アイコンの詳細を追加。補足説明に「申請状況アイコンの表示」「勤務状況アイコンの表示」「休暇申請時の行の表示」セクションを追加。アイコンの色とスタイル（青色の丸、グレー色、黒色、赤色など）を明記 | AI Assistant |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 2025-12-05 | 勤務グラフの時間軸を1-24時から0-48時に修正。グラフ凡例に法定時間内残業（#B0B000 黄緑色）と法定時間外残業（#E28E1C オレンジ色）を明記 | AI Assistant |",
            "lineNumber": 1809
          },
          {
            "text": "| 2025-12-05 | 日次確定ボタン（+アイコン）を追加（No.13）。ローディングマーク表示機能を追加（No.53）。日付欄押下処理を日次確定ボタン押下処理に変更。初期表示、年月変更、前月/次月ボタン押下処理にローディング表示を追加。補足説明に日次確定ボタンとローディング表示のセクションを追加 | AI Assistant |",
            "lineNumber": 1810
          },
          {
            "text": "| 2025-12-05 | 月次サマリー項目の詳細を更新。所定出勤日数、実出勤日数、所定労働時間、過不足時間、法定休日労働、法定時間内残業、法定時間外残業を追加。実出勤日数の定義を「出勤時刻と退勤時刻が両方記録されている日数」に変更。標準勤務時間を9:00-17:30（所定労働7.5時間）に設定。勤務グラフに標準勤務時間帯のグレー表示を追加 | AI Assistant |",
            "lineNumber": 1811
          },
          {
            "text": "| 2025-12-05 | フレックスタイム制に基づく労働時間管理の詳細を追加。標準勤務時間（9:00-17:30）、最小勤務時間（3時間45分）、清算期間（1ヶ月）、遅刻・早退の扱い（適用しない）を明記。残業時間の計算方法（日次判定と月次判定）を詳細化。欠勤・休暇の扱い、時間外労働の事前申請と承認、割増賃金、深夜勤務時間の課税に関する規定を追加 | AI Assistant |",
            "lineNumber": 1812
          },
          {
            "text": "| 2025-12-05 | 打刻と手入力の背景色を修正（手入力=黄色、打刻=白色）。出勤時刻・退勤時刻の項目種別を「入出力」に変更し、日次確定前または未来の日付の場合はテキストボックスで編集可能とする仕様を追加。出勤時刻編集処理・退勤時刻編集処理をイベント処理説明に追加。API利用仕様No.5として勤怠記録更新APIを追加（既存のNo.5-7をNo.6-8にリナンバリング）。補足説明の「打刻と手入力の区別」セクションを詳細化し、編集可能性について明記 | AI Assistant |",
            "lineNumber": 1813
          },
          {
            "text": "| 2025-12-05 | 申請状況アイコンの仕様を明確化。未申請（+マーク・グレー色）、申請中（↑マーク・黒色）、承認済み（青色の丸に白✓）、却下（×マーク・赤色）を定義。休暇申請時の行表示をオレンジ色の背景に設定。入出力項目定義にAPPROVAL_STATUS（承認状態）を追加（No.18）。休暇申請データ（VACATION_HISTORY）を入出力項目定義に追加（No.33）。編集仕様の勤務表表示に休暇申請時の行の背景色と申請状況アイコンの詳細を追加。補足説明に「申請状況アイコンの表示」「勤務状況アイコンの表示」「休暇申請時の行の表示」セクションを追加。アイコンの色とスタイル（青色の丸、グレー色、黒色、赤色など）を明記 | AI Assistant |",
            "lineNumber": 1814
          }
        ]
      },
      "score": 0.373075008392334
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 981
          },
          "endPosition": {
            "line": 1026
          }
        },
        "contents": "- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n  | 更新後の勤怠データ | 更新後のATTENDANCE_RECORDデータ | JSON形式 |\n- 関連する取得仕様\n  - なし\n- その他\n  - 日次確定済み（IS_DAILY_CONFIRMED=TRUE）の場合は更新不可\n  - 出勤時刻・退勤時刻を更新した場合、ACTUAL_WORK_HOURSを自動計算\n  - 手入力（MANUAL）の場合、備考の入力を推奨\n\n#### No.6\n- API仕様名：日次確定申請API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | POST | |\n  | エンドポイント | /api/attendance/daily-confirmation | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |\n  | WORK_DATE | 選択した日付 | リクエストボディ、YYYY-MM-DD形式 |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n- 関連する取得仕様\n  - なし\n- その他\n  - 勤務場所が設定されているか、工数合計と実労働時間が一致するかをチェック\n  - 問題なければIS_DAILY_CONFIRMED=TRUE、DAILY_CONFIRMED_ATを現在時刻で更新\n\n#### No.7\n- API仕様名：月次サマリー取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/attendance/monthly-summary | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |\n  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |\n  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- レスポンス",
            "lineNumber": 982
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 983
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 984
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 985
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 986
          },
          {
            "text": "  | 更新後の勤怠データ | 更新後のATTENDANCE_RECORDデータ | JSON形式 |",
            "lineNumber": 987
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 988
          },
          {
            "text": "  - なし",
            "lineNumber": 989
          },
          {
            "text": "- その他",
            "lineNumber": 990
          },
          {
            "text": "  - 日次確定済み（IS_DAILY_CONFIRMED=TRUE）の場合は更新不可",
            "lineNumber": 991
          },
          {
            "text": "  - 出勤時刻・退勤時刻を更新した場合、ACTUAL_WORK_HOURSを自動計算",
            "lineNumber": 992
          },
          {
            "text": "  - 手入力（MANUAL）の場合、備考の入力を推奨",
            "lineNumber": 993
          },
          {
            "lineNumber": 994
          },
          {
            "text": "#### No.6",
            "lineNumber": 995
          },
          {
            "text": "- API仕様名：日次確定申請API",
            "lineNumber": 996
          },
          {
            "text": "- リクエスト",
            "lineNumber": 997
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 998
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 999
          },
          {
            "text": "  | HTTPメソッド | POST | |",
            "lineNumber": 1000
          },
          {
            "text": "  | エンドポイント | /api/attendance/daily-confirmation | |",
            "lineNumber": 1001
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |",
            "lineNumber": 1002
          },
          {
            "text": "  | WORK_DATE | 選択した日付 | リクエストボディ、YYYY-MM-DD形式 |",
            "lineNumber": 1003
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1004
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1005
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1006
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 1007
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 1008
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1009
          },
          {
            "text": "  - なし",
            "lineNumber": 1010
          },
          {
            "text": "- その他",
            "lineNumber": 1011
          },
          {
            "text": "  - 勤務場所が設定されているか、工数合計と実労働時間が一致するかをチェック",
            "lineNumber": 1012
          },
          {
            "text": "  - 問題なければIS_DAILY_CONFIRMED=TRUE、DAILY_CONFIRMED_ATを現在時刻で更新",
            "lineNumber": 1013
          },
          {
            "lineNumber": 1014
          },
          {
            "text": "#### No.7",
            "lineNumber": 1015
          },
          {
            "text": "- API仕様名：月次サマリー取得API",
            "lineNumber": 1016
          },
          {
            "text": "- リクエスト",
            "lineNumber": 1017
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 1018
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1019
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 1020
          },
          {
            "text": "  | エンドポイント | /api/attendance/monthly-summary | |",
            "lineNumber": 1021
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |",
            "lineNumber": 1022
          },
          {
            "text": "  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |",
            "lineNumber": 1023
          },
          {
            "text": "  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |",
            "lineNumber": 1024
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1025
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1026
          }
        ]
      },
      "score": 0.37064918875694275
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceInputDialog.vue",
        "range": {
          "startPosition": {
            "line": 830
          },
          "endPosition": {
            "line": 883
          }
        },
        "contents": "        default:\n          this.$refs.clockInInput?.focus()\n      }\n    },\n    \n    // 出社時刻変更\n    onClockInChange() {\n      // 変更直後は打刻情報を表示しない（次回ダイアログを開いたときに表示される）\n      // isClockInManualはAPIから取得した値のみを使用し、リアルタイムでは変更しない\n    },\n    \n    // 退社時刻変更\n    onClockOutChange() {\n      // 変更直後は打刻情報を表示しない（次回ダイアログを開いたときに表示される）\n      // isClockOutManualはAPIから取得した値のみを使用し、リアルタイムでは変更しない\n    },\n    \n    // 休憩追加\n    addBreak() {\n      // 上限チェック（最大10個）\n      if (this.visibleBreakCount &gt;= 10) {\n        return\n      }\n      this.visibleBreakCount++\n    },\n    \n    // 公用外出追加\n    addOuting() {\n      // 上限チェック（最大5個）\n      if (this.visibleOutingCount &gt;= 5) {\n        return\n      }\n      this.visibleOutingCount++\n    },\n    \n    // 登録ボタン押下\n    async onRegister() {\n      // エラーメッセージをクリア\n      this.validationError = ''\n      \n      // 休憩・公用外出入力時の出社・退社時刻チェック（未来日付チェックより先に実行）\n      if (!this.validateBreakOutingRequiresClockTime()) {\n        return\n      }\n      \n      // 未来日付・勤務当日チェック\n      if (!this.validateFutureDate()) {\n        return\n      }\n      \n      // 入力チェック\n      if (!this.validateInput()) {\n        return",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        default:",
            "lineNumber": 831
          },
          {
            "text": "          this.$refs.clockInInput?.focus()",
            "lineNumber": 832
          },
          {
            "text": "      }",
            "lineNumber": 833
          },
          {
            "text": "    },",
            "lineNumber": 834
          },
          {
            "text": "    ",
            "lineNumber": 835
          },
          {
            "text": "    // 出社時刻変更",
            "lineNumber": 836
          },
          {
            "text": "    onClockInChange() {",
            "lineNumber": 837
          },
          {
            "text": "      // 変更直後は打刻情報を表示しない（次回ダイアログを開いたときに表示される）",
            "lineNumber": 838
          },
          {
            "text": "      // isClockInManualはAPIから取得した値のみを使用し、リアルタイムでは変更しない",
            "lineNumber": 839
          },
          {
            "text": "    },",
            "lineNumber": 840
          },
          {
            "text": "    ",
            "lineNumber": 841
          },
          {
            "text": "    // 退社時刻変更",
            "lineNumber": 842
          },
          {
            "text": "    onClockOutChange() {",
            "lineNumber": 843
          },
          {
            "text": "      // 変更直後は打刻情報を表示しない（次回ダイアログを開いたときに表示される）",
            "lineNumber": 844
          },
          {
            "text": "      // isClockOutManualはAPIから取得した値のみを使用し、リアルタイムでは変更しない",
            "lineNumber": 845
          },
          {
            "text": "    },",
            "lineNumber": 846
          },
          {
            "text": "    ",
            "lineNumber": 847
          },
          {
            "text": "    // 休憩追加",
            "lineNumber": 848
          },
          {
            "text": "    addBreak() {",
            "lineNumber": 849
          },
          {
            "text": "      // 上限チェック（最大10個）",
            "lineNumber": 850
          },
          {
            "text": "      if (this.visibleBreakCount &gt;= 10) {",
            "lineNumber": 851
          },
          {
            "text": "        return",
            "lineNumber": 852
          },
          {
            "text": "      }",
            "lineNumber": 853
          },
          {
            "text": "      this.visibleBreakCount++",
            "lineNumber": 854
          },
          {
            "text": "    },",
            "lineNumber": 855
          },
          {
            "text": "    ",
            "lineNumber": 856
          },
          {
            "text": "    // 公用外出追加",
            "lineNumber": 857
          },
          {
            "text": "    addOuting() {",
            "lineNumber": 858
          },
          {
            "text": "      // 上限チェック（最大5個）",
            "lineNumber": 859
          },
          {
            "text": "      if (this.visibleOutingCount &gt;= 5) {",
            "lineNumber": 860
          },
          {
            "text": "        return",
            "lineNumber": 861
          },
          {
            "text": "      }",
            "lineNumber": 862
          },
          {
            "text": "      this.visibleOutingCount++",
            "lineNumber": 863
          },
          {
            "text": "    },",
            "lineNumber": 864
          },
          {
            "text": "    ",
            "lineNumber": 865
          },
          {
            "text": "    // 登録ボタン押下",
            "lineNumber": 866
          },
          {
            "text": "    async onRegister() {",
            "lineNumber": 867
          },
          {
            "text": "      // エラーメッセージをクリア",
            "lineNumber": 868
          },
          {
            "text": "      this.validationError = ''",
            "lineNumber": 869
          },
          {
            "text": "      ",
            "lineNumber": 870
          },
          {
            "text": "      // 休憩・公用外出入力時の出社・退社時刻チェック（未来日付チェックより先に実行）",
            "lineNumber": 871
          },
          {
            "text": "      if (!this.validateBreakOutingRequiresClockTime()) {",
            "lineNumber": 872
          },
          {
            "text": "        return",
            "lineNumber": 873
          },
          {
            "text": "      }",
            "lineNumber": 874
          },
          {
            "text": "      ",
            "lineNumber": 875
          },
          {
            "text": "      // 未来日付・勤務当日チェック",
            "lineNumber": 876
          },
          {
            "text": "      if (!this.validateFutureDate()) {",
            "lineNumber": 877
          },
          {
            "text": "        return",
            "lineNumber": 878
          },
          {
            "text": "      }",
            "lineNumber": 879
          },
          {
            "text": "      ",
            "lineNumber": 880
          },
          {
            "text": "      // 入力チェック",
            "lineNumber": 881
          },
          {
            "text": "      if (!this.validateInput()) {",
            "lineNumber": 882
          },
          {
            "text": "        return",
            "lineNumber": 883
          }
        ]
      },
      "score": 0.3652895987033844
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 867
          },
          "endPosition": {
            "line": 884
          }
        },
        "contents": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |\n  | 月次サマリーデータ | 月間集計データ | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |",
            "lineNumber": 868
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |",
            "lineNumber": 869
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |",
            "lineNumber": 870
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |",
            "lineNumber": 871
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |",
            "lineNumber": 872
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |",
            "lineNumber": 873
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |",
            "lineNumber": 874
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |",
            "lineNumber": 875
          },
          {
            "text": "  | 月次サマリーデータ | 月間集計データ | JSON形式 |",
            "lineNumber": 876
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |",
            "lineNumber": 877
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |",
            "lineNumber": 878
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |",
            "lineNumber": 879
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |",
            "lineNumber": 880
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |",
            "lineNumber": 881
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |",
            "lineNumber": 882
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |",
            "lineNumber": 883
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
            "lineNumber": 884
          }
        ]
      },
      "score": 0.36334824562072754
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1197
          },
          "endPosition": {
            "line": 1224
          }
        },
        "contents": "| 曜日 | 承認状態 | 休日出勤申請 | 表示形式 | 編集可否 |\n| --- | --- | --- | --- | --- |\n| 土日祝 | すべて | 未申請または未承認 | テキストボックスなし（表示しない） | - |\n| 土日祝 | すべて | 申請中（PENDING）または承認済み（APPROVED） | テキストボックス | 編集可能 |\n| 平日 | 未申請（NOT_SUBMITTED） | - | テキストボックス | 編集可能 |\n| 平日 | 却下（REJECTED） | - | テキストボックス | 編集可能 |\n| 平日 | 申請中（PENDING） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |\n| 平日 | 承認済み（APPROVED） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |\n\n##### 押下時の動作\n| 表示形式 | 押下時の動作 |\n| --- | --- |\n| テキストボックス | 勤怠情報入力ダイアログ（編集モード）を表示。「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスが表示され、各項目を編集可能 |\n| テキストのみ | 勤怠情報入力ダイアログ（閲覧モード）を表示。各項目は閲覧のみで編集不可。「閉じる」リンクのみ表示 |\n\n##### 勤怠情報入力ダイアログの項目\n- 出社: 出勤時刻（HH:MM形式）\n- 退社: 退勤時刻（HH:MM形式）\n- 休憩1: 休憩開始時刻 〜 休憩終了時刻\n- 休憩2: 休憩開始時刻 〜 休憩終了時刻（追加ボタンで行追加可能）\n- 公用外出1: 外出開始時刻 〜 外出終了時刻\n- 公用外出2: 外出開始時刻 〜 外出終了時刻（追加ボタンで行追加可能）\n- 勤務場所: プルダウンで選択（通勤/在宅/直行直帰/出張）\n\n##### 土日祝の扱い\n- **土日祝の基本テキストボックス非表示**: 土曜日、日曜日、祝日の行では、休日出勤申請が未申請または未承認の場合、出社・退社・勤務場所の基本テキストボックスは表示されません\n- **休日出勤申請が承認されている場合の例外**: 休日出勤申請が申請中（PENDING）または承認済み（APPROVED）の場合、土日祝でも出社・退社・勤務場所のテキストボックスが表示され、編集可能になります",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 曜日 | 承認状態 | 休日出勤申請 | 表示形式 | 編集可否 |",
            "lineNumber": 1198
          },
          {
            "text": "| --- | --- | --- | --- | --- |",
            "lineNumber": 1199
          },
          {
            "text": "| 土日祝 | すべて | 未申請または未承認 | テキストボックスなし（表示しない） | - |",
            "lineNumber": 1200
          },
          {
            "text": "| 土日祝 | すべて | 申請中（PENDING）または承認済み（APPROVED） | テキストボックス | 編集可能 |",
            "lineNumber": 1201
          },
          {
            "text": "| 平日 | 未申請（NOT_SUBMITTED） | - | テキストボックス | 編集可能 |",
            "lineNumber": 1202
          },
          {
            "text": "| 平日 | 却下（REJECTED） | - | テキストボックス | 編集可能 |",
            "lineNumber": 1203
          },
          {
            "text": "| 平日 | 申請中（PENDING） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |",
            "lineNumber": 1204
          },
          {
            "text": "| 平日 | 承認済み（APPROVED） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |",
            "lineNumber": 1205
          },
          {
            "lineNumber": 1206
          },
          {
            "text": "##### 押下時の動作",
            "lineNumber": 1207
          },
          {
            "text": "| 表示形式 | 押下時の動作 |",
            "lineNumber": 1208
          },
          {
            "text": "| --- | --- |",
            "lineNumber": 1209
          },
          {
            "text": "| テキストボックス | 勤怠情報入力ダイアログ（編集モード）を表示。「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスが表示され、各項目を編集可能 |",
            "lineNumber": 1210
          },
          {
            "text": "| テキストのみ | 勤怠情報入力ダイアログ（閲覧モード）を表示。各項目は閲覧のみで編集不可。「閉じる」リンクのみ表示 |",
            "lineNumber": 1211
          },
          {
            "lineNumber": 1212
          },
          {
            "text": "##### 勤怠情報入力ダイアログの項目",
            "lineNumber": 1213
          },
          {
            "text": "- 出社: 出勤時刻（HH:MM形式）",
            "lineNumber": 1214
          },
          {
            "text": "- 退社: 退勤時刻（HH:MM形式）",
            "lineNumber": 1215
          },
          {
            "text": "- 休憩1: 休憩開始時刻 〜 休憩終了時刻",
            "lineNumber": 1216
          },
          {
            "text": "- 休憩2: 休憩開始時刻 〜 休憩終了時刻（追加ボタンで行追加可能）",
            "lineNumber": 1217
          },
          {
            "text": "- 公用外出1: 外出開始時刻 〜 外出終了時刻",
            "lineNumber": 1218
          },
          {
            "text": "- 公用外出2: 外出開始時刻 〜 外出終了時刻（追加ボタンで行追加可能）",
            "lineNumber": 1219
          },
          {
            "text": "- 勤務場所: プルダウンで選択（通勤/在宅/直行直帰/出張）",
            "lineNumber": 1220
          },
          {
            "lineNumber": 1221
          },
          {
            "text": "##### 土日祝の扱い",
            "lineNumber": 1222
          },
          {
            "text": "- **土日祝の基本テキストボックス非表示**: 土曜日、日曜日、祝日の行では、休日出勤申請が未申請または未承認の場合、出社・退社・勤務場所の基本テキストボックスは表示されません",
            "lineNumber": 1223
          },
          {
            "text": "- **休日出勤申請が承認されている場合の例外**: 休日出勤申請が申請中（PENDING）または承認済み（APPROVED）の場合、土日祝でも出社・退社・勤務場所のテキストボックスが表示され、編集可能になります",
            "lineNumber": 1224
          }
        ]
      },
      "score": 0.3633233308792114
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\feture_list\\TeamSpirit機能一覧.md",
        "range": {
          "startPosition": {
            "line": 54
          },
          "endPosition": {
            "line": 61
          }
        },
        "contents": "| 51 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | キャンセル_押下 | 入力内容を破棄して画面を閉じる |\n| 52 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | リセット_押下 | 入力内容をクリアする |\n| 53 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | 備考欄_押下 | 勤務表画面の備考欄(＋マーク)を押下して備考ダイアログを表示 |\n| 54 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | 備考理由_入力 | 打刻できなかった理由を備考欄に入力する（手入力の場合は理由入力必須） |\n| 55 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 日付欄_押下 | 勤務表画面の日付欄をクリックして日次確定申請を行う |\n| 56 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 日次確定申請_実行 | 日次の勤務内容を確定申請する。申請ボタンのアイコンが変わる |\n| 57 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 申請状態_表示 | 日次確定申請が行われると、申請ボタンのアイコンが↑（未申請）から別のアイコンに変わる |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 51 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | キャンセル_押下 | 入力内容を破棄して画面を閉じる |",
            "lineNumber": 55
          },
          {
            "text": "| 52 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | リセット_押下 | 入力内容をクリアする |",
            "lineNumber": 56
          },
          {
            "text": "| 53 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | 備考欄_押下 | 勤務表画面の備考欄(＋マーク)を押下して備考ダイアログを表示 |",
            "lineNumber": 57
          },
          {
            "text": "| 54 | 勤務表 | 画面 | SCR_TS_0210 | 動意情報入力 | ManualAttendanceInput | N/A | N/A | SCR_TS_021001 | 動意情報入力画面 | ManualAttendanceInputDialog | 従業員 | WEBタイムレコーダーで打刻できなかった場合に手動で勤務時間を入力する機能 | 備考理由_入力 | 打刻できなかった理由を備考欄に入力する（手入力の場合は理由入力必須） |",
            "lineNumber": 58
          },
          {
            "text": "| 55 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 日付欄_押下 | 勤務表画面の日付欄をクリックして日次確定申請を行う |",
            "lineNumber": 59
          },
          {
            "text": "| 56 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 日次確定申請_実行 | 日次の勤務内容を確定申請する。申請ボタンのアイコンが変わる |",
            "lineNumber": 60
          },
          {
            "text": "| 57 | 勤務表 | 画面 | SCR_TS_0211 | 日次確定 | DailyConfirmation | N/A | N/A | SCR_TS_020801 | 日次確定 | DailyConfirmation | 従業員 | 日々の勤務内容を確定する機能（日次申請のチェック処理は実施対象） | 申請状態_表示 | 日次確定申請が行われると、申請ボタンのアイコンが↑（未申請）から別のアイコンに変わる |",
            "lineNumber": 61
          }
        ]
      },
      "score": 0.36252468824386597
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 775
          },
          "endPosition": {
            "line": 826
          }
        },
        "contents": "- 取得元：画面項目定義\n  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |\n  | :--- | :--- | :--- | :--- | :--- |\n  | 開始時刻 | 必須 | 開始時刻が未入力の場合、エラー | E_APP_061 | 開始時刻を入力してください。 |\n  | 終了時刻 | 必須 | 終了時刻が未入力の場合、エラー | E_APP_062 | 終了時刻を入力してください。 |\n  | 時刻 | 順序整合 | 開始時刻が終了時刻より後の場合、エラー | E_APP_063 | 開始時刻は終了時刻より前の時刻を入力してください。 |\n  | 休憩時間 | 重複 | 休憩時間が重複している場合、エラー | E_APP_064 | 休憩時間が重複しています。 |\n\n## テーブル取得仕様\n\n#### No.1\n- 取得仕様名：従業員情報取得\n- テーブル名：EMPLOYEE\n  | 項目名 | 取得内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 従業員ID | EMPLOYEE.EMPLOYEE_ID | |\n  | 従業員名 | EMPLOYEE.EMPLOYEE_NAME | |\n- 関連する取得仕様\n  - なし\n- 取得条件\n  - EMPLOYEE.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - EMPLOYEE.IS_ACTIVE = TRUE\n- その他\n  - なし\n\n## テーブル更新仕様\n\n#### No.1\n- 更新仕様名：日次確定申請\n- テーブル名：ATTENDANCE_RECORD\n- 種別：更新\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |\n  | IS_DAILY_CONFIRMED | TRUE | |\n  | DAILY_CONFIRMED_AT | 現在日時 | |\n  | APPROVAL_STATUS | 'PENDING' | |\n  | UPDATED_AT | 現在日時 | |\n- 関連する取得仕様\n  - なし\n- 更新条件\n  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付\n- その他\n  - 日次確定申請時にチェック仕様No.1のチェックを実行\n\n#### No.2\n- 更新仕様名：休暇申請登録\n- テーブル名：VACATION_HISTORY\n- 種別：登録\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 取得元：画面項目定義",
            "lineNumber": 776
          },
          {
            "text": "  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |",
            "lineNumber": 777
          },
          {
            "text": "  | :--- | :--- | :--- | :--- | :--- |",
            "lineNumber": 778
          },
          {
            "text": "  | 開始時刻 | 必須 | 開始時刻が未入力の場合、エラー | E_APP_061 | 開始時刻を入力してください。 |",
            "lineNumber": 779
          },
          {
            "text": "  | 終了時刻 | 必須 | 終了時刻が未入力の場合、エラー | E_APP_062 | 終了時刻を入力してください。 |",
            "lineNumber": 780
          },
          {
            "text": "  | 時刻 | 順序整合 | 開始時刻が終了時刻より後の場合、エラー | E_APP_063 | 開始時刻は終了時刻より前の時刻を入力してください。 |",
            "lineNumber": 781
          },
          {
            "text": "  | 休憩時間 | 重複 | 休憩時間が重複している場合、エラー | E_APP_064 | 休憩時間が重複しています。 |",
            "lineNumber": 782
          },
          {
            "lineNumber": 783
          },
          {
            "text": "## テーブル取得仕様",
            "lineNumber": 784
          },
          {
            "lineNumber": 785
          },
          {
            "text": "#### No.1",
            "lineNumber": 786
          },
          {
            "text": "- 取得仕様名：従業員情報取得",
            "lineNumber": 787
          },
          {
            "text": "- テーブル名：EMPLOYEE",
            "lineNumber": 788
          },
          {
            "text": "  | 項目名 | 取得内容 | 補足 |",
            "lineNumber": 789
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 790
          },
          {
            "text": "  | 従業員ID | EMPLOYEE.EMPLOYEE_ID | |",
            "lineNumber": 791
          },
          {
            "text": "  | 従業員名 | EMPLOYEE.EMPLOYEE_NAME | |",
            "lineNumber": 792
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 793
          },
          {
            "text": "  - なし",
            "lineNumber": 794
          },
          {
            "text": "- 取得条件",
            "lineNumber": 795
          },
          {
            "text": "  - EMPLOYEE.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 796
          },
          {
            "text": "  - EMPLOYEE.IS_ACTIVE = TRUE",
            "lineNumber": 797
          },
          {
            "text": "- その他",
            "lineNumber": 798
          },
          {
            "text": "  - なし",
            "lineNumber": 799
          },
          {
            "lineNumber": 800
          },
          {
            "text": "## テーブル更新仕様",
            "lineNumber": 801
          },
          {
            "lineNumber": 802
          },
          {
            "text": "#### No.1",
            "lineNumber": 803
          },
          {
            "text": "- 更新仕様名：日次確定申請",
            "lineNumber": 804
          },
          {
            "text": "- テーブル名：ATTENDANCE_RECORD",
            "lineNumber": 805
          },
          {
            "text": "- 種別：更新",
            "lineNumber": 806
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 807
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 808
          },
          {
            "text": "  | IS_DAILY_CONFIRMED | TRUE | |",
            "lineNumber": 809
          },
          {
            "text": "  | DAILY_CONFIRMED_AT | 現在日時 | |",
            "lineNumber": 810
          },
          {
            "text": "  | APPROVAL_STATUS | 'PENDING' | |",
            "lineNumber": 811
          },
          {
            "text": "  | UPDATED_AT | 現在日時 | |",
            "lineNumber": 812
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 813
          },
          {
            "text": "  - なし",
            "lineNumber": 814
          },
          {
            "text": "- 更新条件",
            "lineNumber": 815
          },
          {
            "text": "  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 816
          },
          {
            "text": "  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付",
            "lineNumber": 817
          },
          {
            "text": "- その他",
            "lineNumber": 818
          },
          {
            "text": "  - 日次確定申請時にチェック仕様No.1のチェックを実行",
            "lineNumber": 819
          },
          {
            "lineNumber": 820
          },
          {
            "text": "#### No.2",
            "lineNumber": 821
          },
          {
            "text": "- 更新仕様名：休暇申請登録",
            "lineNumber": 822
          },
          {
            "text": "- テーブル名：VACATION_HISTORY",
            "lineNumber": 823
          },
          {
            "text": "- 種別：登録",
            "lineNumber": 824
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 825
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 826
          }
        ]
      },
      "score": 0.36103934049606323
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\README_MySQL.md",
        "range": {
          "startPosition": {
            "line": 211
          },
          "endPosition": {
            "line": 235
          }
        },
        "contents": "| **SCHEDULED_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;8.00&#96; | 所定労働時間（時間単位）。通常は8時間。例: &#96;8.00&#96;=8時間 |\n| **OVERTIME_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 残業時間（時間単位）。実労働時間が所定労働時間を超えた分。例: &#96;0.50&#96;=30分残業 |\n| **NIGHT_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 深夜労働時間（時間単位）。22時〜5時の労働時間。例: &#96;2.00&#96;=2時間 |\n| **HOLIDAY_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 休日労働時間（時間単位）。法定休日に働いた時間。例: &#96;8.00&#96;=8時間 |\n| **IS_DAILY_CONFIRMED** | BOOLEAN | NULL | &#96;FALSE&#96; | 日次確定フラグ。&#96;TRUE&#96;=その日の勤怠を確定申請済み。日次確定ボタンで変更されます。 |\n| **DAILY_CONFIRMED_AT** | DATETIME | NULL | - | 日次確定日時。いつ確定申請したか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |\n| **IS_MONTHLY_CONFIRMED** | BOOLEAN | NULL | &#96;FALSE&#96; | 月次確定フラグ。&#96;TRUE&#96;=月次の勤怠を確定申請済み。 |\n| **MONTHLY_CONFIRMED_AT** | DATETIME | NULL | - | 月次確定日時。いつ月次確定申請したか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |\n| **APPROVAL_STATUS** | VARCHAR(20) | NULL | &#96;NOT_SUBMITTED&#96; | 承認状態。&#96;NOT_SUBMITTED&#96;=未申請、&#96;PENDING&#96;=申請中、&#96;APPROVED&#96;=承認済、&#96;REJECTED&#96;=却下 |\n| **REMARK_TEXT** | TEXT | NULL | - | 備考内容。打刻できなかった理由やその他の備考を記入します。手入力の場合は必須入力。 |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n**重要な制約:**\n- 1人の従業員は1日1レコードのみ（&#96;EMPLOYEE_ID&#96; + &#96;WORK_DATE&#96;でユニーク）\n- 日次確定申請には勤務場所の入力が必須\n\n---\n\n### 7. 休憩時間 (BREAK_TIME)\n\n1日の勤怠記録に紐づく複数の休憩時間帯を記録するテーブルです。1つの勤怠記録に対して複数レコード（休憩1、休憩2、休憩3など）が存在します。\n\n| カラム名 | 型 | NULL | デフォルト | 説明 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| **SCHEDULED_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;8.00&#96; | 所定労働時間（時間単位）。通常は8時間。例: &#96;8.00&#96;=8時間 |",
            "lineNumber": 212
          },
          {
            "text": "| **OVERTIME_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 残業時間（時間単位）。実労働時間が所定労働時間を超えた分。例: &#96;0.50&#96;=30分残業 |",
            "lineNumber": 213
          },
          {
            "text": "| **NIGHT_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 深夜労働時間（時間単位）。22時〜5時の労働時間。例: &#96;2.00&#96;=2時間 |",
            "lineNumber": 214
          },
          {
            "text": "| **HOLIDAY_WORK_HOURS** | DECIMAL(5,2) | NULL | &#96;0&#96; | 休日労働時間（時間単位）。法定休日に働いた時間。例: &#96;8.00&#96;=8時間 |",
            "lineNumber": 215
          },
          {
            "text": "| **IS_DAILY_CONFIRMED** | BOOLEAN | NULL | &#96;FALSE&#96; | 日次確定フラグ。&#96;TRUE&#96;=その日の勤怠を確定申請済み。日次確定ボタンで変更されます。 |",
            "lineNumber": 216
          },
          {
            "text": "| **DAILY_CONFIRMED_AT** | DATETIME | NULL | - | 日次確定日時。いつ確定申請したか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |",
            "lineNumber": 217
          },
          {
            "text": "| **IS_MONTHLY_CONFIRMED** | BOOLEAN | NULL | &#96;FALSE&#96; | 月次確定フラグ。&#96;TRUE&#96;=月次の勤怠を確定申請済み。 |",
            "lineNumber": 218
          },
          {
            "text": "| **MONTHLY_CONFIRMED_AT** | DATETIME | NULL | - | 月次確定日時。いつ月次確定申請したか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |",
            "lineNumber": 219
          },
          {
            "text": "| **APPROVAL_STATUS** | VARCHAR(20) | NULL | &#96;NOT_SUBMITTED&#96; | 承認状態。&#96;NOT_SUBMITTED&#96;=未申請、&#96;PENDING&#96;=申請中、&#96;APPROVED&#96;=承認済、&#96;REJECTED&#96;=却下 |",
            "lineNumber": 220
          },
          {
            "text": "| **REMARK_TEXT** | TEXT | NULL | - | 備考内容。打刻できなかった理由やその他の備考を記入します。手入力の場合は必須入力。 |",
            "lineNumber": 221
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 222
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 223
          },
          {
            "lineNumber": 224
          },
          {
            "text": "**重要な制約:**",
            "lineNumber": 225
          },
          {
            "text": "- 1人の従業員は1日1レコードのみ（&#96;EMPLOYEE_ID&#96; + &#96;WORK_DATE&#96;でユニーク）",
            "lineNumber": 226
          },
          {
            "text": "- 日次確定申請には勤務場所の入力が必須",
            "lineNumber": 227
          },
          {
            "lineNumber": 228
          },
          {
            "text": "---",
            "lineNumber": 229
          },
          {
            "lineNumber": 230
          },
          {
            "text": "### 7. 休憩時間 (BREAK_TIME)",
            "lineNumber": 231
          },
          {
            "lineNumber": 232
          },
          {
            "text": "1日の勤怠記録に紐づく複数の休憩時間帯を記録するテーブルです。1つの勤怠記録に対して複数レコード（休憩1、休憩2、休憩3など）が存在します。",
            "lineNumber": 233
          },
          {
            "lineNumber": 234
          },
          {
            "text": "| カラム名 | 型 | NULL | デフォルト | 説明 |",
            "lineNumber": 235
          }
        ]
      },
      "score": 0.35992780327796936
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1102
          },
          "endPosition": {
            "line": 1142
          }
        },
        "contents": "- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | POST | |\n  | エンドポイント | /api/attendance/monthly-approval/cancel | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |\n  | YEAR | 表示対象年 | リクエストボディ、YYYY形式 |\n  | MONTH | 表示対象月 | リクエストボディ、MM形式 |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n- 関連する取得仕様\n  - なし\n- その他\n  - 月次確定申請中（MONTHLY_APPROVAL_STATUS=PENDING）の場合のみ取消可能\n  - MONTHLY_APPROVAL_HISTORYにCANCEL履歴を追加\n  - MONTHLY_ATTENDANCEのMONTHLY_APPROVAL_STATUSをNOT_SUBMITTEDに更新\n\n## 補足説明\n\n### ホーム画面からの連携\nホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、バックエンドAPIを通じてATTENDANCE_RECORDテーブルに勤怠データが記録されます。勤務表画面では、このデータを取得して該当日の出社・退社の列に時刻を表示します。\n\n### フレックスタイム制の労働時間管理\n本システムはフレックスタイム制を採用しており、以下の規定に基づいて労働時間を管理します：\n\n#### 基本規定\n- **標準勤務時間**: 9:00-17:30（標準勤務時間帯、グラフ上でグレー表示）\n- **1日の標準労働時間**: 7時間30分（7.5時間）\n- **最小勤務時間**: 3時間45分/日\n- **清算期間**: 1ヶ月単位\n- **遅刻・早退の扱い**: フレックスタイム適用社員には遅刻・早退・私用外出の定義は適用しない\n\n#### 残業時間の計算方法\nフレックスタイム制では、月次で残業を判定します：\n\n1. **法定時間内残業**:\n   - 計算方法: 実作業時間 - 所定労働時間",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- リクエスト",
            "lineNumber": 1103
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 1104
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1105
          },
          {
            "text": "  | HTTPメソッド | POST | |",
            "lineNumber": 1106
          },
          {
            "text": "  | エンドポイント | /api/attendance/monthly-approval/cancel | |",
            "lineNumber": 1107
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |",
            "lineNumber": 1108
          },
          {
            "text": "  | YEAR | 表示対象年 | リクエストボディ、YYYY形式 |",
            "lineNumber": 1109
          },
          {
            "text": "  | MONTH | 表示対象月 | リクエストボディ、MM形式 |",
            "lineNumber": 1110
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1111
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1112
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1113
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 1114
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 1115
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1116
          },
          {
            "text": "  - なし",
            "lineNumber": 1117
          },
          {
            "text": "- その他",
            "lineNumber": 1118
          },
          {
            "text": "  - 月次確定申請中（MONTHLY_APPROVAL_STATUS=PENDING）の場合のみ取消可能",
            "lineNumber": 1119
          },
          {
            "text": "  - MONTHLY_APPROVAL_HISTORYにCANCEL履歴を追加",
            "lineNumber": 1120
          },
          {
            "text": "  - MONTHLY_ATTENDANCEのMONTHLY_APPROVAL_STATUSをNOT_SUBMITTEDに更新",
            "lineNumber": 1121
          },
          {
            "lineNumber": 1122
          },
          {
            "text": "## 補足説明",
            "lineNumber": 1123
          },
          {
            "lineNumber": 1124
          },
          {
            "text": "### ホーム画面からの連携",
            "lineNumber": 1125
          },
          {
            "text": "ホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、バックエンドAPIを通じてATTENDANCE_RECORDテーブルに勤怠データが記録されます。勤務表画面では、このデータを取得して該当日の出社・退社の列に時刻を表示します。",
            "lineNumber": 1126
          },
          {
            "lineNumber": 1127
          },
          {
            "text": "### フレックスタイム制の労働時間管理",
            "lineNumber": 1128
          },
          {
            "text": "本システムはフレックスタイム制を採用しており、以下の規定に基づいて労働時間を管理します：",
            "lineNumber": 1129
          },
          {
            "lineNumber": 1130
          },
          {
            "text": "#### 基本規定",
            "lineNumber": 1131
          },
          {
            "text": "- **標準勤務時間**: 9:00-17:30（標準勤務時間帯、グラフ上でグレー表示）",
            "lineNumber": 1132
          },
          {
            "text": "- **1日の標準労働時間**: 7時間30分（7.5時間）",
            "lineNumber": 1133
          },
          {
            "text": "- **最小勤務時間**: 3時間45分/日",
            "lineNumber": 1134
          },
          {
            "text": "- **清算期間**: 1ヶ月単位",
            "lineNumber": 1135
          },
          {
            "text": "- **遅刻・早退の扱い**: フレックスタイム適用社員には遅刻・早退・私用外出の定義は適用しない",
            "lineNumber": 1136
          },
          {
            "lineNumber": 1137
          },
          {
            "text": "#### 残業時間の計算方法",
            "lineNumber": 1138
          },
          {
            "text": "フレックスタイム制では、月次で残業を判定します：",
            "lineNumber": 1139
          },
          {
            "lineNumber": 1140
          },
          {
            "text": "1. **法定時間内残業**:",
            "lineNumber": 1141
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定労働時間",
            "lineNumber": 1142
          }
        ]
      },
      "score": 0.35507550835609436
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 1267
          },
          "endPosition": {
            "line": 1300
          }
        },
        "contents": "- **休憩時間**: 休憩時間帯を「HH:MM-HH:MM」形式で表示（例: 12:00-13:00）。複数の休憩時間がある場合はカンマ区切りで表示\n- **総労働時間**: 出勤から退勤までの時間を「H:MM」形式で表示（例: 7:50）\n- **実労働時間**: 休憩時間を除いた実際の労働時間を「H:MM」形式で表示（例: 7:50）\n- **備考**: 既存の備考がある場合はその値を表示、ない場合は空欄。手入力の場合は理由を入力する必要がある\n\n#### 申請条件\n日次確定申請を行うには、以下の条件を満たす必要があります：\n1. 出退社時刻が入力されていること\n2. 勤務場所が設定されていること\n3. 工数合計と実労働時間が一致していること\n4. 手入力の場合は備考に理由が入力されていること\n\n#### エラーメッセージの表示\n承認申請ボタンを押下した際にチェックエラーがある場合、備考欄の下に赤文字でエラーメッセージが表示されます。\nエラーメッセージは、チェック仕様No.1で定義されたメッセージが表示されます。\n主なエラーメッセージの例：\n- 「出退社時刻が未入力のため、日次確定できません。」\n- 「勤務場所を選択してください。」\n- 「工数の合計と実労働時間が合いません。」\n- 「手入力の場合は備考に理由を入力してください。」\n\nエラーメッセージは、エラーが解消されるまで表示され続けます。\n\n#### 申請後の動作\n- 承認申請ボタンを押下すると、日次確定申請が送信されます\n- 申請成功後、ATTENDANCE_RECORDテーブルのIS_DAILY_CONFIRMEDがTRUE、APPROVAL_STATUSがPENDINGに更新されます\n- 勤務表画面に戻ると、該当日の日付列と申請列の+アイコンが↑マーク（申請中）に変更されます\n\n### 休暇申請\n休暇申請は、有給休暇や特別休暇などの休暇を取得するための申請です。\n\n#### 申請内容\n- **休暇種類**: 年次有給休暇、夏季休暇、病気休暇、忌引休暇、代休などから選択",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **休憩時間**: 休憩時間帯を「HH:MM-HH:MM」形式で表示（例: 12:00-13:00）。複数の休憩時間がある場合はカンマ区切りで表示",
            "lineNumber": 1268
          },
          {
            "text": "- **総労働時間**: 出勤から退勤までの時間を「H:MM」形式で表示（例: 7:50）",
            "lineNumber": 1269
          },
          {
            "text": "- **実労働時間**: 休憩時間を除いた実際の労働時間を「H:MM」形式で表示（例: 7:50）",
            "lineNumber": 1270
          },
          {
            "text": "- **備考**: 既存の備考がある場合はその値を表示、ない場合は空欄。手入力の場合は理由を入力する必要がある",
            "lineNumber": 1271
          },
          {
            "lineNumber": 1272
          },
          {
            "text": "#### 申請条件",
            "lineNumber": 1273
          },
          {
            "text": "日次確定申請を行うには、以下の条件を満たす必要があります：",
            "lineNumber": 1274
          },
          {
            "text": "1. 出退社時刻が入力されていること",
            "lineNumber": 1275
          },
          {
            "text": "2. 勤務場所が設定されていること",
            "lineNumber": 1276
          },
          {
            "text": "3. 工数合計と実労働時間が一致していること",
            "lineNumber": 1277
          },
          {
            "text": "4. 手入力の場合は備考に理由が入力されていること",
            "lineNumber": 1278
          },
          {
            "lineNumber": 1279
          },
          {
            "text": "#### エラーメッセージの表示",
            "lineNumber": 1280
          },
          {
            "text": "承認申請ボタンを押下した際にチェックエラーがある場合、備考欄の下に赤文字でエラーメッセージが表示されます。",
            "lineNumber": 1281
          },
          {
            "text": "エラーメッセージは、チェック仕様No.1で定義されたメッセージが表示されます。",
            "lineNumber": 1282
          },
          {
            "text": "主なエラーメッセージの例：",
            "lineNumber": 1283
          },
          {
            "text": "- 「出退社時刻が未入力のため、日次確定できません。」",
            "lineNumber": 1284
          },
          {
            "text": "- 「勤務場所を選択してください。」",
            "lineNumber": 1285
          },
          {
            "text": "- 「工数の合計と実労働時間が合いません。」",
            "lineNumber": 1286
          },
          {
            "text": "- 「手入力の場合は備考に理由を入力してください。」",
            "lineNumber": 1287
          },
          {
            "lineNumber": 1288
          },
          {
            "text": "エラーメッセージは、エラーが解消されるまで表示され続けます。",
            "lineNumber": 1289
          },
          {
            "lineNumber": 1290
          },
          {
            "text": "#### 申請後の動作",
            "lineNumber": 1291
          },
          {
            "text": "- 承認申請ボタンを押下すると、日次確定申請が送信されます",
            "lineNumber": 1292
          },
          {
            "text": "- 申請成功後、ATTENDANCE_RECORDテーブルのIS_DAILY_CONFIRMEDがTRUE、APPROVAL_STATUSがPENDINGに更新されます",
            "lineNumber": 1293
          },
          {
            "text": "- 勤務表画面に戻ると、該当日の日付列と申請列の+アイコンが↑マーク（申請中）に変更されます",
            "lineNumber": 1294
          },
          {
            "lineNumber": 1295
          },
          {
            "text": "### 休暇申請",
            "lineNumber": 1296
          },
          {
            "text": "休暇申請は、有給休暇や特別休暇などの休暇を取得するための申請です。",
            "lineNumber": 1297
          },
          {
            "lineNumber": 1298
          },
          {
            "text": "#### 申請内容",
            "lineNumber": 1299
          },
          {
            "text": "- **休暇種類**: 年次有給休暇、夏季休暇、病気休暇、忌引休暇、代休などから選択",
            "lineNumber": 1300
          }
        ]
      },
      "score": 0.35477331280708313
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 212
          },
          "endPosition": {
            "line": 247
          }
        },
        "contents": "    &lt;!-- エラー表示 --&gt;\n    &lt;div v-if=\"error &amp;&amp; !loading\" class=\"error-message\"&gt;\n      &lt;p&gt;{{ error }}&lt;/p&gt;\n      &lt;button @click=\"loadAttendanceData\" class=\"retry-button\"&gt;再読み込み&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- データ行 --&gt;\n    &lt;div v-for=\"day in attendanceData\" :key=\"day.date\" :class=\"['table-row', getRowClass(day)]\"&gt;\n      &lt;!-- 日次確定ボタン（+アイコン） --&gt;\n      &lt;button v-if=\"day.approvalStatus === 'NOT_SUBMITTED' &amp;&amp; (!(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6) || day.hasHolidayWorkApplication)\" class=\"daily-confirm-button\" @click=\"confirmDaily(day)\" title=\"日次確定\"&gt;\n        &lt;div class=\"plus-icon-circle\"&gt;\n          &lt;div class=\"plus-icon-vertical\"&gt;&lt;/div&gt;\n          &lt;div class=\"plus-icon-horizontal\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/button&gt;\n      &lt;!-- 申請中マーク（↑アイコン） --&gt;\n      &lt;div v-if=\"day.approvalStatus === 'PENDING' &amp;&amp; !(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6)\" class=\"pending-icon-daily\" title=\"日次確定(承認待ち)\"&gt;\n        &lt;svg style=\"width: 17px; height: 17px;\" viewBox=\"0 0 17 17\"&gt;\n          &lt;!-- 矢印のシャフト（垂直線） --&gt;\n          &lt;line x1=\"8.5\" y1=\"3\" x2=\"8.5\" y2=\"12\" stroke=\"rgb(25, 158, 214)\" stroke-width=\"2\" stroke-linecap=\"square\"/&gt;\n          &lt;!-- 矢印の頭部（三角形） --&gt;\n          &lt;path d=\"M 8.5 3 L 3 8 L 14 8 Z\" fill=\"none\" stroke=\"rgb(25, 158, 214)\" stroke-width=\"2\" stroke-linejoin=\"miter\"/&gt;\n        &lt;/svg&gt;\n      &lt;/div&gt;\n      &lt;!-- 承認済みマーク（チェックアイコン） --&gt;\n      &lt;div v-if=\"day.approvalStatus === 'APPROVED' &amp;&amp; !(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6)\" class=\"check-icon-daily\" title=\"日次確定(承認済み)\"&gt;\n        &lt;svg style=\"width: 17px; height: 17px;\"&gt;\n          &lt;line x1=\"2\" y1=\"8\" x2=\"7\" y2=\"13\" stroke=\"rgb(255, 255, 255)\" stroke-width=\"2\" /&gt;\n          &lt;line x1=\"7\" y1=\"13\" x2=\"15\" y2=\"4\" stroke=\"rgb(255, 255, 255)\" stroke-width=\"2\" /&gt;\n        &lt;/svg&gt;\n      &lt;/div&gt;\n      &lt;!-- 日付 --&gt;\n      &lt;span class=\"cell-date\"&gt;\n        &lt;span class=\"date-number\"&gt;{{ day.dateNumber }}&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;!-- エラー表示 --&gt;",
            "lineNumber": 214
          },
          {
            "text": "    &lt;div v-if=\"error &amp;&amp; !loading\" class=\"error-message\"&gt;",
            "lineNumber": 215
          },
          {
            "text": "      &lt;p&gt;{{ error }}&lt;/p&gt;",
            "lineNumber": 216
          },
          {
            "text": "      &lt;button @click=\"loadAttendanceData\" class=\"retry-button\"&gt;再読み込み&lt;/button&gt;",
            "lineNumber": 217
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 218
          },
          {
            "lineNumber": 219
          },
          {
            "text": "    &lt;!-- データ行 --&gt;",
            "lineNumber": 220
          },
          {
            "text": "    &lt;div v-for=\"day in attendanceData\" :key=\"day.date\" :class=\"['table-row', getRowClass(day)]\"&gt;",
            "lineNumber": 221
          },
          {
            "text": "      &lt;!-- 日次確定ボタン（+アイコン） --&gt;",
            "lineNumber": 222
          },
          {
            "text": "      &lt;button v-if=\"day.approvalStatus === 'NOT_SUBMITTED' &amp;&amp; (!(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6) || day.hasHolidayWorkApplication)\" class=\"daily-confirm-button\" @click=\"confirmDaily(day)\" title=\"日次確定\"&gt;",
            "lineNumber": 223
          },
          {
            "text": "        &lt;div class=\"plus-icon-circle\"&gt;",
            "lineNumber": 224
          },
          {
            "text": "          &lt;div class=\"plus-icon-vertical\"&gt;&lt;/div&gt;",
            "lineNumber": 225
          },
          {
            "text": "          &lt;div class=\"plus-icon-horizontal\"&gt;&lt;/div&gt;",
            "lineNumber": 226
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 227
          },
          {
            "text": "      &lt;/button&gt;",
            "lineNumber": 228
          },
          {
            "text": "      &lt;!-- 申請中マーク（↑アイコン） --&gt;",
            "lineNumber": 229
          },
          {
            "text": "      &lt;div v-if=\"day.approvalStatus === 'PENDING' &amp;&amp; !(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6)\" class=\"pending-icon-daily\" title=\"日次確定(承認待ち)\"&gt;",
            "lineNumber": 230
          },
          {
            "text": "        &lt;svg style=\"width: 17px; height: 17px;\" viewBox=\"0 0 17 17\"&gt;",
            "lineNumber": 231
          },
          {
            "text": "          &lt;!-- 矢印のシャフト（垂直線） --&gt;",
            "lineNumber": 232
          },
          {
            "text": "          &lt;line x1=\"8.5\" y1=\"3\" x2=\"8.5\" y2=\"12\" stroke=\"rgb(25, 158, 214)\" stroke-width=\"2\" stroke-linecap=\"square\"/&gt;",
            "lineNumber": 233
          },
          {
            "text": "          &lt;!-- 矢印の頭部（三角形） --&gt;",
            "lineNumber": 234
          },
          {
            "text": "          &lt;path d=\"M 8.5 3 L 3 8 L 14 8 Z\" fill=\"none\" stroke=\"rgb(25, 158, 214)\" stroke-width=\"2\" stroke-linejoin=\"miter\"/&gt;",
            "lineNumber": 235
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 236
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 237
          },
          {
            "text": "      &lt;!-- 承認済みマーク（チェックアイコン） --&gt;",
            "lineNumber": 238
          },
          {
            "text": "      &lt;div v-if=\"day.approvalStatus === 'APPROVED' &amp;&amp; !(day.isHoliday || day.dayOfWeekNum === 0 || day.dayOfWeekNum === 6)\" class=\"check-icon-daily\" title=\"日次確定(承認済み)\"&gt;",
            "lineNumber": 239
          },
          {
            "text": "        &lt;svg style=\"width: 17px; height: 17px;\"&gt;",
            "lineNumber": 240
          },
          {
            "text": "          &lt;line x1=\"2\" y1=\"8\" x2=\"7\" y2=\"13\" stroke=\"rgb(255, 255, 255)\" stroke-width=\"2\" /&gt;",
            "lineNumber": 241
          },
          {
            "text": "          &lt;line x1=\"7\" y1=\"13\" x2=\"15\" y2=\"4\" stroke=\"rgb(255, 255, 255)\" stroke-width=\"2\" /&gt;",
            "lineNumber": 242
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 243
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 244
          },
          {
            "text": "      &lt;!-- 日付 --&gt;",
            "lineNumber": 245
          },
          {
            "text": "      &lt;span class=\"cell-date\"&gt;",
            "lineNumber": 246
          },
          {
            "text": "        &lt;span class=\"date-number\"&gt;{{ day.dateNumber }}&lt;/span&gt;",
            "lineNumber": 247
          }
        ]
      },
      "score": 0.35298413038253784
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1139
          },
          "endPosition": {
            "line": 1165
          }
        },
        "contents": "1. **法定時間内残業**:\n   - 計算方法: 実作業時間 - 所定労働時間\n   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間\n   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間\n\n2. **法定時間外残業**:\n   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00\n   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間\n\n### 月次サマリーデータの表示\n画面下部に月間の集計データが表示されます：\n\n1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）\n2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）\n3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）\n4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）\n5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）\n   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)\n   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能\n   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除\n   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算\n   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます\n6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）\n7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）\n   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
        "signatures": {},
        "detailedLines": [
          {
            "text": "1. **法定時間内残業**:",
            "lineNumber": 1141
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定労働時間",
            "lineNumber": 1142
          },
          {
            "text": "   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 1143
          },
          {
            "text": "   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間",
            "lineNumber": 1144
          },
          {
            "lineNumber": 1145
          },
          {
            "text": "2. **法定時間外残業**:",
            "lineNumber": 1146
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00",
            "lineNumber": 1147
          },
          {
            "text": "   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間",
            "lineNumber": 1148
          },
          {
            "lineNumber": 1149
          },
          {
            "text": "### 月次サマリーデータの表示",
            "lineNumber": 1150
          },
          {
            "text": "画面下部に月間の集計データが表示されます：",
            "lineNumber": 1151
          },
          {
            "lineNumber": 1152
          },
          {
            "text": "1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）",
            "lineNumber": 1153
          },
          {
            "text": "2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）",
            "lineNumber": 1154
          },
          {
            "text": "3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）",
            "lineNumber": 1155
          },
          {
            "text": "4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）",
            "lineNumber": 1156
          },
          {
            "text": "5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）",
            "lineNumber": 1157
          },
          {
            "text": "   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)",
            "lineNumber": 1158
          },
          {
            "text": "   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能",
            "lineNumber": 1159
          },
          {
            "text": "   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除",
            "lineNumber": 1160
          },
          {
            "text": "   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算",
            "lineNumber": 1161
          },
          {
            "text": "   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます",
            "lineNumber": 1162
          },
          {
            "text": "6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）",
            "lineNumber": 1163
          },
          {
            "text": "7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）",
            "lineNumber": 1164
          },
          {
            "text": "   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
            "lineNumber": 1165
          }
        ]
      },
      "score": 0.3447227478027344
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\attendanceController.js",
        "range": {
          "startPosition": {
            "line": 116,
            "column": 2
          },
          "endPosition": {
            "line": 161,
            "column": 3
          }
        },
        "contents": "/**\n * 日次確定申請を行う。\n *\n * @param {Object} req リクエストオブジェクト\n * @param {Object} res レスポンスオブジェクト\n * @param {Function} next 次のミドルウェア関数\n */\nconst confirmDailyAttendance = async (req, res, next) =&gt; {\n  try {\n    const { employeeId, workDate } = req.body;\n    \n    if (!employeeId || !workDate) {\n      return res.status(400).json({\n        success: false,\n        message: '従業員IDと勤務日が必要です。'\n      });\n    }\n    \n    await attendanceService.confirmDailyAttendance(employeeId, workDate);\n    \n    res.json({\n      success: true,\n      message: '日次確定申請が完了しました。'\n    });\n  } catch (error) {\n    if (error.message.includes('出退社時刻') || error.message.includes('勤務場所') ||\n        error.message.includes('備考') || error.message.includes('工数')) {\n      return res.status(400).json({\n        success: false,\n        message: error.message\n      });\n    }\n\n    next(error);\n  }\n};\n\n/**\n * 日次確定申請を取り消す。\n *\n * @param {Object} req リクエストオブジェクト\n * @param {Object} res レスポンスオブジェクト\n * @param {Function} next 次のミドルウェア関数\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 119
          },
          {
            "text": " * 日次確定申請を行う。",
            "lineNumber": 120
          },
          {
            "text": " *",
            "lineNumber": 121
          },
          {
            "text": " * @param {Object} req リクエストオブジェクト",
            "lineNumber": 122
          },
          {
            "text": " * @param {Object} res レスポンスオブジェクト",
            "lineNumber": 123
          },
          {
            "text": " * @param {Function} next 次のミドルウェア関数",
            "lineNumber": 124
          },
          {
            "text": " */",
            "lineNumber": 125
          },
          {
            "text": "const confirmDailyAttendance = async (req, res, next) =&gt; {",
            "lineNumber": 126
          },
          {
            "text": "  try {",
            "lineNumber": 127
          },
          {
            "text": "    const { employeeId, workDate } = req.body;",
            "lineNumber": 128
          },
          {
            "text": "    ",
            "lineNumber": 129
          },
          {
            "text": "    if (!employeeId || !workDate) {",
            "lineNumber": 130
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 131
          },
          {
            "text": "        success: false,",
            "lineNumber": 132
          },
          {
            "text": "        message: '従業員IDと勤務日が必要です。'",
            "lineNumber": 133
          },
          {
            "text": "      });",
            "lineNumber": 134
          },
          {
            "text": "    }",
            "lineNumber": 135
          },
          {
            "text": "    ",
            "lineNumber": 136
          },
          {
            "text": "    await attendanceService.confirmDailyAttendance(employeeId, workDate);",
            "lineNumber": 137
          },
          {
            "text": "    ",
            "lineNumber": 138
          },
          {
            "text": "    res.json({",
            "lineNumber": 139
          },
          {
            "text": "      success: true,",
            "lineNumber": 140
          },
          {
            "text": "      message: '日次確定申請が完了しました。'",
            "lineNumber": 141
          },
          {
            "text": "    });",
            "lineNumber": 142
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 143
          },
          {
            "text": "    if (error.message.includes('出退社時刻') || error.message.includes('勤務場所') ||",
            "lineNumber": 144
          },
          {
            "text": "        error.message.includes('備考') || error.message.includes('工数')) {",
            "lineNumber": 145
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 146
          },
          {
            "text": "        success: false,",
            "lineNumber": 147
          },
          {
            "text": "        message: error.message",
            "lineNumber": 148
          },
          {
            "text": "      });",
            "lineNumber": 149
          },
          {
            "text": "    }",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "    next(error);",
            "lineNumber": 152
          },
          {
            "text": "  }",
            "lineNumber": 153
          },
          {
            "text": "};",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "/**",
            "lineNumber": 156
          },
          {
            "text": " * 日次確定申請を取り消す。",
            "lineNumber": 157
          },
          {
            "text": " *",
            "lineNumber": 158
          },
          {
            "text": " * @param {Object} req リクエストオブジェクト",
            "lineNumber": 159
          },
          {
            "text": " * @param {Object} res レスポンスオブジェクト",
            "lineNumber": 160
          },
          {
            "text": " * @param {Function} next 次のミドルウェア関数",
            "lineNumber": 161
          },
          {
            "text": " */",
            "lineNumber": 162
          }
        ]
      },
      "score": 0.34446656703948975
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

