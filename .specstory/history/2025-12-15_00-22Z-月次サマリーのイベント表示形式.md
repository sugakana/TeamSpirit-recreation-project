<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 0ffec473-da16-42e8-a7b1-3e9f95209ee8 (2025-12-15 00:22Z) -->

# 月次サマリーのイベント表示形式 (2025-12-15 00:22Z)

_**User**_

月次サマリー情報画面のイベント/勤務状況/勤務場所のところで、画像のような書き方にしてほしい。現在そこに備考の内容が書かれている。
まだ通常勤務で日時確定ではない場合は、勤務場所だけで良い。申請したなら日時確定、在宅という書き方にしてほしい。もし休暇なら二枚目の画像のような書き方にしてほしい。また祝日の場合、(勤労感謝の日)というような書き方にしてほしい。
@docs/detailed-design/ui/monthly-summary-screen.md に記載していなければ記載してください。

---

_**Agent (model composer-1, mode Agent)**_



---


月次サマリー画面の「イベント/勤務状況/勤務場所」欄の表示形式を変更します。現在の実装とドキュメントを確認中です。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\views\MonthlySummaryScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\detailed-design\ui\monthly-summary-screen.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "月次サマリー画面でイベント勤務状況勤務場所や備考を表示している箇所",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 52
          },
          "endPosition": {
            "line": 66
          }
        },
        "contents": "| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 24 | 備考 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| | &lt;テーブル行部分&gt; | | | | | | | | | | | |\n| 25 | 勤務表テーブル | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |\n| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録（30日分） |\n| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |\n| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日 |\n| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 所定休日（○：勤務表画面のテーブルでいえば土と祝日、青い背景色）、法定休日（◎：日曜日、赤い背景色）、有休計画付与日（△）のアイコン |\n| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | 祝日名、勤務状況（日次確定-在宅、日次確定-出勤、在宅など）、備考テキスト |\n| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 出社時刻。記録がない場合は表示しない |\n| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 退社時刻。記録がない場合は表示しない |\n| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |\n| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 53
          },
          {
            "text": "| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 54
          },
          {
            "text": "| 24 | 備考 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 55
          },
          {
            "text": "| | &lt;テーブル行部分&gt; | | | | | | | | | | | |",
            "lineNumber": 56
          },
          {
            "text": "| 25 | 勤務表テーブル | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |",
            "lineNumber": 57
          },
          {
            "text": "| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録（30日分） |",
            "lineNumber": 58
          },
          {
            "text": "| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |",
            "lineNumber": 59
          },
          {
            "text": "| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日 |",
            "lineNumber": 60
          },
          {
            "text": "| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 所定休日（○：勤務表画面のテーブルでいえば土と祝日、青い背景色）、法定休日（◎：日曜日、赤い背景色）、有休計画付与日（△）のアイコン |",
            "lineNumber": 61
          },
          {
            "text": "| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | 祝日名、勤務状況（日次確定-在宅、日次確定-出勤、在宅など）、備考テキスト |",
            "lineNumber": 62
          },
          {
            "text": "| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 出社時刻。記録がない場合は表示しない |",
            "lineNumber": 63
          },
          {
            "text": "| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 退社時刻。記録がない場合は表示しない |",
            "lineNumber": 64
          },
          {
            "text": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |",
            "lineNumber": 65
          },
          {
            "text": "| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |",
            "lineNumber": 66
          }
        ]
      },
      "score": 0.4610145688056946
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 89
          },
          "endPosition": {
            "line": 110
          }
        },
        "contents": "      &lt;/svg&gt;\n      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;\n        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;\n          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"index % 2 === 0 ? '#F5F5F5' : 'rgb(255, 255, 255)'\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;\n        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px' }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;\n        &lt;!-- 法定休日（日曜日）: ◎ --&gt;\n        &lt;svg v-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;!-- 所定休日（土曜日・祝日）: ○ --&gt;\n        &lt;svg v-else-if=\"isScheduledHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;\n        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 90
          },
          {
            "text": "      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;",
            "lineNumber": 91
          },
          {
            "text": "        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"index % 2 === 0 ? '#F5F5F5' : 'rgb(255, 255, 255)'\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;",
            "lineNumber": 93
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 94
          },
          {
            "text": "        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;",
            "lineNumber": 95
          },
          {
            "text": "        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px' }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;!-- 法定休日（日曜日）: ◎ --&gt;",
            "lineNumber": 97
          },
          {
            "text": "        &lt;svg v-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 99
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 100
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 101
          },
          {
            "text": "        &lt;!-- 所定休日（土曜日・祝日）: ○ --&gt;",
            "lineNumber": 102
          },
          {
            "text": "        &lt;svg v-else-if=\"isScheduledHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 104
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 105
          },
          {
            "text": "        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;",
            "lineNumber": 106
          },
          {
            "text": "        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;",
            "lineNumber": 107
          },
          {
            "text": "        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;",
            "lineNumber": 108
          },
          {
            "text": "        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;",
            "lineNumber": 109
          },
          {
            "text": "        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;",
            "lineNumber": 110
          }
        ]
      },
      "score": 0.4399625062942505
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 68
          },
          "endPosition": {
            "line": 92,
            "column": 10
          }
        },
        "contents": "    &lt;div class=\"table-header-text\"&gt;\n      &lt;span class=\"header-date\"&gt;日付&lt;/span&gt;\n      &lt;span class=\"header-event\"&gt;イベント/勤務状況/勤務場所&lt;/span&gt;\n      &lt;span class=\"header-clock-in\"&gt;出社&lt;/span&gt;\n      &lt;span class=\"header-clock-out\"&gt;退社&lt;/span&gt;\n      &lt;span class=\"header-break\"&gt;休憩&lt;/span&gt;\n      &lt;span class=\"header-actual-work\"&gt;実労働&lt;br&gt;時間&lt;/span&gt;\n      &lt;span class=\"header-overtime\"&gt;残業&lt;/span&gt;\n      &lt;span class=\"header-holiday\"&gt;休日&lt;/span&gt;\n      &lt;span class=\"header-night\"&gt;深夜&lt;/span&gt;\n      &lt;span class=\"header-remark\"&gt;備考&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Table Rows --&gt;\n    &lt;div class=\"table-rows-section\"&gt;\n      &lt;!-- Dashed vertical lines for date/day separators --&gt;\n      &lt;svg class=\"date-day-divider\" :style=\"{ height: getDashedLineHeightToLastRow() + 'px' }\" :viewBox=\"&#96;0 0 1 ${getDashedLineHeightToLastRow()}&#96;\" preserveAspectRatio=\"none\"&gt;\n        &lt;line x1=\"0.5\" y1=\"0\" x2=\"0.5\" :y2=\"getDashedLineHeightToLastRow()\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" stroke-dasharray=\"2 2\" /&gt;\n      &lt;/svg&gt;\n      &lt;svg class=\"day-icon-divider\" :style=\"{ height: getDashedLineHeightToLastRow() + 'px' }\" :viewBox=\"&#96;0 0 1 ${getDashedLineHeightToLastRow()}&#96;\" preserveAspectRatio=\"none\"&gt;\n        &lt;line x1=\"0.5\" y1=\"0\" x2=\"0.5\" :y2=\"getDashedLineHeightToLastRow()\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" stroke-dasharray=\"2 2\" /&gt;\n      &lt;/svg&gt;\n      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;\n        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;\n          ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;div class=\"table-header-text\"&gt;",
            "lineNumber": 69
          },
          {
            "text": "      &lt;span class=\"header-date\"&gt;日付&lt;/span&gt;",
            "lineNumber": 70
          },
          {
            "text": "      &lt;span class=\"header-event\"&gt;イベント/勤務状況/勤務場所&lt;/span&gt;",
            "lineNumber": 71
          },
          {
            "text": "      &lt;span class=\"header-clock-in\"&gt;出社&lt;/span&gt;",
            "lineNumber": 72
          },
          {
            "text": "      &lt;span class=\"header-clock-out\"&gt;退社&lt;/span&gt;",
            "lineNumber": 73
          },
          {
            "text": "      &lt;span class=\"header-break\"&gt;休憩&lt;/span&gt;",
            "lineNumber": 74
          },
          {
            "text": "      &lt;span class=\"header-actual-work\"&gt;実労働&lt;br&gt;時間&lt;/span&gt;",
            "lineNumber": 75
          },
          {
            "text": "      &lt;span class=\"header-overtime\"&gt;残業&lt;/span&gt;",
            "lineNumber": 76
          },
          {
            "text": "      &lt;span class=\"header-holiday\"&gt;休日&lt;/span&gt;",
            "lineNumber": 77
          },
          {
            "text": "      &lt;span class=\"header-night\"&gt;深夜&lt;/span&gt;",
            "lineNumber": 78
          },
          {
            "text": "      &lt;span class=\"header-remark\"&gt;備考&lt;/span&gt;",
            "lineNumber": 79
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "    &lt;!-- Table Rows --&gt;",
            "lineNumber": 82
          },
          {
            "text": "    &lt;div class=\"table-rows-section\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "      &lt;!-- Dashed vertical lines for date/day separators --&gt;",
            "lineNumber": 84
          },
          {
            "text": "      &lt;svg class=\"date-day-divider\" :style=\"{ height: getDashedLineHeightToLastRow() + 'px' }\" :viewBox=\"&#96;0 0 1 ${getDashedLineHeightToLastRow()}&#96;\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "        &lt;line x1=\"0.5\" y1=\"0\" x2=\"0.5\" :y2=\"getDashedLineHeightToLastRow()\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" stroke-dasharray=\"2 2\" /&gt;",
            "lineNumber": 86
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 87
          },
          {
            "text": "      &lt;svg class=\"day-icon-divider\" :style=\"{ height: getDashedLineHeightToLastRow() + 'px' }\" :viewBox=\"&#96;0 0 1 ${getDashedLineHeightToLastRow()}&#96;\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;line x1=\"0.5\" y1=\"0\" x2=\"0.5\" :y2=\"getDashedLineHeightToLastRow()\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" stroke-dasharray=\"2 2\" /&gt;",
            "lineNumber": 89
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 90
          },
          {
            "text": "      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;",
            "lineNumber": 91
          },
          {
            "text": "        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "          ",
            "lineNumber": 93
          }
        ]
      },
      "score": 0.4357643127441406
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 262
          },
          "endPosition": {
            "line": 282
          }
        },
        "contents": "- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）、テーブル取得仕様 No.2（月間勤務データ取得）、テーブル取得仕様 No.3（月次サマリーデータ取得）、テーブル取得仕様 No.4（休暇情報取得）\n  | 項目名 | 編集内容 | 条件or前提 |\n  | :--- | :--- | :--- |\n  | 対象年月 | 入出力項目定義.対象年月をYYYY年MM月形式に変換 | |\n  | 承認状態 | 月次承認状態に応じて表示（未確定/承認中/承認済み） | |\n  | 部署 | 従業員情報取得.部署 | |\n  | 勤怠体系名 | 従業員情報取得.勤怠体系 | |\n  | 社員コード値 | 従業員情報取得.従業員ID | |\n  | 社員名値 | 従業員情報取得.従業員名 | |\n  | 勤務表行 | 月間勤務データ取得の日次勤務データを30日分表示 | 対象年月の1日から月末日まで |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 日次勤務データ.勤務日の曜日を表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 祝日・休日・有休の場合は該当アイコンを表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 祝日名、勤務状況、備考テキストを表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 出勤時刻が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 退勤時刻が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 日次勤務データ.休憩時間合計をH:MM形式で表示 | 休憩時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 実労働時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）、テーブル取得仕様 No.2（月間勤務データ取得）、テーブル取得仕様 No.3（月次サマリーデータ取得）、テーブル取得仕様 No.4（休暇情報取得）",
            "lineNumber": 263
          },
          {
            "text": "  | 項目名 | 編集内容 | 条件or前提 |",
            "lineNumber": 264
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 265
          },
          {
            "text": "  | 対象年月 | 入出力項目定義.対象年月をYYYY年MM月形式に変換 | |",
            "lineNumber": 266
          },
          {
            "text": "  | 承認状態 | 月次承認状態に応じて表示（未確定/承認中/承認済み） | |",
            "lineNumber": 267
          },
          {
            "text": "  | 部署 | 従業員情報取得.部署 | |",
            "lineNumber": 268
          },
          {
            "text": "  | 勤怠体系名 | 従業員情報取得.勤怠体系 | |",
            "lineNumber": 269
          },
          {
            "text": "  | 社員コード値 | 従業員情報取得.従業員ID | |",
            "lineNumber": 270
          },
          {
            "text": "  | 社員名値 | 従業員情報取得.従業員名 | |",
            "lineNumber": 271
          },
          {
            "text": "  | 勤務表行 | 月間勤務データ取得の日次勤務データを30日分表示 | 対象年月の1日から月末日まで |",
            "lineNumber": 272
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |",
            "lineNumber": 273
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 日次勤務データ.勤務日の曜日を表示 | |",
            "lineNumber": 274
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 祝日・休日・有休の場合は該当アイコンを表示 | |",
            "lineNumber": 275
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 祝日名、勤務状況、備考テキストを表示 | |",
            "lineNumber": 276
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 出勤時刻が存在する場合のみ |",
            "lineNumber": 277
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 退勤時刻が存在する場合のみ |",
            "lineNumber": 278
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 日次勤務データ.休憩時間合計をH:MM形式で表示 | 休憩時間が存在する場合のみ |",
            "lineNumber": 279
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 実労働時間が存在する場合のみ |",
            "lineNumber": 280
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |",
            "lineNumber": 281
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |",
            "lineNumber": 282
          }
        ]
      },
      "score": 0.4355103373527527
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 108
          },
          "endPosition": {
            "line": 135
          }
        },
        "contents": "        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;\n        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;\n        &lt;span v-if=\"day.overtimeHours !== undefined &amp;&amp; day.overtimeHours !== null &amp;&amp; day.overtimeHours &gt; 0\" class=\"row-overtime\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.overtimeHours) }}&lt;/span&gt;\n        &lt;span v-if=\"day.holidayWorkHours\" class=\"row-holiday\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.holidayWorkHours) }}&lt;/span&gt;\n        &lt;span v-if=\"day.nightWorkHours\" class=\"row-night\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.nightWorkHours) }}&lt;/span&gt;\n        &lt;template v-if=\"day.remarkText\"&gt;\n          &lt;span v-if=\"Array.isArray(day.remarkText)\" v-for=\"(remark, remarkIndex) in day.remarkText\" :key=\"remarkIndex\" \n                class=\"row-remark\" \n                :style=\"{ \n                  top: getRowContentTop(index) + 'px',\n                  left: remark.left ? remark.left + 'px' : (remarkIndex === 0 ? '1474px' : (1474 + remarkIndex * 72) + 'px'),\n                  color: remark.color || 'rgb(0, 0, 0)'\n                }\"&gt;\n            {{ remark.text || remark }}\n          &lt;/span&gt;\n          &lt;span v-else class=\"row-remark\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ day.remarkText }}&lt;/span&gt;\n        &lt;/template&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Total Row --&gt;\n    &lt;svg class=\"total-row-background\" :style=\"{ top: getTotalRowTop() + 'px' }\" viewBox=\"0 0 1873 20\" preserveAspectRatio=\"none\"&gt;\n      &lt;rect width=\"1873\" height=\"20\" fill=\"#E8F4F8\" stroke=\"#5A8AAC\" stroke-width=\"1\" /&gt;\n    &lt;/svg&gt;\n    &lt;span class=\"total-label\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;合計&lt;/span&gt;\n    &lt;span class=\"total-break\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.totalBreakHours || 0) }}&lt;/span&gt;\n    &lt;span class=\"total-actual-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;",
            "lineNumber": 109
          },
          {
            "text": "        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;",
            "lineNumber": 110
          },
          {
            "text": "        &lt;span v-if=\"day.overtimeHours !== undefined &amp;&amp; day.overtimeHours !== null &amp;&amp; day.overtimeHours &gt; 0\" class=\"row-overtime\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.overtimeHours) }}&lt;/span&gt;",
            "lineNumber": 111
          },
          {
            "text": "        &lt;span v-if=\"day.holidayWorkHours\" class=\"row-holiday\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.holidayWorkHours) }}&lt;/span&gt;",
            "lineNumber": 112
          },
          {
            "text": "        &lt;span v-if=\"day.nightWorkHours\" class=\"row-night\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.nightWorkHours) }}&lt;/span&gt;",
            "lineNumber": 113
          },
          {
            "text": "        &lt;template v-if=\"day.remarkText\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "          &lt;span v-if=\"Array.isArray(day.remarkText)\" v-for=\"(remark, remarkIndex) in day.remarkText\" :key=\"remarkIndex\" ",
            "lineNumber": 115
          },
          {
            "text": "                class=\"row-remark\" ",
            "lineNumber": 116
          },
          {
            "text": "                :style=\"{ ",
            "lineNumber": 117
          },
          {
            "text": "                  top: getRowContentTop(index) + 'px',",
            "lineNumber": 118
          },
          {
            "text": "                  left: remark.left ? remark.left + 'px' : (remarkIndex === 0 ? '1474px' : (1474 + remarkIndex * 72) + 'px'),",
            "lineNumber": 119
          },
          {
            "text": "                  color: remark.color || 'rgb(0, 0, 0)'",
            "lineNumber": 120
          },
          {
            "text": "                }\"&gt;",
            "lineNumber": 121
          },
          {
            "text": "            {{ remark.text || remark }}",
            "lineNumber": 122
          },
          {
            "text": "          &lt;/span&gt;",
            "lineNumber": 123
          },
          {
            "text": "          &lt;span v-else class=\"row-remark\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ day.remarkText }}&lt;/span&gt;",
            "lineNumber": 124
          },
          {
            "text": "        &lt;/template&gt;",
            "lineNumber": 125
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 126
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 127
          },
          {
            "lineNumber": 128
          },
          {
            "text": "    &lt;!-- Total Row --&gt;",
            "lineNumber": 129
          },
          {
            "text": "    &lt;svg class=\"total-row-background\" :style=\"{ top: getTotalRowTop() + 'px' }\" viewBox=\"0 0 1873 20\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "      &lt;rect width=\"1873\" height=\"20\" fill=\"#E8F4F8\" stroke=\"#5A8AAC\" stroke-width=\"1\" /&gt;",
            "lineNumber": 131
          },
          {
            "text": "    &lt;/svg&gt;",
            "lineNumber": 132
          },
          {
            "text": "    &lt;span class=\"total-label\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;合計&lt;/span&gt;",
            "lineNumber": 133
          },
          {
            "text": "    &lt;span class=\"total-break\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.totalBreakHours || 0) }}&lt;/span&gt;",
            "lineNumber": 134
          },
          {
            "text": "    &lt;span class=\"total-actual-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 135
          }
        ]
      },
      "score": 0.419567346572876
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 280
          },
          "endPosition": {
            "line": 298
          }
        },
        "contents": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 日次勤務データ.深夜労働時間をH:MM形式で表示 | 深夜労働時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 日次勤務データ.備考を表示 | 備考が存在する場合のみ |\n  | 合計休憩時間 | 月次サマリーデータ取得の休憩時間合計をH:MM形式で表示 | |\n  | 合計実労働時間 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |\n  | 合計残業時間 | 月次サマリーデータ取得.法定時間内残業 + 法定時間外残業をH:MM形式で表示 | |\n  | 合計休日労働時間 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |\n  | 合計深夜労働時間 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |\n  | 月次サマリータイトル | 入出力項目定義.対象年月をYYYY年MM月月次サマリー形式で表示 | |\n  | 所定出勤日数値 | 月次サマリーデータ取得.所定出勤日数を「XX 日」形式で表示 | |\n  | 実出勤日数値 | 月次サマリーデータ取得.実出勤日数を「XX 日」形式で表示 | |\n  | 法定休日出勤日数値 | 月次サマリーデータ取得.法定休日出勤日数を「XX 日」形式で表示 | |\n  | 所定休日出勤日数値 | 月次サマリーデータ取得.所定休日出勤日数を「XX 日」形式で表示 | |\n  | 所定労働時間値 | 月次サマリーデータ取得.所定労働時間をHHH:MM形式で表示 | |\n  | 総労働時間(有休を含む)値 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |\n  | 総労働時間-法定休日労働(有休を含む)値 | 月次サマリーデータ取得.総労働時間-法定休日労働をHHH:MM形式で表示 | |\n  | 過不足時間値 | 月次サマリーデータ取得.過不足時間を+/-H:MM形式で表示 | マイナスの場合は赤色表示 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |",
            "lineNumber": 281
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |",
            "lineNumber": 282
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 日次勤務データ.深夜労働時間をH:MM形式で表示 | 深夜労働時間が存在する場合のみ |",
            "lineNumber": 283
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 日次勤務データ.備考を表示 | 備考が存在する場合のみ |",
            "lineNumber": 284
          },
          {
            "text": "  | 合計休憩時間 | 月次サマリーデータ取得の休憩時間合計をH:MM形式で表示 | |",
            "lineNumber": 285
          },
          {
            "text": "  | 合計実労働時間 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |",
            "lineNumber": 286
          },
          {
            "text": "  | 合計残業時間 | 月次サマリーデータ取得.法定時間内残業 + 法定時間外残業をH:MM形式で表示 | |",
            "lineNumber": 287
          },
          {
            "text": "  | 合計休日労働時間 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |",
            "lineNumber": 288
          },
          {
            "text": "  | 合計深夜労働時間 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |",
            "lineNumber": 289
          },
          {
            "text": "  | 月次サマリータイトル | 入出力項目定義.対象年月をYYYY年MM月月次サマリー形式で表示 | |",
            "lineNumber": 290
          },
          {
            "text": "  | 所定出勤日数値 | 月次サマリーデータ取得.所定出勤日数を「XX 日」形式で表示 | |",
            "lineNumber": 291
          },
          {
            "text": "  | 実出勤日数値 | 月次サマリーデータ取得.実出勤日数を「XX 日」形式で表示 | |",
            "lineNumber": 292
          },
          {
            "text": "  | 法定休日出勤日数値 | 月次サマリーデータ取得.法定休日出勤日数を「XX 日」形式で表示 | |",
            "lineNumber": 293
          },
          {
            "text": "  | 所定休日出勤日数値 | 月次サマリーデータ取得.所定休日出勤日数を「XX 日」形式で表示 | |",
            "lineNumber": 294
          },
          {
            "text": "  | 所定労働時間値 | 月次サマリーデータ取得.所定労働時間をHHH:MM形式で表示 | |",
            "lineNumber": 295
          },
          {
            "text": "  | 総労働時間(有休を含む)値 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |",
            "lineNumber": 296
          },
          {
            "text": "  | 総労働時間-法定休日労働(有休を含む)値 | 月次サマリーデータ取得.総労働時間-法定休日労働をHHH:MM形式で表示 | |",
            "lineNumber": 297
          },
          {
            "text": "  | 過不足時間値 | 月次サマリーデータ取得.過不足時間を+/-H:MM形式で表示 | マイナスの場合は赤色表示 |",
            "lineNumber": 298
          }
        ]
      },
      "score": 0.4140040874481201
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 586
          },
          "endPosition": {
            "line": 628
          }
        },
        "contents": "            &lt;div v-if=\"shouldShowScheduledWorkHours(day)\" class=\"tooltip-row\"&gt;\n              &lt;span class=\"tooltip-icon tooltip-icon-light-blue\"&gt;■&lt;/span&gt;\n              &lt;span class=\"tooltip-label\"&gt;所定内労働&lt;/span&gt;\n              &lt;span class=\"tooltip-value\"&gt;{{ getTooltipScheduledWorkHours(day) }}&lt;/span&gt;\n            &lt;/div&gt;\n            \n            &lt;!-- 法定時間内残業（月次累積） --&gt;\n            &lt;div v-if=\"shouldShowMonthlyWithinLegalOvertime(day)\" class=\"tooltip-row\"&gt;\n              &lt;span class=\"tooltip-icon tooltip-icon-yellow\"&gt;■&lt;/span&gt;\n              &lt;span class=\"tooltip-label\"&gt;法定時間内残業&lt;/span&gt;\n              &lt;span class=\"tooltip-value\"&gt;{{ getMonthlyWithinLegalOvertime(day) }}&lt;/span&gt;\n            &lt;/div&gt;\n            \n            &lt;!-- 法定時間外残業（月次累積） --&gt;\n            &lt;div v-if=\"shouldShowMonthlyOverLegalOvertime(day)\" class=\"tooltip-row\"&gt;\n              &lt;span class=\"tooltip-icon tooltip-icon-orange\"&gt;■&lt;/span&gt;\n              &lt;span class=\"tooltip-label\"&gt;法定時間外残業&lt;/span&gt;\n              &lt;span class=\"tooltip-value\"&gt;{{ getMonthlyOverLegalOvertime(day) }}&lt;/span&gt;\n            &lt;/div&gt;\n            \n          &lt;/template&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      \n      &lt;!-- 備考 --&gt;\n      &lt;div class=\"cell-remarks\"&gt;\n        &lt;button class=\"plus-button\" @click=\"openRemarks(day)\"&gt;\n          &lt;div class=\"plus-icon-circle\"&gt;\n            &lt;div class=\"plus-icon-vertical\"&gt;&lt;/div&gt;\n            &lt;div class=\"plus-icon-horizontal\"&gt;&lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/button&gt;\n        &lt;div v-if=\"day.remarkText &amp;&amp; day.remarkText.trim() !== ''\" class=\"remarks-text\" @click=\"openRemarks(day)\" :title=\"day.remarkText\"&gt;\n          {{ day.remarkText.length &gt; 20 ? day.remarkText.substring(0, 20) + '...' : day.remarkText }}\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;!-- 時間軸行（下） --&gt;\n    &lt;div class=\"table-header time-axis-bottom\"&gt;\n      &lt;div class=\"header-graph\"&gt;\n        &lt;span class=\"time-label\" style=\"left: 0.4%;\"&gt;0&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            &lt;div v-if=\"shouldShowScheduledWorkHours(day)\" class=\"tooltip-row\"&gt;",
            "lineNumber": 587
          },
          {
            "text": "              &lt;span class=\"tooltip-icon tooltip-icon-light-blue\"&gt;■&lt;/span&gt;",
            "lineNumber": 588
          },
          {
            "text": "              &lt;span class=\"tooltip-label\"&gt;所定内労働&lt;/span&gt;",
            "lineNumber": 589
          },
          {
            "text": "              &lt;span class=\"tooltip-value\"&gt;{{ getTooltipScheduledWorkHours(day) }}&lt;/span&gt;",
            "lineNumber": 590
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 591
          },
          {
            "text": "            ",
            "lineNumber": 592
          },
          {
            "text": "            &lt;!-- 法定時間内残業（月次累積） --&gt;",
            "lineNumber": 593
          },
          {
            "text": "            &lt;div v-if=\"shouldShowMonthlyWithinLegalOvertime(day)\" class=\"tooltip-row\"&gt;",
            "lineNumber": 594
          },
          {
            "text": "              &lt;span class=\"tooltip-icon tooltip-icon-yellow\"&gt;■&lt;/span&gt;",
            "lineNumber": 595
          },
          {
            "text": "              &lt;span class=\"tooltip-label\"&gt;法定時間内残業&lt;/span&gt;",
            "lineNumber": 596
          },
          {
            "text": "              &lt;span class=\"tooltip-value\"&gt;{{ getMonthlyWithinLegalOvertime(day) }}&lt;/span&gt;",
            "lineNumber": 597
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 598
          },
          {
            "text": "            ",
            "lineNumber": 599
          },
          {
            "text": "            &lt;!-- 法定時間外残業（月次累積） --&gt;",
            "lineNumber": 600
          },
          {
            "text": "            &lt;div v-if=\"shouldShowMonthlyOverLegalOvertime(day)\" class=\"tooltip-row\"&gt;",
            "lineNumber": 601
          },
          {
            "text": "              &lt;span class=\"tooltip-icon tooltip-icon-orange\"&gt;■&lt;/span&gt;",
            "lineNumber": 602
          },
          {
            "text": "              &lt;span class=\"tooltip-label\"&gt;法定時間外残業&lt;/span&gt;",
            "lineNumber": 603
          },
          {
            "text": "              &lt;span class=\"tooltip-value\"&gt;{{ getMonthlyOverLegalOvertime(day) }}&lt;/span&gt;",
            "lineNumber": 604
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 605
          },
          {
            "text": "            ",
            "lineNumber": 606
          },
          {
            "text": "          &lt;/template&gt;",
            "lineNumber": 607
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 608
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 609
          },
          {
            "text": "      ",
            "lineNumber": 610
          },
          {
            "text": "      &lt;!-- 備考 --&gt;",
            "lineNumber": 611
          },
          {
            "text": "      &lt;div class=\"cell-remarks\"&gt;",
            "lineNumber": 612
          },
          {
            "text": "        &lt;button class=\"plus-button\" @click=\"openRemarks(day)\"&gt;",
            "lineNumber": 613
          },
          {
            "text": "          &lt;div class=\"plus-icon-circle\"&gt;",
            "lineNumber": 614
          },
          {
            "text": "            &lt;div class=\"plus-icon-vertical\"&gt;&lt;/div&gt;",
            "lineNumber": 615
          },
          {
            "text": "            &lt;div class=\"plus-icon-horizontal\"&gt;&lt;/div&gt;",
            "lineNumber": 616
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 617
          },
          {
            "text": "        &lt;/button&gt;",
            "lineNumber": 618
          },
          {
            "text": "        &lt;div v-if=\"day.remarkText &amp;&amp; day.remarkText.trim() !== ''\" class=\"remarks-text\" @click=\"openRemarks(day)\" :title=\"day.remarkText\"&gt;",
            "lineNumber": 619
          },
          {
            "text": "          {{ day.remarkText.length &gt; 20 ? day.remarkText.substring(0, 20) + '...' : day.remarkText }}",
            "lineNumber": 620
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 621
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 622
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 623
          },
          {
            "text": "    ",
            "lineNumber": 624
          },
          {
            "text": "    &lt;!-- 時間軸行（下） --&gt;",
            "lineNumber": 625
          },
          {
            "text": "    &lt;div class=\"table-header time-axis-bottom\"&gt;",
            "lineNumber": 626
          },
          {
            "text": "      &lt;div class=\"header-graph\"&gt;",
            "lineNumber": 627
          },
          {
            "text": "        &lt;span class=\"time-label\" style=\"left: 0.4%;\"&gt;0&lt;/span&gt;",
            "lineNumber": 628
          }
        ]
      },
      "score": 0.4127465486526489
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 735
          },
          "endPosition": {
            "line": 746
          }
        },
        "contents": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務グラフ | 日次勤務データの出退勤時刻、休憩時間、公用外出時間から勤務グラフを生成 | 0-48時の時間軸を上部と下部に配置して表示。平日は標準勤務時間帯（9:00-17:30）をグレーの長方形で常時表示（土日祝は非表示）。休憩時間は四角形で表示（出勤していない場合：#BBBBBB、出勤していて出勤時刻が休憩時間より前の場合：#1A69AB、出勤時刻が休憩時間より後の場合は表示しない）。出勤/退勤時刻が記録されると該当時間帯を青色バーで表示し、出勤時刻と退勤時刻の位置に青色の▼（下向き三角）マークを表示 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数 | 日次勤務データ.工数実績リストから工数合計を表示 | 未登録の場合は+アイコン |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 常に+アイコンを表示 | 押下すると備考ダイアログを開く |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;エラーアイコン | 工数合計と実労働時間が一致しない場合に赤い!マークを表示 | 工数合計 ≠ 実労働時間 |\n  | サマリー部分 | 月次サマリーデータを表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月次サマリーデータ.所定出勤日数 | 例: 20日 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月次サマリーデータ.実出勤日数 | 例: 4日（出勤時刻と退勤時刻が両方記録されている日数） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月次サマリーデータ.所定労働時間をHHH:MM形式で表示 | 例: 150:00 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月次サマリーデータ.総労働時間をHHH:MM形式で表示 | 例: 70:01 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 月次サマリーデータ.過不足時間を+/-H:MM形式で表示 | 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。例: +2:31（当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 月次サマリーデータ.法定休日労働をH:MM形式で表示 | 例: 0:00 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務グラフ | 日次勤務データの出退勤時刻、休憩時間、公用外出時間から勤務グラフを生成 | 0-48時の時間軸を上部と下部に配置して表示。平日は標準勤務時間帯（9:00-17:30）をグレーの長方形で常時表示（土日祝は非表示）。休憩時間は四角形で表示（出勤していない場合：#BBBBBB、出勤していて出勤時刻が休憩時間より前の場合：#1A69AB、出勤時刻が休憩時間より後の場合は表示しない）。出勤/退勤時刻が記録されると該当時間帯を青色バーで表示し、出勤時刻と退勤時刻の位置に青色の▼（下向き三角）マークを表示 |",
            "lineNumber": 736
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数 | 日次勤務データ.工数実績リストから工数合計を表示 | 未登録の場合は+アイコン |",
            "lineNumber": 737
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 常に+アイコンを表示 | 押下すると備考ダイアログを開く |",
            "lineNumber": 738
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;エラーアイコン | 工数合計と実労働時間が一致しない場合に赤い!マークを表示 | 工数合計 ≠ 実労働時間 |",
            "lineNumber": 739
          },
          {
            "text": "  | サマリー部分 | 月次サマリーデータを表示 | |",
            "lineNumber": 740
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月次サマリーデータ.所定出勤日数 | 例: 20日 |",
            "lineNumber": 741
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月次サマリーデータ.実出勤日数 | 例: 4日（出勤時刻と退勤時刻が両方記録されている日数） |",
            "lineNumber": 742
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月次サマリーデータ.所定労働時間をHHH:MM形式で表示 | 例: 150:00 |",
            "lineNumber": 743
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月次サマリーデータ.総労働時間をHHH:MM形式で表示 | 例: 70:01 |",
            "lineNumber": 744
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 月次サマリーデータ.過不足時間を+/-H:MM形式で表示 | 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。例: +2:31（当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間） |",
            "lineNumber": 745
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 月次サマリーデータ.法定休日労働をH:MM形式で表示 | 例: 0:00 |",
            "lineNumber": 746
          }
        ]
      },
      "score": 0.41195860505104065
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 847
          },
          "endPosition": {
            "line": 888
          }
        },
        "contents": "    &lt;/div&gt;\n  &lt;/div&gt;\n  \n  &lt;!-- Bottom: 月次サマリー情報 --&gt;\n    &lt;div class=\"bottom-summary\"&gt;\n      &lt;!-- Group 6 (左側) --&gt;\n      &lt;div class=\"summary-group-left\"&gt;\n        &lt;!-- 背景 --&gt;\n        &lt;div class=\"summary-background-left\"&gt;&lt;/div&gt;\n        \n        &lt;!-- 所定出勤日数 --&gt;\n        &lt;span class=\"summary-label-left\" style=\"top: 4px;\"&gt;所定出勤日数&lt;/span&gt;\n        \n        &lt;!-- 実出勤日数 --&gt;\n        &lt;span class=\"summary-label-left\" style=\"top: 23px;\"&gt;実出勤日数&lt;/span&gt;\n        \n        &lt;!-- 所定労働時間 --&gt;\n        &lt;span class=\"summary-label-left\" style=\"top: 43px;\"&gt;所定労働時間&lt;/span&gt;\n        \n        &lt;!-- 総労働時間 --&gt;\n        &lt;span class=\"summary-label-left\" style=\"top: 63px;\"&gt;総労働時間&lt;/span&gt;\n        \n        &lt;!-- 縦線 --&gt;\n        &lt;div class=\"summary-divider-left\"&gt;&lt;/div&gt;\n        \n        &lt;!-- 所定出勤日数 --&gt;\n        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 4px; right: 14px;\"&gt;{{ monthlySummary.scheduledWorkDays }}日&lt;/span&gt;\n        \n        &lt;!-- 実出勤日数 --&gt;\n        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 23px; right: 14px;\"&gt;{{ monthlySummary.actualWorkDays }}日&lt;/span&gt;\n        \n        &lt;!-- 所定労働時間 --&gt;\n        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 46px; right: 14px;\"&gt;{{ monthlySummary.scheduledWorkHours }}&lt;/span&gt;\n        \n        &lt;!-- 総労働時間 --&gt;\n        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 66px; right: 14px;\"&gt;{{ monthlySummary.totalWorkHours }}&lt;/span&gt;\n      &lt;/div&gt;\n      \n      &lt;!-- Group 7 (右側) --&gt;\n      &lt;div class=\"summary-group-right\"&gt;\n        &lt;!-- 背景 --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 848
          },
          {
            "text": "  &lt;/div&gt;",
            "lineNumber": 849
          },
          {
            "text": "  ",
            "lineNumber": 850
          },
          {
            "text": "  &lt;!-- Bottom: 月次サマリー情報 --&gt;",
            "lineNumber": 851
          },
          {
            "text": "    &lt;div class=\"bottom-summary\"&gt;",
            "lineNumber": 852
          },
          {
            "text": "      &lt;!-- Group 6 (左側) --&gt;",
            "lineNumber": 853
          },
          {
            "text": "      &lt;div class=\"summary-group-left\"&gt;",
            "lineNumber": 854
          },
          {
            "text": "        &lt;!-- 背景 --&gt;",
            "lineNumber": 855
          },
          {
            "text": "        &lt;div class=\"summary-background-left\"&gt;&lt;/div&gt;",
            "lineNumber": 856
          },
          {
            "text": "        ",
            "lineNumber": 857
          },
          {
            "text": "        &lt;!-- 所定出勤日数 --&gt;",
            "lineNumber": 858
          },
          {
            "text": "        &lt;span class=\"summary-label-left\" style=\"top: 4px;\"&gt;所定出勤日数&lt;/span&gt;",
            "lineNumber": 859
          },
          {
            "text": "        ",
            "lineNumber": 860
          },
          {
            "text": "        &lt;!-- 実出勤日数 --&gt;",
            "lineNumber": 861
          },
          {
            "text": "        &lt;span class=\"summary-label-left\" style=\"top: 23px;\"&gt;実出勤日数&lt;/span&gt;",
            "lineNumber": 862
          },
          {
            "text": "        ",
            "lineNumber": 863
          },
          {
            "text": "        &lt;!-- 所定労働時間 --&gt;",
            "lineNumber": 864
          },
          {
            "text": "        &lt;span class=\"summary-label-left\" style=\"top: 43px;\"&gt;所定労働時間&lt;/span&gt;",
            "lineNumber": 865
          },
          {
            "text": "        ",
            "lineNumber": 866
          },
          {
            "text": "        &lt;!-- 総労働時間 --&gt;",
            "lineNumber": 867
          },
          {
            "text": "        &lt;span class=\"summary-label-left\" style=\"top: 63px;\"&gt;総労働時間&lt;/span&gt;",
            "lineNumber": 868
          },
          {
            "text": "        ",
            "lineNumber": 869
          },
          {
            "text": "        &lt;!-- 縦線 --&gt;",
            "lineNumber": 870
          },
          {
            "text": "        &lt;div class=\"summary-divider-left\"&gt;&lt;/div&gt;",
            "lineNumber": 871
          },
          {
            "text": "        ",
            "lineNumber": 872
          },
          {
            "text": "        &lt;!-- 所定出勤日数 --&gt;",
            "lineNumber": 873
          },
          {
            "text": "        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 4px; right: 14px;\"&gt;{{ monthlySummary.scheduledWorkDays }}日&lt;/span&gt;",
            "lineNumber": 874
          },
          {
            "text": "        ",
            "lineNumber": 875
          },
          {
            "text": "        &lt;!-- 実出勤日数 --&gt;",
            "lineNumber": 876
          },
          {
            "text": "        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 23px; right: 14px;\"&gt;{{ monthlySummary.actualWorkDays }}日&lt;/span&gt;",
            "lineNumber": 877
          },
          {
            "text": "        ",
            "lineNumber": 878
          },
          {
            "text": "        &lt;!-- 所定労働時間 --&gt;",
            "lineNumber": 879
          },
          {
            "text": "        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 46px; right: 14px;\"&gt;{{ monthlySummary.scheduledWorkHours }}&lt;/span&gt;",
            "lineNumber": 880
          },
          {
            "text": "        ",
            "lineNumber": 881
          },
          {
            "text": "        &lt;!-- 総労働時間 --&gt;",
            "lineNumber": 882
          },
          {
            "text": "        &lt;span v-if=\"monthlySummary\" class=\"summary-value-left\" style=\"top: 66px; right: 14px;\"&gt;{{ monthlySummary.totalWorkHours }}&lt;/span&gt;",
            "lineNumber": 883
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 884
          },
          {
            "text": "      ",
            "lineNumber": 885
          },
          {
            "text": "      &lt;!-- Group 7 (右側) --&gt;",
            "lineNumber": 886
          },
          {
            "text": "      &lt;div class=\"summary-group-right\"&gt;",
            "lineNumber": 887
          },
          {
            "text": "        &lt;!-- 背景 --&gt;",
            "lineNumber": 888
          }
        ]
      },
      "score": 0.4070695638656616
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 510
          },
          "endPosition": {
            "line": 569
          }
        },
        "contents": "  },\n  methods: {\n    async loadData(employeeId, yearMonth) {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getMonthlySummaryDetail(employeeId, yearMonth)\n        \n        if (response.success) {\n          this.employee = response.employee\n          this.dailyData = response.dailyData || []\n          this.monthlySummary = response.monthlySummary || {}\n          this.vacationInfo = response.vacationInfo || {}\n          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'\n        } else {\n          this.error = response.message || 'データの取得に失敗しました。'\n        }\n      } catch (err) {\n        console.error('月次サマリー情報の取得エラー:', err)\n        this.error = err.message || 'データの取得に失敗しました。'\n      } finally {\n        this.loading = false\n      }\n    },\n    formatDate(dateStr, index) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      // 最初の行だけ月を含める\n      if (index === 0) {\n        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;\n      }\n      return &#96;${date.getDate()}&#96;\n    },\n    getDatePaddingLeft(index, dateStr) {\n      // 最初の行の日付の1桁目の位置に合わせる\n      if (index === 0) return 0\n      \n      if (!dateStr) return 18\n      const date = new Date(dateStr)\n      const day = date.getDate()\n      \n      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）\n      // 約18px程度の幅があると仮定\n      let baseOffset = 18\n      \n      // 2~9は4px左にずらす\n      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {\n        baseOffset -= 4\n      }\n      // 10~31は9px左にずらす\n      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {\n        baseOffset -= 9\n      }\n      \n      return baseOffset\n    },\n    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  },",
            "lineNumber": 511
          },
          {
            "text": "  methods: {",
            "lineNumber": 512
          },
          {
            "text": "    async loadData(employeeId, yearMonth) {",
            "lineNumber": 513
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 514
          },
          {
            "text": "      this.error = null",
            "lineNumber": 515
          },
          {
            "text": "      ",
            "lineNumber": 516
          },
          {
            "text": "      try {",
            "lineNumber": 517
          },
          {
            "text": "        const response = await getMonthlySummaryDetail(employeeId, yearMonth)",
            "lineNumber": 518
          },
          {
            "text": "        ",
            "lineNumber": 519
          },
          {
            "text": "        if (response.success) {",
            "lineNumber": 520
          },
          {
            "text": "          this.employee = response.employee",
            "lineNumber": 521
          },
          {
            "text": "          this.dailyData = response.dailyData || []",
            "lineNumber": 522
          },
          {
            "text": "          this.monthlySummary = response.monthlySummary || {}",
            "lineNumber": 523
          },
          {
            "text": "          this.vacationInfo = response.vacationInfo || {}",
            "lineNumber": 524
          },
          {
            "text": "          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'",
            "lineNumber": 525
          },
          {
            "text": "        } else {",
            "lineNumber": 526
          },
          {
            "text": "          this.error = response.message || 'データの取得に失敗しました。'",
            "lineNumber": 527
          },
          {
            "text": "        }",
            "lineNumber": 528
          },
          {
            "text": "      } catch (err) {",
            "lineNumber": 529
          },
          {
            "text": "        console.error('月次サマリー情報の取得エラー:', err)",
            "lineNumber": 530
          },
          {
            "text": "        this.error = err.message || 'データの取得に失敗しました。'",
            "lineNumber": 531
          },
          {
            "text": "      } finally {",
            "lineNumber": 532
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 533
          },
          {
            "text": "      }",
            "lineNumber": 534
          },
          {
            "text": "    },",
            "lineNumber": 535
          },
          {
            "text": "    formatDate(dateStr, index) {",
            "lineNumber": 536
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 537
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 538
          },
          {
            "text": "      // 最初の行だけ月を含める",
            "lineNumber": 539
          },
          {
            "text": "      if (index === 0) {",
            "lineNumber": 540
          },
          {
            "text": "        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;",
            "lineNumber": 541
          },
          {
            "text": "      }",
            "lineNumber": 542
          },
          {
            "text": "      return &#96;${date.getDate()}&#96;",
            "lineNumber": 543
          },
          {
            "text": "    },",
            "lineNumber": 544
          },
          {
            "text": "    getDatePaddingLeft(index, dateStr) {",
            "lineNumber": 545
          },
          {
            "text": "      // 最初の行の日付の1桁目の位置に合わせる",
            "lineNumber": 546
          },
          {
            "text": "      if (index === 0) return 0",
            "lineNumber": 547
          },
          {
            "text": "      ",
            "lineNumber": 548
          },
          {
            "text": "      if (!dateStr) return 18",
            "lineNumber": 549
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 550
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 551
          },
          {
            "text": "      ",
            "lineNumber": 552
          },
          {
            "text": "      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）",
            "lineNumber": 553
          },
          {
            "text": "      // 約18px程度の幅があると仮定",
            "lineNumber": 554
          },
          {
            "text": "      let baseOffset = 18",
            "lineNumber": 555
          },
          {
            "text": "      ",
            "lineNumber": 556
          },
          {
            "text": "      // 2~9は4px左にずらす",
            "lineNumber": 557
          },
          {
            "text": "      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {",
            "lineNumber": 558
          },
          {
            "text": "        baseOffset -= 4",
            "lineNumber": 559
          },
          {
            "text": "      }",
            "lineNumber": 560
          },
          {
            "text": "      // 10~31は9px左にずらす",
            "lineNumber": 561
          },
          {
            "text": "      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {",
            "lineNumber": 562
          },
          {
            "text": "        baseOffset -= 9",
            "lineNumber": 563
          },
          {
            "text": "      }",
            "lineNumber": 564
          },
          {
            "text": "      ",
            "lineNumber": 565
          },
          {
            "text": "      return baseOffset",
            "lineNumber": 566
          },
          {
            "text": "    },",
            "lineNumber": 567
          },
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.3982960879802704
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 33
          },
          "endPosition": {
            "line": 54
          }
        },
        "contents": "| 4 | ステータス | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のラベル |\n| 5 | 対象年月 | 出力 | | 文字 | | | | YYYY年MM月 | 表示 | 活性 | | 表示対象の年月（例: 2025年11月） |\n| 6 | 承認状態 | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態（未確定/承認中/承認済み） |\n| 7 | 部署 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の所属部署 |\n| 8 | 勤怠体系 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系のラベル |\n| 9 | 勤怠体系名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系名（例: フレックスタイム制(一般)） |\n| 10 | 社員コード | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員コードのラベル |\n| 11 | 社員コード値 | 出力 | | 文字 | | | 6 | | 表示 | 活性 | | 従業員の社員コード（6桁数字） |\n| 12 | 社員名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員名のラベル |\n| 13 | 社員名値 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の氏名 |\n| | &lt;テーブルヘッダー部分&gt; | | | | | | | | | | | |\n| 14 | テーブルヘッダー背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 青色（#6B9BC3）の背景 |\n| 15 | 日付 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 16 | イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 17 | 出社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 18 | 退社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 19 | 休憩 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 20 | 実労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー（2行表示） |\n| 21 | 残業 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 4 | ステータス | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のラベル |",
            "lineNumber": 34
          },
          {
            "text": "| 5 | 対象年月 | 出力 | | 文字 | | | | YYYY年MM月 | 表示 | 活性 | | 表示対象の年月（例: 2025年11月） |",
            "lineNumber": 35
          },
          {
            "text": "| 6 | 承認状態 | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態（未確定/承認中/承認済み） |",
            "lineNumber": 36
          },
          {
            "text": "| 7 | 部署 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の所属部署 |",
            "lineNumber": 37
          },
          {
            "text": "| 8 | 勤怠体系 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系のラベル |",
            "lineNumber": 38
          },
          {
            "text": "| 9 | 勤怠体系名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系名（例: フレックスタイム制(一般)） |",
            "lineNumber": 39
          },
          {
            "text": "| 10 | 社員コード | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員コードのラベル |",
            "lineNumber": 40
          },
          {
            "text": "| 11 | 社員コード値 | 出力 | | 文字 | | | 6 | | 表示 | 活性 | | 従業員の社員コード（6桁数字） |",
            "lineNumber": 41
          },
          {
            "text": "| 12 | 社員名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員名のラベル |",
            "lineNumber": 42
          },
          {
            "text": "| 13 | 社員名値 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の氏名 |",
            "lineNumber": 43
          },
          {
            "text": "| | &lt;テーブルヘッダー部分&gt; | | | | | | | | | | | |",
            "lineNumber": 44
          },
          {
            "text": "| 14 | テーブルヘッダー背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 青色（#6B9BC3）の背景 |",
            "lineNumber": 45
          },
          {
            "text": "| 15 | 日付 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 46
          },
          {
            "text": "| 16 | イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 47
          },
          {
            "text": "| 17 | 出社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 48
          },
          {
            "text": "| 18 | 退社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 49
          },
          {
            "text": "| 19 | 休憩 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 50
          },
          {
            "text": "| 20 | 実労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー（2行表示） |",
            "lineNumber": 51
          },
          {
            "text": "| 21 | 残業 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 52
          },
          {
            "text": "| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 53
          },
          {
            "text": "| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 54
          }
        ]
      },
      "score": 0.39398181438446045
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 35
          }
        },
        "contents": "# TeamSpirit勤怠管理システム\n# 月次サマリー情報画面\n\n## 概要\n本画面は、月間の勤務表データを一覧表示し、月次の勤怠サマリー情報を表示する機能です。\n勤務表画面から「月次サマリー」リンクを押下することで、新規ウィンドウが開き、そのウィンドウに月次サマリー情報が記載されています。\n月間の日次勤務記録（出退勤時刻、休憩時間、実労働時間など）と、月次集計データ（所定出勤日数、実出勤日数、総労働時間、過不足時間など）を表示します。\n\n## 画面レイアウト\n\n### Figmaデザイン\n\n**月次サマリー情報画面のデザイン（Figma）**\n\nhttps://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=5-1572&amp;t=RqArqbX2wGvNeiKv-4\n\n### 参考HTML\n\n以下のHTMLファイルは参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。\n\n- 月次サマリー情報画面（参考）\n\n![月次サマリー情報画面](../../figma-plugin/figma-json-split/monthly-report/monthly-report-full.html)\n\n## 画面項目定義\n\n| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |\n| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |\n| | &lt;ヘッダー部分&gt; | | | | | | | | | | | |\n| 1 | プリンタへ出力ボタン | ボタン | | | | | | | 表示 | 活性 | | 青色のボタン。押下で印刷ダイアログを表示 |\n| 2 | 閉じるリンク | リンク | | | | | | | 表示 | 活性 | | 画面を閉じる |\n| | &lt;情報ヘッダー部分&gt; | | | | | | | | | | | |\n| 3 | 勤務表 | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 固定表示 |\n| 4 | ステータス | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のラベル |\n| 5 | 対象年月 | 出力 | | 文字 | | | | YYYY年MM月 | 表示 | 活性 | | 表示対象の年月（例: 2025年11月） |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TeamSpirit勤怠管理システム",
            "lineNumber": 1
          },
          {
            "text": "# 月次サマリー情報画面",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "## 概要",
            "lineNumber": 4
          },
          {
            "text": "本画面は、月間の勤務表データを一覧表示し、月次の勤怠サマリー情報を表示する機能です。",
            "lineNumber": 5
          },
          {
            "text": "勤務表画面から「月次サマリー」リンクを押下することで、新規ウィンドウが開き、そのウィンドウに月次サマリー情報が記載されています。",
            "lineNumber": 6
          },
          {
            "text": "月間の日次勤務記録（出退勤時刻、休憩時間、実労働時間など）と、月次集計データ（所定出勤日数、実出勤日数、総労働時間、過不足時間など）を表示します。",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## 画面レイアウト",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### Figmaデザイン",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "**月次サマリー情報画面のデザイン（Figma）**",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "https://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=5-1572&amp;t=RqArqbX2wGvNeiKv-4",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "### 参考HTML",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "以下のHTMLファイルは参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- 月次サマリー情報画面（参考）",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "![月次サマリー情報画面](../../figma-plugin/figma-json-split/monthly-report/monthly-report-full.html)",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "## 画面項目定義",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |",
            "lineNumber": 27
          },
          {
            "text": "| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |",
            "lineNumber": 28
          },
          {
            "text": "| | &lt;ヘッダー部分&gt; | | | | | | | | | | | |",
            "lineNumber": 29
          },
          {
            "text": "| 1 | プリンタへ出力ボタン | ボタン | | | | | | | 表示 | 活性 | | 青色のボタン。押下で印刷ダイアログを表示 |",
            "lineNumber": 30
          },
          {
            "text": "| 2 | 閉じるリンク | リンク | | | | | | | 表示 | 活性 | | 画面を閉じる |",
            "lineNumber": 31
          },
          {
            "text": "| | &lt;情報ヘッダー部分&gt; | | | | | | | | | | | |",
            "lineNumber": 32
          },
          {
            "text": "| 3 | 勤務表 | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 固定表示 |",
            "lineNumber": 33
          },
          {
            "text": "| 4 | ステータス | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のラベル |",
            "lineNumber": 34
          },
          {
            "text": "| 5 | 対象年月 | 出力 | | 文字 | | | | YYYY年MM月 | 表示 | 活性 | | 表示対象の年月（例: 2025年11月） |",
            "lineNumber": 35
          }
        ]
      },
      "score": 0.3901363015174866
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 463
          },
          "endPosition": {
            "line": 495
          }
        },
        "contents": "- **中央カラム**:\n  - **Section 4**: 法定労働時間、実労働時間-法定休日労働(有休を含めない)、法定時間内残業、法定時間外残業、法定休日労働時間\n  - **Section 5**: 深夜労働時間、45時間を超える時間外労働、60時間を超える時間外労働\n  - **Section 6**: 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間\n- **右カラム**:\n  - **Section 7**: 有給取得日数、[内訳]\n  - **Section 8**: 代休取得日数、[内訳]\n  - **Section 9**: 無給休暇日数、[内訳]\n  - **Section 10**: 有給残日数(月末日時点)、計画付与予定日（次月以降）\n\n### データの表示形式について\n- 時間の表示形式は、H:MM（例: 8:00）またはHHH:MM（例: 114:05）です。\n- 日数の表示形式は、「XX 日」（例: 18 日）です。\n- 過不足時間がマイナスの場合は赤色（#D9534F）で表示します。\n\n### 月次サマリーの計算について\n- 月次サマリーデータは、V_MONTHLY_ATTENDANCEビューを使用して取得します。\n- 一部の項目（法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間）は、ATTENDANCE_RECORDテーブルから別途集計する必要があります。\n\n### 遅刻回数・時間などの表示形式について\n- 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、「XX回 XX:XX」形式で表示します（例: 0回 0:00）。\n- 回数と時間の間にスペースを1つ入れます。\n\n### 休日アイコンの表示について\n- 所定休日: ○（白い丸）\n- 法定休日: ◎（二重丸）\n- 有休計画付与日: △（三角）\n\n### 記号の説明について\n- 画面下部に「記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日」を表示します。\n- 記号の詳細説明：\n  - **○（所定休日）**: 勤務表画面のテーブルでいえば土曜日と祝日に対応します。",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **中央カラム**:",
            "lineNumber": 464
          },
          {
            "text": "  - **Section 4**: 法定労働時間、実労働時間-法定休日労働(有休を含めない)、法定時間内残業、法定時間外残業、法定休日労働時間",
            "lineNumber": 465
          },
          {
            "text": "  - **Section 5**: 深夜労働時間、45時間を超える時間外労働、60時間を超える時間外労働",
            "lineNumber": 466
          },
          {
            "text": "  - **Section 6**: 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間",
            "lineNumber": 467
          },
          {
            "text": "- **右カラム**:",
            "lineNumber": 468
          },
          {
            "text": "  - **Section 7**: 有給取得日数、[内訳]",
            "lineNumber": 469
          },
          {
            "text": "  - **Section 8**: 代休取得日数、[内訳]",
            "lineNumber": 470
          },
          {
            "text": "  - **Section 9**: 無給休暇日数、[内訳]",
            "lineNumber": 471
          },
          {
            "text": "  - **Section 10**: 有給残日数(月末日時点)、計画付与予定日（次月以降）",
            "lineNumber": 472
          },
          {
            "lineNumber": 473
          },
          {
            "text": "### データの表示形式について",
            "lineNumber": 474
          },
          {
            "text": "- 時間の表示形式は、H:MM（例: 8:00）またはHHH:MM（例: 114:05）です。",
            "lineNumber": 475
          },
          {
            "text": "- 日数の表示形式は、「XX 日」（例: 18 日）です。",
            "lineNumber": 476
          },
          {
            "text": "- 過不足時間がマイナスの場合は赤色（#D9534F）で表示します。",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "### 月次サマリーの計算について",
            "lineNumber": 479
          },
          {
            "text": "- 月次サマリーデータは、V_MONTHLY_ATTENDANCEビューを使用して取得します。",
            "lineNumber": 480
          },
          {
            "text": "- 一部の項目（法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間）は、ATTENDANCE_RECORDテーブルから別途集計する必要があります。",
            "lineNumber": 481
          },
          {
            "lineNumber": 482
          },
          {
            "text": "### 遅刻回数・時間などの表示形式について",
            "lineNumber": 483
          },
          {
            "text": "- 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、「XX回 XX:XX」形式で表示します（例: 0回 0:00）。",
            "lineNumber": 484
          },
          {
            "text": "- 回数と時間の間にスペースを1つ入れます。",
            "lineNumber": 485
          },
          {
            "lineNumber": 486
          },
          {
            "text": "### 休日アイコンの表示について",
            "lineNumber": 487
          },
          {
            "text": "- 所定休日: ○（白い丸）",
            "lineNumber": 488
          },
          {
            "text": "- 法定休日: ◎（二重丸）",
            "lineNumber": 489
          },
          {
            "text": "- 有休計画付与日: △（三角）",
            "lineNumber": 490
          },
          {
            "lineNumber": 491
          },
          {
            "text": "### 記号の説明について",
            "lineNumber": 492
          },
          {
            "text": "- 画面下部に「記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日」を表示します。",
            "lineNumber": 493
          },
          {
            "text": "- 記号の詳細説明：",
            "lineNumber": 494
          },
          {
            "text": "  - **○（所定休日）**: 勤務表画面のテーブルでいえば土曜日と祝日に対応します。",
            "lineNumber": 495
          }
        ]
      },
      "score": 0.38820356130599976
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 3701
          },
          "endPosition": {
            "line": 3818
          }
        },
        "contents": ".break-time-bar {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  height: 11px;\n  z-index: 2;\n  cursor: pointer;\n  pointer-events: auto;\n}\n\n/* 出退勤時刻マーカー（▼マーク） */\n.clock-marker {\n  position: absolute;\n  transform: translate(-50%, -100%);\n  z-index: 3;\n  pointer-events: none;\n}\n\n.cell-remarks {\n  position: absolute;\n  left: 1280px;\n  width: 200px;\n  height: 17px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 100;\n  pointer-events: auto;\n}\n\n.cell-remarks .plus-button {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 100;\n  pointer-events: auto;\n}\n\n.remarks-text {\n  position: absolute;\n  left: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 180px;\n  height: 17px;\n  font-size: 12px;\n  color: rgb(0, 0, 0);\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  z-index: 100;\n  pointer-events: auto;\n  background-color: transparent;\n  text-decoration: none;\n  line-height: 17px;\n}\n\n.remarks-text:hover {\n  text-decoration: none;\n}\n\n/* テーブル右下のリンクとボタン */\n.table-bottom-links {\n  position: relative;\n  width: 100%;\n  max-width: 1455px;\n  margin-left: 0;\n  margin-right: 0;\n  margin-bottom: 20px;\n  padding: 0 20px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 20px;\n}\n\n/* Bottom: 月次サマリー情報 */\n.bottom-summary {\n  position: relative;\n  left: 40px;\n  width: 532px;\n  height: 85px;\n  margin-top: -40px;\n  margin-bottom: 50px;\n}\n\n/* 左側グループ */\n.summary-group-left {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 260px;\n  height: 85px;\n}\n\n.summary-background-left {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 260px;\n  height: 85px;\n  background-color: rgb(213, 228, 233);\n}\n\n.summary-label-left {\n  position: absolute;\n  left: 14px;\n  width: 79px;\n  font-size: 12px;\n  font-family: Arial;\n  color: rgb(128, 145, 183);\n  white-space: nowrap;\n}\n\n.summary-divider-left {\n  position: absolute;",
        "signatures": {},
        "detailedLines": [
          {
            "text": ".break-time-bar {",
            "lineNumber": 3702
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3703
          },
          {
            "text": "  top: 50%;",
            "lineNumber": 3704
          },
          {
            "text": "  transform: translateY(-50%);",
            "lineNumber": 3705
          },
          {
            "text": "  height: 11px;",
            "lineNumber": 3706
          },
          {
            "text": "  z-index: 2;",
            "lineNumber": 3707
          },
          {
            "text": "  cursor: pointer;",
            "lineNumber": 3708
          },
          {
            "text": "  pointer-events: auto;",
            "lineNumber": 3709
          },
          {
            "text": "}",
            "lineNumber": 3710
          },
          {
            "lineNumber": 3711
          },
          {
            "text": "/* 出退勤時刻マーカー（▼マーク） */",
            "lineNumber": 3712
          },
          {
            "text": ".clock-marker {",
            "lineNumber": 3713
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3714
          },
          {
            "text": "  transform: translate(-50%, -100%);",
            "lineNumber": 3715
          },
          {
            "text": "  z-index: 3;",
            "lineNumber": 3716
          },
          {
            "text": "  pointer-events: none;",
            "lineNumber": 3717
          },
          {
            "text": "}",
            "lineNumber": 3718
          },
          {
            "lineNumber": 3719
          },
          {
            "text": ".cell-remarks {",
            "lineNumber": 3720
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3721
          },
          {
            "text": "  left: 1280px;",
            "lineNumber": 3722
          },
          {
            "text": "  width: 200px;",
            "lineNumber": 3723
          },
          {
            "text": "  height: 17px;",
            "lineNumber": 3724
          },
          {
            "text": "  top: 50%;",
            "lineNumber": 3725
          },
          {
            "text": "  transform: translateY(-50%);",
            "lineNumber": 3726
          },
          {
            "text": "  z-index: 100;",
            "lineNumber": 3727
          },
          {
            "text": "  pointer-events: auto;",
            "lineNumber": 3728
          },
          {
            "text": "}",
            "lineNumber": 3729
          },
          {
            "lineNumber": 3730
          },
          {
            "text": ".cell-remarks .plus-button {",
            "lineNumber": 3731
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3732
          },
          {
            "text": "  left: 0;",
            "lineNumber": 3733
          },
          {
            "text": "  top: 50%;",
            "lineNumber": 3734
          },
          {
            "text": "  transform: translateY(-50%);",
            "lineNumber": 3735
          },
          {
            "text": "  z-index: 100;",
            "lineNumber": 3736
          },
          {
            "text": "  pointer-events: auto;",
            "lineNumber": 3737
          },
          {
            "text": "}",
            "lineNumber": 3738
          },
          {
            "lineNumber": 3739
          },
          {
            "text": ".remarks-text {",
            "lineNumber": 3740
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3741
          },
          {
            "text": "  left: 20px;",
            "lineNumber": 3742
          },
          {
            "text": "  top: 50%;",
            "lineNumber": 3743
          },
          {
            "text": "  transform: translateY(-50%);",
            "lineNumber": 3744
          },
          {
            "text": "  width: 180px;",
            "lineNumber": 3745
          },
          {
            "text": "  height: 17px;",
            "lineNumber": 3746
          },
          {
            "text": "  font-size: 12px;",
            "lineNumber": 3747
          },
          {
            "text": "  color: rgb(0, 0, 0);",
            "lineNumber": 3748
          },
          {
            "text": "  cursor: pointer;",
            "lineNumber": 3749
          },
          {
            "text": "  overflow: hidden;",
            "lineNumber": 3750
          },
          {
            "text": "  text-overflow: ellipsis;",
            "lineNumber": 3751
          },
          {
            "text": "  white-space: nowrap;",
            "lineNumber": 3752
          },
          {
            "text": "  z-index: 100;",
            "lineNumber": 3753
          },
          {
            "text": "  pointer-events: auto;",
            "lineNumber": 3754
          },
          {
            "text": "  background-color: transparent;",
            "lineNumber": 3755
          },
          {
            "text": "  text-decoration: none;",
            "lineNumber": 3756
          },
          {
            "text": "  line-height: 17px;",
            "lineNumber": 3757
          },
          {
            "text": "}",
            "lineNumber": 3758
          },
          {
            "lineNumber": 3759
          },
          {
            "text": ".remarks-text:hover {",
            "lineNumber": 3760
          },
          {
            "text": "  text-decoration: none;",
            "lineNumber": 3761
          },
          {
            "text": "}",
            "lineNumber": 3762
          },
          {
            "lineNumber": 3763
          },
          {
            "text": "/* テーブル右下のリンクとボタン */",
            "lineNumber": 3764
          },
          {
            "text": ".table-bottom-links {",
            "lineNumber": 3765
          },
          {
            "text": "  position: relative;",
            "lineNumber": 3766
          },
          {
            "text": "  width: 100%;",
            "lineNumber": 3767
          },
          {
            "text": "  max-width: 1455px;",
            "lineNumber": 3768
          },
          {
            "text": "  margin-left: 0;",
            "lineNumber": 3769
          },
          {
            "text": "  margin-right: 0;",
            "lineNumber": 3770
          },
          {
            "text": "  margin-bottom: 20px;",
            "lineNumber": 3771
          },
          {
            "text": "  padding: 0 20px;",
            "lineNumber": 3772
          },
          {
            "text": "  display: flex;",
            "lineNumber": 3773
          },
          {
            "text": "  justify-content: flex-end;",
            "lineNumber": 3774
          },
          {
            "text": "  align-items: center;",
            "lineNumber": 3775
          },
          {
            "text": "  gap: 20px;",
            "lineNumber": 3776
          },
          {
            "text": "}",
            "lineNumber": 3777
          },
          {
            "lineNumber": 3778
          },
          {
            "text": "/* Bottom: 月次サマリー情報 */",
            "lineNumber": 3779
          },
          {
            "text": ".bottom-summary {",
            "lineNumber": 3780
          },
          {
            "text": "  position: relative;",
            "lineNumber": 3781
          },
          {
            "text": "  left: 40px;",
            "lineNumber": 3782
          },
          {
            "text": "  width: 532px;",
            "lineNumber": 3783
          },
          {
            "text": "  height: 85px;",
            "lineNumber": 3784
          },
          {
            "text": "  margin-top: -40px;",
            "lineNumber": 3785
          },
          {
            "text": "  margin-bottom: 50px;",
            "lineNumber": 3786
          },
          {
            "text": "}",
            "lineNumber": 3787
          },
          {
            "lineNumber": 3788
          },
          {
            "text": "/* 左側グループ */",
            "lineNumber": 3789
          },
          {
            "text": ".summary-group-left {",
            "lineNumber": 3790
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3791
          },
          {
            "text": "  left: 0px;",
            "lineNumber": 3792
          },
          {
            "text": "  top: 0px;",
            "lineNumber": 3793
          },
          {
            "text": "  width: 260px;",
            "lineNumber": 3794
          },
          {
            "text": "  height: 85px;",
            "lineNumber": 3795
          },
          {
            "text": "}",
            "lineNumber": 3796
          },
          {
            "lineNumber": 3797
          },
          {
            "text": ".summary-background-left {",
            "lineNumber": 3798
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3799
          },
          {
            "text": "  left: 0px;",
            "lineNumber": 3800
          },
          {
            "text": "  top: 0px;",
            "lineNumber": 3801
          },
          {
            "text": "  width: 260px;",
            "lineNumber": 3802
          },
          {
            "text": "  height: 85px;",
            "lineNumber": 3803
          },
          {
            "text": "  background-color: rgb(213, 228, 233);",
            "lineNumber": 3804
          },
          {
            "text": "}",
            "lineNumber": 3805
          },
          {
            "lineNumber": 3806
          },
          {
            "text": ".summary-label-left {",
            "lineNumber": 3807
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3808
          },
          {
            "text": "  left: 14px;",
            "lineNumber": 3809
          },
          {
            "text": "  width: 79px;",
            "lineNumber": 3810
          },
          {
            "text": "  font-size: 12px;",
            "lineNumber": 3811
          },
          {
            "text": "  font-family: Arial;",
            "lineNumber": 3812
          },
          {
            "text": "  color: rgb(128, 145, 183);",
            "lineNumber": 3813
          },
          {
            "text": "  white-space: nowrap;",
            "lineNumber": 3814
          },
          {
            "text": "}",
            "lineNumber": 3815
          },
          {
            "lineNumber": 3816
          },
          {
            "text": ".summary-divider-left {",
            "lineNumber": 3817
          },
          {
            "text": "  position: absolute;",
            "lineNumber": 3818
          }
        ]
      },
      "score": 0.38572126626968384
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 296
          },
          "endPosition": {
            "line": 312
          }
        },
        "contents": "  | 総労働時間-法定休日労働(有休を含む)値 | 月次サマリーデータ取得.総労働時間-法定休日労働をHHH:MM形式で表示 | |\n  | 過不足時間値 | 月次サマリーデータ取得.過不足時間を+/-H:MM形式で表示 | マイナスの場合は赤色表示 |\n  | 当月度の超過時間値 | 月次サマリーデータ取得.当月度の超過時間をH:MM形式で表示 | |\n  | 安全配慮上の超過時間値 | 月次サマリーデータ取得.安全配慮上の超過時間をH:MM形式で表示 | |\n  | 法定労働時間値 | 月次サマリーデータ取得.法定労働時間をHHH:MM形式で表示 | |\n  | 実労働時間-法定休日労働(有休を含めない)値 | 月次サマリーデータ取得.実労働時間-法定休日労働(有休を含めない)をHHH:MM形式で表示 | |\n  | 法廷時間内残業値 | 月次サマリーデータ取得.法定時間内残業をH:MM形式で表示 | |\n  | 法廷時間外残業値 | 月次サマリーデータ取得.法定時間外残業をH:MM形式で表示 | |\n  | 法定休日労働時間値 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |\n  | 深夜労働時間値 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |\n  | 45時間を超える時間外労働値 | 月次サマリーデータ取得.45時間を超える時間外労働をH:MM形式で表示 | |\n  | 60時間を超える時間外労働値 | 月次サマリーデータ取得.60時間を超える時間外労働をH:MM形式で表示 | |\n  | 遅刻回数・時間値 | 月次サマリーデータ取得.遅刻回数と遅刻時間を「XX回 XX:XX」形式で表示 | |\n  | 早退回数・時間値 | 月次サマリーデータ取得.早退回数と早退時間を「XX回 XX:XX」形式で表示 | |\n  | コア時間内の私用外出回数・時間値 | 月次サマリーデータ取得.コア時間内の私用外出回数と時間を「XX回 XX:XX」形式で表示 | |\n  | 有給取得日数値 | 休暇情報取得.有給取得日数を「XX 日」形式で表示 | |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | 総労働時間-法定休日労働(有休を含む)値 | 月次サマリーデータ取得.総労働時間-法定休日労働をHHH:MM形式で表示 | |",
            "lineNumber": 297
          },
          {
            "text": "  | 過不足時間値 | 月次サマリーデータ取得.過不足時間を+/-H:MM形式で表示 | マイナスの場合は赤色表示 |",
            "lineNumber": 298
          },
          {
            "text": "  | 当月度の超過時間値 | 月次サマリーデータ取得.当月度の超過時間をH:MM形式で表示 | |",
            "lineNumber": 299
          },
          {
            "text": "  | 安全配慮上の超過時間値 | 月次サマリーデータ取得.安全配慮上の超過時間をH:MM形式で表示 | |",
            "lineNumber": 300
          },
          {
            "text": "  | 法定労働時間値 | 月次サマリーデータ取得.法定労働時間をHHH:MM形式で表示 | |",
            "lineNumber": 301
          },
          {
            "text": "  | 実労働時間-法定休日労働(有休を含めない)値 | 月次サマリーデータ取得.実労働時間-法定休日労働(有休を含めない)をHHH:MM形式で表示 | |",
            "lineNumber": 302
          },
          {
            "text": "  | 法廷時間内残業値 | 月次サマリーデータ取得.法定時間内残業をH:MM形式で表示 | |",
            "lineNumber": 303
          },
          {
            "text": "  | 法廷時間外残業値 | 月次サマリーデータ取得.法定時間外残業をH:MM形式で表示 | |",
            "lineNumber": 304
          },
          {
            "text": "  | 法定休日労働時間値 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |",
            "lineNumber": 305
          },
          {
            "text": "  | 深夜労働時間値 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |",
            "lineNumber": 306
          },
          {
            "text": "  | 45時間を超える時間外労働値 | 月次サマリーデータ取得.45時間を超える時間外労働をH:MM形式で表示 | |",
            "lineNumber": 307
          },
          {
            "text": "  | 60時間を超える時間外労働値 | 月次サマリーデータ取得.60時間を超える時間外労働をH:MM形式で表示 | |",
            "lineNumber": 308
          },
          {
            "text": "  | 遅刻回数・時間値 | 月次サマリーデータ取得.遅刻回数と遅刻時間を「XX回 XX:XX」形式で表示 | |",
            "lineNumber": 309
          },
          {
            "text": "  | 早退回数・時間値 | 月次サマリーデータ取得.早退回数と早退時間を「XX回 XX:XX」形式で表示 | |",
            "lineNumber": 310
          },
          {
            "text": "  | コア時間内の私用外出回数・時間値 | 月次サマリーデータ取得.コア時間内の私用外出回数と時間を「XX回 XX:XX」形式で表示 | |",
            "lineNumber": 311
          },
          {
            "text": "  | 有給取得日数値 | 休暇情報取得.有給取得日数を「XX 日」形式で表示 | |",
            "lineNumber": 312
          }
        ]
      },
      "score": 0.3829245865345001
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 53
          },
          "endPosition": {
            "line": 67
          }
        },
        "contents": "| 15 | お知らせリンク | リンク | | | | | | | 表示 | 活性 | | お知らせ画面を表示。リンク形式 |\n| 16 | 月次サマリーリンク | リンク | | | | | | | 表示 | 活性 | | 月次サマリー画面を表示。リンク形式 |\n| 17 | ステータス表示 | リンク | | 文字 | | | | | 表示 | 活性 | | 月次確定状態を表示するリンク。「ステータス - 」の後に状態を表示。押下でステータスダイアログを表示 |\n| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ステータスアイコン | 出力 | | 画像 | | | | | 表示 | 活性 | | 月次確定状態に応じたアイコン。未確定=-（ハイフン）、承認中=↑マーク、承認済み=✓チェックマーク |\n| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ステータステキスト | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のテキスト。未確定/承認中/承認済み |\n| 20 | 承認申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 承認申請画面へ遷移。青色のボタン |\n| | &lt;勤務表テーブル&gt; | | | | | | | | | | | |\n| 21 | 勤務表 | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |\n| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録 |\n| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |\n| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日。日曜日は#FF0000（赤色）、土曜日・祝日は#0000FF（青色）で表示 |\n| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定ボタン（+アイコン） | ボタン | | | | | | | 条件付き表示 | 活性 | | 日付列に表示される+マーク（グレー色）。押下で日次確定申請を実行。未確定（NOT_SUBMITTED）の日のみ表示 |\n| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務状況アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 通常勤務時はNIKKORIアイコン（青色の丸の中に白い笑顔）、注意が必要な場合は青色の丸の中に「!」マーク。マウスホバーでツールチップ表示 |\n| 26-1 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務状況ツールチップ | 出力 | | オブジェクト | | | | | 条件付き表示 | 活性 | | 勤務状況アイコンにマウスホバー時に表示される詳細情報。通常勤務の場合は「通常勤務日」と表示 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 15 | お知らせリンク | リンク | | | | | | | 表示 | 活性 | | お知らせ画面を表示。リンク形式 |",
            "lineNumber": 54
          },
          {
            "text": "| 16 | 月次サマリーリンク | リンク | | | | | | | 表示 | 活性 | | 月次サマリー画面を表示。リンク形式 |",
            "lineNumber": 55
          },
          {
            "text": "| 17 | ステータス表示 | リンク | | 文字 | | | | | 表示 | 活性 | | 月次確定状態を表示するリンク。「ステータス - 」の後に状態を表示。押下でステータスダイアログを表示 |",
            "lineNumber": 56
          },
          {
            "text": "| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ステータスアイコン | 出力 | | 画像 | | | | | 表示 | 活性 | | 月次確定状態に応じたアイコン。未確定=-（ハイフン）、承認中=↑マーク、承認済み=✓チェックマーク |",
            "lineNumber": 57
          },
          {
            "text": "| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ステータステキスト | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のテキスト。未確定/承認中/承認済み |",
            "lineNumber": 58
          },
          {
            "text": "| 20 | 承認申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 承認申請画面へ遷移。青色のボタン |",
            "lineNumber": 59
          },
          {
            "text": "| | &lt;勤務表テーブル&gt; | | | | | | | | | | | |",
            "lineNumber": 60
          },
          {
            "text": "| 21 | 勤務表 | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |",
            "lineNumber": 61
          },
          {
            "text": "| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録 |",
            "lineNumber": 62
          },
          {
            "text": "| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |",
            "lineNumber": 63
          },
          {
            "text": "| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日。日曜日は#FF0000（赤色）、土曜日・祝日は#0000FF（青色）で表示 |",
            "lineNumber": 64
          },
          {
            "text": "| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定ボタン（+アイコン） | ボタン | | | | | | | 条件付き表示 | 活性 | | 日付列に表示される+マーク（グレー色）。押下で日次確定申請を実行。未確定（NOT_SUBMITTED）の日のみ表示 |",
            "lineNumber": 65
          },
          {
            "text": "| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務状況アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 通常勤務時はNIKKORIアイコン（青色の丸の中に白い笑顔）、注意が必要な場合は青色の丸の中に「!」マーク。マウスホバーでツールチップ表示 |",
            "lineNumber": 66
          },
          {
            "text": "| 26-1 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務状況ツールチップ | 出力 | | オブジェクト | | | | | 条件付き表示 | 活性 | | 勤務状況アイコンにマウスホバー時に表示される詳細情報。通常勤務の場合は「通常勤務日」と表示 |",
            "lineNumber": 67
          }
        ]
      },
      "score": 0.37772369384765625
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 133
          },
          "endPosition": {
            "line": 148,
            "column": 8
          }
        },
        "contents": "    &lt;span class=\"total-break\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.totalBreakHours || 0) }}&lt;/span&gt;\n    &lt;span class=\"total-actual-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;\n    &lt;span class=\"total-overtime\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(calculateTotalOvertime()) }}&lt;/span&gt;\n    &lt;span class=\"total-holiday-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.legalHolidayWorkHours || 0) }}&lt;/span&gt;\n    &lt;span class=\"total-night-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.nightWorkHours || 0) }}&lt;/span&gt;\n\n    &lt;!-- Symbol Explanation --&gt;\n    &lt;span class=\"symbol-explanation\" :style=\"{ top: getSymbolExplanationTop() + 'px' }\"&gt;記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日&lt;/span&gt;\n\n    &lt;!-- Monthly Summary Title --&gt;\n    &lt;h2 class=\"monthly-summary-title\"&gt;{{ formattedYearMonth }}月次サマリー&lt;/h2&gt;\n\n    &lt;!-- Section 1: 所定出勤日数から所定休日出勤日数 --&gt;\n    &lt;div class=\"summary-section section-1\"&gt;\n      &lt;svg class=\"section-border\" viewBox=\"0 0 603 84\" preserveAspectRatio=\"none\"&gt;\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;span class=\"total-break\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.totalBreakHours || 0) }}&lt;/span&gt;",
            "lineNumber": 134
          },
          {
            "text": "    &lt;span class=\"total-actual-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 135
          },
          {
            "text": "    &lt;span class=\"total-overtime\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(calculateTotalOvertime()) }}&lt;/span&gt;",
            "lineNumber": 136
          },
          {
            "text": "    &lt;span class=\"total-holiday-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.legalHolidayWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 137
          },
          {
            "text": "    &lt;span class=\"total-night-work\" :style=\"{ top: getTotalRowTop() + 5 + 'px' }\"&gt;{{ formatHours(monthlySummary?.nightWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 138
          },
          {
            "lineNumber": 139
          },
          {
            "text": "    &lt;!-- Symbol Explanation --&gt;",
            "lineNumber": 140
          },
          {
            "text": "    &lt;span class=\"symbol-explanation\" :style=\"{ top: getSymbolExplanationTop() + 'px' }\"&gt;記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日&lt;/span&gt;",
            "lineNumber": 141
          },
          {
            "lineNumber": 142
          },
          {
            "text": "    &lt;!-- Monthly Summary Title --&gt;",
            "lineNumber": 143
          },
          {
            "text": "    &lt;h2 class=\"monthly-summary-title\"&gt;{{ formattedYearMonth }}月次サマリー&lt;/h2&gt;",
            "lineNumber": 144
          },
          {
            "lineNumber": 145
          },
          {
            "text": "    &lt;!-- Section 1: 所定出勤日数から所定休日出勤日数 --&gt;",
            "lineNumber": 146
          },
          {
            "text": "    &lt;div class=\"summary-section section-1\"&gt;",
            "lineNumber": 147
          },
          {
            "text": "      &lt;svg class=\"section-border\" viewBox=\"0 0 603 84\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 148
          },
          {
            "text": "        ",
            "lineNumber": 149
          }
        ]
      },
      "score": 0.3727946877479553
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 64
          },
          "endPosition": {
            "line": 79
          }
        },
        "contents": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |\n| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |\n| 35 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 残業時間。記録がない場合は表示しない |\n| 36 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休日労働時間。記録がない場合は表示しない |\n| 37 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 深夜労働時間。記録がない場合は表示しない |\n| 38 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 備考テキスト。記録がない場合は表示しない |\n| | &lt;合計行部分&gt; | | | | | | | | | | | |\n| 39 | 合計行背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 水色（#E8F4F8）の背景 |\n| 40 | 合計ラベル | 出力 | | 文字 | | | | | 表示 | 活性 | 合計 | 固定表示 |\n| 41 | 合計出社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の出社時刻の合計（意味がないため通常は表示しない） |\n| 42 | 合計退社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の退社時刻の合計（意味がないため通常は表示しない） |\n| 43 | 合計休憩時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休憩時間の合計 |\n| 44 | 合計実労働時間 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 月間の実労働時間の合計 |\n| 45 | 合計残業時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の残業時間の合計 |\n| 46 | 合計休日労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休日労働時間の合計 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |",
            "lineNumber": 65
          },
          {
            "text": "| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |",
            "lineNumber": 66
          },
          {
            "text": "| 35 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 残業時間。記録がない場合は表示しない |",
            "lineNumber": 67
          },
          {
            "text": "| 36 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休日労働時間。記録がない場合は表示しない |",
            "lineNumber": 68
          },
          {
            "text": "| 37 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 深夜労働時間。記録がない場合は表示しない |",
            "lineNumber": 69
          },
          {
            "text": "| 38 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 備考テキスト。記録がない場合は表示しない |",
            "lineNumber": 70
          },
          {
            "text": "| | &lt;合計行部分&gt; | | | | | | | | | | | |",
            "lineNumber": 71
          },
          {
            "text": "| 39 | 合計行背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 水色（#E8F4F8）の背景 |",
            "lineNumber": 72
          },
          {
            "text": "| 40 | 合計ラベル | 出力 | | 文字 | | | | | 表示 | 活性 | 合計 | 固定表示 |",
            "lineNumber": 73
          },
          {
            "text": "| 41 | 合計出社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の出社時刻の合計（意味がないため通常は表示しない） |",
            "lineNumber": 74
          },
          {
            "text": "| 42 | 合計退社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の退社時刻の合計（意味がないため通常は表示しない） |",
            "lineNumber": 75
          },
          {
            "text": "| 43 | 合計休憩時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休憩時間の合計 |",
            "lineNumber": 76
          },
          {
            "text": "| 44 | 合計実労働時間 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 月間の実労働時間の合計 |",
            "lineNumber": 77
          },
          {
            "text": "| 45 | 合計残業時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の残業時間の合計 |",
            "lineNumber": 78
          },
          {
            "text": "| 46 | 合計休日労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休日労働時間の合計 |",
            "lineNumber": 79
          }
        ]
      },
      "score": 0.37210360169410706
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1131
          },
          "endPosition": {
            "line": 1157
          }
        },
        "contents": "1. **法定時間内残業**:\n   - 計算方法: 実作業時間 - 所定労働時間\n   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間\n   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間\n\n2. **法定時間外残業**:\n   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00\n   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間\n\n### 月次サマリーデータの表示\n画面下部に月間の集計データが表示されます：\n\n1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）\n2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）\n3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）\n4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）\n5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）\n   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)\n   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能\n   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除\n   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算\n   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます\n6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）\n7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）\n   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
        "signatures": {},
        "detailedLines": [
          {
            "text": "1. **法定時間内残業**:",
            "lineNumber": 1133
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定労働時間",
            "lineNumber": 1134
          },
          {
            "text": "   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 1135
          },
          {
            "text": "   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間",
            "lineNumber": 1136
          },
          {
            "lineNumber": 1137
          },
          {
            "text": "2. **法定時間外残業**:",
            "lineNumber": 1138
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00",
            "lineNumber": 1139
          },
          {
            "text": "   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間",
            "lineNumber": 1140
          },
          {
            "lineNumber": 1141
          },
          {
            "text": "### 月次サマリーデータの表示",
            "lineNumber": 1142
          },
          {
            "text": "画面下部に月間の集計データが表示されます：",
            "lineNumber": 1143
          },
          {
            "lineNumber": 1144
          },
          {
            "text": "1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）",
            "lineNumber": 1145
          },
          {
            "text": "2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）",
            "lineNumber": 1146
          },
          {
            "text": "3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）",
            "lineNumber": 1147
          },
          {
            "text": "4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）",
            "lineNumber": 1148
          },
          {
            "text": "5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）",
            "lineNumber": 1149
          },
          {
            "text": "   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)",
            "lineNumber": 1150
          },
          {
            "text": "   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能",
            "lineNumber": 1151
          },
          {
            "text": "   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除",
            "lineNumber": 1152
          },
          {
            "text": "   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算",
            "lineNumber": 1153
          },
          {
            "text": "   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます",
            "lineNumber": 1154
          },
          {
            "text": "6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）",
            "lineNumber": 1155
          },
          {
            "text": "7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）",
            "lineNumber": 1156
          },
          {
            "text": "   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
            "lineNumber": 1157
          }
        ]
      },
      "score": 0.3712920546531677
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 859
          },
          "endPosition": {
            "line": 876
          }
        },
        "contents": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |\n  | 月次サマリーデータ | 月間集計データ | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |",
            "lineNumber": 860
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |",
            "lineNumber": 861
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |",
            "lineNumber": 862
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |",
            "lineNumber": 863
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |",
            "lineNumber": 864
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |",
            "lineNumber": 865
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |",
            "lineNumber": 866
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |",
            "lineNumber": 867
          },
          {
            "text": "  | 月次サマリーデータ | 月間集計データ | JSON形式 |",
            "lineNumber": 868
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |",
            "lineNumber": 869
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |",
            "lineNumber": 870
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |",
            "lineNumber": 871
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |",
            "lineNumber": 872
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |",
            "lineNumber": 873
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |",
            "lineNumber": 874
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |",
            "lineNumber": 875
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
            "lineNumber": 876
          }
        ]
      },
      "score": 0.3625147342681885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 173
          },
          "endPosition": {
            "line": 207
          }
        },
        "contents": "      &lt;/div&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 63px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;\n        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;div class=\"section-row section-row-gray\" style=\"top: 63px;\"&gt;\n        &lt;span class=\"section-label\"&gt;所定休日出勤日数&lt;/span&gt;\n        &lt;span class=\"section-value\"&gt;{{ monthlySummary?.scheduledHolidayWorkDays || 0 }} 日&lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Section 2: 所定労働時間から過不足時間 --&gt;\n    &lt;div class=\"summary-section section-2\"&gt;\n      &lt;svg class=\"section-border\" viewBox=\"0 0 603 84\" preserveAspectRatio=\"none\"&gt;\n        &lt;path d=\"M 0.5 0.5 L 602.5 0.5 M 0.5 0.5 L 0.5 83.5 M 602.5 0.5 L 602.5 83.5\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 0px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;\n        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;div class=\"section-row section-row-white\" style=\"top: 0px;\"&gt;\n        &lt;span class=\"section-label\"&gt;所定労働時間&lt;/span&gt;\n        &lt;span class=\"section-value\"&gt;{{ formatHoursLong(monthlySummary?.scheduledWorkHours || 0) }}&lt;/span&gt;\n      &lt;/div&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 21px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;\n        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;div class=\"section-row section-row-gray\" style=\"top: 21px;\"&gt;\n        &lt;span class=\"section-label\"&gt;総労働時間(有休を含む)&lt;/span&gt;\n        &lt;span class=\"section-value\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;\n      &lt;/div&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 42px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 174
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 63px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 175
          },
          {
            "text": "        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;",
            "lineNumber": 176
          },
          {
            "text": "        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 177
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 178
          },
          {
            "text": "      &lt;div class=\"section-row section-row-gray\" style=\"top: 63px;\"&gt;",
            "lineNumber": 179
          },
          {
            "text": "        &lt;span class=\"section-label\"&gt;所定休日出勤日数&lt;/span&gt;",
            "lineNumber": 180
          },
          {
            "text": "        &lt;span class=\"section-value\"&gt;{{ monthlySummary?.scheduledHolidayWorkDays || 0 }} 日&lt;/span&gt;",
            "lineNumber": 181
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 182
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 183
          },
          {
            "lineNumber": 184
          },
          {
            "text": "    &lt;!-- Section 2: 所定労働時間から過不足時間 --&gt;",
            "lineNumber": 185
          },
          {
            "text": "    &lt;div class=\"summary-section section-2\"&gt;",
            "lineNumber": 186
          },
          {
            "text": "      &lt;svg class=\"section-border\" viewBox=\"0 0 603 84\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 187
          },
          {
            "text": "        &lt;path d=\"M 0.5 0.5 L 602.5 0.5 M 0.5 0.5 L 0.5 83.5 M 602.5 0.5 L 602.5 83.5\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 188
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 189
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 0px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 190
          },
          {
            "text": "        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;",
            "lineNumber": 191
          },
          {
            "text": "        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 192
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 193
          },
          {
            "text": "      &lt;div class=\"section-row section-row-white\" style=\"top: 0px;\"&gt;",
            "lineNumber": 194
          },
          {
            "text": "        &lt;span class=\"section-label\"&gt;所定労働時間&lt;/span&gt;",
            "lineNumber": 195
          },
          {
            "text": "        &lt;span class=\"section-value\"&gt;{{ formatHoursLong(monthlySummary?.scheduledWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 196
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 197
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 21px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 198
          },
          {
            "text": "        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;",
            "lineNumber": 199
          },
          {
            "text": "        &lt;path d=\"M 0 0 L 603 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 200
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 201
          },
          {
            "text": "      &lt;div class=\"section-row section-row-gray\" style=\"top: 21px;\"&gt;",
            "lineNumber": 202
          },
          {
            "text": "        &lt;span class=\"section-label\"&gt;総労働時間(有休を含む)&lt;/span&gt;",
            "lineNumber": 203
          },
          {
            "text": "        &lt;span class=\"section-value\"&gt;{{ formatHoursLong(monthlySummary?.totalWorkHours || 0) }}&lt;/span&gt;",
            "lineNumber": 204
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 205
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 42px;\" viewBox=\"0 0 603 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 206
          },
          {
            "text": "        &lt;rect width=\"603\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;",
            "lineNumber": 207
          }
        ]
      },
      "score": 0.3600815534591675
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 77
          },
          "endPosition": {
            "line": 96
          }
        },
        "contents": "| 45 | 合計残業時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の残業時間の合計 |\n| 46 | 合計休日労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休日労働時間の合計 |\n| 47 | 合計深夜労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の深夜労働時間の合計 |\n| | &lt;記号説明部分&gt; | | | | | | | | | | | |\n| 48 | 記号の説明 | 出力 | | 文字 | | | | | 表示 | 活性 | | 記号の説明テキスト（○＝所定休日（勤務表画面のテーブルでいえば土と祝日）、◎＝法定休日（日曜日）、△＝有休計画付与日） |\n| | &lt;月次サマリータイトル部分&gt; | | | | | | | | | | | |\n| 49 | 月次サマリータイトル | 出力 | | 文字 | | | | | 表示 | 活性 | | YYYY年MM月月次サマリー（例: 2025年11月月次サマリー） |\n| | &lt;左カラム部分 - Section 1&gt; | | | | | | | | | | | |\n| 50 | Section 1背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |\n| 51 | 所定出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |\n| 52 | 所定出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定出勤日数（例: 18 日） |\n| 53 | 実出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |\n| 54 | 実出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 実出勤日数（例: 14 日） |\n| 55 | 法定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |\n| 56 | 法定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 法定休日出勤日数（例: 0 日） |\n| 57 | 所定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |\n| 58 | 所定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定休日出勤日数（例: 0 日） |\n| | &lt;左カラム部分 - Section 2&gt; | | | | | | | | | | | | |\n| 59 | Section 2背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 45 | 合計残業時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の残業時間の合計 |",
            "lineNumber": 78
          },
          {
            "text": "| 46 | 合計休日労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休日労働時間の合計 |",
            "lineNumber": 79
          },
          {
            "text": "| 47 | 合計深夜労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の深夜労働時間の合計 |",
            "lineNumber": 80
          },
          {
            "text": "| | &lt;記号説明部分&gt; | | | | | | | | | | | |",
            "lineNumber": 81
          },
          {
            "text": "| 48 | 記号の説明 | 出力 | | 文字 | | | | | 表示 | 活性 | | 記号の説明テキスト（○＝所定休日（勤務表画面のテーブルでいえば土と祝日）、◎＝法定休日（日曜日）、△＝有休計画付与日） |",
            "lineNumber": 82
          },
          {
            "text": "| | &lt;月次サマリータイトル部分&gt; | | | | | | | | | | | |",
            "lineNumber": 83
          },
          {
            "text": "| 49 | 月次サマリータイトル | 出力 | | 文字 | | | | | 表示 | 活性 | | YYYY年MM月月次サマリー（例: 2025年11月月次サマリー） |",
            "lineNumber": 84
          },
          {
            "text": "| | &lt;左カラム部分 - Section 1&gt; | | | | | | | | | | | |",
            "lineNumber": 85
          },
          {
            "text": "| 50 | Section 1背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |",
            "lineNumber": 86
          },
          {
            "text": "| 51 | 所定出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |",
            "lineNumber": 87
          },
          {
            "text": "| 52 | 所定出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定出勤日数（例: 18 日） |",
            "lineNumber": 88
          },
          {
            "text": "| 53 | 実出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |",
            "lineNumber": 89
          },
          {
            "text": "| 54 | 実出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 実出勤日数（例: 14 日） |",
            "lineNumber": 90
          },
          {
            "text": "| 55 | 法定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |",
            "lineNumber": 91
          },
          {
            "text": "| 56 | 法定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 法定休日出勤日数（例: 0 日） |",
            "lineNumber": 92
          },
          {
            "text": "| 57 | 所定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |",
            "lineNumber": 93
          },
          {
            "text": "| 58 | 所定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定休日出勤日数（例: 0 日） |",
            "lineNumber": 94
          },
          {
            "text": "| | &lt;左カラム部分 - Section 2&gt; | | | | | | | | | | | | |",
            "lineNumber": 95
          },
          {
            "text": "| 59 | Section 2背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |",
            "lineNumber": 96
          }
        ]
      },
      "score": 0.35871079564094543
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 178
          },
          "endPosition": {
            "line": 197
          }
        },
        "contents": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |\n| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間合計 | 小数 | 正常 | | BREAK_TIMEの合計 |\n| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | | OVERTIME_HOURS |\n| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | | HOLIDAY_WORK_HOURS |\n| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS |\n| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |\n| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |\n| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |\n| 16 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |\n| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |\n| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS |\n| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日出勤日数 | 整数 | 正常 | | 法定休日に出勤した日数 |\n| 20 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定休日出勤日数 | 整数 | 正常 | | 所定休日に出勤した日数 |\n| 21 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | | SCHEDULED_WORK_HOURS（時間単位） |\n| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 小数 | 正常 | | TOTAL_WORK_HOURS（時間単位） |\n| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間-法定休日労働 | 小数 | 正常 | | 総労働時間から法定休日労働を除いた時間（時間単位） |\n| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 小数 | 正常 | | OVER_UNDER_HOURS（時間単位） |\n| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;当月度の超過時間 | 小数 | 正常 | | 当月度の超過時間（時間単位） |\n| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;安全配慮上の超過時間 | 小数 | 正常 | | 安全配慮上の超過時間（時間単位） |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |",
            "lineNumber": 179
          },
          {
            "text": "| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間合計 | 小数 | 正常 | | BREAK_TIMEの合計 |",
            "lineNumber": 180
          },
          {
            "text": "| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | | OVERTIME_HOURS |",
            "lineNumber": 181
          },
          {
            "text": "| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | | HOLIDAY_WORK_HOURS |",
            "lineNumber": 182
          },
          {
            "text": "| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS |",
            "lineNumber": 183
          },
          {
            "text": "| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |",
            "lineNumber": 184
          },
          {
            "text": "| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |",
            "lineNumber": 185
          },
          {
            "text": "| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |",
            "lineNumber": 186
          },
          {
            "text": "| 16 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |",
            "lineNumber": 187
          },
          {
            "text": "| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |",
            "lineNumber": 188
          },
          {
            "text": "| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS |",
            "lineNumber": 189
          },
          {
            "text": "| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日出勤日数 | 整数 | 正常 | | 法定休日に出勤した日数 |",
            "lineNumber": 190
          },
          {
            "text": "| 20 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定休日出勤日数 | 整数 | 正常 | | 所定休日に出勤した日数 |",
            "lineNumber": 191
          },
          {
            "text": "| 21 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | | SCHEDULED_WORK_HOURS（時間単位） |",
            "lineNumber": 192
          },
          {
            "text": "| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 小数 | 正常 | | TOTAL_WORK_HOURS（時間単位） |",
            "lineNumber": 193
          },
          {
            "text": "| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間-法定休日労働 | 小数 | 正常 | | 総労働時間から法定休日労働を除いた時間（時間単位） |",
            "lineNumber": 194
          },
          {
            "text": "| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 小数 | 正常 | | OVER_UNDER_HOURS（時間単位） |",
            "lineNumber": 195
          },
          {
            "text": "| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;当月度の超過時間 | 小数 | 正常 | | 当月度の超過時間（時間単位） |",
            "lineNumber": 196
          },
          {
            "text": "| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;安全配慮上の超過時間 | 小数 | 正常 | | 安全配慮上の超過時間（時間単位） |",
            "lineNumber": 197
          }
        ]
      },
      "score": 0.35868680477142334
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\feture_list\\TeamSpirit機能一覧.md",
        "range": {
          "startPosition": {
            "line": 81
          },
          "endPosition": {
            "line": 89
          }
        },
        "contents": "| 78 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 勤務時間集計_表示 | 総勤務時間、所定勤務時間、実勤務時間などを表示 |\n| 79 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 残業時間集計_表示 | 残業時間、深夜残業時間、休日勤務時間などを表示 |\n| 80 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 閉じる_押下 | 月次サマリー画面を閉じる |\n| 81 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇情報_押下 | 個人休暇表示画面を表示 |\n| 82 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 初期表示 | 休暇残日数、取得履歴、休暇種別ごとの情報を表示 |\n| 83 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇種別_表示 | 有給休暇、特別休暇などの休暇種別を表示 |\n| 84 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇残日数_表示 | 各休暇種別の残日数と付与日数を表示 |\n| 85 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇取得履歴_表示 | 過去の休暇取得履歴（日付、種別、日数）を表示 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 78 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 勤務時間集計_表示 | 総勤務時間、所定勤務時間、実勤務時間などを表示 |",
            "lineNumber": 82
          },
          {
            "text": "| 79 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 残業時間集計_表示 | 残業時間、深夜残業時間、休日勤務時間などを表示 |",
            "lineNumber": 83
          },
          {
            "text": "| 80 | 勤務表 | 画面 | SCR_TS_0214 | 月次サマリー表示 | MonthlySummaryDisplay | N/A | N/A | SCR_TS_021101 | 月次サマリー画面 | MonthlySummaryDialog | 従業員 | 月間の勤務情報の集計表示 | 閉じる_押下 | 月次サマリー画面を閉じる |",
            "lineNumber": 84
          },
          {
            "text": "| 81 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇情報_押下 | 個人休暇表示画面を表示 |",
            "lineNumber": 85
          },
          {
            "text": "| 82 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 初期表示 | 休暇残日数、取得履歴、休暇種別ごとの情報を表示 |",
            "lineNumber": 86
          },
          {
            "text": "| 83 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇種別_表示 | 有給休暇、特別休暇などの休暇種別を表示 |",
            "lineNumber": 87
          },
          {
            "text": "| 84 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇残日数_表示 | 各休暇種別の残日数と付与日数を表示 |",
            "lineNumber": 88
          },
          {
            "text": "| 85 | 勤務表 | 画面 | SCR_TS_0215 | 休暇情報 | VacationInfo | N/A | N/A | SCR_TS_021201 | 個人休暇表示画面 | PersonalVacationDialog | 従業員 | 有給休暇などの休暇情報の表示 | 休暇取得履歴_表示 | 過去の休暇取得履歴（日付、種別、日数）を表示 |",
            "lineNumber": 89
          }
        ]
      },
      "score": 0.357921838760376
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 567
          },
          "endPosition": {
            "line": 628
          }
        },
        "contents": "    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      const days = ['日', '月', '火', '水', '木', '金', '土']\n      return days[date.getDay()]\n    },\n    isLegalHoliday(dateStr) {\n      // 法定休日（日曜日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      return day === 0 // 日曜日\n    },\n    isScheduledHoliday(dateStr) {\n      // 所定休日（土曜日・祝日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      // 土曜日を所定休日として判定\n      if (day === 6) return true\n      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）\n      return false\n    },\n    isHoliday(dateStr) {\n      // 休日全般を判定（後方互換性のため残す）\n      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)\n    },\n    getEventText(day) {\n      if (day.remarkText) {\n        return day.remarkText\n      }\n      if (day.isDailyConfirmed) {\n        if (day.workLocationCode === 'HOME') {\n          return '日次確定-在宅'\n        }\n\n        return '日次確定-出勤'\n      }\n      if (day.workLocationCode === 'HOME') {\n        return '在宅'\n      }\n      return ''\n    },\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {\n        const date = new Date(timeStr)\n        const hours = date.getHours() // 先頭0を削除\n        const minutes = String(date.getMinutes()).padStart(2, '0')\n        return &#96;${hours}:${minutes}&#96;\n      }\n      // 既にHH:MM形式の場合は、先頭0を削除\n      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {\n        const [hours, minutes] = timeStr.split(':')\n        const hourNum = parseInt(hours, 10)\n        return &#96;${hourNum}:${minutes}&#96;\n      }\n      return timeStr\n    },\n    formatHours(hours) {\n      if (hours === null || hours === undefined) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 570
          },
          {
            "text": "      const days = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 571
          },
          {
            "text": "      return days[date.getDay()]",
            "lineNumber": 572
          },
          {
            "text": "    },",
            "lineNumber": 573
          },
          {
            "text": "    isLegalHoliday(dateStr) {",
            "lineNumber": 574
          },
          {
            "text": "      // 法定休日（日曜日）を判定",
            "lineNumber": 575
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 576
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 578
          },
          {
            "text": "      return day === 0 // 日曜日",
            "lineNumber": 579
          },
          {
            "text": "    },",
            "lineNumber": 580
          },
          {
            "text": "    isScheduledHoliday(dateStr) {",
            "lineNumber": 581
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 582
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 583
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 584
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 585
          },
          {
            "text": "      // 土曜日を所定休日として判定",
            "lineNumber": 586
          },
          {
            "text": "      if (day === 6) return true",
            "lineNumber": 587
          },
          {
            "text": "      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）",
            "lineNumber": 588
          },
          {
            "text": "      return false",
            "lineNumber": 589
          },
          {
            "text": "    },",
            "lineNumber": 590
          },
          {
            "text": "    isHoliday(dateStr) {",
            "lineNumber": 591
          },
          {
            "text": "      // 休日全般を判定（後方互換性のため残す）",
            "lineNumber": 592
          },
          {
            "text": "      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)",
            "lineNumber": 593
          },
          {
            "text": "    },",
            "lineNumber": 594
          },
          {
            "text": "    getEventText(day) {",
            "lineNumber": 595
          },
          {
            "text": "      if (day.remarkText) {",
            "lineNumber": 596
          },
          {
            "text": "        return day.remarkText",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      if (day.isDailyConfirmed) {",
            "lineNumber": 599
          },
          {
            "text": "        if (day.workLocationCode === 'HOME') {",
            "lineNumber": 600
          },
          {
            "text": "          return '日次確定-在宅'",
            "lineNumber": 601
          },
          {
            "text": "        }",
            "lineNumber": 602
          },
          {
            "lineNumber": 603
          },
          {
            "text": "        return '日次確定-出勤'",
            "lineNumber": 604
          },
          {
            "text": "      }",
            "lineNumber": 605
          },
          {
            "text": "      if (day.workLocationCode === 'HOME') {",
            "lineNumber": 606
          },
          {
            "text": "        return '在宅'",
            "lineNumber": 607
          },
          {
            "text": "      }",
            "lineNumber": 608
          },
          {
            "text": "      return ''",
            "lineNumber": 609
          },
          {
            "text": "    },",
            "lineNumber": 610
          },
          {
            "text": "    formatTime(timeStr) {",
            "lineNumber": 611
          },
          {
            "text": "      if (!timeStr) return ''",
            "lineNumber": 612
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {",
            "lineNumber": 613
          },
          {
            "text": "        const date = new Date(timeStr)",
            "lineNumber": 614
          },
          {
            "text": "        const hours = date.getHours() // 先頭0を削除",
            "lineNumber": 615
          },
          {
            "text": "        const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 616
          },
          {
            "text": "        return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 617
          },
          {
            "text": "      }",
            "lineNumber": 618
          },
          {
            "text": "      // 既にHH:MM形式の場合は、先頭0を削除",
            "lineNumber": 619
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {",
            "lineNumber": 620
          },
          {
            "text": "        const [hours, minutes] = timeStr.split(':')",
            "lineNumber": 621
          },
          {
            "text": "        const hourNum = parseInt(hours, 10)",
            "lineNumber": 622
          },
          {
            "text": "        return &#96;${hourNum}:${minutes}&#96;",
            "lineNumber": 623
          },
          {
            "text": "      }",
            "lineNumber": 624
          },
          {
            "text": "      return timeStr",
            "lineNumber": 625
          },
          {
            "text": "    },",
            "lineNumber": 626
          },
          {
            "text": "    formatHours(hours) {",
            "lineNumber": 627
          },
          {
            "text": "      if (hours === null || hours === undefined) return ''",
            "lineNumber": 628
          }
        ]
      },
      "score": 0.35295283794403076
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


バックエンドのデータ構造と、休暇・祝日情報の取得方法を確認中です。


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "月次サマリー画面でdailyDataに休暇情報や祝日情報を設定している箇所",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \nfor (let day = 1; day &lt;= daysInMonth; day++) {\n\n      }\n    }\n    \n    let attendanceId = null;\n    let clockInTime = null;\n    let clockOutTime = null;\n    let holidayWorkHours = 0;\n    let nightWorkHours = 0;\n    let workLocationCode = null;\n    let remarkText = null;\n    let isDailyConfirmed = false;\n\n    if (attendance) {\n      attendanceId = attendance.ATTENDANCE_ID;\n      clockInTime = attendance.CLOCK_IN_TIME;\n      clockOutTime = attendance.CLOCK_OUT_TIME;\n      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;\n      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;\n      workLocationCode = attendance.WORK_LOCATION_CODE;\n      remarkText = attendance.REMARK_TEXT;\n      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;\n    }\n\n    dailyData.push({\n      attendanceId: attendanceId,\n      employeeId: employeeId,\n      workDate: workDate,\n      clockInTime: clockInTime,\n      clockOutTime: clockOutTime,\n      actualWorkHours: actualWorkHours,\n      breakTimeTotal: breakTimeTotal,\n      overtimeHours: overtimeHours,\n      holidayWorkHours: holidayWorkHours,\n      nightWorkHours: nightWorkHours,\n      workLocationCode: workLocationCode,\n      remarkText: remarkText,\n      isDailyConfirmed: isDailyConfirmed\n    });\n  }\n  \n  // 3. 月次サマリーデータ取得（計算）\n  const actualWorkDays = attendanceRows.filter(row =&gt; \n    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME\n  ).length;\n  \n  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算\n  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）\n  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算\n  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算\n  \n  // 所定労働時間（1日7.5時間 × 所定出勤日数）\n  const scheduledWorkHours = scheduledWorkDays * 7.5;\n  \n  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）\n  let totalWorkMinutes = 0;\n  for (const row of attendanceRows) {\n    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME)\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            },
            {
              "startPosition": {
                "line": 47,
                "column": 3
              },
              "endPosition": {
                "line": 48,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "text": "for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 47
          },
          {
            "lineNumber": 106
          },
          {
            "text": "      }",
            "lineNumber": 107
          },
          {
            "text": "    }",
            "lineNumber": 108
          },
          {
            "text": "    ",
            "lineNumber": 109
          },
          {
            "text": "    let attendanceId = null;",
            "lineNumber": 110
          },
          {
            "text": "    let clockInTime = null;",
            "lineNumber": 111
          },
          {
            "text": "    let clockOutTime = null;",
            "lineNumber": 112
          },
          {
            "text": "    let holidayWorkHours = 0;",
            "lineNumber": 113
          },
          {
            "text": "    let nightWorkHours = 0;",
            "lineNumber": 114
          },
          {
            "text": "    let workLocationCode = null;",
            "lineNumber": 115
          },
          {
            "text": "    let remarkText = null;",
            "lineNumber": 116
          },
          {
            "text": "    let isDailyConfirmed = false;",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "    if (attendance) {",
            "lineNumber": 119
          },
          {
            "text": "      attendanceId = attendance.ATTENDANCE_ID;",
            "lineNumber": 120
          },
          {
            "text": "      clockInTime = attendance.CLOCK_IN_TIME;",
            "lineNumber": 121
          },
          {
            "text": "      clockOutTime = attendance.CLOCK_OUT_TIME;",
            "lineNumber": 122
          },
          {
            "text": "      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;",
            "lineNumber": 123
          },
          {
            "text": "      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;",
            "lineNumber": 124
          },
          {
            "text": "      workLocationCode = attendance.WORK_LOCATION_CODE;",
            "lineNumber": 125
          },
          {
            "text": "      remarkText = attendance.REMARK_TEXT;",
            "lineNumber": 126
          },
          {
            "text": "      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;",
            "lineNumber": 127
          },
          {
            "text": "    }",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    dailyData.push({",
            "lineNumber": 130
          },
          {
            "text": "      attendanceId: attendanceId,",
            "lineNumber": 131
          },
          {
            "text": "      employeeId: employeeId,",
            "lineNumber": 132
          },
          {
            "text": "      workDate: workDate,",
            "lineNumber": 133
          },
          {
            "text": "      clockInTime: clockInTime,",
            "lineNumber": 134
          },
          {
            "text": "      clockOutTime: clockOutTime,",
            "lineNumber": 135
          },
          {
            "text": "      actualWorkHours: actualWorkHours,",
            "lineNumber": 136
          },
          {
            "text": "      breakTimeTotal: breakTimeTotal,",
            "lineNumber": 137
          },
          {
            "text": "      overtimeHours: overtimeHours,",
            "lineNumber": 138
          },
          {
            "text": "      holidayWorkHours: holidayWorkHours,",
            "lineNumber": 139
          },
          {
            "text": "      nightWorkHours: nightWorkHours,",
            "lineNumber": 140
          },
          {
            "text": "      workLocationCode: workLocationCode,",
            "lineNumber": 141
          },
          {
            "text": "      remarkText: remarkText,",
            "lineNumber": 142
          },
          {
            "text": "      isDailyConfirmed: isDailyConfirmed",
            "lineNumber": 143
          },
          {
            "text": "    });",
            "lineNumber": 144
          },
          {
            "text": "  }",
            "lineNumber": 145
          },
          {
            "text": "  ",
            "lineNumber": 146
          },
          {
            "text": "  // 3. 月次サマリーデータ取得（計算）",
            "lineNumber": 147
          },
          {
            "text": "  const actualWorkDays = attendanceRows.filter(row =&gt; ",
            "lineNumber": 148
          },
          {
            "text": "    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME",
            "lineNumber": 149
          },
          {
            "text": "  ).length;",
            "lineNumber": 150
          },
          {
            "text": "  ",
            "lineNumber": 151
          },
          {
            "text": "  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算",
            "lineNumber": 152
          },
          {
            "text": "  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）",
            "lineNumber": 153
          },
          {
            "text": "  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算",
            "lineNumber": 154
          },
          {
            "text": "  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算",
            "lineNumber": 155
          },
          {
            "text": "  ",
            "lineNumber": 156
          },
          {
            "text": "  // 所定労働時間（1日7.5時間 × 所定出勤日数）",
            "lineNumber": 157
          },
          {
            "text": "  const scheduledWorkHours = scheduledWorkDays * 7.5;",
            "lineNumber": 158
          },
          {
            "text": "  ",
            "lineNumber": 159
          },
          {
            "text": "  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）",
            "lineNumber": 160
          },
          {
            "text": "  let totalWorkMinutes = 0;",
            "lineNumber": 161
          },
          {
            "text": "  for (const row of attendanceRows) {",
            "lineNumber": 162
          },
          {
            "text": "    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME)",
            "lineNumber": 163
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.4766503572463989
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 357,
            "column": 2
          }
        },
        "contents": "const getMonthlySummary = async \n\n\n  if (month === 12) {\n    nextMonth = { year: year + 1, month: 1 };\n  }\n  const plannedGrantDays = 0; // TODO: 計画付与予定日を取得\n  \n  const vacationInfo = {\n    paidLeaveDays,\n    paidLeaveTypeName,\n    substituteHolidayDays,\n    substituteHolidayTypeName,\n    unpaidLeaveDays,\n    unpaidLeaveTypeName,\n    paidLeaveBalance,\n    plannedGrantDays\n  };\n  \n  // 月次承認状態（簡易的にNOT_SUBMITTEDとする）\n  const monthlyApprovalStatus = 'NOT_SUBMITTED';\n  \n  return {\n    employee: {\n      employeeId: employee.EMPLOYEE_ID,\n      employeeName: employee.EMPLOYEE_NAME,\n      department: employee.DEPARTMENT,\n      attendanceSystem: 'フレックスタイム制(一般)'\n    },\n    yearMonth: yearMonth,\n    dailyData,\n    monthlySummary,\n    vacationInfo,\n    monthlyApprovalStatus\n  };\n};\n\nmodule.exports = {\n  getMonthlySummary\n};",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "  if (month === 12) {",
            "lineNumber": 322
          },
          {
            "text": "    nextMonth = { year: year + 1, month: 1 };",
            "lineNumber": 323
          },
          {
            "text": "  }",
            "lineNumber": 324
          },
          {
            "text": "  const plannedGrantDays = 0; // TODO: 計画付与予定日を取得",
            "lineNumber": 325
          },
          {
            "text": "  ",
            "lineNumber": 326
          },
          {
            "text": "  const vacationInfo = {",
            "lineNumber": 327
          },
          {
            "text": "    paidLeaveDays,",
            "lineNumber": 328
          },
          {
            "text": "    paidLeaveTypeName,",
            "lineNumber": 329
          },
          {
            "text": "    substituteHolidayDays,",
            "lineNumber": 330
          },
          {
            "text": "    substituteHolidayTypeName,",
            "lineNumber": 331
          },
          {
            "text": "    unpaidLeaveDays,",
            "lineNumber": 332
          },
          {
            "text": "    unpaidLeaveTypeName,",
            "lineNumber": 333
          },
          {
            "text": "    paidLeaveBalance,",
            "lineNumber": 334
          },
          {
            "text": "    plannedGrantDays",
            "lineNumber": 335
          },
          {
            "text": "  };",
            "lineNumber": 336
          },
          {
            "text": "  ",
            "lineNumber": 337
          },
          {
            "text": "  // 月次承認状態（簡易的にNOT_SUBMITTEDとする）",
            "lineNumber": 338
          },
          {
            "text": "  const monthlyApprovalStatus = 'NOT_SUBMITTED';",
            "lineNumber": 339
          },
          {
            "text": "  ",
            "lineNumber": 340
          },
          {
            "text": "  return {",
            "lineNumber": 341
          },
          {
            "text": "    employee: {",
            "lineNumber": 342
          },
          {
            "text": "      employeeId: employee.EMPLOYEE_ID,",
            "lineNumber": 343
          },
          {
            "text": "      employeeName: employee.EMPLOYEE_NAME,",
            "lineNumber": 344
          },
          {
            "text": "      department: employee.DEPARTMENT,",
            "lineNumber": 345
          },
          {
            "text": "      attendanceSystem: 'フレックスタイム制(一般)'",
            "lineNumber": 346
          },
          {
            "text": "    },",
            "lineNumber": 347
          },
          {
            "text": "    yearMonth: yearMonth,",
            "lineNumber": 348
          },
          {
            "text": "    dailyData,",
            "lineNumber": 349
          },
          {
            "text": "    monthlySummary,",
            "lineNumber": 350
          },
          {
            "text": "    vacationInfo,",
            "lineNumber": 351
          },
          {
            "text": "    monthlyApprovalStatus",
            "lineNumber": 352
          },
          {
            "text": "  };",
            "lineNumber": 353
          },
          {
            "text": "};",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "module.exports = {",
            "lineNumber": 356
          },
          {
            "text": "  getMonthlySummary",
            "lineNumber": 357
          },
          {
            "text": "};",
            "lineNumber": 358
          }
        ]
      },
      "score": 0.4213341474533081
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {
            "line": 331,
            "column": 2
          },
          "endPosition": {
            "line": 483,
            "column": 1
          }
        },
        "contents": "/**\n * 月間勤務表を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {number} year 年\n * @param {number} month 月\n * @returns {Promise&lt;Object&gt;} 月間勤務表データ\n */\nconst getMonthlyAttendance = async (employeeId, year, month) =&gt; {\n  const { startDate, endDate } = getMonthRange(year, month);\n  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);\n\n  // 各勤怠記録に対して休憩時間、公用外出、工数実績を取得\n  const dailyData = [];\n  for (const attendance of attendanceRows) {\n    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n    const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);\n    const workHours = await workHoursModel.getWorkHours(employeeId, normalizeDate(attendance.WORK_DATE));\n    \n    dailyData.push({\n      ...attendance,\n      WORK_DATE: normalizeDate(attendance.WORK_DATE),\n      breakTimes,\n      officialOutings,\n      workHours\n    });\n  }\n  \n  // 月次サマリーを計算\n  const todayStr = getTodayJST();\n  const isCurrentMonth = parseInt(year) === new Date().getFullYear() &amp;&amp; parseInt(month) === new Date().getMonth() + 1;\n  let cutoffDate = endDate;\n\n  if (isCurrentMonth) {\n    cutoffDate = todayStr;\n  }\n\n  // 当日退勤していない場合は前日までの過不足時間を計算\n  if (isCurrentMonth) {\n    const todayRecord = attendanceRows.find(row =&gt; {\n      const workDateStr = normalizeDate(row.WORK_DATE);\n      return workDateStr === todayStr;\n    });\n    \n    if (todayRecord &amp;&amp; todayRecord.CLOCK_IN_TIME &amp;&amp; !todayRecord.CLOCK_OUT_TIME) {\n      const yesterday = new Date(todayStr);\n      yesterday.setDate(yesterday.getDate() - 1);\n      cutoffDate = yesterday.toISOString().split('T')[0];\n    }\n  }\n  \n  // 所定出勤日数を計算\n  const scheduledWorkDays = getScheduledWorkDays(year, month);\n  const scheduledWorkDaysUntilCutoff = getScheduledWorkDays(year, month, cutoffDate);\n\n  // 実出勤日数\n  const actualWorkDays = attendanceRows.filter\n;\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 334
          },
          {
            "text": " * 月間勤務表を取得する。",
            "lineNumber": 335
          },
          {
            "text": " *",
            "lineNumber": 336
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 337
          },
          {
            "text": " * @param {number} year 年",
            "lineNumber": 338
          },
          {
            "text": " * @param {number} month 月",
            "lineNumber": 339
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月間勤務表データ",
            "lineNumber": 340
          },
          {
            "text": " */",
            "lineNumber": 341
          },
          {
            "text": "const getMonthlyAttendance = async (employeeId, year, month) =&gt; {",
            "lineNumber": 342
          },
          {
            "text": "  const { startDate, endDate } = getMonthRange(year, month);",
            "lineNumber": 343
          },
          {
            "text": "  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);",
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "  // 各勤怠記録に対して休憩時間、公用外出、工数実績を取得",
            "lineNumber": 346
          },
          {
            "text": "  const dailyData = [];",
            "lineNumber": 347
          },
          {
            "text": "  for (const attendance of attendanceRows) {",
            "lineNumber": 348
          },
          {
            "text": "    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 349
          },
          {
            "text": "    const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);",
            "lineNumber": 350
          },
          {
            "text": "    const workHours = await workHoursModel.getWorkHours(employeeId, normalizeDate(attendance.WORK_DATE));",
            "lineNumber": 351
          },
          {
            "text": "    ",
            "lineNumber": 352
          },
          {
            "text": "    dailyData.push({",
            "lineNumber": 353
          },
          {
            "text": "      ...attendance,",
            "lineNumber": 354
          },
          {
            "text": "      WORK_DATE: normalizeDate(attendance.WORK_DATE),",
            "lineNumber": 355
          },
          {
            "text": "      breakTimes,",
            "lineNumber": 356
          },
          {
            "text": "      officialOutings,",
            "lineNumber": 357
          },
          {
            "text": "      workHours",
            "lineNumber": 358
          },
          {
            "text": "    });",
            "lineNumber": 359
          },
          {
            "text": "  }",
            "lineNumber": 360
          },
          {
            "text": "  ",
            "lineNumber": 361
          },
          {
            "text": "  // 月次サマリーを計算",
            "lineNumber": 362
          },
          {
            "text": "  const todayStr = getTodayJST();",
            "lineNumber": 363
          },
          {
            "text": "  const isCurrentMonth = parseInt(year) === new Date().getFullYear() &amp;&amp; parseInt(month) === new Date().getMonth() + 1;",
            "lineNumber": 364
          },
          {
            "text": "  let cutoffDate = endDate;",
            "lineNumber": 365
          },
          {
            "lineNumber": 366
          },
          {
            "text": "  if (isCurrentMonth) {",
            "lineNumber": 367
          },
          {
            "text": "    cutoffDate = todayStr;",
            "lineNumber": 368
          },
          {
            "text": "  }",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "  // 当日退勤していない場合は前日までの過不足時間を計算",
            "lineNumber": 371
          },
          {
            "text": "  if (isCurrentMonth) {",
            "lineNumber": 372
          },
          {
            "text": "    const todayRecord = attendanceRows.find(row =&gt; {",
            "lineNumber": 373
          },
          {
            "text": "      const workDateStr = normalizeDate(row.WORK_DATE);",
            "lineNumber": 374
          },
          {
            "text": "      return workDateStr === todayStr;",
            "lineNumber": 375
          },
          {
            "text": "    });",
            "lineNumber": 376
          },
          {
            "text": "    ",
            "lineNumber": 377
          },
          {
            "text": "    if (todayRecord &amp;&amp; todayRecord.CLOCK_IN_TIME &amp;&amp; !todayRecord.CLOCK_OUT_TIME) {",
            "lineNumber": 378
          },
          {
            "text": "      const yesterday = new Date(todayStr);",
            "lineNumber": 379
          },
          {
            "text": "      yesterday.setDate(yesterday.getDate() - 1);",
            "lineNumber": 380
          },
          {
            "text": "      cutoffDate = yesterday.toISOString().split('T')[0];",
            "lineNumber": 381
          },
          {
            "text": "    }",
            "lineNumber": 382
          },
          {
            "text": "  }",
            "lineNumber": 383
          },
          {
            "text": "  ",
            "lineNumber": 384
          },
          {
            "text": "  // 所定出勤日数を計算",
            "lineNumber": 385
          },
          {
            "text": "  const scheduledWorkDays = getScheduledWorkDays(year, month);",
            "lineNumber": 386
          },
          {
            "text": "  const scheduledWorkDaysUntilCutoff = getScheduledWorkDays(year, month, cutoffDate);",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "  // 実出勤日数",
            "lineNumber": 389
          },
          {
            "text": "  const actualWorkDays = attendanceRows.filter",
            "lineNumber": 390
          },
          {
            "text": ";",
            "lineNumber": 392
          },
          {
            "text": ";",
            "lineNumber": 484
          }
        ]
      },
      "score": 0.4144020974636078
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    legalHolidayWorkDays,\n    scheduledHolidayWorkDays,\n    scheduledWorkHours,\n    totalWorkHours,\n    totalWorkHoursExcludingLegalHoliday,\n    overUnderHours,\n    currentMonthOvertime,\n    safetyOvertime,\n    legalWorkHours,\n    actualWorkHoursExcludingLegalHoliday,\n    withinLegalOvertime,\n    overLegalOvertime,\n    legalHolidayWorkHours,\n    nightWorkHours,\n    overtimeOver45Hours,\n    overtimeOver60Hours,\n    lateCount,\n    lateHours,\n    earlyLeaveCount,\n    earlyLeaveHours,\n    privateOutingCount,\n    privateOutingHours,\n    totalBreakHours\n  };\n  \n  // 4. 休暇情報取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n  \n  // 有給取得日数\n  const paidLeaveDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n  \n  // 有給取得日数内訳\n  let paidLeaveTypeName = '';\n\n  if (paidLeaveDays &gt; 0) {\n    paidLeaveTypeName = '年次有給休暇';\n  }\n\n  // 代休取得日数\n  const substituteHolidayDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n\n  // 代休取得日数内訳\n  let substituteHolidayTypeName = '';\n\n  if (substituteHolidayDays &gt; 0) {\n    substituteHolidayTypeName = '代休';\n  }\n  \n  // 無給休暇日数（簡易的に0とする）\n  const unpaidLeaveDays = 0;\n  const unpaidLeaveTypeName = '';\n  \n  // 有給残日数（月末日時点）\n  const endOfMonth = new Date(year, month, 0);\n  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];\n  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');\n  \n  // 計画付与予定日（次月以降）\n  let nextMonth = { year, month: month + 1 };\n\n  if (month === 12) {\n    nextMonth = { year: year + 1, month: 1 };\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 253
          },
          {
            "text": "  ",
            "lineNumber": 254
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 255
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 256
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 257
          },
          {
            "text": "    legalHolidayWorkDays,",
            "lineNumber": 258
          },
          {
            "text": "    scheduledHolidayWorkDays,",
            "lineNumber": 259
          },
          {
            "text": "    scheduledWorkHours,",
            "lineNumber": 260
          },
          {
            "text": "    totalWorkHours,",
            "lineNumber": 261
          },
          {
            "text": "    totalWorkHoursExcludingLegalHoliday,",
            "lineNumber": 262
          },
          {
            "text": "    overUnderHours,",
            "lineNumber": 263
          },
          {
            "text": "    currentMonthOvertime,",
            "lineNumber": 264
          },
          {
            "text": "    safetyOvertime,",
            "lineNumber": 265
          },
          {
            "text": "    legalWorkHours,",
            "lineNumber": 266
          },
          {
            "text": "    actualWorkHoursExcludingLegalHoliday,",
            "lineNumber": 267
          },
          {
            "text": "    withinLegalOvertime,",
            "lineNumber": 268
          },
          {
            "text": "    overLegalOvertime,",
            "lineNumber": 269
          },
          {
            "text": "    legalHolidayWorkHours,",
            "lineNumber": 270
          },
          {
            "text": "    nightWorkHours,",
            "lineNumber": 271
          },
          {
            "text": "    overtimeOver45Hours,",
            "lineNumber": 272
          },
          {
            "text": "    overtimeOver60Hours,",
            "lineNumber": 273
          },
          {
            "text": "    lateCount,",
            "lineNumber": 274
          },
          {
            "text": "    lateHours,",
            "lineNumber": 275
          },
          {
            "text": "    earlyLeaveCount,",
            "lineNumber": 276
          },
          {
            "text": "    earlyLeaveHours,",
            "lineNumber": 277
          },
          {
            "text": "    privateOutingCount,",
            "lineNumber": 278
          },
          {
            "text": "    privateOutingHours,",
            "lineNumber": 279
          },
          {
            "text": "    totalBreakHours",
            "lineNumber": 280
          },
          {
            "text": "  };",
            "lineNumber": 281
          },
          {
            "text": "  ",
            "lineNumber": 282
          },
          {
            "text": "  // 4. 休暇情報取得",
            "lineNumber": 283
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 284
          },
          {
            "text": "  ",
            "lineNumber": 285
          },
          {
            "text": "  // 有給取得日数",
            "lineNumber": 286
          },
          {
            "text": "  const paidLeaveDays = vacations",
            "lineNumber": 287
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 288
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 289
          },
          {
            "text": "  ",
            "lineNumber": 290
          },
          {
            "text": "  // 有給取得日数内訳",
            "lineNumber": 291
          },
          {
            "text": "  let paidLeaveTypeName = '';",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "  if (paidLeaveDays &gt; 0) {",
            "lineNumber": 294
          },
          {
            "text": "    paidLeaveTypeName = '年次有給休暇';",
            "lineNumber": 295
          },
          {
            "text": "  }",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "  // 代休取得日数",
            "lineNumber": 298
          },
          {
            "text": "  const substituteHolidayDays = vacations",
            "lineNumber": 299
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 300
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 301
          },
          {
            "lineNumber": 302
          },
          {
            "text": "  // 代休取得日数内訳",
            "lineNumber": 303
          },
          {
            "text": "  let substituteHolidayTypeName = '';",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "  if (substituteHolidayDays &gt; 0) {",
            "lineNumber": 306
          },
          {
            "text": "    substituteHolidayTypeName = '代休';",
            "lineNumber": 307
          },
          {
            "text": "  }",
            "lineNumber": 308
          },
          {
            "text": "  ",
            "lineNumber": 309
          },
          {
            "text": "  // 無給休暇日数（簡易的に0とする）",
            "lineNumber": 310
          },
          {
            "text": "  const unpaidLeaveDays = 0;",
            "lineNumber": 311
          },
          {
            "text": "  const unpaidLeaveTypeName = '';",
            "lineNumber": 312
          },
          {
            "text": "  ",
            "lineNumber": 313
          },
          {
            "text": "  // 有給残日数（月末日時点）",
            "lineNumber": 314
          },
          {
            "text": "  const endOfMonth = new Date(year, month, 0);",
            "lineNumber": 315
          },
          {
            "text": "  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];",
            "lineNumber": 316
          },
          {
            "text": "  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');",
            "lineNumber": 317
          },
          {
            "text": "  ",
            "lineNumber": 318
          },
          {
            "text": "  // 計画付与予定日（次月以降）",
            "lineNumber": 319
          },
          {
            "text": "  let nextMonth = { year, month: month + 1 };",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "  if (month === 12) {",
            "lineNumber": 322
          },
          {
            "text": "    nextMonth = { year: year + 1, month: 1 };",
            "lineNumber": 323
          },
          {
            "text": "  }",
            "lineNumber": 324
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.41307079792022705
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 510
          },
          "endPosition": {
            "line": 569
          }
        },
        "contents": "  },\n  methods: {\n    async loadData(employeeId, yearMonth) {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getMonthlySummaryDetail(employeeId, yearMonth)\n        \n        if (response.success) {\n          this.employee = response.employee\n          this.dailyData = response.dailyData || []\n          this.monthlySummary = response.monthlySummary || {}\n          this.vacationInfo = response.vacationInfo || {}\n          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'\n        } else {\n          this.error = response.message || 'データの取得に失敗しました。'\n        }\n      } catch (err) {\n        console.error('月次サマリー情報の取得エラー:', err)\n        this.error = err.message || 'データの取得に失敗しました。'\n      } finally {\n        this.loading = false\n      }\n    },\n    formatDate(dateStr, index) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      // 最初の行だけ月を含める\n      if (index === 0) {\n        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;\n      }\n      return &#96;${date.getDate()}&#96;\n    },\n    getDatePaddingLeft(index, dateStr) {\n      // 最初の行の日付の1桁目の位置に合わせる\n      if (index === 0) return 0\n      \n      if (!dateStr) return 18\n      const date = new Date(dateStr)\n      const day = date.getDate()\n      \n      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）\n      // 約18px程度の幅があると仮定\n      let baseOffset = 18\n      \n      // 2~9は4px左にずらす\n      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {\n        baseOffset -= 4\n      }\n      // 10~31は9px左にずらす\n      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {\n        baseOffset -= 9\n      }\n      \n      return baseOffset\n    },\n    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  },",
            "lineNumber": 511
          },
          {
            "text": "  methods: {",
            "lineNumber": 512
          },
          {
            "text": "    async loadData(employeeId, yearMonth) {",
            "lineNumber": 513
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 514
          },
          {
            "text": "      this.error = null",
            "lineNumber": 515
          },
          {
            "text": "      ",
            "lineNumber": 516
          },
          {
            "text": "      try {",
            "lineNumber": 517
          },
          {
            "text": "        const response = await getMonthlySummaryDetail(employeeId, yearMonth)",
            "lineNumber": 518
          },
          {
            "text": "        ",
            "lineNumber": 519
          },
          {
            "text": "        if (response.success) {",
            "lineNumber": 520
          },
          {
            "text": "          this.employee = response.employee",
            "lineNumber": 521
          },
          {
            "text": "          this.dailyData = response.dailyData || []",
            "lineNumber": 522
          },
          {
            "text": "          this.monthlySummary = response.monthlySummary || {}",
            "lineNumber": 523
          },
          {
            "text": "          this.vacationInfo = response.vacationInfo || {}",
            "lineNumber": 524
          },
          {
            "text": "          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'",
            "lineNumber": 525
          },
          {
            "text": "        } else {",
            "lineNumber": 526
          },
          {
            "text": "          this.error = response.message || 'データの取得に失敗しました。'",
            "lineNumber": 527
          },
          {
            "text": "        }",
            "lineNumber": 528
          },
          {
            "text": "      } catch (err) {",
            "lineNumber": 529
          },
          {
            "text": "        console.error('月次サマリー情報の取得エラー:', err)",
            "lineNumber": 530
          },
          {
            "text": "        this.error = err.message || 'データの取得に失敗しました。'",
            "lineNumber": 531
          },
          {
            "text": "      } finally {",
            "lineNumber": 532
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 533
          },
          {
            "text": "      }",
            "lineNumber": 534
          },
          {
            "text": "    },",
            "lineNumber": 535
          },
          {
            "text": "    formatDate(dateStr, index) {",
            "lineNumber": 536
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 537
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 538
          },
          {
            "text": "      // 最初の行だけ月を含める",
            "lineNumber": 539
          },
          {
            "text": "      if (index === 0) {",
            "lineNumber": 540
          },
          {
            "text": "        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;",
            "lineNumber": 541
          },
          {
            "text": "      }",
            "lineNumber": 542
          },
          {
            "text": "      return &#96;${date.getDate()}&#96;",
            "lineNumber": 543
          },
          {
            "text": "    },",
            "lineNumber": 544
          },
          {
            "text": "    getDatePaddingLeft(index, dateStr) {",
            "lineNumber": 545
          },
          {
            "text": "      // 最初の行の日付の1桁目の位置に合わせる",
            "lineNumber": 546
          },
          {
            "text": "      if (index === 0) return 0",
            "lineNumber": 547
          },
          {
            "text": "      ",
            "lineNumber": 548
          },
          {
            "text": "      if (!dateStr) return 18",
            "lineNumber": 549
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 550
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 551
          },
          {
            "text": "      ",
            "lineNumber": 552
          },
          {
            "text": "      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）",
            "lineNumber": 553
          },
          {
            "text": "      // 約18px程度の幅があると仮定",
            "lineNumber": 554
          },
          {
            "text": "      let baseOffset = 18",
            "lineNumber": 555
          },
          {
            "text": "      ",
            "lineNumber": 556
          },
          {
            "text": "      // 2~9は4px左にずらす",
            "lineNumber": 557
          },
          {
            "text": "      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {",
            "lineNumber": 558
          },
          {
            "text": "        baseOffset -= 4",
            "lineNumber": 559
          },
          {
            "text": "      }",
            "lineNumber": 560
          },
          {
            "text": "      // 10~31は9px左にずらす",
            "lineNumber": 561
          },
          {
            "text": "      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {",
            "lineNumber": 562
          },
          {
            "text": "        baseOffset -= 9",
            "lineNumber": 563
          },
          {
            "text": "      }",
            "lineNumber": 564
          },
          {
            "text": "      ",
            "lineNumber": 565
          },
          {
            "text": "      return baseOffset",
            "lineNumber": 566
          },
          {
            "text": "    },",
            "lineNumber": 567
          },
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.41000986099243164
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {
            "line": 341
          },
          "endPosition": {
            "line": 491,
            "column": 3
          }
        },
        "contents": "const getMonthlyAttendance = async \n\n  \n  // 実労働時間が所定労働時間を超えている場合のみ残業を計算\n  let withinLegalOvertime = 0;\n  let overLegalOvertime = 0;\n\n  if (totalWorkHours &gt; scheduledWorkHoursUntilCutoff) {\n    // 実労働時間が所定労働時間を超えている\n    const overtimeHours = totalWorkHours - scheduledWorkHoursUntilCutoff;\n\n    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分\n    // 上限: (所定出勤日数 * 8:00) - 所定労働時間\n    const maxWithinLegalOvertime = legalWorkHoursUntilCutoff - scheduledWorkHoursUntilCutoff;\n    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);\n\n    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分\n    if (totalWorkHours &gt; legalWorkHoursUntilCutoff) {\n      overLegalOvertime = totalWorkHours - legalWorkHoursUntilCutoff;\n    }\n  }\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    scheduledWorkHours: formatHours(scheduledWorkHours),\n    totalWorkHours: formatHours(totalWorkHours),\n    overUnderTime: formatOverUnder(overUnderTime),\n    legalHolidayWork: formatHours(legalHolidayWork),\n    withinLegalOvertime: formatHours(withinLegalOvertime),\n    overLegalOvertime: formatHours(overLegalOvertime),\n    cutoffDate: cutoffDate.split('-').slice(1).join('/')\n  };\n  \n  // 休暇申請データを取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n\n  return {\n    dailyData,\n    monthlySummary,\n    vacations\n  };\n};\n\n/**\n * 日次確定申請を行う。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;void&gt;}\n */",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 342,
                "column": 1
              },
              "endPosition": {
                "line": 342,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 342,
                "column": 7
              },
              "endPosition": {
                "line": 342,
                "column": 36
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlyAttendance = async ",
            "lineNumber": 342
          },
          {
            "lineNumber": 443
          },
          {
            "text": "  ",
            "lineNumber": 444
          },
          {
            "text": "  // 実労働時間が所定労働時間を超えている場合のみ残業を計算",
            "lineNumber": 445
          },
          {
            "text": "  let withinLegalOvertime = 0;",
            "lineNumber": 446
          },
          {
            "text": "  let overLegalOvertime = 0;",
            "lineNumber": 447
          },
          {
            "lineNumber": 448
          },
          {
            "text": "  if (totalWorkHours &gt; scheduledWorkHoursUntilCutoff) {",
            "lineNumber": 449
          },
          {
            "text": "    // 実労働時間が所定労働時間を超えている",
            "lineNumber": 450
          },
          {
            "text": "    const overtimeHours = totalWorkHours - scheduledWorkHoursUntilCutoff;",
            "lineNumber": 451
          },
          {
            "lineNumber": 452
          },
          {
            "text": "    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分",
            "lineNumber": 453
          },
          {
            "text": "    // 上限: (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 454
          },
          {
            "text": "    const maxWithinLegalOvertime = legalWorkHoursUntilCutoff - scheduledWorkHoursUntilCutoff;",
            "lineNumber": 455
          },
          {
            "text": "    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);",
            "lineNumber": 456
          },
          {
            "lineNumber": 457
          },
          {
            "text": "    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分",
            "lineNumber": 458
          },
          {
            "text": "    if (totalWorkHours &gt; legalWorkHoursUntilCutoff) {",
            "lineNumber": 459
          },
          {
            "text": "      overLegalOvertime = totalWorkHours - legalWorkHoursUntilCutoff;",
            "lineNumber": 460
          },
          {
            "text": "    }",
            "lineNumber": 461
          },
          {
            "text": "  }",
            "lineNumber": 462
          },
          {
            "text": "  ",
            "lineNumber": 463
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 464
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 465
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 466
          },
          {
            "text": "    scheduledWorkHours: formatHours(scheduledWorkHours),",
            "lineNumber": 467
          },
          {
            "text": "    totalWorkHours: formatHours(totalWorkHours),",
            "lineNumber": 468
          },
          {
            "text": "    overUnderTime: formatOverUnder(overUnderTime),",
            "lineNumber": 469
          },
          {
            "text": "    legalHolidayWork: formatHours(legalHolidayWork),",
            "lineNumber": 470
          },
          {
            "text": "    withinLegalOvertime: formatHours(withinLegalOvertime),",
            "lineNumber": 471
          },
          {
            "text": "    overLegalOvertime: formatHours(overLegalOvertime),",
            "lineNumber": 472
          },
          {
            "text": "    cutoffDate: cutoffDate.split('-').slice(1).join('/')",
            "lineNumber": 473
          },
          {
            "text": "  };",
            "lineNumber": 474
          },
          {
            "text": "  ",
            "lineNumber": 475
          },
          {
            "text": "  // 休暇申請データを取得",
            "lineNumber": 476
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "  return {",
            "lineNumber": 479
          },
          {
            "text": "    dailyData,",
            "lineNumber": 480
          },
          {
            "text": "    monthlySummary,",
            "lineNumber": 481
          },
          {
            "text": "    vacations",
            "lineNumber": 482
          },
          {
            "text": "  };",
            "lineNumber": 483
          },
          {
            "text": "};",
            "lineNumber": 484
          },
          {
            "lineNumber": 485
          },
          {
            "text": "/**",
            "lineNumber": 486
          },
          {
            "text": " * 日次確定申請を行う。",
            "lineNumber": 487
          },
          {
            "text": " *",
            "lineNumber": 488
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 489
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 490
          },
          {
            "text": " * @returns {Promise&lt;void&gt;}",
            "lineNumber": 491
          },
          {
            "text": " */",
            "lineNumber": 492
          }
        ]
      },
      "score": 0.40998420119285583
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 89
          },
          "endPosition": {
            "line": 110
          }
        },
        "contents": "      &lt;/svg&gt;\n      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;\n        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;\n          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"index % 2 === 0 ? '#F5F5F5' : 'rgb(255, 255, 255)'\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;\n        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px' }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;\n        &lt;!-- 法定休日（日曜日）: ◎ --&gt;\n        &lt;svg v-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;!-- 所定休日（土曜日・祝日）: ○ --&gt;\n        &lt;svg v-else-if=\"isScheduledHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;\n          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;\n        &lt;/svg&gt;\n        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;\n        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;\n        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 90
          },
          {
            "text": "      &lt;div v-for=\"(day, index) in dailyData\" :key=\"index\" class=\"table-row\" :style=\"{ top: getRowTop(index) + 'px' }\"&gt;",
            "lineNumber": 91
          },
          {
            "text": "        &lt;svg class=\"row-background\" :viewBox=\"&#96;0 0 1873 ${getRowHeight(index)}&#96;\" preserveAspectRatio=\"none\" :style=\"{ height: getRowHeight(index) + 'px' }\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "          &lt;rect :width=\"1873\" :height=\"getRowHeight(index)\" :fill=\"index % 2 === 0 ? '#F5F5F5' : 'rgb(255, 255, 255)'\" stroke=\"#DDDDDD\" stroke-width=\"0.5\" /&gt;",
            "lineNumber": 93
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 94
          },
          {
            "text": "        &lt;span class=\"row-date\" :style=\"{ top: getRowContentTop(index) + 'px', left: index === 0 ? '64px' : (64 + getDatePaddingLeft(index, day.workDate)) + 'px' }\"&gt;{{ formatDate(day.workDate, index) }}&lt;/span&gt;",
            "lineNumber": 95
          },
          {
            "text": "        &lt;span class=\"row-day\" :style=\"{ top: (getRowContentTop(index) - 2) + 'px' }\"&gt;{{ getDayOfWeek(day.workDate) }}&lt;/span&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;!-- 法定休日（日曜日）: ◎ --&gt;",
            "lineNumber": 97
          },
          {
            "text": "        &lt;svg v-if=\"isLegalHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"4.5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 99
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"3\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 100
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 101
          },
          {
            "text": "        &lt;!-- 所定休日（土曜日・祝日）: ○ --&gt;",
            "lineNumber": 102
          },
          {
            "text": "        &lt;svg v-else-if=\"isScheduledHoliday(day.workDate)\" class=\"holiday-icon\" :style=\"{ top: getRowContentTop(index) + 'px' }\" viewBox=\"0 0 11 11\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "          &lt;circle cx=\"5.5\" cy=\"5.5\" r=\"5\" fill=\"none\" stroke=\"rgb(51, 51, 51)\" stroke-width=\"1\" /&gt;",
            "lineNumber": 104
          },
          {
            "text": "        &lt;/svg&gt;",
            "lineNumber": 105
          },
          {
            "text": "        &lt;span class=\"row-event\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ getEventText(day) }}&lt;/span&gt;",
            "lineNumber": 106
          },
          {
            "text": "        &lt;span v-if=\"day.clockInTime\" class=\"row-clock-in\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockInTime) }}&lt;/span&gt;",
            "lineNumber": 107
          },
          {
            "text": "        &lt;span v-if=\"day.clockOutTime\" class=\"row-clock-out\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatTime(day.clockOutTime) }}&lt;/span&gt;",
            "lineNumber": 108
          },
          {
            "text": "        &lt;span v-if=\"day.breakTimeTotal\" class=\"row-break\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.breakTimeTotal) }}&lt;/span&gt;",
            "lineNumber": 109
          },
          {
            "text": "        &lt;span v-if=\"day.actualWorkHours\" class=\"row-actual-work\" :style=\"{ top: getRowContentTop(index) + 'px' }\"&gt;{{ formatHours(day.actualWorkHours) }}&lt;/span&gt;",
            "lineNumber": 110
          }
        ]
      },
      "score": 0.4086467921733856
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 567
          },
          "endPosition": {
            "line": 628
          }
        },
        "contents": "    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      const days = ['日', '月', '火', '水', '木', '金', '土']\n      return days[date.getDay()]\n    },\n    isLegalHoliday(dateStr) {\n      // 法定休日（日曜日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      return day === 0 // 日曜日\n    },\n    isScheduledHoliday(dateStr) {\n      // 所定休日（土曜日・祝日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      // 土曜日を所定休日として判定\n      if (day === 6) return true\n      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）\n      return false\n    },\n    isHoliday(dateStr) {\n      // 休日全般を判定（後方互換性のため残す）\n      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)\n    },\n    getEventText(day) {\n      if (day.remarkText) {\n        return day.remarkText\n      }\n      if (day.isDailyConfirmed) {\n        if (day.workLocationCode === 'HOME') {\n          return '日次確定-在宅'\n        }\n\n        return '日次確定-出勤'\n      }\n      if (day.workLocationCode === 'HOME') {\n        return '在宅'\n      }\n      return ''\n    },\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {\n        const date = new Date(timeStr)\n        const hours = date.getHours() // 先頭0を削除\n        const minutes = String(date.getMinutes()).padStart(2, '0')\n        return &#96;${hours}:${minutes}&#96;\n      }\n      // 既にHH:MM形式の場合は、先頭0を削除\n      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {\n        const [hours, minutes] = timeStr.split(':')\n        const hourNum = parseInt(hours, 10)\n        return &#96;${hourNum}:${minutes}&#96;\n      }\n      return timeStr\n    },\n    formatHours(hours) {\n      if (hours === null || hours === undefined) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 570
          },
          {
            "text": "      const days = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 571
          },
          {
            "text": "      return days[date.getDay()]",
            "lineNumber": 572
          },
          {
            "text": "    },",
            "lineNumber": 573
          },
          {
            "text": "    isLegalHoliday(dateStr) {",
            "lineNumber": 574
          },
          {
            "text": "      // 法定休日（日曜日）を判定",
            "lineNumber": 575
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 576
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 578
          },
          {
            "text": "      return day === 0 // 日曜日",
            "lineNumber": 579
          },
          {
            "text": "    },",
            "lineNumber": 580
          },
          {
            "text": "    isScheduledHoliday(dateStr) {",
            "lineNumber": 581
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 582
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 583
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 584
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 585
          },
          {
            "text": "      // 土曜日を所定休日として判定",
            "lineNumber": 586
          },
          {
            "text": "      if (day === 6) return true",
            "lineNumber": 587
          },
          {
            "text": "      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）",
            "lineNumber": 588
          },
          {
            "text": "      return false",
            "lineNumber": 589
          },
          {
            "text": "    },",
            "lineNumber": 590
          },
          {
            "text": "    isHoliday(dateStr) {",
            "lineNumber": 591
          },
          {
            "text": "      // 休日全般を判定（後方互換性のため残す）",
            "lineNumber": 592
          },
          {
            "text": "      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)",
            "lineNumber": 593
          },
          {
            "text": "    },",
            "lineNumber": 594
          },
          {
            "text": "    getEventText(day) {",
            "lineNumber": 595
          },
          {
            "text": "      if (day.remarkText) {",
            "lineNumber": 596
          },
          {
            "text": "        return day.remarkText",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      if (day.isDailyConfirmed) {",
            "lineNumber": 599
          },
          {
            "text": "        if (day.workLocationCode === 'HOME') {",
            "lineNumber": 600
          },
          {
            "text": "          return '日次確定-在宅'",
            "lineNumber": 601
          },
          {
            "text": "        }",
            "lineNumber": 602
          },
          {
            "lineNumber": 603
          },
          {
            "text": "        return '日次確定-出勤'",
            "lineNumber": 604
          },
          {
            "text": "      }",
            "lineNumber": 605
          },
          {
            "text": "      if (day.workLocationCode === 'HOME') {",
            "lineNumber": 606
          },
          {
            "text": "        return '在宅'",
            "lineNumber": 607
          },
          {
            "text": "      }",
            "lineNumber": 608
          },
          {
            "text": "      return ''",
            "lineNumber": 609
          },
          {
            "text": "    },",
            "lineNumber": 610
          },
          {
            "text": "    formatTime(timeStr) {",
            "lineNumber": 611
          },
          {
            "text": "      if (!timeStr) return ''",
            "lineNumber": 612
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {",
            "lineNumber": 613
          },
          {
            "text": "        const date = new Date(timeStr)",
            "lineNumber": 614
          },
          {
            "text": "        const hours = date.getHours() // 先頭0を削除",
            "lineNumber": 615
          },
          {
            "text": "        const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 616
          },
          {
            "text": "        return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 617
          },
          {
            "text": "      }",
            "lineNumber": 618
          },
          {
            "text": "      // 既にHH:MM形式の場合は、先頭0を削除",
            "lineNumber": 619
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {",
            "lineNumber": 620
          },
          {
            "text": "        const [hours, minutes] = timeStr.split(':')",
            "lineNumber": 621
          },
          {
            "text": "        const hourNum = parseInt(hours, 10)",
            "lineNumber": 622
          },
          {
            "text": "        return &#96;${hourNum}:${minutes}&#96;",
            "lineNumber": 623
          },
          {
            "text": "      }",
            "lineNumber": 624
          },
          {
            "text": "      return timeStr",
            "lineNumber": 625
          },
          {
            "text": "    },",
            "lineNumber": 626
          },
          {
            "text": "    formatHours(hours) {",
            "lineNumber": 627
          },
          {
            "text": "      if (hours === null || hours === undefined) return ''",
            "lineNumber": 628
          }
        ]
      },
      "score": 0.3753494620323181
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1461
          },
          "endPosition": {
            "line": 1530
          }
        },
        "contents": "        const breakTimes = []\n        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {\n          breakTimes.push({\n            startTime: '12:00',\n            endTime: '13:00',\n            startHour: 12,\n            startMinute: 0,\n            endHour: 13,\n            endMinute: 0\n          })\n        }\n\n        sampleData.push({\n          date: dateStr,\n          dateNumber: dateNumber,\n          dateDayOfWeek: dateDayOfWeek,\n          dayOfWeek: dayNames[dayOfWeek],\n          dayOfWeekNum: dayOfWeek,\n          hasWarning: false,\n          approvalStatus: 'NOT_SUBMITTED',\n          clockIn: '',\n          clockOut: '',\n          clockInType: '',\n          clockOutType: '',\n          location: '',\n          workHours: '',\n          hasWorkHoursError: false,\n          canEdit: true,\n          isHoliday: holiday, // 祝日判定\n          hasVacation: false,\n          attendanceId: null,\n          actualWorkHours: 0,\n          breakTimes: breakTimes,\n          remarkText: ''\n        })\n      }\n      \n      this.attendanceData = sampleData\n    },\n    \n    // 行のクラスを取得\n    getRowClass(day) {\n      if (day.hasVacation) {\n        return 'vacation-row'\n      } else if (day.isHoliday) {\n        return 'saturday-row' // 祝日は土曜日と同じ背景色\n      } else if (day.dayOfWeekNum === 0) {\n        return 'sunday-row'\n      } else if (day.dayOfWeekNum === 6) {\n        return 'saturday-row'\n      }\n      return ''\n    },\n    \n    // 曜日の色クラスを取得\n    getDayOfWeekClass(day) {\n      if (day.isHoliday) {\n        return 'saturday-text' // 祝日は土曜日と同じ青色\n      } else if (day.dayOfWeekNum === 0) {\n        return 'sunday-text'\n      } else if (day.dayOfWeekNum === 6) {\n        return 'saturday-text'\n      }\n      return ''\n    },\n    \n    // 編集可能な承認状態かどうかを判定（テキストボックス表示の条件）\n    isEditableStatus(day) {\n      // 土日祝の場合はテキストボックスを表示しない",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1462
          },
          {
            "text": "        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {",
            "lineNumber": 1463
          },
          {
            "text": "          breakTimes.push({",
            "lineNumber": 1464
          },
          {
            "text": "            startTime: '12:00',",
            "lineNumber": 1465
          },
          {
            "text": "            endTime: '13:00',",
            "lineNumber": 1466
          },
          {
            "text": "            startHour: 12,",
            "lineNumber": 1467
          },
          {
            "text": "            startMinute: 0,",
            "lineNumber": 1468
          },
          {
            "text": "            endHour: 13,",
            "lineNumber": 1469
          },
          {
            "text": "            endMinute: 0",
            "lineNumber": 1470
          },
          {
            "text": "          })",
            "lineNumber": 1471
          },
          {
            "text": "        }",
            "lineNumber": 1472
          },
          {
            "lineNumber": 1473
          },
          {
            "text": "        sampleData.push({",
            "lineNumber": 1474
          },
          {
            "text": "          date: dateStr,",
            "lineNumber": 1475
          },
          {
            "text": "          dateNumber: dateNumber,",
            "lineNumber": 1476
          },
          {
            "text": "          dateDayOfWeek: dateDayOfWeek,",
            "lineNumber": 1477
          },
          {
            "text": "          dayOfWeek: dayNames[dayOfWeek],",
            "lineNumber": 1478
          },
          {
            "text": "          dayOfWeekNum: dayOfWeek,",
            "lineNumber": 1479
          },
          {
            "text": "          hasWarning: false,",
            "lineNumber": 1480
          },
          {
            "text": "          approvalStatus: 'NOT_SUBMITTED',",
            "lineNumber": 1481
          },
          {
            "text": "          clockIn: '',",
            "lineNumber": 1482
          },
          {
            "text": "          clockOut: '',",
            "lineNumber": 1483
          },
          {
            "text": "          clockInType: '',",
            "lineNumber": 1484
          },
          {
            "text": "          clockOutType: '',",
            "lineNumber": 1485
          },
          {
            "text": "          location: '',",
            "lineNumber": 1486
          },
          {
            "text": "          workHours: '',",
            "lineNumber": 1487
          },
          {
            "text": "          hasWorkHoursError: false,",
            "lineNumber": 1488
          },
          {
            "text": "          canEdit: true,",
            "lineNumber": 1489
          },
          {
            "text": "          isHoliday: holiday, // 祝日判定",
            "lineNumber": 1490
          },
          {
            "text": "          hasVacation: false,",
            "lineNumber": 1491
          },
          {
            "text": "          attendanceId: null,",
            "lineNumber": 1492
          },
          {
            "text": "          actualWorkHours: 0,",
            "lineNumber": 1493
          },
          {
            "text": "          breakTimes: breakTimes,",
            "lineNumber": 1494
          },
          {
            "text": "          remarkText: ''",
            "lineNumber": 1495
          },
          {
            "text": "        })",
            "lineNumber": 1496
          },
          {
            "text": "      }",
            "lineNumber": 1497
          },
          {
            "text": "      ",
            "lineNumber": 1498
          },
          {
            "text": "      this.attendanceData = sampleData",
            "lineNumber": 1499
          },
          {
            "text": "    },",
            "lineNumber": 1500
          },
          {
            "text": "    ",
            "lineNumber": 1501
          },
          {
            "text": "    // 行のクラスを取得",
            "lineNumber": 1502
          },
          {
            "text": "    getRowClass(day) {",
            "lineNumber": 1503
          },
          {
            "text": "      if (day.hasVacation) {",
            "lineNumber": 1504
          },
          {
            "text": "        return 'vacation-row'",
            "lineNumber": 1505
          },
          {
            "text": "      } else if (day.isHoliday) {",
            "lineNumber": 1506
          },
          {
            "text": "        return 'saturday-row' // 祝日は土曜日と同じ背景色",
            "lineNumber": 1507
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 0) {",
            "lineNumber": 1508
          },
          {
            "text": "        return 'sunday-row'",
            "lineNumber": 1509
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 6) {",
            "lineNumber": 1510
          },
          {
            "text": "        return 'saturday-row'",
            "lineNumber": 1511
          },
          {
            "text": "      }",
            "lineNumber": 1512
          },
          {
            "text": "      return ''",
            "lineNumber": 1513
          },
          {
            "text": "    },",
            "lineNumber": 1514
          },
          {
            "text": "    ",
            "lineNumber": 1515
          },
          {
            "text": "    // 曜日の色クラスを取得",
            "lineNumber": 1516
          },
          {
            "text": "    getDayOfWeekClass(day) {",
            "lineNumber": 1517
          },
          {
            "text": "      if (day.isHoliday) {",
            "lineNumber": 1518
          },
          {
            "text": "        return 'saturday-text' // 祝日は土曜日と同じ青色",
            "lineNumber": 1519
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 0) {",
            "lineNumber": 1520
          },
          {
            "text": "        return 'sunday-text'",
            "lineNumber": 1521
          },
          {
            "text": "      } else if (day.dayOfWeekNum === 6) {",
            "lineNumber": 1522
          },
          {
            "text": "        return 'saturday-text'",
            "lineNumber": 1523
          },
          {
            "text": "      }",
            "lineNumber": 1524
          },
          {
            "text": "      return ''",
            "lineNumber": 1525
          },
          {
            "text": "    },",
            "lineNumber": 1526
          },
          {
            "text": "    ",
            "lineNumber": 1527
          },
          {
            "text": "    // 編集可能な承認状態かどうかを判定（テキストボックス表示の条件）",
            "lineNumber": 1528
          },
          {
            "text": "    isEditableStatus(day) {",
            "lineNumber": 1529
          },
          {
            "text": "      // 土日祝の場合はテキストボックスを表示しない",
            "lineNumber": 1530
          }
        ]
      },
      "score": 0.36097824573516846
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "/**\n * 月次サマリーサービス\n */\nconst employeeModel = require('../models/employeeModel');\nconst attendanceModel = require('../models/attendanceModel');\nconst breakTimeModel = require('../models/breakTimeModel');\nconst applicationModel = require('../models/applicationModel');\nconst { \n  getMonthRange,\n  getScheduledWorkDays,\n  normalizeDate,\n  formatHours,\n  formatOverUnder,\n  calculateMinutes\n} = require('../utils/dateUtils');\nconst db = require('../config/database');\n\n/**\n * 月次サマリー情報を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} yearMonth - 対象年月（YYYY-MM形式）\n * @returns {Promise&lt;Object&gt;} 月次サマリー情報\n */\nconst getMonthlySummary = async (employeeId, yearMonth) =&gt; {\n  // 年月をパース\n  const [year, month] = yearMonth.split('-').map(Number);\n  const { startDate, endDate } = getMonthRange(year, month);\n  \n  // 1. 従業員情報取得\n  const employee = await employeeModel.getEmployeeById(employeeId);\n  if (!employee) {\n    throw new Error('従業員情報が見つかりません。');\n  }\n  \n  // 2. 月間勤務データ取得\n  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);\n  \n  // 月間の全ての日付を生成（勤務記録がない日も含む）\n  const daysInMonth = new Date(year, month, 0).getDate();\n  const scheduledWorkDays = getScheduledWorkDays(year, month);\n  const monthlyScheduledWorkHours = scheduledWorkDays * 7.5;\n  const monthlyLegalWorkHours = scheduledWorkDays * 8;\n  \n  const dailyData = [];\n  let previousCumulativeWorkHours = 0;\n  \n  for (let day = 1; day &lt;= daysInMonth; day++) {\n    \n  }\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 月次サマリーサービス",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const employeeModel = require('../models/employeeModel');",
            "lineNumber": 4
          },
          {
            "text": "const attendanceModel = require('../models/attendanceModel');",
            "lineNumber": 5
          },
          {
            "text": "const breakTimeModel = require('../models/breakTimeModel');",
            "lineNumber": 6
          },
          {
            "text": "const applicationModel = require('../models/applicationModel');",
            "lineNumber": 7
          },
          {
            "text": "const { ",
            "lineNumber": 8
          },
          {
            "text": "  getMonthRange,",
            "lineNumber": 9
          },
          {
            "text": "  getScheduledWorkDays,",
            "lineNumber": 10
          },
          {
            "text": "  normalizeDate,",
            "lineNumber": 11
          },
          {
            "text": "  formatHours,",
            "lineNumber": 12
          },
          {
            "text": "  formatOverUnder,",
            "lineNumber": 13
          },
          {
            "text": "  calculateMinutes",
            "lineNumber": 14
          },
          {
            "text": "} = require('../utils/dateUtils');",
            "lineNumber": 15
          },
          {
            "text": "const db = require('../config/database');",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "/**",
            "lineNumber": 18
          },
          {
            "text": " * 月次サマリー情報を取得",
            "lineNumber": 19
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 20
          },
          {
            "text": " * @param {string} yearMonth - 対象年月（YYYY-MM形式）",
            "lineNumber": 21
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリー情報",
            "lineNumber": 22
          },
          {
            "text": " */",
            "lineNumber": 23
          },
          {
            "text": "const getMonthlySummary = async (employeeId, yearMonth) =&gt; {",
            "lineNumber": 24
          },
          {
            "text": "  // 年月をパース",
            "lineNumber": 25
          },
          {
            "text": "  const [year, month] = yearMonth.split('-').map(Number);",
            "lineNumber": 26
          },
          {
            "text": "  const { startDate, endDate } = getMonthRange(year, month);",
            "lineNumber": 27
          },
          {
            "text": "  ",
            "lineNumber": 28
          },
          {
            "text": "  // 1. 従業員情報取得",
            "lineNumber": 29
          },
          {
            "text": "  const employee = await employeeModel.getEmployeeById(employeeId);",
            "lineNumber": 30
          },
          {
            "text": "  if (!employee) {",
            "lineNumber": 31
          },
          {
            "text": "    throw new Error('従業員情報が見つかりません。');",
            "lineNumber": 32
          },
          {
            "text": "  }",
            "lineNumber": 33
          },
          {
            "text": "  ",
            "lineNumber": 34
          },
          {
            "text": "  // 2. 月間勤務データ取得",
            "lineNumber": 35
          },
          {
            "text": "  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);",
            "lineNumber": 36
          },
          {
            "text": "  ",
            "lineNumber": 37
          },
          {
            "text": "  // 月間の全ての日付を生成（勤務記録がない日も含む）",
            "lineNumber": 38
          },
          {
            "text": "  const daysInMonth = new Date(year, month, 0).getDate();",
            "lineNumber": 39
          },
          {
            "text": "  const scheduledWorkDays = getScheduledWorkDays(year, month);",
            "lineNumber": 40
          },
          {
            "text": "  const monthlyScheduledWorkHours = scheduledWorkDays * 7.5;",
            "lineNumber": 41
          },
          {
            "text": "  const monthlyLegalWorkHours = scheduledWorkDays * 8;",
            "lineNumber": 42
          },
          {
            "text": "  ",
            "lineNumber": 43
          },
          {
            "text": "  const dailyData = [];",
            "lineNumber": 44
          },
          {
            "text": "  let previousCumulativeWorkHours = 0;",
            "lineNumber": 45
          },
          {
            "text": "  ",
            "lineNumber": 46
          },
          {
            "text": "  for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 47
          },
          {
            "text": "    ",
            "lineNumber": 48
          },
          {
            "text": "  }",
            "lineNumber": 145
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.35655298829078674
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 463
          },
          "endPosition": {
            "line": 495
          }
        },
        "contents": "- **中央カラム**:\n  - **Section 4**: 法定労働時間、実労働時間-法定休日労働(有休を含めない)、法定時間内残業、法定時間外残業、法定休日労働時間\n  - **Section 5**: 深夜労働時間、45時間を超える時間外労働、60時間を超える時間外労働\n  - **Section 6**: 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間\n- **右カラム**:\n  - **Section 7**: 有給取得日数、[内訳]\n  - **Section 8**: 代休取得日数、[内訳]\n  - **Section 9**: 無給休暇日数、[内訳]\n  - **Section 10**: 有給残日数(月末日時点)、計画付与予定日（次月以降）\n\n### データの表示形式について\n- 時間の表示形式は、H:MM（例: 8:00）またはHHH:MM（例: 114:05）です。\n- 日数の表示形式は、「XX 日」（例: 18 日）です。\n- 過不足時間がマイナスの場合は赤色（#D9534F）で表示します。\n\n### 月次サマリーの計算について\n- 月次サマリーデータは、V_MONTHLY_ATTENDANCEビューを使用して取得します。\n- 一部の項目（法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間）は、ATTENDANCE_RECORDテーブルから別途集計する必要があります。\n\n### 遅刻回数・時間などの表示形式について\n- 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、「XX回 XX:XX」形式で表示します（例: 0回 0:00）。\n- 回数と時間の間にスペースを1つ入れます。\n\n### 休日アイコンの表示について\n- 所定休日: ○（白い丸）\n- 法定休日: ◎（二重丸）\n- 有休計画付与日: △（三角）\n\n### 記号の説明について\n- 画面下部に「記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日」を表示します。\n- 記号の詳細説明：\n  - **○（所定休日）**: 勤務表画面のテーブルでいえば土曜日と祝日に対応します。",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **中央カラム**:",
            "lineNumber": 464
          },
          {
            "text": "  - **Section 4**: 法定労働時間、実労働時間-法定休日労働(有休を含めない)、法定時間内残業、法定時間外残業、法定休日労働時間",
            "lineNumber": 465
          },
          {
            "text": "  - **Section 5**: 深夜労働時間、45時間を超える時間外労働、60時間を超える時間外労働",
            "lineNumber": 466
          },
          {
            "text": "  - **Section 6**: 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間",
            "lineNumber": 467
          },
          {
            "text": "- **右カラム**:",
            "lineNumber": 468
          },
          {
            "text": "  - **Section 7**: 有給取得日数、[内訳]",
            "lineNumber": 469
          },
          {
            "text": "  - **Section 8**: 代休取得日数、[内訳]",
            "lineNumber": 470
          },
          {
            "text": "  - **Section 9**: 無給休暇日数、[内訳]",
            "lineNumber": 471
          },
          {
            "text": "  - **Section 10**: 有給残日数(月末日時点)、計画付与予定日（次月以降）",
            "lineNumber": 472
          },
          {
            "lineNumber": 473
          },
          {
            "text": "### データの表示形式について",
            "lineNumber": 474
          },
          {
            "text": "- 時間の表示形式は、H:MM（例: 8:00）またはHHH:MM（例: 114:05）です。",
            "lineNumber": 475
          },
          {
            "text": "- 日数の表示形式は、「XX 日」（例: 18 日）です。",
            "lineNumber": 476
          },
          {
            "text": "- 過不足時間がマイナスの場合は赤色（#D9534F）で表示します。",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "### 月次サマリーの計算について",
            "lineNumber": 479
          },
          {
            "text": "- 月次サマリーデータは、V_MONTHLY_ATTENDANCEビューを使用して取得します。",
            "lineNumber": 480
          },
          {
            "text": "- 一部の項目（法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間）は、ATTENDANCE_RECORDテーブルから別途集計する必要があります。",
            "lineNumber": 481
          },
          {
            "lineNumber": 482
          },
          {
            "text": "### 遅刻回数・時間などの表示形式について",
            "lineNumber": 483
          },
          {
            "text": "- 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、「XX回 XX:XX」形式で表示します（例: 0回 0:00）。",
            "lineNumber": 484
          },
          {
            "text": "- 回数と時間の間にスペースを1つ入れます。",
            "lineNumber": 485
          },
          {
            "lineNumber": 486
          },
          {
            "text": "### 休日アイコンの表示について",
            "lineNumber": 487
          },
          {
            "text": "- 所定休日: ○（白い丸）",
            "lineNumber": 488
          },
          {
            "text": "- 法定休日: ◎（二重丸）",
            "lineNumber": 489
          },
          {
            "text": "- 有休計画付与日: △（三角）",
            "lineNumber": 490
          },
          {
            "lineNumber": 491
          },
          {
            "text": "### 記号の説明について",
            "lineNumber": 492
          },
          {
            "text": "- 画面下部に「記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日」を表示します。",
            "lineNumber": 493
          },
          {
            "text": "- 記号の詳細説明：",
            "lineNumber": 494
          },
          {
            "text": "  - **○（所定休日）**: 勤務表画面のテーブルでいえば土曜日と祝日に対応します。",
            "lineNumber": 495
          }
        ]
      },
      "score": 0.35343825817108154
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1131
          },
          "endPosition": {
            "line": 1157
          }
        },
        "contents": "1. **法定時間内残業**:\n   - 計算方法: 実作業時間 - 所定労働時間\n   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間\n   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間\n\n2. **法定時間外残業**:\n   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00\n   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間\n\n### 月次サマリーデータの表示\n画面下部に月間の集計データが表示されます：\n\n1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）\n2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）\n3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）\n4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）\n5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）\n   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)\n   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能\n   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除\n   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算\n   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます\n6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）\n7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）\n   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
        "signatures": {},
        "detailedLines": [
          {
            "text": "1. **法定時間内残業**:",
            "lineNumber": 1133
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定労働時間",
            "lineNumber": 1134
          },
          {
            "text": "   - 表示できる時間の下限上限: 0:00 &lt;= time &lt;= (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 1135
          },
          {
            "text": "   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間",
            "lineNumber": 1136
          },
          {
            "lineNumber": 1137
          },
          {
            "text": "2. **法定時間外残業**:",
            "lineNumber": 1138
          },
          {
            "text": "   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00",
            "lineNumber": 1139
          },
          {
            "text": "   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間",
            "lineNumber": 1140
          },
          {
            "lineNumber": 1141
          },
          {
            "text": "### 月次サマリーデータの表示",
            "lineNumber": 1142
          },
          {
            "text": "画面下部に月間の集計データが表示されます：",
            "lineNumber": 1143
          },
          {
            "lineNumber": 1144
          },
          {
            "text": "1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）",
            "lineNumber": 1145
          },
          {
            "text": "2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）",
            "lineNumber": 1146
          },
          {
            "text": "3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）",
            "lineNumber": 1147
          },
          {
            "text": "4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）",
            "lineNumber": 1148
          },
          {
            "text": "5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）",
            "lineNumber": 1149
          },
          {
            "text": "   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)",
            "lineNumber": 1150
          },
          {
            "text": "   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能",
            "lineNumber": 1151
          },
          {
            "text": "   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除",
            "lineNumber": 1152
          },
          {
            "text": "   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算",
            "lineNumber": 1153
          },
          {
            "text": "   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます",
            "lineNumber": 1154
          },
          {
            "text": "6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）",
            "lineNumber": 1155
          },
          {
            "text": "7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）",
            "lineNumber": 1156
          },
          {
            "text": "   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分",
            "lineNumber": 1157
          }
        ]
      },
      "score": 0.3511066436767578
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 859
          },
          "endPosition": {
            "line": 876
          }
        },
        "contents": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |\n  | 月次サマリーデータ | 月間集計データ | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |",
            "lineNumber": 860
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |",
            "lineNumber": 861
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |",
            "lineNumber": 862
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |",
            "lineNumber": 863
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |",
            "lineNumber": 864
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | BREAK_TIME | |",
            "lineNumber": 865
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;公用外出リスト | OFFICIAL_OUTING | |",
            "lineNumber": 866
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;工数実績リスト | WORK_HOURS | |",
            "lineNumber": 867
          },
          {
            "text": "  | 月次サマリーデータ | 月間集計データ | JSON形式 |",
            "lineNumber": 868
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |",
            "lineNumber": 869
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |",
            "lineNumber": 870
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |",
            "lineNumber": 871
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |",
            "lineNumber": 872
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |",
            "lineNumber": 873
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |",
            "lineNumber": 874
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |",
            "lineNumber": 875
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |",
            "lineNumber": 876
          }
        ]
      },
      "score": 0.34374624490737915
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1325
          },
          "endPosition": {
            "line": 1376
          }
        },
        "contents": "        displayData.push({\n          date: dateStr,\n          dateNumber: dateNumber,\n          dateDayOfWeek: dateDayOfWeek,\n          dayOfWeek: dayNames[dayOfWeek],\n          dayOfWeekNum: dayOfWeek,\n          hasWarning: false,\n          hasStampManualMismatch: hasStampManualMismatch,\n          approvalStatus: apiRecord?.APPROVAL_STATUS || 'NOT_SUBMITTED',\n          clockIn: clockIn,\n          clockOut: clockOut,\n          clockInType: clockInType,\n          clockOutType: clockOutType,\n          location: apiRecord?.WORK_LOCATION_NAME || apiRecord?.WORK_LOCATION_CODE || '',\n          workHours: formatWorkHours(totalWorkHours),\n          hasWorkHoursError: apiRecord?.ACTUAL_WORK_HOURS &amp;&amp; Math.abs((apiRecord.ACTUAL_WORK_HOURS - totalWorkHours)) &gt; 0.01,\n          canEdit: !apiRecord?.IS_DAILY_CONFIRMED,\n          isHoliday: holiday,\n          hasVacation: false, // TODO: 休暇データから判定\n          attendanceId: apiRecord?.ATTENDANCE_ID,\n          actualWorkHours: apiRecord?.ACTUAL_WORK_HOURS || 0,\n          breakTimes: breakTimes,\n          remarkText: (() =&gt; {\n            if (apiRecord?.REMARK_TEXT !== null &amp;&amp; apiRecord?.REMARK_TEXT !== undefined) {\n              return String(apiRecord.REMARK_TEXT)\n            }\n\n            return ''\n          })()\n        })\n      }\n\n      return displayData\n    },\n\n    // 年月変更処理（テーブル上部）\n    async changeYearMonthTable() {\n      this.loading = true\n      try {\n        await this.loadAttendanceData()\n      } catch (error) {\n        console.error('年月変更エラー:', error)\n        this.error = error.message\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 前月リンク押下処理\n    previousMonthLink() {\n      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        displayData.push({",
            "lineNumber": 1326
          },
          {
            "text": "          date: dateStr,",
            "lineNumber": 1327
          },
          {
            "text": "          dateNumber: dateNumber,",
            "lineNumber": 1328
          },
          {
            "text": "          dateDayOfWeek: dateDayOfWeek,",
            "lineNumber": 1329
          },
          {
            "text": "          dayOfWeek: dayNames[dayOfWeek],",
            "lineNumber": 1330
          },
          {
            "text": "          dayOfWeekNum: dayOfWeek,",
            "lineNumber": 1331
          },
          {
            "text": "          hasWarning: false,",
            "lineNumber": 1332
          },
          {
            "text": "          hasStampManualMismatch: hasStampManualMismatch,",
            "lineNumber": 1333
          },
          {
            "text": "          approvalStatus: apiRecord?.APPROVAL_STATUS || 'NOT_SUBMITTED',",
            "lineNumber": 1334
          },
          {
            "text": "          clockIn: clockIn,",
            "lineNumber": 1335
          },
          {
            "text": "          clockOut: clockOut,",
            "lineNumber": 1336
          },
          {
            "text": "          clockInType: clockInType,",
            "lineNumber": 1337
          },
          {
            "text": "          clockOutType: clockOutType,",
            "lineNumber": 1338
          },
          {
            "text": "          location: apiRecord?.WORK_LOCATION_NAME || apiRecord?.WORK_LOCATION_CODE || '',",
            "lineNumber": 1339
          },
          {
            "text": "          workHours: formatWorkHours(totalWorkHours),",
            "lineNumber": 1340
          },
          {
            "text": "          hasWorkHoursError: apiRecord?.ACTUAL_WORK_HOURS &amp;&amp; Math.abs((apiRecord.ACTUAL_WORK_HOURS - totalWorkHours)) &gt; 0.01,",
            "lineNumber": 1341
          },
          {
            "text": "          canEdit: !apiRecord?.IS_DAILY_CONFIRMED,",
            "lineNumber": 1342
          },
          {
            "text": "          isHoliday: holiday,",
            "lineNumber": 1343
          },
          {
            "text": "          hasVacation: false, // TODO: 休暇データから判定",
            "lineNumber": 1344
          },
          {
            "text": "          attendanceId: apiRecord?.ATTENDANCE_ID,",
            "lineNumber": 1345
          },
          {
            "text": "          actualWorkHours: apiRecord?.ACTUAL_WORK_HOURS || 0,",
            "lineNumber": 1346
          },
          {
            "text": "          breakTimes: breakTimes,",
            "lineNumber": 1347
          },
          {
            "text": "          remarkText: (() =&gt; {",
            "lineNumber": 1348
          },
          {
            "text": "            if (apiRecord?.REMARK_TEXT !== null &amp;&amp; apiRecord?.REMARK_TEXT !== undefined) {",
            "lineNumber": 1349
          },
          {
            "text": "              return String(apiRecord.REMARK_TEXT)",
            "lineNumber": 1350
          },
          {
            "text": "            }",
            "lineNumber": 1351
          },
          {
            "lineNumber": 1352
          },
          {
            "text": "            return ''",
            "lineNumber": 1353
          },
          {
            "text": "          })()",
            "lineNumber": 1354
          },
          {
            "text": "        })",
            "lineNumber": 1355
          },
          {
            "text": "      }",
            "lineNumber": 1356
          },
          {
            "lineNumber": 1357
          },
          {
            "text": "      return displayData",
            "lineNumber": 1358
          },
          {
            "text": "    },",
            "lineNumber": 1359
          },
          {
            "lineNumber": 1360
          },
          {
            "text": "    // 年月変更処理（テーブル上部）",
            "lineNumber": 1361
          },
          {
            "text": "    async changeYearMonthTable() {",
            "lineNumber": 1362
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 1363
          },
          {
            "text": "      try {",
            "lineNumber": 1364
          },
          {
            "text": "        await this.loadAttendanceData()",
            "lineNumber": 1365
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 1366
          },
          {
            "text": "        console.error('年月変更エラー:', error)",
            "lineNumber": 1367
          },
          {
            "text": "        this.error = error.message",
            "lineNumber": 1368
          },
          {
            "text": "      } finally {",
            "lineNumber": 1369
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 1370
          },
          {
            "text": "      }",
            "lineNumber": 1371
          },
          {
            "text": "    },",
            "lineNumber": 1372
          },
          {
            "text": "    ",
            "lineNumber": 1373
          },
          {
            "text": "    // 前月リンク押下処理",
            "lineNumber": 1374
          },
          {
            "text": "    previousMonthLink() {",
            "lineNumber": 1375
          },
          {
            "text": "      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
            "lineNumber": 1376
          }
        ]
      },
      "score": 0.3393341898918152
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  let withinLegalOvertime = 0;\n  let overLegalOvertime = 0;\n  \n  if (totalWorkHours &gt; scheduledWorkHours) {\n    // 実労働時間が所定労働時間を超えている\n    const overtimeHours = totalWorkHours - scheduledWorkHours;\n    \n    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分\n    // 上限: (所定出勤日数 * 8:00) - 所定労働時間\n    const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours;\n    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);\n    \n    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分\n    if (totalWorkHours &gt; legalWorkHours) {\n      overLegalOvertime = totalWorkHours - legalWorkHours;\n    }\n  }\n  \n  // 法定休日労働時間\n  const legalHolidayWorkHours = attendanceRows.reduce((sum, row) =&gt; \n    sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0\n  );\n  \n  // 深夜労働時間\n  const nightWorkHours = attendanceRows.reduce((sum, row) =&gt; \n    sum + (parseFloat(row.NIGHT_WORK_HOURS) || 0), 0\n  );\n  \n  // 45時間を超える時間外労働、60時間を超える時間外労働は簡易的に0とする\n  const overtimeOver45Hours = 0;\n  const overtimeOver60Hours = 0;\n  \n  // 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は簡易的に0とする\n  const lateCount = 0;\n  const lateHours = 0;\n  const earlyLeaveCount = 0;\n  const earlyLeaveHours = 0;\n  const privateOutingCount = 0;\n  const privateOutingHours = 0;\n  \n  // 休憩時間合計\n  let totalBreakHours = 0;\n  for (const attendance of attendanceRows) {\n    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n    const breakMinutes = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0);\n    totalBreakHours += breakMinutes / 60;\n  }\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n  };\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 206
          },
          {
            "text": "  let withinLegalOvertime = 0;",
            "lineNumber": 207
          },
          {
            "text": "  let overLegalOvertime = 0;",
            "lineNumber": 208
          },
          {
            "text": "  ",
            "lineNumber": 209
          },
          {
            "text": "  if (totalWorkHours &gt; scheduledWorkHours) {",
            "lineNumber": 210
          },
          {
            "text": "    // 実労働時間が所定労働時間を超えている",
            "lineNumber": 211
          },
          {
            "text": "    const overtimeHours = totalWorkHours - scheduledWorkHours;",
            "lineNumber": 212
          },
          {
            "text": "    ",
            "lineNumber": 213
          },
          {
            "text": "    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分",
            "lineNumber": 214
          },
          {
            "text": "    // 上限: (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 215
          },
          {
            "text": "    const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours;",
            "lineNumber": 216
          },
          {
            "text": "    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);",
            "lineNumber": 217
          },
          {
            "text": "    ",
            "lineNumber": 218
          },
          {
            "text": "    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分",
            "lineNumber": 219
          },
          {
            "text": "    if (totalWorkHours &gt; legalWorkHours) {",
            "lineNumber": 220
          },
          {
            "text": "      overLegalOvertime = totalWorkHours - legalWorkHours;",
            "lineNumber": 221
          },
          {
            "text": "    }",
            "lineNumber": 222
          },
          {
            "text": "  }",
            "lineNumber": 223
          },
          {
            "text": "  ",
            "lineNumber": 224
          },
          {
            "text": "  // 法定休日労働時間",
            "lineNumber": 225
          },
          {
            "text": "  const legalHolidayWorkHours = attendanceRows.reduce((sum, row) =&gt; ",
            "lineNumber": 226
          },
          {
            "text": "    sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0",
            "lineNumber": 227
          },
          {
            "text": "  );",
            "lineNumber": 228
          },
          {
            "text": "  ",
            "lineNumber": 229
          },
          {
            "text": "  // 深夜労働時間",
            "lineNumber": 230
          },
          {
            "text": "  const nightWorkHours = attendanceRows.reduce((sum, row) =&gt; ",
            "lineNumber": 231
          },
          {
            "text": "    sum + (parseFloat(row.NIGHT_WORK_HOURS) || 0), 0",
            "lineNumber": 232
          },
          {
            "text": "  );",
            "lineNumber": 233
          },
          {
            "text": "  ",
            "lineNumber": 234
          },
          {
            "text": "  // 45時間を超える時間外労働、60時間を超える時間外労働は簡易的に0とする",
            "lineNumber": 235
          },
          {
            "text": "  const overtimeOver45Hours = 0;",
            "lineNumber": 236
          },
          {
            "text": "  const overtimeOver60Hours = 0;",
            "lineNumber": 237
          },
          {
            "text": "  ",
            "lineNumber": 238
          },
          {
            "text": "  // 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は簡易的に0とする",
            "lineNumber": 239
          },
          {
            "text": "  const lateCount = 0;",
            "lineNumber": 240
          },
          {
            "text": "  const lateHours = 0;",
            "lineNumber": 241
          },
          {
            "text": "  const earlyLeaveCount = 0;",
            "lineNumber": 242
          },
          {
            "text": "  const earlyLeaveHours = 0;",
            "lineNumber": 243
          },
          {
            "text": "  const privateOutingCount = 0;",
            "lineNumber": 244
          },
          {
            "text": "  const privateOutingHours = 0;",
            "lineNumber": 245
          },
          {
            "text": "  ",
            "lineNumber": 246
          },
          {
            "text": "  // 休憩時間合計",
            "lineNumber": 247
          },
          {
            "text": "  let totalBreakHours = 0;",
            "lineNumber": 248
          },
          {
            "text": "  for (const attendance of attendanceRows) {",
            "lineNumber": 249
          },
          {
            "text": "    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 250
          },
          {
            "text": "    const breakMinutes = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0);",
            "lineNumber": 251
          },
          {
            "text": "    totalBreakHours += breakMinutes / 60;",
            "lineNumber": 252
          },
          {
            "text": "  }",
            "lineNumber": 253
          },
          {
            "text": "  ",
            "lineNumber": 254
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 255
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 256
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 257
          },
          {
            "text": "  };",
            "lineNumber": 281
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.3375527858734131
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2329
          },
          "endPosition": {
            "line": 2367
          }
        },
        "contents": "    calculateDailyWorkHourBreakdown(day) {\n      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {\n        return {\n          scheduledWorkHours: 0,\n          withinLegalOvertime: 0,\n          overLegalOvertime: 0\n        }\n      }\n      \n      // 年月を取得\n      const [year, month] = day.date.split('-').map(Number)\n      \n      // 月全体の所定出勤日数を計算\n      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)\n      \n      // 月の所定労働時間と法定労働時間\n      const monthlyScheduledWorkHours = scheduledWorkDays * 7.5\n      const monthlyLegalWorkHours = scheduledWorkDays * 8\n      \n      // 前日までの累積実労働時間\n      const previousCumulativeWorkHours = this.getPreviousDayCumulativeWorkHours(day)\n      \n      // その日の実労働時間\n      const dailyActualWorkHours = parseFloat(day.actualWorkHours) || 0\n      \n      // 月の所定労働時間の残り\n      const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours)\n      \n      // 月の法定労働時間の残り\n      const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours)\n      \n      let scheduledWorkHours = 0\n      let withinLegalOvertime = 0\n      let overLegalOvertime = 0\n      \n      // 前日までの累積が月の所定労働時間以下の場合\n      if (previousCumulativeWorkHours &lt; monthlyScheduledWorkHours) {\n        // 所定内労働: 月の所定労働時間の残りまで",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    calculateDailyWorkHourBreakdown(day) {",
            "lineNumber": 2330
          },
          {
            "text": "      if (!day.clockIn || !day.clockOut || !day.actualWorkHours) {",
            "lineNumber": 2331
          },
          {
            "text": "        return {",
            "lineNumber": 2332
          },
          {
            "text": "          scheduledWorkHours: 0,",
            "lineNumber": 2333
          },
          {
            "text": "          withinLegalOvertime: 0,",
            "lineNumber": 2334
          },
          {
            "text": "          overLegalOvertime: 0",
            "lineNumber": 2335
          },
          {
            "text": "        }",
            "lineNumber": 2336
          },
          {
            "text": "      }",
            "lineNumber": 2337
          },
          {
            "text": "      ",
            "lineNumber": 2338
          },
          {
            "text": "      // 年月を取得",
            "lineNumber": 2339
          },
          {
            "text": "      const [year, month] = day.date.split('-').map(Number)",
            "lineNumber": 2340
          },
          {
            "text": "      ",
            "lineNumber": 2341
          },
          {
            "text": "      // 月全体の所定出勤日数を計算",
            "lineNumber": 2342
          },
          {
            "text": "      const scheduledWorkDays = this.getScheduledWorkDaysForMonth(year, month)",
            "lineNumber": 2343
          },
          {
            "text": "      ",
            "lineNumber": 2344
          },
          {
            "text": "      // 月の所定労働時間と法定労働時間",
            "lineNumber": 2345
          },
          {
            "text": "      const monthlyScheduledWorkHours = scheduledWorkDays * 7.5",
            "lineNumber": 2346
          },
          {
            "text": "      const monthlyLegalWorkHours = scheduledWorkDays * 8",
            "lineNumber": 2347
          },
          {
            "text": "      ",
            "lineNumber": 2348
          },
          {
            "text": "      // 前日までの累積実労働時間",
            "lineNumber": 2349
          },
          {
            "text": "      const previousCumulativeWorkHours = this.getPreviousDayCumulativeWorkHours(day)",
            "lineNumber": 2350
          },
          {
            "text": "      ",
            "lineNumber": 2351
          },
          {
            "text": "      // その日の実労働時間",
            "lineNumber": 2352
          },
          {
            "text": "      const dailyActualWorkHours = parseFloat(day.actualWorkHours) || 0",
            "lineNumber": 2353
          },
          {
            "text": "      ",
            "lineNumber": 2354
          },
          {
            "text": "      // 月の所定労働時間の残り",
            "lineNumber": 2355
          },
          {
            "text": "      const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours)",
            "lineNumber": 2356
          },
          {
            "text": "      ",
            "lineNumber": 2357
          },
          {
            "text": "      // 月の法定労働時間の残り",
            "lineNumber": 2358
          },
          {
            "text": "      const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours)",
            "lineNumber": 2359
          },
          {
            "text": "      ",
            "lineNumber": 2360
          },
          {
            "text": "      let scheduledWorkHours = 0",
            "lineNumber": 2361
          },
          {
            "text": "      let withinLegalOvertime = 0",
            "lineNumber": 2362
          },
          {
            "text": "      let overLegalOvertime = 0",
            "lineNumber": 2363
          },
          {
            "text": "      ",
            "lineNumber": 2364
          },
          {
            "text": "      // 前日までの累積が月の所定労働時間以下の場合",
            "lineNumber": 2365
          },
          {
            "text": "      if (previousCumulativeWorkHours &lt; monthlyScheduledWorkHours) {",
            "lineNumber": 2366
          },
          {
            "text": "        // 所定内労働: 月の所定労働時間の残りまで",
            "lineNumber": 2367
          }
        ]
      },
      "score": 0.33436644077301025
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 891
          },
          "endPosition": {
            "line": 942,
            "column": 8
          }
        },
        "contents": "    \n    async loadDailyAttendanceData() {\n      try {\n        const response = await fetch(\n          &#96;http://localhost:3000/api/attendance/daily?employeeId=${this.employeeId}&amp;workDate=${this.targetDate}&#96;\n        )\n        const data = await response.json()\n        \n        if (data.success &amp;&amp; data.attendance) {\n          const attendance = data.attendance\n          \n          // 出退社時刻を設定\n          let clockIn = '--:--'\n\n          if (attendance.CLOCK_IN_TIME) {\n            clockIn = this.formatTime(attendance.CLOCK_IN_TIME)\n          }\n\n          let clockOut = '--:--'\n\n          if (attendance.CLOCK_OUT_TIME) {\n            clockOut = this.formatTime(attendance.CLOCK_OUT_TIME)\n          }\n          this.dailyConfirmationForm.clockInOut = &#96;${clockIn}-${clockOut}&#96;\n          \n          // 休憩時間を設定\n          if (attendance.breakTimes &amp;&amp; attendance.breakTimes.length &gt; 0) {\n            this.dailyConfirmationForm.breakTime = attendance.breakTimes\n              .map(bt =&gt; &#96;${this.formatTime(bt.BREAK_START_TIME)}-${this.formatTime(bt.BREAK_END_TIME)}&#96;)\n              .join(', ')\n          } else {\n            this.dailyConfirmationForm.breakTime = '---:---'\n          }\n          \n          // 総労働時間を設定\n          if (attendance.CLOCK_IN_TIME &amp;&amp; attendance.CLOCK_OUT_TIME) {\n            const clockInDate = new Date(attendance.CLOCK_IN_TIME)\n            const clockOutDate = new Date(attendance.CLOCK_OUT_TIME)\n            const totalMinutes = Math.floor((clockOutDate - clockInDate) / 1000 / 60)\n            this.dailyConfirmationForm.totalWorkHours = this.formatHoursMinutes(totalMinutes)\n          } else {\n            this.dailyConfirmationForm.totalWorkHours = '0:00'\n          }\n          \n          // 実労働時間を設定\n          this.dailyConfirmationForm.actualWorkHours = this.formatHoursMinutes(Math.floor((attendance.ACTUAL_WORK_HOURS || 0) * 60))\n          \n          // 備考を設定\n          this.dailyConfirmationForm.remark = attendance.REMARK_TEXT || ''\n        }\n      } catch (error) {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    ",
            "lineNumber": 892
          },
          {
            "text": "    async loadDailyAttendanceData() {",
            "lineNumber": 893
          },
          {
            "text": "      try {",
            "lineNumber": 894
          },
          {
            "text": "        const response = await fetch(",
            "lineNumber": 895
          },
          {
            "text": "          &#96;http://localhost:3000/api/attendance/daily?employeeId=${this.employeeId}&amp;workDate=${this.targetDate}&#96;",
            "lineNumber": 896
          },
          {
            "text": "        )",
            "lineNumber": 897
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 898
          },
          {
            "text": "        ",
            "lineNumber": 899
          },
          {
            "text": "        if (data.success &amp;&amp; data.attendance) {",
            "lineNumber": 900
          },
          {
            "text": "          const attendance = data.attendance",
            "lineNumber": 901
          },
          {
            "text": "          ",
            "lineNumber": 902
          },
          {
            "text": "          // 出退社時刻を設定",
            "lineNumber": 903
          },
          {
            "text": "          let clockIn = '--:--'",
            "lineNumber": 904
          },
          {
            "lineNumber": 905
          },
          {
            "text": "          if (attendance.CLOCK_IN_TIME) {",
            "lineNumber": 906
          },
          {
            "text": "            clockIn = this.formatTime(attendance.CLOCK_IN_TIME)",
            "lineNumber": 907
          },
          {
            "text": "          }",
            "lineNumber": 908
          },
          {
            "lineNumber": 909
          },
          {
            "text": "          let clockOut = '--:--'",
            "lineNumber": 910
          },
          {
            "lineNumber": 911
          },
          {
            "text": "          if (attendance.CLOCK_OUT_TIME) {",
            "lineNumber": 912
          },
          {
            "text": "            clockOut = this.formatTime(attendance.CLOCK_OUT_TIME)",
            "lineNumber": 913
          },
          {
            "text": "          }",
            "lineNumber": 914
          },
          {
            "text": "          this.dailyConfirmationForm.clockInOut = &#96;${clockIn}-${clockOut}&#96;",
            "lineNumber": 915
          },
          {
            "text": "          ",
            "lineNumber": 916
          },
          {
            "text": "          // 休憩時間を設定",
            "lineNumber": 917
          },
          {
            "text": "          if (attendance.breakTimes &amp;&amp; attendance.breakTimes.length &gt; 0) {",
            "lineNumber": 918
          },
          {
            "text": "            this.dailyConfirmationForm.breakTime = attendance.breakTimes",
            "lineNumber": 919
          },
          {
            "text": "              .map(bt =&gt; &#96;${this.formatTime(bt.BREAK_START_TIME)}-${this.formatTime(bt.BREAK_END_TIME)}&#96;)",
            "lineNumber": 920
          },
          {
            "text": "              .join(', ')",
            "lineNumber": 921
          },
          {
            "text": "          } else {",
            "lineNumber": 922
          },
          {
            "text": "            this.dailyConfirmationForm.breakTime = '---:---'",
            "lineNumber": 923
          },
          {
            "text": "          }",
            "lineNumber": 924
          },
          {
            "text": "          ",
            "lineNumber": 925
          },
          {
            "text": "          // 総労働時間を設定",
            "lineNumber": 926
          },
          {
            "text": "          if (attendance.CLOCK_IN_TIME &amp;&amp; attendance.CLOCK_OUT_TIME) {",
            "lineNumber": 927
          },
          {
            "text": "            const clockInDate = new Date(attendance.CLOCK_IN_TIME)",
            "lineNumber": 928
          },
          {
            "text": "            const clockOutDate = new Date(attendance.CLOCK_OUT_TIME)",
            "lineNumber": 929
          },
          {
            "text": "            const totalMinutes = Math.floor((clockOutDate - clockInDate) / 1000 / 60)",
            "lineNumber": 930
          },
          {
            "text": "            this.dailyConfirmationForm.totalWorkHours = this.formatHoursMinutes(totalMinutes)",
            "lineNumber": 931
          },
          {
            "text": "          } else {",
            "lineNumber": 932
          },
          {
            "text": "            this.dailyConfirmationForm.totalWorkHours = '0:00'",
            "lineNumber": 933
          },
          {
            "text": "          }",
            "lineNumber": 934
          },
          {
            "text": "          ",
            "lineNumber": 935
          },
          {
            "text": "          // 実労働時間を設定",
            "lineNumber": 936
          },
          {
            "text": "          this.dailyConfirmationForm.actualWorkHours = this.formatHoursMinutes(Math.floor((attendance.ACTUAL_WORK_HOURS || 0) * 60))",
            "lineNumber": 937
          },
          {
            "text": "          ",
            "lineNumber": 938
          },
          {
            "text": "          // 備考を設定",
            "lineNumber": 939
          },
          {
            "text": "          this.dailyConfirmationForm.remark = attendance.REMARK_TEXT || ''",
            "lineNumber": 940
          },
          {
            "text": "        }",
            "lineNumber": 941
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 942
          },
          {
            "text": "        ",
            "lineNumber": 943
          }
        ]
      },
      "score": 0.3339650630950928
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  let previousCumulativeWorkHours = 0;\n  \n  for (let day = 1; day &lt;= daysInMonth; day++) {\n    const workDate = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;;\n    const attendance = attendanceRows.find(row =&gt; normalizeDate(row.WORK_DATE) === workDate);\n    \n    let breakTimeTotal = 0;\n    let actualWorkHours = 0;\n    let overtimeHours = 0;\n    \n    if (attendance) {\n      const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n      breakTimeTotal = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0) / 60;\n      actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;\n      \n      // 月次累積ロジックに基づいて残業時間を計算\n      if (actualWorkHours &gt; 0) {\n        // 月の所定労働時間の残り\n        const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours);\n        // 月の法定労働時間の残り\n        const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours);\n        \n        let scheduledWorkHours = 0;\n        let withinLegalOvertime = 0;\n        let overLegalOvertime = 0;\n        \n        // 前日までの累積が月の所定労働時間以下の場合\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 44
          },
          {
            "text": "  let previousCumulativeWorkHours = 0;",
            "lineNumber": 45
          },
          {
            "text": "  ",
            "lineNumber": 46
          },
          {
            "text": "  for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 47
          },
          {
            "text": "    const workDate = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;;",
            "lineNumber": 48
          },
          {
            "text": "    const attendance = attendanceRows.find(row =&gt; normalizeDate(row.WORK_DATE) === workDate);",
            "lineNumber": 49
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    let breakTimeTotal = 0;",
            "lineNumber": 51
          },
          {
            "text": "    let actualWorkHours = 0;",
            "lineNumber": 52
          },
          {
            "text": "    let overtimeHours = 0;",
            "lineNumber": 53
          },
          {
            "text": "    ",
            "lineNumber": 54
          },
          {
            "text": "    if (attendance) {",
            "lineNumber": 55
          },
          {
            "text": "      const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 56
          },
          {
            "text": "      breakTimeTotal = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0) / 60;",
            "lineNumber": 57
          },
          {
            "text": "      actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;",
            "lineNumber": 58
          },
          {
            "text": "      ",
            "lineNumber": 59
          },
          {
            "text": "      // 月次累積ロジックに基づいて残業時間を計算",
            "lineNumber": 60
          },
          {
            "text": "      if (actualWorkHours &gt; 0) {",
            "lineNumber": 61
          },
          {
            "text": "        // 月の所定労働時間の残り",
            "lineNumber": 62
          },
          {
            "text": "        const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours);",
            "lineNumber": 63
          },
          {
            "text": "        // 月の法定労働時間の残り",
            "lineNumber": 64
          },
          {
            "text": "        const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours);",
            "lineNumber": 65
          },
          {
            "text": "        ",
            "lineNumber": 66
          },
          {
            "text": "        let scheduledWorkHours = 0;",
            "lineNumber": 67
          },
          {
            "text": "        let withinLegalOvertime = 0;",
            "lineNumber": 68
          },
          {
            "text": "        let overLegalOvertime = 0;",
            "lineNumber": 69
          },
          {
            "text": "        ",
            "lineNumber": 70
          },
          {
            "text": "        // 前日までの累積が月の所定労働時間以下の場合",
            "lineNumber": 71
          },
          {
            "text": "  }",
            "lineNumber": 145
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.3329853117465973
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 404
          },
          "endPosition": {
            "line": 426
          }
        },
        "contents": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE\n  | 項目名 | 取得内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |\n  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |\n  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |\n  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |\n  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |\n  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |\n  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |\n  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |\n- 関連する取得仕様\n  - なし\n- 取得条件\n  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月\n  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月\n  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'\n  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）\n- その他\n  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE",
            "lineNumber": 405
          },
          {
            "text": "  | 項目名 | 取得内容 | 補足 |",
            "lineNumber": 406
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 407
          },
          {
            "text": "  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |",
            "lineNumber": 408
          },
          {
            "text": "  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |",
            "lineNumber": 409
          },
          {
            "text": "  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |",
            "lineNumber": 410
          },
          {
            "text": "  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 411
          },
          {
            "text": "  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |",
            "lineNumber": 412
          },
          {
            "text": "  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 413
          },
          {
            "text": "  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |",
            "lineNumber": 414
          },
          {
            "text": "  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |",
            "lineNumber": 415
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 416
          },
          {
            "text": "  - なし",
            "lineNumber": 417
          },
          {
            "text": "- 取得条件",
            "lineNumber": 418
          },
          {
            "text": "  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 419
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月",
            "lineNumber": 420
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月",
            "lineNumber": 421
          },
          {
            "text": "  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 422
          },
          {
            "text": "  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'",
            "lineNumber": 423
          },
          {
            "text": "  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）",
            "lineNumber": 424
          },
          {
            "text": "- その他",
            "lineNumber": 425
          },
          {
            "text": "  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
            "lineNumber": 426
          }
        ]
      },
      "score": 0.3328476548194885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 262
          },
          "endPosition": {
            "line": 282
          }
        },
        "contents": "- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）、テーブル取得仕様 No.2（月間勤務データ取得）、テーブル取得仕様 No.3（月次サマリーデータ取得）、テーブル取得仕様 No.4（休暇情報取得）\n  | 項目名 | 編集内容 | 条件or前提 |\n  | :--- | :--- | :--- |\n  | 対象年月 | 入出力項目定義.対象年月をYYYY年MM月形式に変換 | |\n  | 承認状態 | 月次承認状態に応じて表示（未確定/承認中/承認済み） | |\n  | 部署 | 従業員情報取得.部署 | |\n  | 勤怠体系名 | 従業員情報取得.勤怠体系 | |\n  | 社員コード値 | 従業員情報取得.従業員ID | |\n  | 社員名値 | 従業員情報取得.従業員名 | |\n  | 勤務表行 | 月間勤務データ取得の日次勤務データを30日分表示 | 対象年月の1日から月末日まで |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 日次勤務データ.勤務日の曜日を表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 祝日・休日・有休の場合は該当アイコンを表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 祝日名、勤務状況、備考テキストを表示 | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 出勤時刻が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 退勤時刻が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 日次勤務データ.休憩時間合計をH:MM形式で表示 | 休憩時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 実労働時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）、テーブル取得仕様 No.2（月間勤務データ取得）、テーブル取得仕様 No.3（月次サマリーデータ取得）、テーブル取得仕様 No.4（休暇情報取得）",
            "lineNumber": 263
          },
          {
            "text": "  | 項目名 | 編集内容 | 条件or前提 |",
            "lineNumber": 264
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 265
          },
          {
            "text": "  | 対象年月 | 入出力項目定義.対象年月をYYYY年MM月形式に変換 | |",
            "lineNumber": 266
          },
          {
            "text": "  | 承認状態 | 月次承認状態に応じて表示（未確定/承認中/承認済み） | |",
            "lineNumber": 267
          },
          {
            "text": "  | 部署 | 従業員情報取得.部署 | |",
            "lineNumber": 268
          },
          {
            "text": "  | 勤怠体系名 | 従業員情報取得.勤怠体系 | |",
            "lineNumber": 269
          },
          {
            "text": "  | 社員コード値 | 従業員情報取得.従業員ID | |",
            "lineNumber": 270
          },
          {
            "text": "  | 社員名値 | 従業員情報取得.従業員名 | |",
            "lineNumber": 271
          },
          {
            "text": "  | 勤務表行 | 月間勤務データ取得の日次勤務データを30日分表示 | 対象年月の1日から月末日まで |",
            "lineNumber": 272
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |",
            "lineNumber": 273
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 日次勤務データ.勤務日の曜日を表示 | |",
            "lineNumber": 274
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 祝日・休日・有休の場合は該当アイコンを表示 | |",
            "lineNumber": 275
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 祝日名、勤務状況、備考テキストを表示 | |",
            "lineNumber": 276
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 出勤時刻が存在する場合のみ |",
            "lineNumber": 277
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 退勤時刻が存在する場合のみ |",
            "lineNumber": 278
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 日次勤務データ.休憩時間合計をH:MM形式で表示 | 休憩時間が存在する場合のみ |",
            "lineNumber": 279
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 実労働時間が存在する場合のみ |",
            "lineNumber": 280
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |",
            "lineNumber": 281
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |",
            "lineNumber": 282
          }
        ]
      },
      "score": 0.3327825963497162
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 52
          },
          "endPosition": {
            "line": 66
          }
        },
        "contents": "| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| 24 | 備考 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |\n| | &lt;テーブル行部分&gt; | | | | | | | | | | | |\n| 25 | 勤務表テーブル | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |\n| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録（30日分） |\n| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |\n| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日 |\n| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 所定休日（○：勤務表画面のテーブルでいえば土と祝日、青い背景色）、法定休日（◎：日曜日、赤い背景色）、有休計画付与日（△）のアイコン |\n| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | 祝日名、勤務状況（日次確定-在宅、日次確定-出勤、在宅など）、備考テキスト |\n| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 出社時刻。記録がない場合は表示しない |\n| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 退社時刻。記録がない場合は表示しない |\n| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |\n| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 53
          },
          {
            "text": "| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 54
          },
          {
            "text": "| 24 | 備考 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |",
            "lineNumber": 55
          },
          {
            "text": "| | &lt;テーブル行部分&gt; | | | | | | | | | | | |",
            "lineNumber": 56
          },
          {
            "text": "| 25 | 勤務表テーブル | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |",
            "lineNumber": 57
          },
          {
            "text": "| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録（30日分） |",
            "lineNumber": 58
          },
          {
            "text": "| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |",
            "lineNumber": 59
          },
          {
            "text": "| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日 |",
            "lineNumber": 60
          },
          {
            "text": "| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 所定休日（○：勤務表画面のテーブルでいえば土と祝日、青い背景色）、法定休日（◎：日曜日、赤い背景色）、有休計画付与日（△）のアイコン |",
            "lineNumber": 61
          },
          {
            "text": "| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | 祝日名、勤務状況（日次確定-在宅、日次確定-出勤、在宅など）、備考テキスト |",
            "lineNumber": 62
          },
          {
            "text": "| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 出社時刻。記録がない場合は表示しない |",
            "lineNumber": 63
          },
          {
            "text": "| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 退社時刻。記録がない場合は表示しない |",
            "lineNumber": 64
          },
          {
            "text": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |",
            "lineNumber": 65
          },
          {
            "text": "| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |",
            "lineNumber": 66
          }
        ]
      },
      "score": 0.33250004053115845
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1418
          },
          "endPosition": {
            "line": 1465
          }
        },
        "contents": "    showStatusDialog() {\n      console.log('ステータスダイアログを表示')\n      // TODO: ステータスダイアログの表示\n      alert(&#96;月次承認状態: ${this.statusText}\\n\\n※ステータスダイアログは今後実装予定です&#96;)\n    },\n    \n    // 承認申請ボタン押下処理\n    showApprovalRequest() {\n      console.log('承認申請画面へ遷移')\n      // TODO: 承認申請画面への遷移\n    },\n    \n    // サンプルデータの読み込み\n    loadSampleData() {\n      const sampleData = []\n      const [year, month] = this.selectedYearMonth.split('-').map(Number)\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n        \n        // 祝日判定\n        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;\n        const holiday = HolidayJp.isHoliday(date)\n        \n        // 日付表示を数字部分と曜日部分に分ける\n        let dateNumber = ''\n        let dateDayOfWeek = ''\n        \n        if (day === 1) {\n          // 月初めの日のみMM/DD形式\n          dateNumber = &#96;${Number(month)}/${day}&#96;\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        } else {\n          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる\n          const dayStr = String(day).padStart(2, ' ')\n          dateNumber = dayStr\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        }\n        \n        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）\n        const breakTimes = []\n        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {\n          breakTimes.push({\n            startTime: '12:00',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    showStatusDialog() {",
            "lineNumber": 1419
          },
          {
            "text": "      console.log('ステータスダイアログを表示')",
            "lineNumber": 1420
          },
          {
            "text": "      // TODO: ステータスダイアログの表示",
            "lineNumber": 1421
          },
          {
            "text": "      alert(&#96;月次承認状態: ${this.statusText}\\n\\n※ステータスダイアログは今後実装予定です&#96;)",
            "lineNumber": 1422
          },
          {
            "text": "    },",
            "lineNumber": 1423
          },
          {
            "text": "    ",
            "lineNumber": 1424
          },
          {
            "text": "    // 承認申請ボタン押下処理",
            "lineNumber": 1425
          },
          {
            "text": "    showApprovalRequest() {",
            "lineNumber": 1426
          },
          {
            "text": "      console.log('承認申請画面へ遷移')",
            "lineNumber": 1427
          },
          {
            "text": "      // TODO: 承認申請画面への遷移",
            "lineNumber": 1428
          },
          {
            "text": "    },",
            "lineNumber": 1429
          },
          {
            "text": "    ",
            "lineNumber": 1430
          },
          {
            "text": "    // サンプルデータの読み込み",
            "lineNumber": 1431
          },
          {
            "text": "    loadSampleData() {",
            "lineNumber": 1432
          },
          {
            "text": "      const sampleData = []",
            "lineNumber": 1433
          },
          {
            "text": "      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
            "lineNumber": 1434
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 1435
          },
          {
            "text": "      ",
            "lineNumber": 1436
          },
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 1437
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 1438
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 1439
          },
          {
            "text": "        const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 1440
          },
          {
            "text": "        ",
            "lineNumber": 1441
          },
          {
            "text": "        // 祝日判定",
            "lineNumber": 1442
          },
          {
            "text": "        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;",
            "lineNumber": 1443
          },
          {
            "text": "        const holiday = HolidayJp.isHoliday(date)",
            "lineNumber": 1444
          },
          {
            "text": "        ",
            "lineNumber": 1445
          },
          {
            "text": "        // 日付表示を数字部分と曜日部分に分ける",
            "lineNumber": 1446
          },
          {
            "text": "        let dateNumber = ''",
            "lineNumber": 1447
          },
          {
            "text": "        let dateDayOfWeek = ''",
            "lineNumber": 1448
          },
          {
            "text": "        ",
            "lineNumber": 1449
          },
          {
            "text": "        if (day === 1) {",
            "lineNumber": 1450
          },
          {
            "text": "          // 月初めの日のみMM/DD形式",
            "lineNumber": 1451
          },
          {
            "text": "          dateNumber = &#96;${Number(month)}/${day}&#96;",
            "lineNumber": 1452
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1453
          },
          {
            "text": "        } else {",
            "lineNumber": 1454
          },
          {
            "text": "          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる",
            "lineNumber": 1455
          },
          {
            "text": "          const dayStr = String(day).padStart(2, ' ')",
            "lineNumber": 1456
          },
          {
            "text": "          dateNumber = dayStr",
            "lineNumber": 1457
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1458
          },
          {
            "text": "        }",
            "lineNumber": 1459
          },
          {
            "text": "        ",
            "lineNumber": 1460
          },
          {
            "text": "        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）",
            "lineNumber": 1461
          },
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1462
          },
          {
            "text": "        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {",
            "lineNumber": 1463
          },
          {
            "text": "          breakTimes.push({",
            "lineNumber": 1464
          },
          {
            "text": "            startTime: '12:00',",
            "lineNumber": 1465
          }
        ]
      },
      "score": 0.33114349842071533
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 310
          },
          "endPosition": {
            "line": 329
          }
        },
        "contents": "  | コア時間内の私用外出回数・時間値 | 月次サマリーデータ取得.コア時間内の私用外出回数と時間を「XX回 XX:XX」形式で表示 | |\n  | 有給取得日数値 | 休暇情報取得.有給取得日数を「XX 日」形式で表示 | |\n  | [内訳]（有給取得日数） | 休暇情報取得.有給取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.有給取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |\n  | 代休取得日数値 | 休暇情報取得.代休取得日数をH:MM形式で表示 | |\n  | [内訳]（代休取得日数） | 休暇情報取得.代休取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.代休取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |\n  | 無給休暇日数値 | 休暇情報取得.無給休暇日数を「XX 日」形式で表示 | |\n  | [内訳]（無給休暇日数） | 休暇情報取得.無給休暇日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.無給休暇日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |\n  | 有給残日数 | 対象年月の月末日時点の有給残日数を表示（例: 有休残日数(12/31時点)） | |\n  | 有給残日数値 | 休暇情報取得.有給残日数を「XX 日」形式で表示 | 対象年月の月末日時点の有給残日数 |\n  | 計画付与予定日 | 対象年月の次月以降の計画付与予定日を表示（例: 2026年01月度以降の 計画付与予定日。12月の場合は来年1月以降） | |\n  | 計画付与予定日値 | 休暇情報取得.計画付与予定日を「XX 日」形式で表示 | 対象年月の次月以降の計画付与予定日 |\n\n## チェック仕様\n\n#### No.1\n- チェック仕様：入力チェック\n- 分類：単項目チェック\n- 取得元：入出力項目定義\n  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  | コア時間内の私用外出回数・時間値 | 月次サマリーデータ取得.コア時間内の私用外出回数と時間を「XX回 XX:XX」形式で表示 | |",
            "lineNumber": 311
          },
          {
            "text": "  | 有給取得日数値 | 休暇情報取得.有給取得日数を「XX 日」形式で表示 | |",
            "lineNumber": 312
          },
          {
            "text": "  | [内訳]（有給取得日数） | 休暇情報取得.有給取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.有給取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |",
            "lineNumber": 313
          },
          {
            "text": "  | 代休取得日数値 | 休暇情報取得.代休取得日数をH:MM形式で表示 | |",
            "lineNumber": 314
          },
          {
            "text": "  | [内訳]（代休取得日数） | 休暇情報取得.代休取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.代休取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |",
            "lineNumber": 315
          },
          {
            "text": "  | 無給休暇日数値 | 休暇情報取得.無給休暇日数を「XX 日」形式で表示 | |",
            "lineNumber": 316
          },
          {
            "text": "  | [内訳]（無給休暇日数） | 休暇情報取得.無給休暇日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.無給休暇日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |",
            "lineNumber": 317
          },
          {
            "text": "  | 有給残日数 | 対象年月の月末日時点の有給残日数を表示（例: 有休残日数(12/31時点)） | |",
            "lineNumber": 318
          },
          {
            "text": "  | 有給残日数値 | 休暇情報取得.有給残日数を「XX 日」形式で表示 | 対象年月の月末日時点の有給残日数 |",
            "lineNumber": 319
          },
          {
            "text": "  | 計画付与予定日 | 対象年月の次月以降の計画付与予定日を表示（例: 2026年01月度以降の 計画付与予定日。12月の場合は来年1月以降） | |",
            "lineNumber": 320
          },
          {
            "text": "  | 計画付与予定日値 | 休暇情報取得.計画付与予定日を「XX 日」形式で表示 | 対象年月の次月以降の計画付与予定日 |",
            "lineNumber": 321
          },
          {
            "lineNumber": 322
          },
          {
            "text": "## チェック仕様",
            "lineNumber": 323
          },
          {
            "lineNumber": 324
          },
          {
            "text": "#### No.1",
            "lineNumber": 325
          },
          {
            "text": "- チェック仕様：入力チェック",
            "lineNumber": 326
          },
          {
            "text": "- 分類：単項目チェック",
            "lineNumber": 327
          },
          {
            "text": "- 取得元：入出力項目定義",
            "lineNumber": 328
          },
          {
            "text": "  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |",
            "lineNumber": 329
          }
        ]
      },
      "score": 0.3271285891532898
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 615
          },
          "endPosition": {
            "line": 658
          }
        },
        "contents": "      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土曜日または日曜日の場合\n      if (dayOfWeek === 0 || dayOfWeek === 6) {\n        return true\n      }\n      \n      // 祝日判定（HolidayJpライブラリを使用）\n      try {\n        return HolidayJp.isHoliday(date)\n      } catch (error) {\n        console.error('祝日判定エラー:', error)\n        return false\n      }\n    },\n    // 対象日が平日かどうかを判定\n    isWeekday() {\n      return !this.isHoliday\n    },\n    // 出社と退社の両方の打刻時刻が未入力かどうか\n    isBothClockTimesEmpty() {\n      if (!this.attendanceData) return true\n      return !this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME\n    },\n    // 出社の打刻時刻は入力されているが退社の打刻時刻が未入力かどうか\n    isClockOutTimeEmpty() {\n      if (!this.attendanceData) return false\n      return !!this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME\n    },\n    // 打刻時刻が未入力または退社時刻が未入力の場合（非活性条件）\n    isClockTimeIncomplete() {\n      // attendanceDataがnullの場合はtrueを返す\n      if (!this.attendanceData) return true\n      // 両方の時刻が未入力の場合（null、undefined、空文字列をチェック）\n      const hasClockIn = this.attendanceData.CLOCK_IN_TIME &amp;&amp; \n                         this.attendanceData.CLOCK_IN_TIME !== null &amp;&amp; \n                         this.attendanceData.CLOCK_IN_TIME !== ''\n      const hasClockOut = this.attendanceData.CLOCK_OUT_TIME &amp;&amp; \n                          this.attendanceData.CLOCK_OUT_TIME !== null &amp;&amp; \n                          this.attendanceData.CLOCK_OUT_TIME !== ''\n      \n      if (!hasClockIn &amp;&amp; !hasClockOut) return true\n      // 出社時刻はあるが退社時刻が未入力の場合",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 616
          },
          {
            "text": "      ",
            "lineNumber": 617
          },
          {
            "text": "      // 土曜日または日曜日の場合",
            "lineNumber": 618
          },
          {
            "text": "      if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 619
          },
          {
            "text": "        return true",
            "lineNumber": 620
          },
          {
            "text": "      }",
            "lineNumber": 621
          },
          {
            "text": "      ",
            "lineNumber": 622
          },
          {
            "text": "      // 祝日判定（HolidayJpライブラリを使用）",
            "lineNumber": 623
          },
          {
            "text": "      try {",
            "lineNumber": 624
          },
          {
            "text": "        return HolidayJp.isHoliday(date)",
            "lineNumber": 625
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 626
          },
          {
            "text": "        console.error('祝日判定エラー:', error)",
            "lineNumber": 627
          },
          {
            "text": "        return false",
            "lineNumber": 628
          },
          {
            "text": "      }",
            "lineNumber": 629
          },
          {
            "text": "    },",
            "lineNumber": 630
          },
          {
            "text": "    // 対象日が平日かどうかを判定",
            "lineNumber": 631
          },
          {
            "text": "    isWeekday() {",
            "lineNumber": 632
          },
          {
            "text": "      return !this.isHoliday",
            "lineNumber": 633
          },
          {
            "text": "    },",
            "lineNumber": 634
          },
          {
            "text": "    // 出社と退社の両方の打刻時刻が未入力かどうか",
            "lineNumber": 635
          },
          {
            "text": "    isBothClockTimesEmpty() {",
            "lineNumber": 636
          },
          {
            "text": "      if (!this.attendanceData) return true",
            "lineNumber": 637
          },
          {
            "text": "      return !this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME",
            "lineNumber": 638
          },
          {
            "text": "    },",
            "lineNumber": 639
          },
          {
            "text": "    // 出社の打刻時刻は入力されているが退社の打刻時刻が未入力かどうか",
            "lineNumber": 640
          },
          {
            "text": "    isClockOutTimeEmpty() {",
            "lineNumber": 641
          },
          {
            "text": "      if (!this.attendanceData) return false",
            "lineNumber": 642
          },
          {
            "text": "      return !!this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME",
            "lineNumber": 643
          },
          {
            "text": "    },",
            "lineNumber": 644
          },
          {
            "text": "    // 打刻時刻が未入力または退社時刻が未入力の場合（非活性条件）",
            "lineNumber": 645
          },
          {
            "text": "    isClockTimeIncomplete() {",
            "lineNumber": 646
          },
          {
            "text": "      // attendanceDataがnullの場合はtrueを返す",
            "lineNumber": 647
          },
          {
            "text": "      if (!this.attendanceData) return true",
            "lineNumber": 648
          },
          {
            "text": "      // 両方の時刻が未入力の場合（null、undefined、空文字列をチェック）",
            "lineNumber": 649
          },
          {
            "text": "      const hasClockIn = this.attendanceData.CLOCK_IN_TIME &amp;&amp; ",
            "lineNumber": 650
          },
          {
            "text": "                         this.attendanceData.CLOCK_IN_TIME !== null &amp;&amp; ",
            "lineNumber": 651
          },
          {
            "text": "                         this.attendanceData.CLOCK_IN_TIME !== ''",
            "lineNumber": 652
          },
          {
            "text": "      const hasClockOut = this.attendanceData.CLOCK_OUT_TIME &amp;&amp; ",
            "lineNumber": 653
          },
          {
            "text": "                          this.attendanceData.CLOCK_OUT_TIME !== null &amp;&amp; ",
            "lineNumber": 654
          },
          {
            "text": "                          this.attendanceData.CLOCK_OUT_TIME !== ''",
            "lineNumber": 655
          },
          {
            "text": "      ",
            "lineNumber": 656
          },
          {
            "text": "      if (!hasClockIn &amp;&amp; !hasClockOut) return true",
            "lineNumber": 657
          },
          {
            "text": "      // 出社時刻はあるが退社時刻が未入力の場合",
            "lineNumber": 658
          }
        ]
      },
      "score": 0.32440483570098877
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 178
          },
          "endPosition": {
            "line": 197
          }
        },
        "contents": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |\n| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間合計 | 小数 | 正常 | | BREAK_TIMEの合計 |\n| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | | OVERTIME_HOURS |\n| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | | HOLIDAY_WORK_HOURS |\n| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS |\n| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |\n| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |\n| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |\n| 16 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |\n| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |\n| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS |\n| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日出勤日数 | 整数 | 正常 | | 法定休日に出勤した日数 |\n| 20 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定休日出勤日数 | 整数 | 正常 | | 所定休日に出勤した日数 |\n| 21 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | | SCHEDULED_WORK_HOURS（時間単位） |\n| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 小数 | 正常 | | TOTAL_WORK_HOURS（時間単位） |\n| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間-法定休日労働 | 小数 | 正常 | | 総労働時間から法定休日労働を除いた時間（時間単位） |\n| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 小数 | 正常 | | OVER_UNDER_HOURS（時間単位） |\n| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;当月度の超過時間 | 小数 | 正常 | | 当月度の超過時間（時間単位） |\n| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;安全配慮上の超過時間 | 小数 | 正常 | | 安全配慮上の超過時間（時間単位） |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |",
            "lineNumber": 179
          },
          {
            "text": "| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間合計 | 小数 | 正常 | | BREAK_TIMEの合計 |",
            "lineNumber": 180
          },
          {
            "text": "| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残業時間 | 小数 | 正常 | | OVERTIME_HOURS |",
            "lineNumber": 181
          },
          {
            "text": "| 11 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休日労働時間 | 小数 | 正常 | | HOLIDAY_WORK_HOURS |",
            "lineNumber": 182
          },
          {
            "text": "| 12 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS |",
            "lineNumber": 183
          },
          {
            "text": "| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |",
            "lineNumber": 184
          },
          {
            "text": "| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |",
            "lineNumber": 185
          },
          {
            "text": "| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |",
            "lineNumber": 186
          },
          {
            "text": "| 16 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |",
            "lineNumber": 187
          },
          {
            "text": "| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |",
            "lineNumber": 188
          },
          {
            "text": "| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS |",
            "lineNumber": 189
          },
          {
            "text": "| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;法定休日出勤日数 | 整数 | 正常 | | 法定休日に出勤した日数 |",
            "lineNumber": 190
          },
          {
            "text": "| 20 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定休日出勤日数 | 整数 | 正常 | | 所定休日に出勤した日数 |",
            "lineNumber": 191
          },
          {
            "text": "| 21 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;所定労働時間 | 小数 | 正常 | | SCHEDULED_WORK_HOURS（時間単位） |",
            "lineNumber": 192
          },
          {
            "text": "| 22 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間 | 小数 | 正常 | | TOTAL_WORK_HOURS（時間単位） |",
            "lineNumber": 193
          },
          {
            "text": "| 23 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;総労働時間-法定休日労働 | 小数 | 正常 | | 総労働時間から法定休日労働を除いた時間（時間単位） |",
            "lineNumber": 194
          },
          {
            "text": "| 24 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;過不足時間 | 小数 | 正常 | | OVER_UNDER_HOURS（時間単位） |",
            "lineNumber": 195
          },
          {
            "text": "| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;当月度の超過時間 | 小数 | 正常 | | 当月度の超過時間（時間単位） |",
            "lineNumber": 196
          },
          {
            "text": "| 26 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;安全配慮上の超過時間 | 小数 | 正常 | | 安全配慮上の超過時間（時間単位） |",
            "lineNumber": 197
          }
        ]
      },
      "score": 0.3230186700820923
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getMonthlySummaryDetail",
  "path": "backend",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getMonthlySummaryDetail",
    "path": "backend",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "休暇申請の種類や祝日名を取得する処理",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 173
          },
          "endPosition": {
            "line": 228
          }
        },
        "contents": "        &lt;div class=\"form-container\"&gt;\n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;休暇種類 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n            &lt;select v-model=\"vacationForm.vacationType\" @change=\"onVacationTypeChange\"&gt;\n              &lt;option value=\"\"&gt;選択してください&lt;/option&gt;\n              &lt;option v-for=\"type in vacationTypes\" :key=\"type.code\" :value=\"type.code\"&gt;\n                {{ type.name }}\n              &lt;/option&gt;\n            &lt;/select&gt;\n          &lt;/div&gt;\n          \n          &lt;div v-if=\"vacationForm.vacationType === 'PAID_LEAVE'\" class=\"form-group\"&gt;\n            &lt;label&gt;有休残日数&lt;/label&gt;\n            &lt;div class=\"info-text\"&gt;{{ paidLeaveBalance }}日&lt;/div&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;期間 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n            &lt;div class=\"date-range\"&gt;\n              &lt;input \n                type=\"date\" \n                v-model=\"vacationForm.startDate\"\n                class=\"date-input\"\n              /&gt;\n              &lt;span class=\"date-separator\"&gt;～&lt;/span&gt;\n              &lt;input \n                type=\"date\" \n                v-model=\"vacationForm.endDate\"\n                class=\"date-input\"\n              /&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;備考&lt;/label&gt;\n            &lt;textarea \n              v-model=\"vacationForm.reason\"\n              class=\"textarea-input\"\n              rows=\"1\"\n              placeholder=\"休暇取得の理由や備考を入力してください\"\n            &gt;&lt;/textarea&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;連絡先&lt;/label&gt;\n            &lt;input \n              type=\"text\" \n              v-model=\"vacationForm.contact\"\n              class=\"text-input\"\n              placeholder=\"連絡先を入力してください\"\n            /&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-buttons\"&gt;\n            &lt;button class=\"submit-button\" @click=\"submitVacationApplication\"&gt;承認申請&lt;/button&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;div class=\"form-container\"&gt;",
            "lineNumber": 174
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 175
          },
          {
            "text": "            &lt;label&gt;休暇種類 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;",
            "lineNumber": 176
          },
          {
            "text": "            &lt;select v-model=\"vacationForm.vacationType\" @change=\"onVacationTypeChange\"&gt;",
            "lineNumber": 177
          },
          {
            "text": "              &lt;option value=\"\"&gt;選択してください&lt;/option&gt;",
            "lineNumber": 178
          },
          {
            "text": "              &lt;option v-for=\"type in vacationTypes\" :key=\"type.code\" :value=\"type.code\"&gt;",
            "lineNumber": 179
          },
          {
            "text": "                {{ type.name }}",
            "lineNumber": 180
          },
          {
            "text": "              &lt;/option&gt;",
            "lineNumber": 181
          },
          {
            "text": "            &lt;/select&gt;",
            "lineNumber": 182
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 183
          },
          {
            "text": "          ",
            "lineNumber": 184
          },
          {
            "text": "          &lt;div v-if=\"vacationForm.vacationType === 'PAID_LEAVE'\" class=\"form-group\"&gt;",
            "lineNumber": 185
          },
          {
            "text": "            &lt;label&gt;有休残日数&lt;/label&gt;",
            "lineNumber": 186
          },
          {
            "text": "            &lt;div class=\"info-text\"&gt;{{ paidLeaveBalance }}日&lt;/div&gt;",
            "lineNumber": 187
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 188
          },
          {
            "text": "          ",
            "lineNumber": 189
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 190
          },
          {
            "text": "            &lt;label&gt;期間 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;",
            "lineNumber": 191
          },
          {
            "text": "            &lt;div class=\"date-range\"&gt;",
            "lineNumber": 192
          },
          {
            "text": "              &lt;input ",
            "lineNumber": 193
          },
          {
            "text": "                type=\"date\" ",
            "lineNumber": 194
          },
          {
            "text": "                v-model=\"vacationForm.startDate\"",
            "lineNumber": 195
          },
          {
            "text": "                class=\"date-input\"",
            "lineNumber": 196
          },
          {
            "text": "              /&gt;",
            "lineNumber": 197
          },
          {
            "text": "              &lt;span class=\"date-separator\"&gt;～&lt;/span&gt;",
            "lineNumber": 198
          },
          {
            "text": "              &lt;input ",
            "lineNumber": 199
          },
          {
            "text": "                type=\"date\" ",
            "lineNumber": 200
          },
          {
            "text": "                v-model=\"vacationForm.endDate\"",
            "lineNumber": 201
          },
          {
            "text": "                class=\"date-input\"",
            "lineNumber": 202
          },
          {
            "text": "              /&gt;",
            "lineNumber": 203
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 204
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 205
          },
          {
            "text": "          ",
            "lineNumber": 206
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 207
          },
          {
            "text": "            &lt;label&gt;備考&lt;/label&gt;",
            "lineNumber": 208
          },
          {
            "text": "            &lt;textarea ",
            "lineNumber": 209
          },
          {
            "text": "              v-model=\"vacationForm.reason\"",
            "lineNumber": 210
          },
          {
            "text": "              class=\"textarea-input\"",
            "lineNumber": 211
          },
          {
            "text": "              rows=\"1\"",
            "lineNumber": 212
          },
          {
            "text": "              placeholder=\"休暇取得の理由や備考を入力してください\"",
            "lineNumber": 213
          },
          {
            "text": "            &gt;&lt;/textarea&gt;",
            "lineNumber": 214
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 215
          },
          {
            "text": "          ",
            "lineNumber": 216
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 217
          },
          {
            "text": "            &lt;label&gt;連絡先&lt;/label&gt;",
            "lineNumber": 218
          },
          {
            "text": "            &lt;input ",
            "lineNumber": 219
          },
          {
            "text": "              type=\"text\" ",
            "lineNumber": 220
          },
          {
            "text": "              v-model=\"vacationForm.contact\"",
            "lineNumber": 221
          },
          {
            "text": "              class=\"text-input\"",
            "lineNumber": 222
          },
          {
            "text": "              placeholder=\"連絡先を入力してください\"",
            "lineNumber": 223
          },
          {
            "text": "            /&gt;",
            "lineNumber": 224
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 225
          },
          {
            "text": "          ",
            "lineNumber": 226
          },
          {
            "text": "          &lt;div class=\"form-buttons\"&gt;",
            "lineNumber": 227
          },
          {
            "text": "            &lt;button class=\"submit-button\" @click=\"submitVacationApplication\"&gt;承認申請&lt;/button&gt;",
            "lineNumber": 228
          }
        ]
      },
      "score": 0.394520103931427
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 45,
            "column": 2
          },
          "endPosition": {
            "line": 69,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇種別マスタを取得\n * @returns {Promise&lt;Array&gt;} 休暇種別の配列\n */\nconst getVacationTypes = async () =&gt; {\n  const query = &#96;\n    SELECT VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, \n           IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER\n    FROM VACATION_TYPE \n    WHERE IS_ACTIVE = TRUE \n    ORDER BY DISPLAY_ORDER\n  &#96;;\n  \n  const [rows] = await db.execute(query);\n  return rows;\n};\n\n/**\n * お知らせ情報を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} department - 部署\n * @returns {Promise&lt;Array&gt;} お知らせの配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 48
          },
          {
            "text": " * 休暇種別マスタを取得",
            "lineNumber": 49
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇種別の配列",
            "lineNumber": 50
          },
          {
            "text": " */",
            "lineNumber": 51
          },
          {
            "text": "const getVacationTypes = async () =&gt; {",
            "lineNumber": 52
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 53
          },
          {
            "text": "    SELECT VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, ",
            "lineNumber": 54
          },
          {
            "text": "           IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER",
            "lineNumber": 55
          },
          {
            "text": "    FROM VACATION_TYPE ",
            "lineNumber": 56
          },
          {
            "text": "    WHERE IS_ACTIVE = TRUE ",
            "lineNumber": 57
          },
          {
            "text": "    ORDER BY DISPLAY_ORDER",
            "lineNumber": 58
          },
          {
            "text": "  &#96;;",
            "lineNumber": 59
          },
          {
            "text": "  ",
            "lineNumber": 60
          },
          {
            "text": "  const [rows] = await db.execute(query);",
            "lineNumber": 61
          },
          {
            "text": "  return rows;",
            "lineNumber": 62
          },
          {
            "text": "};",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "/**",
            "lineNumber": 65
          },
          {
            "text": " * お知らせ情報を取得",
            "lineNumber": 66
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} department - 部署",
            "lineNumber": 68
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} お知らせの配列",
            "lineNumber": 69
          },
          {
            "text": " */",
            "lineNumber": 70
          }
        ]
      },
      "score": 0.3884983956813812
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 776
          },
          "endPosition": {
            "line": 834
          }
        },
        "contents": "    initializeForms() {\n      // 日次確定申請フォームの初期化\n      this.dailyConfirmationForm = {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      }\n      // エラーメッセージをクリア\n      this.dailyConfirmationError = ''\n      \n      // 各フォームの日付を対象日付で初期化\n      this.vacationForm.startDate = this.targetDate\n      this.vacationForm.endDate = this.targetDate\n      this.holidayWorkForm.startDate = this.targetDate\n      this.holidayWorkForm.endDate = this.targetDate\n      this.overtimeForm.startDate = this.targetDate\n      this.overtimeForm.endDate = this.targetDate\n      this.earlyWorkForm.startDate = this.targetDate\n      this.earlyWorkForm.endDate = this.targetDate\n      this.transferForm.fromDate = this.targetDate\n      this.transferForm.toDate = this.targetDate\n    },\n    \n    async loadVacationTypes() {\n      try {\n        const response = await fetch('http://localhost:3000/api/master/vacation-types')\n        const data = await response.json()\n        if (data.success) {\n          this.vacationTypes = data.vacationTypes.map(type =&gt; ({\n            code: type.VACATION_TYPE_CODE,\n            name: type.VACATION_TYPE_NAME,\n            isPaid: type.IS_PAID\n          }))\n        }\n      } catch (error) {\n        console.error('休暇種別マスタ取得エラー:', error)\n      }\n    },\n    \n    async loadPaidLeaveBalance() {\n      try {\n        const response = await fetch(\n          &#96;http://localhost:3000/api/attendance/vacation/balance?employeeId=${this.employeeId}&amp;vacationTypeCode=PAID_LEAVE&#96;\n        )\n        const data = await response.json()\n        if (data.success) {\n          this.paidLeaveBalance = data.balance || 0\n        }\n      } catch (error) {\n        console.error('有給残日数取得エラー:', error)\n      }\n    },\n    \n    async loadHolidayWorkStatus() {\n      try {\n        const response = await getHolidayWorkStatus(this.employeeId, this.targetDate)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    initializeForms() {",
            "lineNumber": 777
          },
          {
            "text": "      // 日次確定申請フォームの初期化",
            "lineNumber": 778
          },
          {
            "text": "      this.dailyConfirmationForm = {",
            "lineNumber": 779
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 780
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 781
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 782
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 783
          },
          {
            "text": "        remark: ''",
            "lineNumber": 784
          },
          {
            "text": "      }",
            "lineNumber": 785
          },
          {
            "text": "      // エラーメッセージをクリア",
            "lineNumber": 786
          },
          {
            "text": "      this.dailyConfirmationError = ''",
            "lineNumber": 787
          },
          {
            "text": "      ",
            "lineNumber": 788
          },
          {
            "text": "      // 各フォームの日付を対象日付で初期化",
            "lineNumber": 789
          },
          {
            "text": "      this.vacationForm.startDate = this.targetDate",
            "lineNumber": 790
          },
          {
            "text": "      this.vacationForm.endDate = this.targetDate",
            "lineNumber": 791
          },
          {
            "text": "      this.holidayWorkForm.startDate = this.targetDate",
            "lineNumber": 792
          },
          {
            "text": "      this.holidayWorkForm.endDate = this.targetDate",
            "lineNumber": 793
          },
          {
            "text": "      this.overtimeForm.startDate = this.targetDate",
            "lineNumber": 794
          },
          {
            "text": "      this.overtimeForm.endDate = this.targetDate",
            "lineNumber": 795
          },
          {
            "text": "      this.earlyWorkForm.startDate = this.targetDate",
            "lineNumber": 796
          },
          {
            "text": "      this.earlyWorkForm.endDate = this.targetDate",
            "lineNumber": 797
          },
          {
            "text": "      this.transferForm.fromDate = this.targetDate",
            "lineNumber": 798
          },
          {
            "text": "      this.transferForm.toDate = this.targetDate",
            "lineNumber": 799
          },
          {
            "text": "    },",
            "lineNumber": 800
          },
          {
            "text": "    ",
            "lineNumber": 801
          },
          {
            "text": "    async loadVacationTypes() {",
            "lineNumber": 802
          },
          {
            "text": "      try {",
            "lineNumber": 803
          },
          {
            "text": "        const response = await fetch('http://localhost:3000/api/master/vacation-types')",
            "lineNumber": 804
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 805
          },
          {
            "text": "        if (data.success) {",
            "lineNumber": 806
          },
          {
            "text": "          this.vacationTypes = data.vacationTypes.map(type =&gt; ({",
            "lineNumber": 807
          },
          {
            "text": "            code: type.VACATION_TYPE_CODE,",
            "lineNumber": 808
          },
          {
            "text": "            name: type.VACATION_TYPE_NAME,",
            "lineNumber": 809
          },
          {
            "text": "            isPaid: type.IS_PAID",
            "lineNumber": 810
          },
          {
            "text": "          }))",
            "lineNumber": 811
          },
          {
            "text": "        }",
            "lineNumber": 812
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 813
          },
          {
            "text": "        console.error('休暇種別マスタ取得エラー:', error)",
            "lineNumber": 814
          },
          {
            "text": "      }",
            "lineNumber": 815
          },
          {
            "text": "    },",
            "lineNumber": 816
          },
          {
            "text": "    ",
            "lineNumber": 817
          },
          {
            "text": "    async loadPaidLeaveBalance() {",
            "lineNumber": 818
          },
          {
            "text": "      try {",
            "lineNumber": 819
          },
          {
            "text": "        const response = await fetch(",
            "lineNumber": 820
          },
          {
            "text": "          &#96;http://localhost:3000/api/attendance/vacation/balance?employeeId=${this.employeeId}&amp;vacationTypeCode=PAID_LEAVE&#96;",
            "lineNumber": 821
          },
          {
            "text": "        )",
            "lineNumber": 822
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 823
          },
          {
            "text": "        if (data.success) {",
            "lineNumber": 824
          },
          {
            "text": "          this.paidLeaveBalance = data.balance || 0",
            "lineNumber": 825
          },
          {
            "text": "        }",
            "lineNumber": 826
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 827
          },
          {
            "text": "        console.error('有給残日数取得エラー:', error)",
            "lineNumber": 828
          },
          {
            "text": "      }",
            "lineNumber": 829
          },
          {
            "text": "    },",
            "lineNumber": 830
          },
          {
            "text": "    ",
            "lineNumber": 831
          },
          {
            "text": "    async loadHolidayWorkStatus() {",
            "lineNumber": 832
          },
          {
            "text": "      try {",
            "lineNumber": 833
          },
          {
            "text": "        const response = await getHolidayWorkStatus(this.employeeId, this.targetDate)",
            "lineNumber": 834
          }
        ]
      },
      "score": 0.37704789638519287
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\applicationService.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52,
            "column": 3
          }
        },
        "contents": "/**\n * 申請サービス\n */\nconst applicationModel = require('../models/applicationModel');\nconst { getNow, calculateDays } = require('../utils/dateUtils');\n\n/**\n * 休暇申請\n * @param {Object} vacationData - 休暇申請データ\n * @returns {Promise&lt;number&gt;} 作成されたVACATION_ID\n */\nconst applyVacation = async (vacationData) =&gt; {\n  const {\n    employeeId,\n    vacationTypeCode,\n    startDate,\n    endDate,\n    reason,\n    contact\n  } = vacationData;\n  \n  // 日数を計算\n  const vacationDays = calculateDays(startDate, endDate);\n  \n  // 有給休暇の場合、残日数チェック\n  if (vacationTypeCode === 'PAID_LEAVE') {\n    const remainingDays = await applicationModel.getVacationBalance(employeeId, vacationTypeCode);\n    if (vacationDays &gt; remainingDays) {\n      throw new Error('有給休暇の残日数が不足しています。');\n    }\n  }\n  \n  const now = getNow();\n  \n  return await applicationModel.createVacation({\n    employeeId,\n    vacationTypeCode,\n    startDate,\n    endDate,\n    vacationDays,\n    reason,\n    contactInfo: contact,\n    approvalStatus: 'PENDING',\n    createdAt: now,\n    updatedAt: now\n  });\n};\n\n/**\n * 休日出勤申請\n * @param {Object} applicationData - 申請データ\n * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 申請サービス",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const applicationModel = require('../models/applicationModel');",
            "lineNumber": 4
          },
          {
            "text": "const { getNow, calculateDays } = require('../utils/dateUtils');",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "/**",
            "lineNumber": 7
          },
          {
            "text": " * 休暇申請",
            "lineNumber": 8
          },
          {
            "text": " * @param {Object} vacationData - 休暇申請データ",
            "lineNumber": 9
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたVACATION_ID",
            "lineNumber": 10
          },
          {
            "text": " */",
            "lineNumber": 11
          },
          {
            "text": "const applyVacation = async (vacationData) =&gt; {",
            "lineNumber": 12
          },
          {
            "text": "  const {",
            "lineNumber": 13
          },
          {
            "text": "    employeeId,",
            "lineNumber": 14
          },
          {
            "text": "    vacationTypeCode,",
            "lineNumber": 15
          },
          {
            "text": "    startDate,",
            "lineNumber": 16
          },
          {
            "text": "    endDate,",
            "lineNumber": 17
          },
          {
            "text": "    reason,",
            "lineNumber": 18
          },
          {
            "text": "    contact",
            "lineNumber": 19
          },
          {
            "text": "  } = vacationData;",
            "lineNumber": 20
          },
          {
            "text": "  ",
            "lineNumber": 21
          },
          {
            "text": "  // 日数を計算",
            "lineNumber": 22
          },
          {
            "text": "  const vacationDays = calculateDays(startDate, endDate);",
            "lineNumber": 23
          },
          {
            "text": "  ",
            "lineNumber": 24
          },
          {
            "text": "  // 有給休暇の場合、残日数チェック",
            "lineNumber": 25
          },
          {
            "text": "  if (vacationTypeCode === 'PAID_LEAVE') {",
            "lineNumber": 26
          },
          {
            "text": "    const remainingDays = await applicationModel.getVacationBalance(employeeId, vacationTypeCode);",
            "lineNumber": 27
          },
          {
            "text": "    if (vacationDays &gt; remainingDays) {",
            "lineNumber": 28
          },
          {
            "text": "      throw new Error('有給休暇の残日数が不足しています。');",
            "lineNumber": 29
          },
          {
            "text": "    }",
            "lineNumber": 30
          },
          {
            "text": "  }",
            "lineNumber": 31
          },
          {
            "text": "  ",
            "lineNumber": 32
          },
          {
            "text": "  const now = getNow();",
            "lineNumber": 33
          },
          {
            "text": "  ",
            "lineNumber": 34
          },
          {
            "text": "  return await applicationModel.createVacation({",
            "lineNumber": 35
          },
          {
            "text": "    employeeId,",
            "lineNumber": 36
          },
          {
            "text": "    vacationTypeCode,",
            "lineNumber": 37
          },
          {
            "text": "    startDate,",
            "lineNumber": 38
          },
          {
            "text": "    endDate,",
            "lineNumber": 39
          },
          {
            "text": "    vacationDays,",
            "lineNumber": 40
          },
          {
            "text": "    reason,",
            "lineNumber": 41
          },
          {
            "text": "    contactInfo: contact,",
            "lineNumber": 42
          },
          {
            "text": "    approvalStatus: 'PENDING',",
            "lineNumber": 43
          },
          {
            "text": "    createdAt: now,",
            "lineNumber": 44
          },
          {
            "text": "    updatedAt: now",
            "lineNumber": 45
          },
          {
            "text": "  });",
            "lineNumber": 46
          },
          {
            "text": "};",
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "/**",
            "lineNumber": 49
          },
          {
            "text": " * 休日出勤申請",
            "lineNumber": 50
          },
          {
            "text": " * @param {Object} applicationData - 申請データ",
            "lineNumber": 51
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID",
            "lineNumber": 52
          },
          {
            "text": " */",
            "lineNumber": 53
          }
        ]
      },
      "score": 0.37666773796081543
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 530
          },
          "endPosition": {
            "line": 579
          }
        },
        "contents": "- テーブル名：ATTENDANCE_RECORD\n- 種別：更新\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |\n  | IS_DAILY_CONFIRMED | TRUE | |\n  | DAILY_CONFIRMED_AT | 現在日時 | |\n  | APPROVAL_STATUS | 'PENDING' | |\n  | UPDATED_AT | 現在日時 | |\n- 関連する取得仕様\n  - なし\n- 更新条件\n  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付\n- その他\n  - 日次確定申請時にチェック仕様No.1のチェックを実行\n\n#### No.2\n- 更新仕様名：休暇申請登録\n- テーブル名：VACATION_HISTORY\n- 種別：登録\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | |\n  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | |\n  | START_DATE | 画面項目定義.開始日 | |\n  | END_DATE | 画面項目定義.終了日 | |\n  | VACATION_DAYS | 計算値（終了日-開始日+1） | |\n  | REASON | 画面項目定義.備考 | |\n  | APPROVAL_STATUS | 'PENDING' | |\n  | CREATED_AT | 現在日時 | |\n  | UPDATED_AT | 現在日時 | |\n- 関連する取得仕様\n  - なし\n- 更新条件\n  - なし（新規登録）\n- その他\n  - 休暇申請時にチェック仕様No.2のチェックを実行\n\n## API利用仕様\n\n#### No.1\n- API仕様名：休暇種別マスタ取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/master/vacation-types | |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- テーブル名：ATTENDANCE_RECORD",
            "lineNumber": 531
          },
          {
            "text": "- 種別：更新",
            "lineNumber": 532
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 533
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 534
          },
          {
            "text": "  | IS_DAILY_CONFIRMED | TRUE | |",
            "lineNumber": 535
          },
          {
            "text": "  | DAILY_CONFIRMED_AT | 現在日時 | |",
            "lineNumber": 536
          },
          {
            "text": "  | APPROVAL_STATUS | 'PENDING' | |",
            "lineNumber": 537
          },
          {
            "text": "  | UPDATED_AT | 現在日時 | |",
            "lineNumber": 538
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 539
          },
          {
            "text": "  - なし",
            "lineNumber": 540
          },
          {
            "text": "- 更新条件",
            "lineNumber": 541
          },
          {
            "text": "  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 542
          },
          {
            "text": "  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付",
            "lineNumber": 543
          },
          {
            "text": "- その他",
            "lineNumber": 544
          },
          {
            "text": "  - 日次確定申請時にチェック仕様No.1のチェックを実行",
            "lineNumber": 545
          },
          {
            "lineNumber": 546
          },
          {
            "text": "#### No.2",
            "lineNumber": 547
          },
          {
            "text": "- 更新仕様名：休暇申請登録",
            "lineNumber": 548
          },
          {
            "text": "- テーブル名：VACATION_HISTORY",
            "lineNumber": 549
          },
          {
            "text": "- 種別：登録",
            "lineNumber": 550
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 551
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 552
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | |",
            "lineNumber": 553
          },
          {
            "text": "  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | |",
            "lineNumber": 554
          },
          {
            "text": "  | START_DATE | 画面項目定義.開始日 | |",
            "lineNumber": 555
          },
          {
            "text": "  | END_DATE | 画面項目定義.終了日 | |",
            "lineNumber": 556
          },
          {
            "text": "  | VACATION_DAYS | 計算値（終了日-開始日+1） | |",
            "lineNumber": 557
          },
          {
            "text": "  | REASON | 画面項目定義.備考 | |",
            "lineNumber": 558
          },
          {
            "text": "  | APPROVAL_STATUS | 'PENDING' | |",
            "lineNumber": 559
          },
          {
            "text": "  | CREATED_AT | 現在日時 | |",
            "lineNumber": 560
          },
          {
            "text": "  | UPDATED_AT | 現在日時 | |",
            "lineNumber": 561
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 562
          },
          {
            "text": "  - なし",
            "lineNumber": 563
          },
          {
            "text": "- 更新条件",
            "lineNumber": 564
          },
          {
            "text": "  - なし（新規登録）",
            "lineNumber": 565
          },
          {
            "text": "- その他",
            "lineNumber": 566
          },
          {
            "text": "  - 休暇申請時にチェック仕様No.2のチェックを実行",
            "lineNumber": 567
          },
          {
            "lineNumber": 568
          },
          {
            "text": "## API利用仕様",
            "lineNumber": 569
          },
          {
            "lineNumber": 570
          },
          {
            "text": "#### No.1",
            "lineNumber": 571
          },
          {
            "text": "- API仕様名：休暇種別マスタ取得API",
            "lineNumber": 572
          },
          {
            "text": "- リクエスト",
            "lineNumber": 573
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 574
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 575
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 576
          },
          {
            "text": "  | エンドポイント | /api/master/vacation-types | |",
            "lineNumber": 577
          },
          {
            "text": "- レスポンス",
            "lineNumber": 578
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 579
          }
        ]
      },
      "score": 0.37396466732025146
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    legalHolidayWorkDays,\n    scheduledHolidayWorkDays,\n    scheduledWorkHours,\n    totalWorkHours,\n    totalWorkHoursExcludingLegalHoliday,\n    overUnderHours,\n    currentMonthOvertime,\n    safetyOvertime,\n    legalWorkHours,\n    actualWorkHoursExcludingLegalHoliday,\n    withinLegalOvertime,\n    overLegalOvertime,\n    legalHolidayWorkHours,\n    nightWorkHours,\n    overtimeOver45Hours,\n    overtimeOver60Hours,\n    lateCount,\n    lateHours,\n    earlyLeaveCount,\n    earlyLeaveHours,\n    privateOutingCount,\n    privateOutingHours,\n    totalBreakHours\n  };\n  \n  // 4. 休暇情報取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n  \n  // 有給取得日数\n  const paidLeaveDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n  \n  // 有給取得日数内訳\n  let paidLeaveTypeName = '';\n\n  if (paidLeaveDays &gt; 0) {\n    paidLeaveTypeName = '年次有給休暇';\n  }\n\n  // 代休取得日数\n  const substituteHolidayDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n\n  // 代休取得日数内訳\n  let substituteHolidayTypeName = '';\n\n  if (substituteHolidayDays &gt; 0) {\n    substituteHolidayTypeName = '代休';\n  }\n  \n  // 無給休暇日数（簡易的に0とする）\n  const unpaidLeaveDays = 0;\n  const unpaidLeaveTypeName = '';\n  \n  // 有給残日数（月末日時点）\n  const endOfMonth = new Date(year, month, 0);\n  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];\n  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');\n  \n  // 計画付与予定日（次月以降）\n  let nextMonth = { year, month: month + 1 };\n\n  if (month === 12) {\n    nextMonth = { year: year + 1, month: 1 };\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 253
          },
          {
            "text": "  ",
            "lineNumber": 254
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 255
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 256
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 257
          },
          {
            "text": "    legalHolidayWorkDays,",
            "lineNumber": 258
          },
          {
            "text": "    scheduledHolidayWorkDays,",
            "lineNumber": 259
          },
          {
            "text": "    scheduledWorkHours,",
            "lineNumber": 260
          },
          {
            "text": "    totalWorkHours,",
            "lineNumber": 261
          },
          {
            "text": "    totalWorkHoursExcludingLegalHoliday,",
            "lineNumber": 262
          },
          {
            "text": "    overUnderHours,",
            "lineNumber": 263
          },
          {
            "text": "    currentMonthOvertime,",
            "lineNumber": 264
          },
          {
            "text": "    safetyOvertime,",
            "lineNumber": 265
          },
          {
            "text": "    legalWorkHours,",
            "lineNumber": 266
          },
          {
            "text": "    actualWorkHoursExcludingLegalHoliday,",
            "lineNumber": 267
          },
          {
            "text": "    withinLegalOvertime,",
            "lineNumber": 268
          },
          {
            "text": "    overLegalOvertime,",
            "lineNumber": 269
          },
          {
            "text": "    legalHolidayWorkHours,",
            "lineNumber": 270
          },
          {
            "text": "    nightWorkHours,",
            "lineNumber": 271
          },
          {
            "text": "    overtimeOver45Hours,",
            "lineNumber": 272
          },
          {
            "text": "    overtimeOver60Hours,",
            "lineNumber": 273
          },
          {
            "text": "    lateCount,",
            "lineNumber": 274
          },
          {
            "text": "    lateHours,",
            "lineNumber": 275
          },
          {
            "text": "    earlyLeaveCount,",
            "lineNumber": 276
          },
          {
            "text": "    earlyLeaveHours,",
            "lineNumber": 277
          },
          {
            "text": "    privateOutingCount,",
            "lineNumber": 278
          },
          {
            "text": "    privateOutingHours,",
            "lineNumber": 279
          },
          {
            "text": "    totalBreakHours",
            "lineNumber": 280
          },
          {
            "text": "  };",
            "lineNumber": 281
          },
          {
            "text": "  ",
            "lineNumber": 282
          },
          {
            "text": "  // 4. 休暇情報取得",
            "lineNumber": 283
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 284
          },
          {
            "text": "  ",
            "lineNumber": 285
          },
          {
            "text": "  // 有給取得日数",
            "lineNumber": 286
          },
          {
            "text": "  const paidLeaveDays = vacations",
            "lineNumber": 287
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 288
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 289
          },
          {
            "text": "  ",
            "lineNumber": 290
          },
          {
            "text": "  // 有給取得日数内訳",
            "lineNumber": 291
          },
          {
            "text": "  let paidLeaveTypeName = '';",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "  if (paidLeaveDays &gt; 0) {",
            "lineNumber": 294
          },
          {
            "text": "    paidLeaveTypeName = '年次有給休暇';",
            "lineNumber": 295
          },
          {
            "text": "  }",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "  // 代休取得日数",
            "lineNumber": 298
          },
          {
            "text": "  const substituteHolidayDays = vacations",
            "lineNumber": 299
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 300
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 301
          },
          {
            "lineNumber": 302
          },
          {
            "text": "  // 代休取得日数内訳",
            "lineNumber": 303
          },
          {
            "text": "  let substituteHolidayTypeName = '';",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "  if (substituteHolidayDays &gt; 0) {",
            "lineNumber": 306
          },
          {
            "text": "    substituteHolidayTypeName = '代休';",
            "lineNumber": 307
          },
          {
            "text": "  }",
            "lineNumber": 308
          },
          {
            "text": "  ",
            "lineNumber": 309
          },
          {
            "text": "  // 無給休暇日数（簡易的に0とする）",
            "lineNumber": 310
          },
          {
            "text": "  const unpaidLeaveDays = 0;",
            "lineNumber": 311
          },
          {
            "text": "  const unpaidLeaveTypeName = '';",
            "lineNumber": 312
          },
          {
            "text": "  ",
            "lineNumber": 313
          },
          {
            "text": "  // 有給残日数（月末日時点）",
            "lineNumber": 314
          },
          {
            "text": "  const endOfMonth = new Date(year, month, 0);",
            "lineNumber": 315
          },
          {
            "text": "  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];",
            "lineNumber": 316
          },
          {
            "text": "  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');",
            "lineNumber": 317
          },
          {
            "text": "  ",
            "lineNumber": 318
          },
          {
            "text": "  // 計画付与予定日（次月以降）",
            "lineNumber": 319
          },
          {
            "text": "  let nextMonth = { year, month: month + 1 };",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "  if (month === 12) {",
            "lineNumber": 322
          },
          {
            "text": "    nextMonth = { year: year + 1, month: 1 };",
            "lineNumber": 323
          },
          {
            "text": "  }",
            "lineNumber": 324
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.35590800642967224
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 116,
            "column": 14
          },
          "endPosition": {
            "line": 164,
            "column": 10
          }
        },
        "contents": "&lt;div class=\"form-row\"&gt;\n                &lt;label class=\"form-label\"&gt;出退社時刻&lt;/label&gt;\n                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.clockInOut }}&lt;/div&gt;\n              &lt;/div&gt;\n              \n              &lt;div class=\"form-row\"&gt;\n                &lt;label class=\"form-label\"&gt;休憩時間&lt;/label&gt;\n                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.breakTime }}&lt;/div&gt;\n              &lt;/div&gt;\n              \n              &lt;div class=\"form-row\"&gt;\n                &lt;label class=\"form-label\"&gt;総労働時間&lt;/label&gt;\n                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.totalWorkHours }}&lt;/div&gt;\n              &lt;/div&gt;\n              \n              &lt;div class=\"form-row\"&gt;\n                &lt;label class=\"form-label\"&gt;実労働時間&lt;/label&gt;\n                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.actualWorkHours }}&lt;/div&gt;\n              &lt;/div&gt;\n              \n              &lt;div class=\"form-row form-row-textarea\"&gt;\n                &lt;label class=\"form-label\"&gt;備考&lt;/label&gt;\n                &lt;textarea \n                  v-model=\"dailyConfirmationForm.remark\"\n                  class=\"textarea-input daily-confirmation-textarea\"\n                  placeholder=\"備考を入力してください\"\n                  rows=\"3\"\n                &gt;&lt;/textarea&gt;\n              &lt;/div&gt;\n              \n              &lt;!-- エラーメッセージ表示 --&gt;\n              &lt;div v-if=\"dailyConfirmationError\" class=\"form-row\"&gt;\n                &lt;div class=\"daily-confirmation-error-message\"&gt;{{ dailyConfirmationError }}&lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n            \n            &lt;div class=\"daily-confirmation-buttons\"&gt;\n              &lt;button class=\"submit-button daily-confirmation-submit\" @click=\"submitDailyConfirmation\"&gt;承認申請&lt;/button&gt;\n              &lt;button class=\"cancel-link\" @click=\"closeApplicationTab\"&gt;キャンセル&lt;/button&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      \n      &lt;!-- 休暇申請フォーム --&gt;\n      &lt;div v-if=\"currentTab === 'vacation'\" class=\"content-area\"&gt;\n        &lt;!-- タブリスト--&gt;\n        &lt;div class=\"tab-list\"&gt;\n          ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;div class=\"form-row\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                &lt;label class=\"form-label\"&gt;出退社時刻&lt;/label&gt;",
            "lineNumber": 118
          },
          {
            "text": "                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.clockInOut }}&lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "              ",
            "lineNumber": 121
          },
          {
            "text": "              &lt;div class=\"form-row\"&gt;",
            "lineNumber": 122
          },
          {
            "text": "                &lt;label class=\"form-label\"&gt;休憩時間&lt;/label&gt;",
            "lineNumber": 123
          },
          {
            "text": "                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.breakTime }}&lt;/div&gt;",
            "lineNumber": 124
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 125
          },
          {
            "text": "              ",
            "lineNumber": 126
          },
          {
            "text": "              &lt;div class=\"form-row\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                &lt;label class=\"form-label\"&gt;総労働時間&lt;/label&gt;",
            "lineNumber": 128
          },
          {
            "text": "                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.totalWorkHours }}&lt;/div&gt;",
            "lineNumber": 129
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 130
          },
          {
            "text": "              ",
            "lineNumber": 131
          },
          {
            "text": "              &lt;div class=\"form-row\"&gt;",
            "lineNumber": 132
          },
          {
            "text": "                &lt;label class=\"form-label\"&gt;実労働時間&lt;/label&gt;",
            "lineNumber": 133
          },
          {
            "text": "                &lt;div class=\"daily-confirmation-value\"&gt;{{ dailyConfirmationForm.actualWorkHours }}&lt;/div&gt;",
            "lineNumber": 134
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 135
          },
          {
            "text": "              ",
            "lineNumber": 136
          },
          {
            "text": "              &lt;div class=\"form-row form-row-textarea\"&gt;",
            "lineNumber": 137
          },
          {
            "text": "                &lt;label class=\"form-label\"&gt;備考&lt;/label&gt;",
            "lineNumber": 138
          },
          {
            "text": "                &lt;textarea ",
            "lineNumber": 139
          },
          {
            "text": "                  v-model=\"dailyConfirmationForm.remark\"",
            "lineNumber": 140
          },
          {
            "text": "                  class=\"textarea-input daily-confirmation-textarea\"",
            "lineNumber": 141
          },
          {
            "text": "                  placeholder=\"備考を入力してください\"",
            "lineNumber": 142
          },
          {
            "text": "                  rows=\"3\"",
            "lineNumber": 143
          },
          {
            "text": "                &gt;&lt;/textarea&gt;",
            "lineNumber": 144
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 145
          },
          {
            "text": "              ",
            "lineNumber": 146
          },
          {
            "text": "              &lt;!-- エラーメッセージ表示 --&gt;",
            "lineNumber": 147
          },
          {
            "text": "              &lt;div v-if=\"dailyConfirmationError\" class=\"form-row\"&gt;",
            "lineNumber": 148
          },
          {
            "text": "                &lt;div class=\"daily-confirmation-error-message\"&gt;{{ dailyConfirmationError }}&lt;/div&gt;",
            "lineNumber": 149
          },
          {
            "text": "              &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 151
          },
          {
            "text": "            ",
            "lineNumber": 152
          },
          {
            "text": "            &lt;div class=\"daily-confirmation-buttons\"&gt;",
            "lineNumber": 153
          },
          {
            "text": "              &lt;button class=\"submit-button daily-confirmation-submit\" @click=\"submitDailyConfirmation\"&gt;承認申請&lt;/button&gt;",
            "lineNumber": 154
          },
          {
            "text": "              &lt;button class=\"cancel-link\" @click=\"closeApplicationTab\"&gt;キャンセル&lt;/button&gt;",
            "lineNumber": 155
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 156
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 157
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 158
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 159
          },
          {
            "text": "      ",
            "lineNumber": 160
          },
          {
            "text": "      &lt;!-- 休暇申請フォーム --&gt;",
            "lineNumber": 161
          },
          {
            "text": "      &lt;div v-if=\"currentTab === 'vacation'\" class=\"content-area\"&gt;",
            "lineNumber": 162
          },
          {
            "text": "        &lt;!-- タブリスト--&gt;",
            "lineNumber": 163
          },
          {
            "text": "        &lt;div class=\"tab-list\"&gt;",
            "lineNumber": 164
          },
          {
            "text": "          ",
            "lineNumber": 165
          }
        ]
      },
      "score": 0.3496600091457367
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 449
          },
          "endPosition": {
            "line": 541
          }
        },
        "contents": "      &lt;/div&gt;\n      \n      &lt;!-- ローディング表示 --&gt;\n      &lt;div v-if=\"loading\" class=\"loading-overlay\"&gt;\n        &lt;div class=\"loading-spinner\"&gt;&lt;/div&gt;\n        &lt;p&gt;処理中...&lt;/p&gt;\n      &lt;/div&gt;\n      \n      &lt;!-- エラーダイアログ --&gt;\n      &lt;div v-if=\"showErrorDialog\" class=\"error-dialog-overlay\" @click.self=\"closeErrorDialog\"&gt;\n        &lt;div class=\"error-dialog-container\"&gt;\n          &lt;div class=\"error-dialog-header\"&gt;\n            &lt;span class=\"error-dialog-title\"&gt;エラー&lt;/span&gt;\n          &lt;/div&gt;\n          &lt;div class=\"error-dialog-message\"&gt;\n            {{ errorMessage }}\n          &lt;/div&gt;\n          &lt;button class=\"error-dialog-ok-button\" @click=\"closeErrorDialog\"&gt;OK&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport HolidayJp from '@holiday-jp/holiday_jp'\nimport { getHolidayWorkStatus, getWorkHours } from '@/services/api'\n\nexport default {\n  name: 'AttendanceApplicationDialog',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    targetDate: {\n      type: String,\n      required: true\n    },\n    employeeId: {\n      type: String,\n      required: true\n    },\n    initialApplicationType: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      currentTab: 'menu',\n      activeApplicationTab: null,\n      loading: false,\n      showErrorDialog: false,\n      errorMessage: '',\n      \n      // 休暇種別マスタ\n      vacationTypes: [],\n      paidLeaveBalance: 0,\n      // 休日出勤申請状態\n      hasHolidayWorkApplication: false,\n      \n      // 勤怠データ（打刻時刻の状態確認用）\n      attendanceData: null,\n      \n      // 打刻時刻の状態\n      hasClockIn: false,\n      hasClockOut: false,\n      \n      // 選択中のメニュー項目\n      selectedMenuItem: 'dailyConfirmation',\n      \n      // 日次確定申請フォーム\n      dailyConfirmationForm: {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      },\n      // 日次確定申請のエラーメッセージ\n      dailyConfirmationError: '',\n      \n      // 休暇申請フォーム\n      vacationForm: {\n        vacationType: '',\n        startDate: '',\n        endDate: '',\n        reason: '',\n        contact: ''\n      },\n      ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 450
          },
          {
            "text": "      ",
            "lineNumber": 451
          },
          {
            "text": "      &lt;!-- ローディング表示 --&gt;",
            "lineNumber": 452
          },
          {
            "text": "      &lt;div v-if=\"loading\" class=\"loading-overlay\"&gt;",
            "lineNumber": 453
          },
          {
            "text": "        &lt;div class=\"loading-spinner\"&gt;&lt;/div&gt;",
            "lineNumber": 454
          },
          {
            "text": "        &lt;p&gt;処理中...&lt;/p&gt;",
            "lineNumber": 455
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 456
          },
          {
            "text": "      ",
            "lineNumber": 457
          },
          {
            "text": "      &lt;!-- エラーダイアログ --&gt;",
            "lineNumber": 458
          },
          {
            "text": "      &lt;div v-if=\"showErrorDialog\" class=\"error-dialog-overlay\" @click.self=\"closeErrorDialog\"&gt;",
            "lineNumber": 459
          },
          {
            "text": "        &lt;div class=\"error-dialog-container\"&gt;",
            "lineNumber": 460
          },
          {
            "text": "          &lt;div class=\"error-dialog-header\"&gt;",
            "lineNumber": 461
          },
          {
            "text": "            &lt;span class=\"error-dialog-title\"&gt;エラー&lt;/span&gt;",
            "lineNumber": 462
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 463
          },
          {
            "text": "          &lt;div class=\"error-dialog-message\"&gt;",
            "lineNumber": 464
          },
          {
            "text": "            {{ errorMessage }}",
            "lineNumber": 465
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 466
          },
          {
            "text": "          &lt;button class=\"error-dialog-ok-button\" @click=\"closeErrorDialog\"&gt;OK&lt;/button&gt;",
            "lineNumber": 467
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 468
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 469
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 470
          },
          {
            "text": "  &lt;/div&gt;",
            "lineNumber": 471
          },
          {
            "text": "&lt;/template&gt;",
            "lineNumber": 472
          },
          {
            "lineNumber": 473
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 474
          },
          {
            "text": "import HolidayJp from '@holiday-jp/holiday_jp'",
            "lineNumber": 475
          },
          {
            "text": "import { getHolidayWorkStatus, getWorkHours } from '@/services/api'",
            "lineNumber": 476
          },
          {
            "lineNumber": 477
          },
          {
            "text": "export default {",
            "lineNumber": 478
          },
          {
            "text": "  name: 'AttendanceApplicationDialog',",
            "lineNumber": 479
          },
          {
            "text": "  props: {",
            "lineNumber": 480
          },
          {
            "text": "    visible: {",
            "lineNumber": 481
          },
          {
            "text": "      type: Boolean,",
            "lineNumber": 482
          },
          {
            "text": "      default: false",
            "lineNumber": 483
          },
          {
            "text": "    },",
            "lineNumber": 484
          },
          {
            "text": "    targetDate: {",
            "lineNumber": 485
          },
          {
            "text": "      type: String,",
            "lineNumber": 486
          },
          {
            "text": "      required: true",
            "lineNumber": 487
          },
          {
            "text": "    },",
            "lineNumber": 488
          },
          {
            "text": "    employeeId: {",
            "lineNumber": 489
          },
          {
            "text": "      type: String,",
            "lineNumber": 490
          },
          {
            "text": "      required: true",
            "lineNumber": 491
          },
          {
            "text": "    },",
            "lineNumber": 492
          },
          {
            "text": "    initialApplicationType: {",
            "lineNumber": 493
          },
          {
            "text": "      type: String,",
            "lineNumber": 494
          },
          {
            "text": "      default: null",
            "lineNumber": 495
          },
          {
            "text": "    }",
            "lineNumber": 496
          },
          {
            "text": "  },",
            "lineNumber": 497
          },
          {
            "text": "  data() {",
            "lineNumber": 498
          },
          {
            "text": "    return {",
            "lineNumber": 499
          },
          {
            "text": "      currentTab: 'menu',",
            "lineNumber": 500
          },
          {
            "text": "      activeApplicationTab: null,",
            "lineNumber": 501
          },
          {
            "text": "      loading: false,",
            "lineNumber": 502
          },
          {
            "text": "      showErrorDialog: false,",
            "lineNumber": 503
          },
          {
            "text": "      errorMessage: '',",
            "lineNumber": 504
          },
          {
            "text": "      ",
            "lineNumber": 505
          },
          {
            "text": "      // 休暇種別マスタ",
            "lineNumber": 506
          },
          {
            "text": "      vacationTypes: [],",
            "lineNumber": 507
          },
          {
            "text": "      paidLeaveBalance: 0,",
            "lineNumber": 508
          },
          {
            "text": "      // 休日出勤申請状態",
            "lineNumber": 509
          },
          {
            "text": "      hasHolidayWorkApplication: false,",
            "lineNumber": 510
          },
          {
            "text": "      ",
            "lineNumber": 511
          },
          {
            "text": "      // 勤怠データ（打刻時刻の状態確認用）",
            "lineNumber": 512
          },
          {
            "text": "      attendanceData: null,",
            "lineNumber": 513
          },
          {
            "text": "      ",
            "lineNumber": 514
          },
          {
            "text": "      // 打刻時刻の状態",
            "lineNumber": 515
          },
          {
            "text": "      hasClockIn: false,",
            "lineNumber": 516
          },
          {
            "text": "      hasClockOut: false,",
            "lineNumber": 517
          },
          {
            "text": "      ",
            "lineNumber": 518
          },
          {
            "text": "      // 選択中のメニュー項目",
            "lineNumber": 519
          },
          {
            "text": "      selectedMenuItem: 'dailyConfirmation',",
            "lineNumber": 520
          },
          {
            "text": "      ",
            "lineNumber": 521
          },
          {
            "text": "      // 日次確定申請フォーム",
            "lineNumber": 522
          },
          {
            "text": "      dailyConfirmationForm: {",
            "lineNumber": 523
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 524
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 525
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 526
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 527
          },
          {
            "text": "        remark: ''",
            "lineNumber": 528
          },
          {
            "text": "      },",
            "lineNumber": 529
          },
          {
            "text": "      // 日次確定申請のエラーメッセージ",
            "lineNumber": 530
          },
          {
            "text": "      dailyConfirmationError: '',",
            "lineNumber": 531
          },
          {
            "text": "      ",
            "lineNumber": 532
          },
          {
            "text": "      // 休暇申請フォーム",
            "lineNumber": 533
          },
          {
            "text": "      vacationForm: {",
            "lineNumber": 534
          },
          {
            "text": "        vacationType: '',",
            "lineNumber": 535
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 536
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 537
          },
          {
            "text": "        reason: '',",
            "lineNumber": 538
          },
          {
            "text": "        contact: ''",
            "lineNumber": 539
          },
          {
            "text": "      },",
            "lineNumber": 540
          },
          {
            "text": "      ",
            "lineNumber": 541
          }
        ]
      },
      "score": 0.344539612531662
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 44,
            "column": 2
          },
          "endPosition": {
            "line": 70,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇申請を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} startDate - 開始日（YYYY-MM-DD形式）\n * @param {string} endDate - 終了日（YYYY-MM-DD形式）\n * @returns {Promise&lt;Array&gt;} 休暇申請の配列\n */\nconst getVacations = async (employeeId, startDate, endDate) =&gt; {\n  const query = &#96;\n    SELECT VACATION_ID, VACATION_TYPE_CODE, START_DATE, END_DATE, VACATION_DAYS, APPROVAL_STATUS\n    FROM VACATION_HISTORY\n    WHERE EMPLOYEE_ID = ? AND START_DATE BETWEEN ? AND ? AND APPROVAL_STATUS IN ('PENDING', 'APPROVED')\n    ORDER BY START_DATE\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, startDate, endDate]);\n  return rows;\n};\n\n/**\n * 休暇残日数を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} vacationTypeCode - 休暇種別コード\n * @returns {Promise&lt;number&gt;} 残日数\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 47
          },
          {
            "text": " * 休暇申請を取得",
            "lineNumber": 48
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 49
          },
          {
            "text": " * @param {string} startDate - 開始日（YYYY-MM-DD形式）",
            "lineNumber": 50
          },
          {
            "text": " * @param {string} endDate - 終了日（YYYY-MM-DD形式）",
            "lineNumber": 51
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇申請の配列",
            "lineNumber": 52
          },
          {
            "text": " */",
            "lineNumber": 53
          },
          {
            "text": "const getVacations = async (employeeId, startDate, endDate) =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 55
          },
          {
            "text": "    SELECT VACATION_ID, VACATION_TYPE_CODE, START_DATE, END_DATE, VACATION_DAYS, APPROVAL_STATUS",
            "lineNumber": 56
          },
          {
            "text": "    FROM VACATION_HISTORY",
            "lineNumber": 57
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ? AND START_DATE BETWEEN ? AND ? AND APPROVAL_STATUS IN ('PENDING', 'APPROVED')",
            "lineNumber": 58
          },
          {
            "text": "    ORDER BY START_DATE",
            "lineNumber": 59
          },
          {
            "text": "  &#96;;",
            "lineNumber": 60
          },
          {
            "text": "  ",
            "lineNumber": 61
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, startDate, endDate]);",
            "lineNumber": 62
          },
          {
            "text": "  return rows;",
            "lineNumber": 63
          },
          {
            "text": "};",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "/**",
            "lineNumber": 66
          },
          {
            "text": " * 休暇残日数を取得",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 68
          },
          {
            "text": " * @param {string} vacationTypeCode - 休暇種別コード",
            "lineNumber": 69
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 残日数",
            "lineNumber": 70
          },
          {
            "text": " */",
            "lineNumber": 71
          }
        ]
      },
      "score": 0.34331920742988586
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 622
          },
          "endPosition": {
            "line": 659
          }
        },
        "contents": "- 関連する取得仕様\n  - なし\n- その他\n  - 日次確定申請時にチェック仕様No.1のチェックを実行\n  - 申請成功後、ATTENDANCE_RECORDのAPPROVAL_STATUSがPENDINGに更新される\n  - 勤務表画面の該当日の申請状況アイコンが↑マークに変更される\n\n#### No.4\n- API仕様名：休暇申請API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | POST | |\n  | エンドポイント | /api/vacation/apply | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |\n  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | リクエストボディ |\n  | START_DATE | 画面項目定義.開始日 | リクエストボディ、YYYY-MM-DD形式 |\n  | END_DATE | 画面項目定義.終了日 | リクエストボディ、YYYY-MM-DD形式 |\n  | REASON | 画面項目定義.備考 | リクエストボディ（任意） |\n  | CONTACT | 画面項目定義.連絡先 | リクエストボディ（任意） |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n  | 休暇申請ID | VACATION_HISTORY.VACATION_ID | |\n- 関連する取得仕様\n  - なし\n- その他\n  - 休暇申請時にチェック仕様No.2のチェックを実行\n  - 申請成功後、VACATION_HISTORYにレコードが登録され、APPROVAL_STATUSがPENDINGに設定される\n  - 勤務表画面の該当日の背景色がオレンジ色になり、申請状況アイコンが↑マークに変更される\n\n#### No.5\n- API仕様名：休日出勤申請API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 623
          },
          {
            "text": "  - なし",
            "lineNumber": 624
          },
          {
            "text": "- その他",
            "lineNumber": 625
          },
          {
            "text": "  - 日次確定申請時にチェック仕様No.1のチェックを実行",
            "lineNumber": 626
          },
          {
            "text": "  - 申請成功後、ATTENDANCE_RECORDのAPPROVAL_STATUSがPENDINGに更新される",
            "lineNumber": 627
          },
          {
            "text": "  - 勤務表画面の該当日の申請状況アイコンが↑マークに変更される",
            "lineNumber": 628
          },
          {
            "lineNumber": 629
          },
          {
            "text": "#### No.4",
            "lineNumber": 630
          },
          {
            "text": "- API仕様名：休暇申請API",
            "lineNumber": 631
          },
          {
            "text": "- リクエスト",
            "lineNumber": 632
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 633
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 634
          },
          {
            "text": "  | HTTPメソッド | POST | |",
            "lineNumber": 635
          },
          {
            "text": "  | エンドポイント | /api/vacation/apply | |",
            "lineNumber": 636
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |",
            "lineNumber": 637
          },
          {
            "text": "  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | リクエストボディ |",
            "lineNumber": 638
          },
          {
            "text": "  | START_DATE | 画面項目定義.開始日 | リクエストボディ、YYYY-MM-DD形式 |",
            "lineNumber": 639
          },
          {
            "text": "  | END_DATE | 画面項目定義.終了日 | リクエストボディ、YYYY-MM-DD形式 |",
            "lineNumber": 640
          },
          {
            "text": "  | REASON | 画面項目定義.備考 | リクエストボディ（任意） |",
            "lineNumber": 641
          },
          {
            "text": "  | CONTACT | 画面項目定義.連絡先 | リクエストボディ（任意） |",
            "lineNumber": 642
          },
          {
            "text": "- レスポンス",
            "lineNumber": 643
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 644
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 645
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 646
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 647
          },
          {
            "text": "  | 休暇申請ID | VACATION_HISTORY.VACATION_ID | |",
            "lineNumber": 648
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 649
          },
          {
            "text": "  - なし",
            "lineNumber": 650
          },
          {
            "text": "- その他",
            "lineNumber": 651
          },
          {
            "text": "  - 休暇申請時にチェック仕様No.2のチェックを実行",
            "lineNumber": 652
          },
          {
            "text": "  - 申請成功後、VACATION_HISTORYにレコードが登録され、APPROVAL_STATUSがPENDINGに設定される",
            "lineNumber": 653
          },
          {
            "text": "  - 勤務表画面の該当日の背景色がオレンジ色になり、申請状況アイコンが↑マークに変更される",
            "lineNumber": 654
          },
          {
            "lineNumber": 655
          },
          {
            "text": "#### No.5",
            "lineNumber": 656
          },
          {
            "text": "- API仕様名：休日出勤申請API",
            "lineNumber": 657
          },
          {
            "text": "- リクエスト",
            "lineNumber": 658
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 659
          }
        ]
      },
      "score": 0.3380059599876404
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 584,
            "column": 8
          },
          "endPosition": {
            "line": 618
          }
        },
        "contents": "return '申請タイプを選択してください。'\n      }\n      return ''\n    },\n    // 選択中のメニュー項目の説明文\n    currentMenuDescription() {\n      const descriptions = {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'\n    },\n    // 全メニュー項目の説明文\n    menuDescriptions() {\n      return {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n    },\n    // 対象日が休日かどうかを判定\n    isHoliday() {\n      if (!this.targetDate) return false\n      const date = new Date(this.targetDate)\n      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土曜日または日曜日の場合",
        "signatures": {},
        "detailedLines": [
          {
            "text": "return '申請タイプを選択してください。'",
            "lineNumber": 585
          },
          {
            "text": "      }",
            "lineNumber": 586
          },
          {
            "text": "      return ''",
            "lineNumber": 587
          },
          {
            "text": "    },",
            "lineNumber": 588
          },
          {
            "text": "    // 選択中のメニュー項目の説明文",
            "lineNumber": 589
          },
          {
            "text": "    currentMenuDescription() {",
            "lineNumber": 590
          },
          {
            "text": "      const descriptions = {",
            "lineNumber": 591
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 592
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 593
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 594
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 595
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 596
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'",
            "lineNumber": 599
          },
          {
            "text": "    },",
            "lineNumber": 600
          },
          {
            "text": "    // 全メニュー項目の説明文",
            "lineNumber": 601
          },
          {
            "text": "    menuDescriptions() {",
            "lineNumber": 602
          },
          {
            "text": "      return {",
            "lineNumber": 603
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 604
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 605
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 606
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 607
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 608
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 609
          },
          {
            "text": "      }",
            "lineNumber": 610
          },
          {
            "text": "    },",
            "lineNumber": 611
          },
          {
            "text": "    // 対象日が休日かどうかを判定",
            "lineNumber": 612
          },
          {
            "text": "    isHoliday() {",
            "lineNumber": 613
          },
          {
            "text": "      if (!this.targetDate) return false",
            "lineNumber": 614
          },
          {
            "text": "      const date = new Date(this.targetDate)",
            "lineNumber": 615
          },
          {
            "text": "      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 616
          },
          {
            "text": "      ",
            "lineNumber": 617
          },
          {
            "text": "      // 土曜日または日曜日の場合",
            "lineNumber": 618
          }
        ]
      },
      "score": 0.3375492990016937
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 566
          },
          "endPosition": {
            "line": 614
          }
        },
        "contents": "        toDate: '',\n        reason: ''\n      }\n    }\n  },\n  computed: {\n    formattedDate() {\n      if (!this.targetDate) return ''\n      const date = new Date(this.targetDate)\n      const year = date.getFullYear()\n      const month = date.getMonth() + 1\n      const day = date.getDate()\n      const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n      const dayOfWeek = dayNames[date.getDay()]\n      return &#96;${year}年${month}月${day}日${dayOfWeek}曜日&#96;\n    },\n    currentDescription() {\n      if (this.currentTab === 'menu') {\n        return '申請タイプを選択してください。'\n      }\n      return ''\n    },\n    // 選択中のメニュー項目の説明文\n    currentMenuDescription() {\n      const descriptions = {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'\n    },\n    // 全メニュー項目の説明文\n    menuDescriptions() {\n      return {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n    },\n    // 対象日が休日かどうかを判定\n    isHoliday() {\n      if (!this.targetDate) return false",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        toDate: '',",
            "lineNumber": 567
          },
          {
            "text": "        reason: ''",
            "lineNumber": 568
          },
          {
            "text": "      }",
            "lineNumber": 569
          },
          {
            "text": "    }",
            "lineNumber": 570
          },
          {
            "text": "  },",
            "lineNumber": 571
          },
          {
            "text": "  computed: {",
            "lineNumber": 572
          },
          {
            "text": "    formattedDate() {",
            "lineNumber": 573
          },
          {
            "text": "      if (!this.targetDate) return ''",
            "lineNumber": 574
          },
          {
            "text": "      const date = new Date(this.targetDate)",
            "lineNumber": 575
          },
          {
            "text": "      const year = date.getFullYear()",
            "lineNumber": 576
          },
          {
            "text": "      const month = date.getMonth() + 1",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 578
          },
          {
            "text": "      const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 579
          },
          {
            "text": "      const dayOfWeek = dayNames[date.getDay()]",
            "lineNumber": 580
          },
          {
            "text": "      return &#96;${year}年${month}月${day}日${dayOfWeek}曜日&#96;",
            "lineNumber": 581
          },
          {
            "text": "    },",
            "lineNumber": 582
          },
          {
            "text": "    currentDescription() {",
            "lineNumber": 583
          },
          {
            "text": "      if (this.currentTab === 'menu') {",
            "lineNumber": 584
          },
          {
            "text": "        return '申請タイプを選択してください。'",
            "lineNumber": 585
          },
          {
            "text": "      }",
            "lineNumber": 586
          },
          {
            "text": "      return ''",
            "lineNumber": 587
          },
          {
            "text": "    },",
            "lineNumber": 588
          },
          {
            "text": "    // 選択中のメニュー項目の説明文",
            "lineNumber": 589
          },
          {
            "text": "    currentMenuDescription() {",
            "lineNumber": 590
          },
          {
            "text": "      const descriptions = {",
            "lineNumber": 591
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 592
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 593
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 594
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 595
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 596
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'",
            "lineNumber": 599
          },
          {
            "text": "    },",
            "lineNumber": 600
          },
          {
            "text": "    // 全メニュー項目の説明文",
            "lineNumber": 601
          },
          {
            "text": "    menuDescriptions() {",
            "lineNumber": 602
          },
          {
            "text": "      return {",
            "lineNumber": 603
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 604
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 605
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 606
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 607
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 608
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 609
          },
          {
            "text": "      }",
            "lineNumber": 610
          },
          {
            "text": "    },",
            "lineNumber": 611
          },
          {
            "text": "    // 対象日が休日かどうかを判定",
            "lineNumber": 612
          },
          {
            "text": "    isHoliday() {",
            "lineNumber": 613
          },
          {
            "text": "      if (!this.targetDate) return false",
            "lineNumber": 614
          }
        ]
      },
      "score": 0.33577629923820496
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 477
          },
          "endPosition": {
            "line": 571
          }
        },
        "contents": "export default {\n  name: 'AttendanceApplicationDialog',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    targetDate: {\n      type: String,\n      required: true\n    },\n    employeeId: {\n      type: String,\n      required: true\n    },\n    initialApplicationType: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      currentTab: 'menu',\n      activeApplicationTab: null,\n      loading: false,\n      showErrorDialog: false,\n      errorMessage: '',\n      \n      // 休暇種別マスタ\n      vacationTypes: [],\n      paidLeaveBalance: 0,\n      // 休日出勤申請状態\n      hasHolidayWorkApplication: false,\n      \n      // 勤怠データ（打刻時刻の状態確認用）\n      attendanceData: null,\n      \n      // 打刻時刻の状態\n      hasClockIn: false,\n      hasClockOut: false,\n      \n      // 選択中のメニュー項目\n      selectedMenuItem: 'dailyConfirmation',\n      \n      // 日次確定申請フォーム\n      dailyConfirmationForm: {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      },\n      // 日次確定申請のエラーメッセージ\n      dailyConfirmationError: '',\n      \n      // 休暇申請フォーム\n      vacationForm: {\n        vacationType: '',\n        startDate: '',\n        endDate: '',\n        reason: '',\n        contact: ''\n      },\n      \n      // 休日出勤申請フォーム\n      holidayWorkForm: {\n        startDate: '',\n        endDate: '',\n        reason: ''\n      },\n      \n      // 残業申請フォーム\n      overtimeForm: {\n        startDate: '',\n        endDate: '',\n        hours: '',\n        reason: ''\n      },\n      \n      // 早朝勤務申請フォーム\n      earlyWorkForm: {\n        startDate: '',\n        endDate: '',\n        reason: ''\n      },\n      \n      // 振替申請フォーム\n      transferForm: {\n        fromDate: '',\n        toDate: '',\n        reason: ''\n      }\n    }\n  },",
        "signatures": {},
        "detailedLines": [
          {
            "text": "export default {",
            "lineNumber": 478
          },
          {
            "text": "  name: 'AttendanceApplicationDialog',",
            "lineNumber": 479
          },
          {
            "text": "  props: {",
            "lineNumber": 480
          },
          {
            "text": "    visible: {",
            "lineNumber": 481
          },
          {
            "text": "      type: Boolean,",
            "lineNumber": 482
          },
          {
            "text": "      default: false",
            "lineNumber": 483
          },
          {
            "text": "    },",
            "lineNumber": 484
          },
          {
            "text": "    targetDate: {",
            "lineNumber": 485
          },
          {
            "text": "      type: String,",
            "lineNumber": 486
          },
          {
            "text": "      required: true",
            "lineNumber": 487
          },
          {
            "text": "    },",
            "lineNumber": 488
          },
          {
            "text": "    employeeId: {",
            "lineNumber": 489
          },
          {
            "text": "      type: String,",
            "lineNumber": 490
          },
          {
            "text": "      required: true",
            "lineNumber": 491
          },
          {
            "text": "    },",
            "lineNumber": 492
          },
          {
            "text": "    initialApplicationType: {",
            "lineNumber": 493
          },
          {
            "text": "      type: String,",
            "lineNumber": 494
          },
          {
            "text": "      default: null",
            "lineNumber": 495
          },
          {
            "text": "    }",
            "lineNumber": 496
          },
          {
            "text": "  },",
            "lineNumber": 497
          },
          {
            "text": "  data() {",
            "lineNumber": 498
          },
          {
            "text": "    return {",
            "lineNumber": 499
          },
          {
            "text": "      currentTab: 'menu',",
            "lineNumber": 500
          },
          {
            "text": "      activeApplicationTab: null,",
            "lineNumber": 501
          },
          {
            "text": "      loading: false,",
            "lineNumber": 502
          },
          {
            "text": "      showErrorDialog: false,",
            "lineNumber": 503
          },
          {
            "text": "      errorMessage: '',",
            "lineNumber": 504
          },
          {
            "text": "      ",
            "lineNumber": 505
          },
          {
            "text": "      // 休暇種別マスタ",
            "lineNumber": 506
          },
          {
            "text": "      vacationTypes: [],",
            "lineNumber": 507
          },
          {
            "text": "      paidLeaveBalance: 0,",
            "lineNumber": 508
          },
          {
            "text": "      // 休日出勤申請状態",
            "lineNumber": 509
          },
          {
            "text": "      hasHolidayWorkApplication: false,",
            "lineNumber": 510
          },
          {
            "text": "      ",
            "lineNumber": 511
          },
          {
            "text": "      // 勤怠データ（打刻時刻の状態確認用）",
            "lineNumber": 512
          },
          {
            "text": "      attendanceData: null,",
            "lineNumber": 513
          },
          {
            "text": "      ",
            "lineNumber": 514
          },
          {
            "text": "      // 打刻時刻の状態",
            "lineNumber": 515
          },
          {
            "text": "      hasClockIn: false,",
            "lineNumber": 516
          },
          {
            "text": "      hasClockOut: false,",
            "lineNumber": 517
          },
          {
            "text": "      ",
            "lineNumber": 518
          },
          {
            "text": "      // 選択中のメニュー項目",
            "lineNumber": 519
          },
          {
            "text": "      selectedMenuItem: 'dailyConfirmation',",
            "lineNumber": 520
          },
          {
            "text": "      ",
            "lineNumber": 521
          },
          {
            "text": "      // 日次確定申請フォーム",
            "lineNumber": 522
          },
          {
            "text": "      dailyConfirmationForm: {",
            "lineNumber": 523
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 524
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 525
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 526
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 527
          },
          {
            "text": "        remark: ''",
            "lineNumber": 528
          },
          {
            "text": "      },",
            "lineNumber": 529
          },
          {
            "text": "      // 日次確定申請のエラーメッセージ",
            "lineNumber": 530
          },
          {
            "text": "      dailyConfirmationError: '',",
            "lineNumber": 531
          },
          {
            "text": "      ",
            "lineNumber": 532
          },
          {
            "text": "      // 休暇申請フォーム",
            "lineNumber": 533
          },
          {
            "text": "      vacationForm: {",
            "lineNumber": 534
          },
          {
            "text": "        vacationType: '',",
            "lineNumber": 535
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 536
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 537
          },
          {
            "text": "        reason: '',",
            "lineNumber": 538
          },
          {
            "text": "        contact: ''",
            "lineNumber": 539
          },
          {
            "text": "      },",
            "lineNumber": 540
          },
          {
            "text": "      ",
            "lineNumber": 541
          },
          {
            "text": "      // 休日出勤申請フォーム",
            "lineNumber": 542
          },
          {
            "text": "      holidayWorkForm: {",
            "lineNumber": 543
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 544
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 545
          },
          {
            "text": "        reason: ''",
            "lineNumber": 546
          },
          {
            "text": "      },",
            "lineNumber": 547
          },
          {
            "text": "      ",
            "lineNumber": 548
          },
          {
            "text": "      // 残業申請フォーム",
            "lineNumber": 549
          },
          {
            "text": "      overtimeForm: {",
            "lineNumber": 550
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 551
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 552
          },
          {
            "text": "        hours: '',",
            "lineNumber": 553
          },
          {
            "text": "        reason: ''",
            "lineNumber": 554
          },
          {
            "text": "      },",
            "lineNumber": 555
          },
          {
            "text": "      ",
            "lineNumber": 556
          },
          {
            "text": "      // 早朝勤務申請フォーム",
            "lineNumber": 557
          },
          {
            "text": "      earlyWorkForm: {",
            "lineNumber": 558
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 559
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 560
          },
          {
            "text": "        reason: ''",
            "lineNumber": 561
          },
          {
            "text": "      },",
            "lineNumber": 562
          },
          {
            "text": "      ",
            "lineNumber": 563
          },
          {
            "text": "      // 振替申請フォーム",
            "lineNumber": 564
          },
          {
            "text": "      transferForm: {",
            "lineNumber": 565
          },
          {
            "text": "        fromDate: '',",
            "lineNumber": 566
          },
          {
            "text": "        toDate: '',",
            "lineNumber": 567
          },
          {
            "text": "        reason: ''",
            "lineNumber": 568
          },
          {
            "text": "      }",
            "lineNumber": 569
          },
          {
            "text": "    }",
            "lineNumber": 570
          },
          {
            "text": "  },",
            "lineNumber": 571
          }
        ]
      },
      "score": 0.3341008424758911
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 533
          },
          "endPosition": {
            "line": 589
          }
        },
        "contents": "      vacationForm: {\n        vacationType: '',\n        startDate: '',\n        endDate: '',\n        reason: '',\n        contact: ''\n      },\n      \n      // 休日出勤申請フォーム\n      holidayWorkForm: {\n        startDate: '',\n        endDate: '',\n        reason: ''\n      },\n      \n      // 残業申請フォーム\n      overtimeForm: {\n        startDate: '',\n        endDate: '',\n        hours: '',\n        reason: ''\n      },\n      \n      // 早朝勤務申請フォーム\n      earlyWorkForm: {\n        startDate: '',\n        endDate: '',\n        reason: ''\n      },\n      \n      // 振替申請フォーム\n      transferForm: {\n        fromDate: '',\n        toDate: '',\n        reason: ''\n      }\n    }\n  },\n  computed: {\n    formattedDate() {\n      if (!this.targetDate) return ''\n      const date = new Date(this.targetDate)\n      const year = date.getFullYear()\n      const month = date.getMonth() + 1\n      const day = date.getDate()\n      const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n      const dayOfWeek = dayNames[date.getDay()]\n      return &#96;${year}年${month}月${day}日${dayOfWeek}曜日&#96;\n    },\n    currentDescription() {\n      if (this.currentTab === 'menu') {\n        return '申請タイプを選択してください。'\n      }\n      return ''\n    },\n    // 選択中のメニュー項目の説明文",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      vacationForm: {",
            "lineNumber": 534
          },
          {
            "text": "        vacationType: '',",
            "lineNumber": 535
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 536
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 537
          },
          {
            "text": "        reason: '',",
            "lineNumber": 538
          },
          {
            "text": "        contact: ''",
            "lineNumber": 539
          },
          {
            "text": "      },",
            "lineNumber": 540
          },
          {
            "text": "      ",
            "lineNumber": 541
          },
          {
            "text": "      // 休日出勤申請フォーム",
            "lineNumber": 542
          },
          {
            "text": "      holidayWorkForm: {",
            "lineNumber": 543
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 544
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 545
          },
          {
            "text": "        reason: ''",
            "lineNumber": 546
          },
          {
            "text": "      },",
            "lineNumber": 547
          },
          {
            "text": "      ",
            "lineNumber": 548
          },
          {
            "text": "      // 残業申請フォーム",
            "lineNumber": 549
          },
          {
            "text": "      overtimeForm: {",
            "lineNumber": 550
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 551
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 552
          },
          {
            "text": "        hours: '',",
            "lineNumber": 553
          },
          {
            "text": "        reason: ''",
            "lineNumber": 554
          },
          {
            "text": "      },",
            "lineNumber": 555
          },
          {
            "text": "      ",
            "lineNumber": 556
          },
          {
            "text": "      // 早朝勤務申請フォーム",
            "lineNumber": 557
          },
          {
            "text": "      earlyWorkForm: {",
            "lineNumber": 558
          },
          {
            "text": "        startDate: '',",
            "lineNumber": 559
          },
          {
            "text": "        endDate: '',",
            "lineNumber": 560
          },
          {
            "text": "        reason: ''",
            "lineNumber": 561
          },
          {
            "text": "      },",
            "lineNumber": 562
          },
          {
            "text": "      ",
            "lineNumber": 563
          },
          {
            "text": "      // 振替申請フォーム",
            "lineNumber": 564
          },
          {
            "text": "      transferForm: {",
            "lineNumber": 565
          },
          {
            "text": "        fromDate: '',",
            "lineNumber": 566
          },
          {
            "text": "        toDate: '',",
            "lineNumber": 567
          },
          {
            "text": "        reason: ''",
            "lineNumber": 568
          },
          {
            "text": "      }",
            "lineNumber": 569
          },
          {
            "text": "    }",
            "lineNumber": 570
          },
          {
            "text": "  },",
            "lineNumber": 571
          },
          {
            "text": "  computed: {",
            "lineNumber": 572
          },
          {
            "text": "    formattedDate() {",
            "lineNumber": 573
          },
          {
            "text": "      if (!this.targetDate) return ''",
            "lineNumber": 574
          },
          {
            "text": "      const date = new Date(this.targetDate)",
            "lineNumber": 575
          },
          {
            "text": "      const year = date.getFullYear()",
            "lineNumber": 576
          },
          {
            "text": "      const month = date.getMonth() + 1",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 578
          },
          {
            "text": "      const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 579
          },
          {
            "text": "      const dayOfWeek = dayNames[date.getDay()]",
            "lineNumber": 580
          },
          {
            "text": "      return &#96;${year}年${month}月${day}日${dayOfWeek}曜日&#96;",
            "lineNumber": 581
          },
          {
            "text": "    },",
            "lineNumber": 582
          },
          {
            "text": "    currentDescription() {",
            "lineNumber": 583
          },
          {
            "text": "      if (this.currentTab === 'menu') {",
            "lineNumber": 584
          },
          {
            "text": "        return '申請タイプを選択してください。'",
            "lineNumber": 585
          },
          {
            "text": "      }",
            "lineNumber": 586
          },
          {
            "text": "      return ''",
            "lineNumber": 587
          },
          {
            "text": "    },",
            "lineNumber": 588
          },
          {
            "text": "    // 選択中のメニュー項目の説明文",
            "lineNumber": 589
          }
        ]
      },
      "score": 0.328821063041687
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\applicationService.js",
        "range": {
          "startPosition": {
            "line": 46,
            "column": 2
          },
          "endPosition": {
            "line": 73,
            "column": 3
          }
        },
        "contents": "/**\n * 休日出勤申請\n * @param {Object} applicationData - 申請データ\n * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID\n */\nconst applyHolidayWork = async (applicationData) =&gt; {\n  const { employeeId, startDate, endDate, reason } = applicationData;\n  const now = getNow();\n  \n  return await applicationModel.createApplication({\n    employeeId,\n    applicationType: 'HOLIDAY_WORK',\n    targetStartDate: startDate,\n    targetEndDate: endDate,\n    reason,\n    approvalStatus: 'PENDING',\n    createdAt: now,\n    updatedAt: now\n  });\n};\n\n/**\n * 残業申請\n * @param {Object} applicationData - 申請データ\n * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 49
          },
          {
            "text": " * 休日出勤申請",
            "lineNumber": 50
          },
          {
            "text": " * @param {Object} applicationData - 申請データ",
            "lineNumber": 51
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID",
            "lineNumber": 52
          },
          {
            "text": " */",
            "lineNumber": 53
          },
          {
            "text": "const applyHolidayWork = async (applicationData) =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "  const { employeeId, startDate, endDate, reason } = applicationData;",
            "lineNumber": 55
          },
          {
            "text": "  const now = getNow();",
            "lineNumber": 56
          },
          {
            "text": "  ",
            "lineNumber": 57
          },
          {
            "text": "  return await applicationModel.createApplication({",
            "lineNumber": 58
          },
          {
            "text": "    employeeId,",
            "lineNumber": 59
          },
          {
            "text": "    applicationType: 'HOLIDAY_WORK',",
            "lineNumber": 60
          },
          {
            "text": "    targetStartDate: startDate,",
            "lineNumber": 61
          },
          {
            "text": "    targetEndDate: endDate,",
            "lineNumber": 62
          },
          {
            "text": "    reason,",
            "lineNumber": 63
          },
          {
            "text": "    approvalStatus: 'PENDING',",
            "lineNumber": 64
          },
          {
            "text": "    createdAt: now,",
            "lineNumber": 65
          },
          {
            "text": "    updatedAt: now",
            "lineNumber": 66
          },
          {
            "text": "  });",
            "lineNumber": 67
          },
          {
            "text": "};",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "/**",
            "lineNumber": 70
          },
          {
            "text": " * 残業申請",
            "lineNumber": 71
          },
          {
            "text": " * @param {Object} applicationData - 申請データ",
            "lineNumber": 72
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID",
            "lineNumber": 73
          },
          {
            "text": " */",
            "lineNumber": 74
          }
        ]
      },
      "score": 0.3283616900444031
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 708
          },
          "endPosition": {
            "line": 778
          }
        },
        "contents": "    },\n    // 休日出勤申請ボタンが非活性かどうか\n    isHolidayWorkDisabled() {\n      // 平日の場合は常に非活性（休日出勤申請は休日のみ可能）\n      if (this.isWeekday) {\n        return true\n      }\n      return false\n    }\n  },\n  watch: {\n    visible: {\n      handler(newVal) {\n        if (newVal) {\n          this.initialize()\n          // スクロールをロック\n          document.body.style.overflow = 'hidden'\n        } else {\n          // スクロールをアンロック\n          document.body.style.overflow = ''\n        }\n      },\n      immediate: true\n    },\n    targetDate() {\n      // targetDateが変更された時に勤怠データを再取得\n      if (this.visible) {\n        this.loadAttendanceDataForButtonControl()\n      }\n    }\n  },\n  methods: {\n    async initialize() {\n      this.loading = true\n      try {\n        // 休暇種別マスタ取得\n        await this.loadVacationTypes()\n        \n        // 有給残日数取得\n        await this.loadPaidLeaveBalance()\n        \n        // 休日出勤申請状態取得\n        await this.loadHolidayWorkStatus()\n        \n        // 勤怠データ取得（打刻時刻の状態確認用）\n        await this.loadAttendanceDataForButtonControl()\n        \n        // 打刻時刻の状態を取得\n        await this.loadClockStatus()\n        \n        // フォームの初期値設定\n        this.initializeForms()\n        \n        // 初期申請タイプがある場合、そのタブを開く\n        if (this.initialApplicationType) {\n          this.openApplicationTab(this.initialApplicationType)\n        } else {\n          this.currentTab = 'menu'\n          this.activeApplicationTab = null\n        }\n      } catch (error) {\n        console.error('初期化エラー:', error)\n        this.showError('初期化に失敗しました。')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    initializeForms() {\n      // 日次確定申請フォームの初期化",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    },",
            "lineNumber": 709
          },
          {
            "text": "    // 休日出勤申請ボタンが非活性かどうか",
            "lineNumber": 710
          },
          {
            "text": "    isHolidayWorkDisabled() {",
            "lineNumber": 711
          },
          {
            "text": "      // 平日の場合は常に非活性（休日出勤申請は休日のみ可能）",
            "lineNumber": 712
          },
          {
            "text": "      if (this.isWeekday) {",
            "lineNumber": 713
          },
          {
            "text": "        return true",
            "lineNumber": 714
          },
          {
            "text": "      }",
            "lineNumber": 715
          },
          {
            "text": "      return false",
            "lineNumber": 716
          },
          {
            "text": "    }",
            "lineNumber": 717
          },
          {
            "text": "  },",
            "lineNumber": 718
          },
          {
            "text": "  watch: {",
            "lineNumber": 719
          },
          {
            "text": "    visible: {",
            "lineNumber": 720
          },
          {
            "text": "      handler(newVal) {",
            "lineNumber": 721
          },
          {
            "text": "        if (newVal) {",
            "lineNumber": 722
          },
          {
            "text": "          this.initialize()",
            "lineNumber": 723
          },
          {
            "text": "          // スクロールをロック",
            "lineNumber": 724
          },
          {
            "text": "          document.body.style.overflow = 'hidden'",
            "lineNumber": 725
          },
          {
            "text": "        } else {",
            "lineNumber": 726
          },
          {
            "text": "          // スクロールをアンロック",
            "lineNumber": 727
          },
          {
            "text": "          document.body.style.overflow = ''",
            "lineNumber": 728
          },
          {
            "text": "        }",
            "lineNumber": 729
          },
          {
            "text": "      },",
            "lineNumber": 730
          },
          {
            "text": "      immediate: true",
            "lineNumber": 731
          },
          {
            "text": "    },",
            "lineNumber": 732
          },
          {
            "text": "    targetDate() {",
            "lineNumber": 733
          },
          {
            "text": "      // targetDateが変更された時に勤怠データを再取得",
            "lineNumber": 734
          },
          {
            "text": "      if (this.visible) {",
            "lineNumber": 735
          },
          {
            "text": "        this.loadAttendanceDataForButtonControl()",
            "lineNumber": 736
          },
          {
            "text": "      }",
            "lineNumber": 737
          },
          {
            "text": "    }",
            "lineNumber": 738
          },
          {
            "text": "  },",
            "lineNumber": 739
          },
          {
            "text": "  methods: {",
            "lineNumber": 740
          },
          {
            "text": "    async initialize() {",
            "lineNumber": 741
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 742
          },
          {
            "text": "      try {",
            "lineNumber": 743
          },
          {
            "text": "        // 休暇種別マスタ取得",
            "lineNumber": 744
          },
          {
            "text": "        await this.loadVacationTypes()",
            "lineNumber": 745
          },
          {
            "text": "        ",
            "lineNumber": 746
          },
          {
            "text": "        // 有給残日数取得",
            "lineNumber": 747
          },
          {
            "text": "        await this.loadPaidLeaveBalance()",
            "lineNumber": 748
          },
          {
            "text": "        ",
            "lineNumber": 749
          },
          {
            "text": "        // 休日出勤申請状態取得",
            "lineNumber": 750
          },
          {
            "text": "        await this.loadHolidayWorkStatus()",
            "lineNumber": 751
          },
          {
            "text": "        ",
            "lineNumber": 752
          },
          {
            "text": "        // 勤怠データ取得（打刻時刻の状態確認用）",
            "lineNumber": 753
          },
          {
            "text": "        await this.loadAttendanceDataForButtonControl()",
            "lineNumber": 754
          },
          {
            "text": "        ",
            "lineNumber": 755
          },
          {
            "text": "        // 打刻時刻の状態を取得",
            "lineNumber": 756
          },
          {
            "text": "        await this.loadClockStatus()",
            "lineNumber": 757
          },
          {
            "text": "        ",
            "lineNumber": 758
          },
          {
            "text": "        // フォームの初期値設定",
            "lineNumber": 759
          },
          {
            "text": "        this.initializeForms()",
            "lineNumber": 760
          },
          {
            "text": "        ",
            "lineNumber": 761
          },
          {
            "text": "        // 初期申請タイプがある場合、そのタブを開く",
            "lineNumber": 762
          },
          {
            "text": "        if (this.initialApplicationType) {",
            "lineNumber": 763
          },
          {
            "text": "          this.openApplicationTab(this.initialApplicationType)",
            "lineNumber": 764
          },
          {
            "text": "        } else {",
            "lineNumber": 765
          },
          {
            "text": "          this.currentTab = 'menu'",
            "lineNumber": 766
          },
          {
            "text": "          this.activeApplicationTab = null",
            "lineNumber": 767
          },
          {
            "text": "        }",
            "lineNumber": 768
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 769
          },
          {
            "text": "        console.error('初期化エラー:', error)",
            "lineNumber": 770
          },
          {
            "text": "        this.showError('初期化に失敗しました。')",
            "lineNumber": 771
          },
          {
            "text": "      } finally {",
            "lineNumber": 772
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 773
          },
          {
            "text": "      }",
            "lineNumber": 774
          },
          {
            "text": "    },",
            "lineNumber": 775
          },
          {
            "text": "    ",
            "lineNumber": 776
          },
          {
            "text": "    initializeForms() {",
            "lineNumber": 777
          },
          {
            "text": "      // 日次確定申請フォームの初期化",
            "lineNumber": 778
          }
        ]
      },
      "score": 0.3281539976596832
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\masterController.js",
        "range": {
          "startPosition": {
            "line": 36,
            "column": 2
          },
          "endPosition": {
            "line": 81,
            "column": 1
          }
        },
        "contents": "/**\n * 休暇種別マスタ取得\n */\nconst getVacationTypes = async (req, res, next) =&gt; {\n  try {\n    const vacationTypes = await masterService.getVacationTypes();\n    \n    res.json({\n      success: true,\n      vacationTypes\n    });\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * 月次サマリー取得\n */\nconst getMonthlySummary = async (req, res, next)\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 39
          },
          {
            "text": " * 休暇種別マスタ取得",
            "lineNumber": 40
          },
          {
            "text": " */",
            "lineNumber": 41
          },
          {
            "text": "const getVacationTypes = async (req, res, next) =&gt; {",
            "lineNumber": 42
          },
          {
            "text": "  try {",
            "lineNumber": 43
          },
          {
            "text": "    const vacationTypes = await masterService.getVacationTypes();",
            "lineNumber": 44
          },
          {
            "text": "    ",
            "lineNumber": 45
          },
          {
            "text": "    res.json({",
            "lineNumber": 46
          },
          {
            "text": "      success: true,",
            "lineNumber": 47
          },
          {
            "text": "      vacationTypes",
            "lineNumber": 48
          },
          {
            "text": "    });",
            "lineNumber": 49
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 50
          },
          {
            "text": "    next(error);",
            "lineNumber": 51
          },
          {
            "text": "  }",
            "lineNumber": 52
          },
          {
            "text": "};",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "/**",
            "lineNumber": 55
          },
          {
            "text": " * 月次サマリー取得",
            "lineNumber": 56
          },
          {
            "text": " */",
            "lineNumber": 57
          },
          {
            "text": "const getMonthlySummary = async (req, res, next)",
            "lineNumber": 58
          },
          {
            "text": ";",
            "lineNumber": 82
          }
        ]
      },
      "score": 0.3253251314163208
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 269
          },
          "endPosition": {
            "line": 306
          }
        },
        "contents": "CREATE TABLE VACATION_HISTORY (\n    VACATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇取得ID',\n    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',\n    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',\n    START_DATE DATE NOT NULL COMMENT '開始日',\n    END_DATE DATE NOT NULL COMMENT '終了日',\n    VACATION_DAYS DECIMAL(4,1) NOT NULL COMMENT '取得日数',\n    HALF_DAY_TYPE VARCHAR(20) COMMENT '半休種別(午前/午後)',\n    REASON TEXT COMMENT '取得理由',\n    APPROVAL_STATUS VARCHAR(20) DEFAULT 'PENDING' COMMENT '承認状態(申請中/承認済/却下)',\n    APPROVED_BY VARCHAR(50) COMMENT '承認者',\n    APPROVED_AT DATETIME COMMENT '承認日時',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',\n    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',\n    PRIMARY KEY (VACATION_ID),\n    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,\n    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),\n    INDEX IDX_EMP_DATE (EMPLOYEE_ID, START_DATE, END_DATE),\n    INDEX IDX_APPROVAL (APPROVAL_STATUS)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇取得履歴';\n\n-- ====================================================================\n-- マスタデータの投入\n-- ====================================================================\n\n-- 1. 勤務場所マスタの初期データ\nINSERT INTO WORK_LOCATION (LOCATION_CODE, LOCATION_NAME, DISPLAY_ORDER, IS_ACTIVE) VALUES\n('COMMUTE', '通勤', 1, TRUE),\n('REMOTE', '在宅', 2, TRUE),\n('DIRECT', '直行、直帰、直行直帰', 3, TRUE),\n('BUSINESS_TRIP', '出張', 4, TRUE);\n\n-- 2. 休暇種別マスタの初期データ\nINSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE) VALUES\n('PAID_LEAVE', '有給休暇', '有給', TRUE, 20.0, 1, TRUE),\n('SUMMER_LEAVE', '夏季休暇', '特別', TRUE, 3.0, 2, TRUE),\n('SICK_LEAVE', '病気休暇', '特別', TRUE, 5.0, 3, TRUE),",
        "signatures": {},
        "detailedLines": [
          {
            "text": "CREATE TABLE VACATION_HISTORY (",
            "lineNumber": 270
          },
          {
            "text": "    VACATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇取得ID',",
            "lineNumber": 271
          },
          {
            "text": "    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',",
            "lineNumber": 272
          },
          {
            "text": "    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',",
            "lineNumber": 273
          },
          {
            "text": "    START_DATE DATE NOT NULL COMMENT '開始日',",
            "lineNumber": 274
          },
          {
            "text": "    END_DATE DATE NOT NULL COMMENT '終了日',",
            "lineNumber": 275
          },
          {
            "text": "    VACATION_DAYS DECIMAL(4,1) NOT NULL COMMENT '取得日数',",
            "lineNumber": 276
          },
          {
            "text": "    HALF_DAY_TYPE VARCHAR(20) COMMENT '半休種別(午前/午後)',",
            "lineNumber": 277
          },
          {
            "text": "    REASON TEXT COMMENT '取得理由',",
            "lineNumber": 278
          },
          {
            "text": "    APPROVAL_STATUS VARCHAR(20) DEFAULT 'PENDING' COMMENT '承認状態(申請中/承認済/却下)',",
            "lineNumber": 279
          },
          {
            "text": "    APPROVED_BY VARCHAR(50) COMMENT '承認者',",
            "lineNumber": 280
          },
          {
            "text": "    APPROVED_AT DATETIME COMMENT '承認日時',",
            "lineNumber": 281
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',",
            "lineNumber": 282
          },
          {
            "text": "    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',",
            "lineNumber": 283
          },
          {
            "text": "    PRIMARY KEY (VACATION_ID),",
            "lineNumber": 284
          },
          {
            "text": "    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,",
            "lineNumber": 285
          },
          {
            "text": "    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),",
            "lineNumber": 286
          },
          {
            "text": "    INDEX IDX_EMP_DATE (EMPLOYEE_ID, START_DATE, END_DATE),",
            "lineNumber": 287
          },
          {
            "text": "    INDEX IDX_APPROVAL (APPROVAL_STATUS)",
            "lineNumber": 288
          },
          {
            "text": ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇取得履歴';",
            "lineNumber": 289
          },
          {
            "lineNumber": 290
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 291
          },
          {
            "text": "-- マスタデータの投入",
            "lineNumber": 292
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "-- 1. 勤務場所マスタの初期データ",
            "lineNumber": 295
          },
          {
            "text": "INSERT INTO WORK_LOCATION (LOCATION_CODE, LOCATION_NAME, DISPLAY_ORDER, IS_ACTIVE) VALUES",
            "lineNumber": 296
          },
          {
            "text": "('COMMUTE', '通勤', 1, TRUE),",
            "lineNumber": 297
          },
          {
            "text": "('REMOTE', '在宅', 2, TRUE),",
            "lineNumber": 298
          },
          {
            "text": "('DIRECT', '直行、直帰、直行直帰', 3, TRUE),",
            "lineNumber": 299
          },
          {
            "text": "('BUSINESS_TRIP', '出張', 4, TRUE);",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "-- 2. 休暇種別マスタの初期データ",
            "lineNumber": 302
          },
          {
            "text": "INSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE) VALUES",
            "lineNumber": 303
          },
          {
            "text": "('PAID_LEAVE', '有給休暇', '有給', TRUE, 20.0, 1, TRUE),",
            "lineNumber": 304
          },
          {
            "text": "('SUMMER_LEAVE', '夏季休暇', '特別', TRUE, 3.0, 2, TRUE),",
            "lineNumber": 305
          },
          {
            "text": "('SICK_LEAVE', '病気休暇', '特別', TRUE, 5.0, 3, TRUE),",
            "lineNumber": 306
          }
        ]
      },
      "score": 0.32486578822135925
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\README_MySQL.md",
        "range": {
          "startPosition": {
            "line": 147
          },
          "endPosition": {
            "line": 176
          }
        },
        "contents": "| **PROJECT_CODE** | VARCHAR(50) | NULL | - | プロジェクトコード。関連プロジェクトを識別します。例: &#96;25152025-300&#96; |\n| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると工数入力の選択肢から除外されます。 |\n| **START_DATE** | DATE | NULL | - | ジョブの開始日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |\n| **END_DATE** | DATE | NULL | - | ジョブの終了日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n---\n\n### 4. 休暇種別マスタ (VACATION_TYPE)\n\n休暇の種類と付与ルールを管理するマスタテーブルです。\n\n| カラム名 | 型 | NULL | デフォルト | 説明 |\n|---------|-----|------|-----------|------|\n| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **主キー**。休暇種別を識別するコード。例: &#96;PAID_LEAVE&#96;（有給休暇）、&#96;SUMMER_LEAVE&#96;（夏季休暇） |\n| **VACATION_TYPE_NAME** | VARCHAR(50) | NOT NULL | - | 休暇種別の表示名。画面に表示されます。例: &#96;有給休暇&#96;、&#96;夏季休暇&#96; |\n| **VACATION_CATEGORY** | VARCHAR(20) | NOT NULL | - | 休暇のカテゴリ。分類に使用します。例: &#96;有給&#96;、&#96;特別&#96; |\n| **IS_PAID** | BOOLEAN | NULL | &#96;FALSE&#96; | 有給フラグ。&#96;TRUE&#96;=有給（給与支給あり）、&#96;FALSE&#96;=無給。 |\n| **ANNUAL_GRANT_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 年間付与日数。例: &#96;20.0&#96;=年間20日付与、&#96;3.0&#96;=年間3日付与 |\n| **DISPLAY_ORDER** | INT | NOT NULL | - | 表示順序。小さい順に表示されます。 |\n| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると選択肢から非表示になります。 |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n---\n\n### 5. お知らせマスタ (NOTIFICATION)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| **PROJECT_CODE** | VARCHAR(50) | NULL | - | プロジェクトコード。関連プロジェクトを識別します。例: &#96;25152025-300&#96; |",
            "lineNumber": 148
          },
          {
            "text": "| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると工数入力の選択肢から除外されます。 |",
            "lineNumber": 149
          },
          {
            "text": "| **START_DATE** | DATE | NULL | - | ジョブの開始日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |",
            "lineNumber": 150
          },
          {
            "text": "| **END_DATE** | DATE | NULL | - | ジョブの終了日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |",
            "lineNumber": 151
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 152
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 153
          },
          {
            "lineNumber": 154
          },
          {
            "text": "---",
            "lineNumber": 155
          },
          {
            "lineNumber": 156
          },
          {
            "text": "### 4. 休暇種別マスタ (VACATION_TYPE)",
            "lineNumber": 157
          },
          {
            "lineNumber": 158
          },
          {
            "text": "休暇の種類と付与ルールを管理するマスタテーブルです。",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "| カラム名 | 型 | NULL | デフォルト | 説明 |",
            "lineNumber": 161
          },
          {
            "text": "|---------|-----|------|-----------|------|",
            "lineNumber": 162
          },
          {
            "text": "| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **主キー**。休暇種別を識別するコード。例: &#96;PAID_LEAVE&#96;（有給休暇）、&#96;SUMMER_LEAVE&#96;（夏季休暇） |",
            "lineNumber": 163
          },
          {
            "text": "| **VACATION_TYPE_NAME** | VARCHAR(50) | NOT NULL | - | 休暇種別の表示名。画面に表示されます。例: &#96;有給休暇&#96;、&#96;夏季休暇&#96; |",
            "lineNumber": 164
          },
          {
            "text": "| **VACATION_CATEGORY** | VARCHAR(20) | NOT NULL | - | 休暇のカテゴリ。分類に使用します。例: &#96;有給&#96;、&#96;特別&#96; |",
            "lineNumber": 165
          },
          {
            "text": "| **IS_PAID** | BOOLEAN | NULL | &#96;FALSE&#96; | 有給フラグ。&#96;TRUE&#96;=有給（給与支給あり）、&#96;FALSE&#96;=無給。 |",
            "lineNumber": 166
          },
          {
            "text": "| **ANNUAL_GRANT_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 年間付与日数。例: &#96;20.0&#96;=年間20日付与、&#96;3.0&#96;=年間3日付与 |",
            "lineNumber": 167
          },
          {
            "text": "| **DISPLAY_ORDER** | INT | NOT NULL | - | 表示順序。小さい順に表示されます。 |",
            "lineNumber": 168
          },
          {
            "text": "| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると選択肢から非表示になります。 |",
            "lineNumber": 169
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 170
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "---",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "### 5. お知らせマスタ (NOTIFICATION)",
            "lineNumber": 175
          }
        ]
      },
      "score": 0.32456400990486145
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 404
          },
          "endPosition": {
            "line": 426
          }
        },
        "contents": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE\n  | 項目名 | 取得内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |\n  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |\n  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |\n  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |\n  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |\n  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |\n  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |\n  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |\n- 関連する取得仕様\n  - なし\n- 取得条件\n  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月\n  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月\n  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'\n  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）\n- その他\n  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE",
            "lineNumber": 405
          },
          {
            "text": "  | 項目名 | 取得内容 | 補足 |",
            "lineNumber": 406
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 407
          },
          {
            "text": "  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |",
            "lineNumber": 408
          },
          {
            "text": "  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |",
            "lineNumber": 409
          },
          {
            "text": "  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |",
            "lineNumber": 410
          },
          {
            "text": "  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 411
          },
          {
            "text": "  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |",
            "lineNumber": 412
          },
          {
            "text": "  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 413
          },
          {
            "text": "  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |",
            "lineNumber": 414
          },
          {
            "text": "  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |",
            "lineNumber": 415
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 416
          },
          {
            "text": "  - なし",
            "lineNumber": 417
          },
          {
            "text": "- 取得条件",
            "lineNumber": 418
          },
          {
            "text": "  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 419
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月",
            "lineNumber": 420
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月",
            "lineNumber": 421
          },
          {
            "text": "  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 422
          },
          {
            "text": "  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'",
            "lineNumber": 423
          },
          {
            "text": "  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）",
            "lineNumber": 424
          },
          {
            "text": "- その他",
            "lineNumber": 425
          },
          {
            "text": "  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
            "lineNumber": 426
          }
        ]
      },
      "score": 0.32289108633995056
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1272
          },
          "endPosition": {
            "line": 1318
          }
        },
        "contents": "4. **有給休暇**: 水色の背景に白いコーヒーカップのアイコン\n   - 有給休暇取得日を示す\n   - 行全体がオレンジ色の背景で表示される\n   - アイコンは水色の円の中に白いコーヒーカップ（湯気付き）が描かれたアイコン\n\n5. **代休**: オレンジ色の背景に白い下向きの笑顔アイコン\n   - 代休取得日を示す\n   - 行全体がオレンジ色の背景で表示される\n   - アイコンはオレンジ色の円の中に白い下向きの笑顔が描かれたアイコン\n\n6. **休日（法定休日・所定休日）**: 休日種別に応じたアイコン\n   - 土日祝日など、法定休日や所定休日を示すアイコン\n\n7. **その他の休暇**: 休暇種別に応じたアイコン\n   - 特別休暇など、その他の休暇種別によって異なるアイコンを表示\n\n### 曜日による行の背景色\n\n勤務表の各行は、曜日や休日区分に応じて背景色が変更されます：\n\n#### 背景色の種類\n1. **日曜日**: #FFE8D9（薄いピンク・赤系）\n   - 法定休日として扱われる\n   - 曜日ラベルも#FF0000（赤色）で表示\n\n2. **土曜日**: #E8F5FF（薄い青）\n   - 所定休日として扱われる\n   - 曜日ラベルも#0000FF（青色）で表示\n\n3. **祝日**: #E8F5FF（薄い青）\n   - 法定休日または所定休日として扱われる\n   - 曜日ラベルも#0000FF（青色）で表示\n\n4. **平日（月〜金）**: 白色（デフォルト）\n   - 通常の勤務日\n   - 曜日ラベルは黒色で表示\n\n5. **休暇申請済み**: オレンジ色（#FFA500）\n   - 有給休暇、特別休暇などの申請がある日\n   - **曜日に関係なく、常にオレンジ色の背景で表示される**（最優先）\n   - 日曜日や土曜日、祝日であっても休暇申請済みの場合はオレンジ色\n\n#### 祝日の判定\n祝日の判定は以下の方法で行われます：\n- システム内の祝日マスタまたはカレンダーAPIを使用\n- または、フロントエンドで日本の祝日を判定するライブラリ（例：japanese-holidays）を使用",
        "signatures": {},
        "detailedLines": [
          {
            "text": "4. **有給休暇**: 水色の背景に白いコーヒーカップのアイコン",
            "lineNumber": 1273
          },
          {
            "text": "   - 有給休暇取得日を示す",
            "lineNumber": 1274
          },
          {
            "text": "   - 行全体がオレンジ色の背景で表示される",
            "lineNumber": 1275
          },
          {
            "text": "   - アイコンは水色の円の中に白いコーヒーカップ（湯気付き）が描かれたアイコン",
            "lineNumber": 1276
          },
          {
            "lineNumber": 1277
          },
          {
            "text": "5. **代休**: オレンジ色の背景に白い下向きの笑顔アイコン",
            "lineNumber": 1278
          },
          {
            "text": "   - 代休取得日を示す",
            "lineNumber": 1279
          },
          {
            "text": "   - 行全体がオレンジ色の背景で表示される",
            "lineNumber": 1280
          },
          {
            "text": "   - アイコンはオレンジ色の円の中に白い下向きの笑顔が描かれたアイコン",
            "lineNumber": 1281
          },
          {
            "lineNumber": 1282
          },
          {
            "text": "6. **休日（法定休日・所定休日）**: 休日種別に応じたアイコン",
            "lineNumber": 1283
          },
          {
            "text": "   - 土日祝日など、法定休日や所定休日を示すアイコン",
            "lineNumber": 1284
          },
          {
            "lineNumber": 1285
          },
          {
            "text": "7. **その他の休暇**: 休暇種別に応じたアイコン",
            "lineNumber": 1286
          },
          {
            "text": "   - 特別休暇など、その他の休暇種別によって異なるアイコンを表示",
            "lineNumber": 1287
          },
          {
            "lineNumber": 1288
          },
          {
            "text": "### 曜日による行の背景色",
            "lineNumber": 1289
          },
          {
            "lineNumber": 1290
          },
          {
            "text": "勤務表の各行は、曜日や休日区分に応じて背景色が変更されます：",
            "lineNumber": 1291
          },
          {
            "lineNumber": 1292
          },
          {
            "text": "#### 背景色の種類",
            "lineNumber": 1293
          },
          {
            "text": "1. **日曜日**: #FFE8D9（薄いピンク・赤系）",
            "lineNumber": 1294
          },
          {
            "text": "   - 法定休日として扱われる",
            "lineNumber": 1295
          },
          {
            "text": "   - 曜日ラベルも#FF0000（赤色）で表示",
            "lineNumber": 1296
          },
          {
            "lineNumber": 1297
          },
          {
            "text": "2. **土曜日**: #E8F5FF（薄い青）",
            "lineNumber": 1298
          },
          {
            "text": "   - 所定休日として扱われる",
            "lineNumber": 1299
          },
          {
            "text": "   - 曜日ラベルも#0000FF（青色）で表示",
            "lineNumber": 1300
          },
          {
            "lineNumber": 1301
          },
          {
            "text": "3. **祝日**: #E8F5FF（薄い青）",
            "lineNumber": 1302
          },
          {
            "text": "   - 法定休日または所定休日として扱われる",
            "lineNumber": 1303
          },
          {
            "text": "   - 曜日ラベルも#0000FF（青色）で表示",
            "lineNumber": 1304
          },
          {
            "lineNumber": 1305
          },
          {
            "text": "4. **平日（月〜金）**: 白色（デフォルト）",
            "lineNumber": 1306
          },
          {
            "text": "   - 通常の勤務日",
            "lineNumber": 1307
          },
          {
            "text": "   - 曜日ラベルは黒色で表示",
            "lineNumber": 1308
          },
          {
            "lineNumber": 1309
          },
          {
            "text": "5. **休暇申請済み**: オレンジ色（#FFA500）",
            "lineNumber": 1310
          },
          {
            "text": "   - 有給休暇、特別休暇などの申請がある日",
            "lineNumber": 1311
          },
          {
            "text": "   - **曜日に関係なく、常にオレンジ色の背景で表示される**（最優先）",
            "lineNumber": 1312
          },
          {
            "text": "   - 日曜日や土曜日、祝日であっても休暇申請済みの場合はオレンジ色",
            "lineNumber": 1313
          },
          {
            "lineNumber": 1314
          },
          {
            "text": "#### 祝日の判定",
            "lineNumber": 1315
          },
          {
            "text": "祝日の判定は以下の方法で行われます：",
            "lineNumber": 1316
          },
          {
            "text": "- システム内の祝日マスタまたはカレンダーAPIを使用",
            "lineNumber": 1317
          },
          {
            "text": "- または、フロントエンドで日本の祝日を判定するライブラリ（例：japanese-holidays）を使用",
            "lineNumber": 1318
          }
        ]
      },
      "score": 0.3190915584564209
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\applicationController.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 67,
            "column": 1
          }
        },
        "contents": "/**\n * 申請コントローラー\n */\nconst applicationService = require('../services/applicationService');\n\n/**\n * 休暇申請\n */\nconst applyVacation = async (req, res, next) =&gt; {\n  try {\n    const { employeeId, vacationTypeCode, startDate, endDate, reason, contact } = req.body;\n    \n    if (!employeeId || !vacationTypeCode || !startDate || !endDate) {\n      return res.status(400).json({\n        success: false,\n        message: '必須項目が不足しています。'\n      });\n    }\n    \n    const vacationId = await applicationService.applyVacation({\n      employeeId,\n      vacationTypeCode,\n      startDate,\n      endDate,\n      reason,\n      contact\n    });\n    \n    res.json({\n      success: true,\n      message: '休暇申請が完了しました。',\n      vacationId\n    });\n  } catch (error) {\n    if (error.message.includes('残日数が不足')) {\n      return res.status(400).json({\n        success: false,\n        message: error.message\n      });\n    }\n    next(error);\n  }\n};\n\n/**\n * 休日出勤申請\n */\nconst applyHolidayWork = async (req, res, next)\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 申請コントローラー",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const applicationService = require('../services/applicationService');",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "/**",
            "lineNumber": 6
          },
          {
            "text": " * 休暇申請",
            "lineNumber": 7
          },
          {
            "text": " */",
            "lineNumber": 8
          },
          {
            "text": "const applyVacation = async (req, res, next) =&gt; {",
            "lineNumber": 9
          },
          {
            "text": "  try {",
            "lineNumber": 10
          },
          {
            "text": "    const { employeeId, vacationTypeCode, startDate, endDate, reason, contact } = req.body;",
            "lineNumber": 11
          },
          {
            "text": "    ",
            "lineNumber": 12
          },
          {
            "text": "    if (!employeeId || !vacationTypeCode || !startDate || !endDate) {",
            "lineNumber": 13
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 14
          },
          {
            "text": "        success: false,",
            "lineNumber": 15
          },
          {
            "text": "        message: '必須項目が不足しています。'",
            "lineNumber": 16
          },
          {
            "text": "      });",
            "lineNumber": 17
          },
          {
            "text": "    }",
            "lineNumber": 18
          },
          {
            "text": "    ",
            "lineNumber": 19
          },
          {
            "text": "    const vacationId = await applicationService.applyVacation({",
            "lineNumber": 20
          },
          {
            "text": "      employeeId,",
            "lineNumber": 21
          },
          {
            "text": "      vacationTypeCode,",
            "lineNumber": 22
          },
          {
            "text": "      startDate,",
            "lineNumber": 23
          },
          {
            "text": "      endDate,",
            "lineNumber": 24
          },
          {
            "text": "      reason,",
            "lineNumber": 25
          },
          {
            "text": "      contact",
            "lineNumber": 26
          },
          {
            "text": "    });",
            "lineNumber": 27
          },
          {
            "text": "    ",
            "lineNumber": 28
          },
          {
            "text": "    res.json({",
            "lineNumber": 29
          },
          {
            "text": "      success: true,",
            "lineNumber": 30
          },
          {
            "text": "      message: '休暇申請が完了しました。',",
            "lineNumber": 31
          },
          {
            "text": "      vacationId",
            "lineNumber": 32
          },
          {
            "text": "    });",
            "lineNumber": 33
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 34
          },
          {
            "text": "    if (error.message.includes('残日数が不足')) {",
            "lineNumber": 35
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 36
          },
          {
            "text": "        success: false,",
            "lineNumber": 37
          },
          {
            "text": "        message: error.message",
            "lineNumber": 38
          },
          {
            "text": "      });",
            "lineNumber": 39
          },
          {
            "text": "    }",
            "lineNumber": 40
          },
          {
            "text": "    next(error);",
            "lineNumber": 41
          },
          {
            "text": "  }",
            "lineNumber": 42
          },
          {
            "text": "};",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "/**",
            "lineNumber": 45
          },
          {
            "text": " * 休日出勤申請",
            "lineNumber": 46
          },
          {
            "text": " */",
            "lineNumber": 47
          },
          {
            "text": "const applyHolidayWork = async (req, res, next)",
            "lineNumber": 48
          },
          {
            "text": ";",
            "lineNumber": 68
          }
        ]
      },
      "score": 0.31679606437683105
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 63,
            "column": 2
          },
          "endPosition": {
            "line": 91,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇残日数を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} vacationTypeCode - 休暇種別コード\n * @returns {Promise&lt;number&gt;} 残日数\n */\nconst getVacationBalance = async (employeeId, vacationTypeCode) =&gt; {\n  const query = &#96;\n    SELECT REMAINING_DAYS\n    FROM V_VACATION_BALANCE_SUMMARY\n    WHERE EMPLOYEE_ID = ? AND VACATION_TYPE_CODE = ?\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, vacationTypeCode]);\n\n  if (rows.length &gt; 0) {\n    return rows[0].REMAINING_DAYS;\n  }\n\n  return 0;\n};\n\n/**\n * 申請履歴を作成\n * @param {Object} applicationData - 申請データ\n * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 66
          },
          {
            "text": " * 休暇残日数を取得",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 68
          },
          {
            "text": " * @param {string} vacationTypeCode - 休暇種別コード",
            "lineNumber": 69
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 残日数",
            "lineNumber": 70
          },
          {
            "text": " */",
            "lineNumber": 71
          },
          {
            "text": "const getVacationBalance = async (employeeId, vacationTypeCode) =&gt; {",
            "lineNumber": 72
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 73
          },
          {
            "text": "    SELECT REMAINING_DAYS",
            "lineNumber": 74
          },
          {
            "text": "    FROM V_VACATION_BALANCE_SUMMARY",
            "lineNumber": 75
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ? AND VACATION_TYPE_CODE = ?",
            "lineNumber": 76
          },
          {
            "text": "  &#96;;",
            "lineNumber": 77
          },
          {
            "text": "  ",
            "lineNumber": 78
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, vacationTypeCode]);",
            "lineNumber": 79
          },
          {
            "lineNumber": 80
          },
          {
            "text": "  if (rows.length &gt; 0) {",
            "lineNumber": 81
          },
          {
            "text": "    return rows[0].REMAINING_DAYS;",
            "lineNumber": 82
          },
          {
            "text": "  }",
            "lineNumber": 83
          },
          {
            "lineNumber": 84
          },
          {
            "text": "  return 0;",
            "lineNumber": 85
          },
          {
            "text": "};",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "/**",
            "lineNumber": 88
          },
          {
            "text": " * 申請履歴を作成",
            "lineNumber": 89
          },
          {
            "text": " * @param {Object} applicationData - 申請データ",
            "lineNumber": 90
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID",
            "lineNumber": 91
          },
          {
            "text": " */",
            "lineNumber": 92
          }
        ]
      },
      "score": 0.31480440497398376
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 62
          },
          "endPosition": {
            "line": 76
          }
        },
        "contents": "| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;キャンセルボタン | ボタン | | | | | | | 表示 | 活性 | | 申請をキャンセルしてタブを閉じる |\n| | &lt;休暇申請フォーム&gt; | | | | | | | | | | | | |\n| 26 | 休暇申請フォーム | フォーム | | | | | | | 条件付き表示 | 活性 | | 休暇申請タブが選択されている場合に表示 |\n| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種類 | 入力 | プルダウン | 文字 | | | | | 表示 | 活性 | | 休暇種別を選択（年次有給休暇、夏季休暇、病気休暇など） |\n| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有休残日数 | 出力 | | 整数 | | | | XX日 | 条件付き表示 | 活性 | | 年次有給休暇を選択した場合のみ表示。残日数を表示 |\n| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;期間 | 入力 | | 日付 | | | | | 表示 | 活性 | | 休暇取得期間を指定 |\n| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | 入力 | 日付ピッカー | 日付 | | | | YYYY/MM/DD | 表示 | 活性 | | 休暇開始日 |\n| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;からチェックボックス | 入力 | チェックボックス | フラグ | | | | | 表示 | 活性 | | 期間指定の開始を示すチェックボックス |\n| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | 入力 | 日付ピッカー | 日付 | | | | YYYY/MM/DD | 表示 | 活性 | | 休暇終了日 |\n| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;カレンダーアイコンボタン | ボタン | | | | | | | 表示 | 活性 | | 日付ピッカーを開く |\n| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 入力 | テキストエリア | 文字 | | | | | 表示 | 活性 | | 休暇申請の備考・理由を入力 |\n| 35 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;連絡先 | 入力 | テキストボックス | 文字 | | | | | 表示 | 活性 | | 連絡先を入力 |\n| 36 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 休暇申請を送信する。青色のボタン。押下で申請が送信され、該当日の背景色がオレンジ色になり、申請状況アイコンが↑マークに代わる |\n| 37 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;キャンセルボタン | ボタン | | | | | | | 表示 | 活性 | | 申請をキャンセルしてタブを閉じる |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 25 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;キャンセルボタン | ボタン | | | | | | | 表示 | 活性 | | 申請をキャンセルしてタブを閉じる |",
            "lineNumber": 63
          },
          {
            "text": "| | &lt;休暇申請フォーム&gt; | | | | | | | | | | | | |",
            "lineNumber": 64
          },
          {
            "text": "| 26 | 休暇申請フォーム | フォーム | | | | | | | 条件付き表示 | 活性 | | 休暇申請タブが選択されている場合に表示 |",
            "lineNumber": 65
          },
          {
            "text": "| 27 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種類 | 入力 | プルダウン | 文字 | | | | | 表示 | 活性 | | 休暇種別を選択（年次有給休暇、夏季休暇、病気休暇など） |",
            "lineNumber": 66
          },
          {
            "text": "| 28 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有休残日数 | 出力 | | 整数 | | | | XX日 | 条件付き表示 | 活性 | | 年次有給休暇を選択した場合のみ表示。残日数を表示 |",
            "lineNumber": 67
          },
          {
            "text": "| 29 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;期間 | 入力 | | 日付 | | | | | 表示 | 活性 | | 休暇取得期間を指定 |",
            "lineNumber": 68
          },
          {
            "text": "| 30 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | 入力 | 日付ピッカー | 日付 | | | | YYYY/MM/DD | 表示 | 活性 | | 休暇開始日 |",
            "lineNumber": 69
          },
          {
            "text": "| 31 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;からチェックボックス | 入力 | チェックボックス | フラグ | | | | | 表示 | 活性 | | 期間指定の開始を示すチェックボックス |",
            "lineNumber": 70
          },
          {
            "text": "| 32 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | 入力 | 日付ピッカー | 日付 | | | | YYYY/MM/DD | 表示 | 活性 | | 休暇終了日 |",
            "lineNumber": 71
          },
          {
            "text": "| 33 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;カレンダーアイコンボタン | ボタン | | | | | | | 表示 | 活性 | | 日付ピッカーを開く |",
            "lineNumber": 72
          },
          {
            "text": "| 34 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 入力 | テキストエリア | 文字 | | | | | 表示 | 活性 | | 休暇申請の備考・理由を入力 |",
            "lineNumber": 73
          },
          {
            "text": "| 35 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;連絡先 | 入力 | テキストボックス | 文字 | | | | | 表示 | 活性 | | 連絡先を入力 |",
            "lineNumber": 74
          },
          {
            "text": "| 36 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 休暇申請を送信する。青色のボタン。押下で申請が送信され、該当日の背景色がオレンジ色になり、申請状況アイコンが↑マークに代わる |",
            "lineNumber": 75
          },
          {
            "text": "| 37 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;キャンセルボタン | ボタン | | | | | | | 表示 | 活性 | | 申請をキャンセルしてタブを閉じる |",
            "lineNumber": 76
          }
        ]
      },
      "score": 0.3146671950817108
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1028
          },
          "endPosition": {
            "line": 1064
          }
        },
        "contents": "- 関連する取得仕様\n  - なし\n- その他\n  - V_MONTHLY_ATTENDANCEビューや関連テーブルから月間の勤務時間集計を取得\n  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算\n\n#### No.8\n- API仕様名：休暇情報取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/vacation/info | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 休暇残日数リスト | 休暇残日数リスト | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_CODE | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_NAME | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;付与日数 | V_VACATION_BALANCE_SUMMARY.GRANTED_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;使用日数 | V_VACATION_BALANCE_SUMMARY.USED_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残日数 | V_VACATION_BALANCE_SUMMARY.REMAINING_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有効期限 | V_VACATION_BALANCE_SUMMARY.EXPIRATION_DATE | YYYY-MM-DD形式 |\n  | 休暇取得履歴リスト | 休暇取得履歴リスト | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇取得ID | VACATION_HISTORY.VACATION_ID | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | VACATION_HISTORY.VACATION_TYPE_CODE | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | VACATION_HISTORY.START_DATE | YYYY-MM-DD形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | VACATION_HISTORY.END_DATE | YYYY-MM-DD形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得日数 | VACATION_HISTORY.VACATION_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得理由 | VACATION_HISTORY.REASON | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | VACATION_HISTORY.APPROVAL_STATUS | PENDING/APPROVED/REJECTED |\n- 関連する取得仕様\n  - なし\n- その他\n  - V_VACATION_BALANCE_SUMMARYビューから休暇残日数、VACATION_HISTORYテーブルから取得履歴を取得",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1029
          },
          {
            "text": "  - なし",
            "lineNumber": 1030
          },
          {
            "text": "- その他",
            "lineNumber": 1031
          },
          {
            "text": "  - V_MONTHLY_ATTENDANCEビューや関連テーブルから月間の勤務時間集計を取得",
            "lineNumber": 1032
          },
          {
            "text": "  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算",
            "lineNumber": 1033
          },
          {
            "lineNumber": 1034
          },
          {
            "text": "#### No.8",
            "lineNumber": 1035
          },
          {
            "text": "- API仕様名：休暇情報取得API",
            "lineNumber": 1036
          },
          {
            "text": "- リクエスト",
            "lineNumber": 1037
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 1038
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1039
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 1040
          },
          {
            "text": "  | エンドポイント | /api/vacation/info | |",
            "lineNumber": 1041
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |",
            "lineNumber": 1042
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1043
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1044
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1045
          },
          {
            "text": "  | 休暇残日数リスト | 休暇残日数リスト | JSON形式 |",
            "lineNumber": 1046
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_CODE | |",
            "lineNumber": 1047
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_NAME | |",
            "lineNumber": 1048
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;付与日数 | V_VACATION_BALANCE_SUMMARY.GRANTED_DAYS | |",
            "lineNumber": 1049
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;使用日数 | V_VACATION_BALANCE_SUMMARY.USED_DAYS | |",
            "lineNumber": 1050
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残日数 | V_VACATION_BALANCE_SUMMARY.REMAINING_DAYS | |",
            "lineNumber": 1051
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有効期限 | V_VACATION_BALANCE_SUMMARY.EXPIRATION_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1052
          },
          {
            "text": "  | 休暇取得履歴リスト | 休暇取得履歴リスト | JSON形式 |",
            "lineNumber": 1053
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇取得ID | VACATION_HISTORY.VACATION_ID | |",
            "lineNumber": 1054
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | VACATION_HISTORY.VACATION_TYPE_CODE | |",
            "lineNumber": 1055
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | VACATION_HISTORY.START_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1056
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | VACATION_HISTORY.END_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1057
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得日数 | VACATION_HISTORY.VACATION_DAYS | |",
            "lineNumber": 1058
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得理由 | VACATION_HISTORY.REASON | |",
            "lineNumber": 1059
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | VACATION_HISTORY.APPROVAL_STATUS | PENDING/APPROVED/REJECTED |",
            "lineNumber": 1060
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1061
          },
          {
            "text": "  - なし",
            "lineNumber": 1062
          },
          {
            "text": "- その他",
            "lineNumber": 1063
          },
          {
            "text": "  - V_VACATION_BALANCE_SUMMARYビューから休暇残日数、VACATION_HISTORYテーブルから取得履歴を取得",
            "lineNumber": 1064
          }
        ]
      },
      "score": 0.31342613697052
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


バックエンドの月次サマリーサービスを確認し、休暇・祝日情報の取得方法を確認中です。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\models\applicationModel.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "祝日マスタや祝日名を取得する処理",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\utils\\dateUtils.js",
        "range": {
          "startPosition": {
            "line": 110,
            "column": 2
          },
          "endPosition": {
            "line": 159,
            "column": 3
          }
        },
        "contents": "/**\n * 所定出勤日数を計算する（月の平日数、祝日を除く）。\n *\n * @param {number} year 年\n * @param {number} month 月\n * @param {string|null} cutoffDate カットオフ日（YYYY-MM-DD形式、オプション）\n * @returns {number} 所定出勤日数\n */\nconst getScheduledWorkDays = (year, month, cutoffDate = null) =&gt; {\n  const daysInMonth = getDaysInMonth(year, month);\n  let cutoffDay = daysInMonth;\n\n  if (cutoffDate) {\n    cutoffDay = new Date(cutoffDate).getDate();\n  }\n  \n  let scheduledWorkDays = 0;\n  for (let day = 1; day &lt;= cutoffDay; day++) {\n    const date = new Date(year, month - 1, day);\n    const dayOfWeek = date.getDay();\n    \n    // 土日を除外\n    if (dayOfWeek === 0 || dayOfWeek === 6) {\n      continue;\n    }\n    \n    // 祝日を除外\n    try {\n      if (HolidayJp.isHoliday(date)) {\n        continue;\n      }\n    } catch (error) {\n      // 祝日判定でエラーが発生した場合は、平日として扱う\n      console.error('祝日判定エラー:', error);\n    }\n    \n    scheduledWorkDays++;\n  }\n  \n  return scheduledWorkDays;\n};\n\n/**\n * 日付を正規化する（YYYY-MM-DD形式の文字列に変換）。\n *\n * @param {Date|string} date 日付\n * @returns {string} YYYY-MM-DD形式の文字列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 113
          },
          {
            "text": " * 所定出勤日数を計算する（月の平日数、祝日を除く）。",
            "lineNumber": 114
          },
          {
            "text": " *",
            "lineNumber": 115
          },
          {
            "text": " * @param {number} year 年",
            "lineNumber": 116
          },
          {
            "text": " * @param {number} month 月",
            "lineNumber": 117
          },
          {
            "text": " * @param {string|null} cutoffDate カットオフ日（YYYY-MM-DD形式、オプション）",
            "lineNumber": 118
          },
          {
            "text": " * @returns {number} 所定出勤日数",
            "lineNumber": 119
          },
          {
            "text": " */",
            "lineNumber": 120
          },
          {
            "text": "const getScheduledWorkDays = (year, month, cutoffDate = null) =&gt; {",
            "lineNumber": 121
          },
          {
            "text": "  const daysInMonth = getDaysInMonth(year, month);",
            "lineNumber": 122
          },
          {
            "text": "  let cutoffDay = daysInMonth;",
            "lineNumber": 123
          },
          {
            "lineNumber": 124
          },
          {
            "text": "  if (cutoffDate) {",
            "lineNumber": 125
          },
          {
            "text": "    cutoffDay = new Date(cutoffDate).getDate();",
            "lineNumber": 126
          },
          {
            "text": "  }",
            "lineNumber": 127
          },
          {
            "text": "  ",
            "lineNumber": 128
          },
          {
            "text": "  let scheduledWorkDays = 0;",
            "lineNumber": 129
          },
          {
            "text": "  for (let day = 1; day &lt;= cutoffDay; day++) {",
            "lineNumber": 130
          },
          {
            "text": "    const date = new Date(year, month - 1, day);",
            "lineNumber": 131
          },
          {
            "text": "    const dayOfWeek = date.getDay();",
            "lineNumber": 132
          },
          {
            "text": "    ",
            "lineNumber": 133
          },
          {
            "text": "    // 土日を除外",
            "lineNumber": 134
          },
          {
            "text": "    if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 135
          },
          {
            "text": "      continue;",
            "lineNumber": 136
          },
          {
            "text": "    }",
            "lineNumber": 137
          },
          {
            "text": "    ",
            "lineNumber": 138
          },
          {
            "text": "    // 祝日を除外",
            "lineNumber": 139
          },
          {
            "text": "    try {",
            "lineNumber": 140
          },
          {
            "text": "      if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 141
          },
          {
            "text": "        continue;",
            "lineNumber": 142
          },
          {
            "text": "      }",
            "lineNumber": 143
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 144
          },
          {
            "text": "      // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 145
          },
          {
            "text": "      console.error('祝日判定エラー:', error);",
            "lineNumber": 146
          },
          {
            "text": "    }",
            "lineNumber": 147
          },
          {
            "text": "    ",
            "lineNumber": 148
          },
          {
            "text": "    scheduledWorkDays++;",
            "lineNumber": 149
          },
          {
            "text": "  }",
            "lineNumber": 150
          },
          {
            "text": "  ",
            "lineNumber": 151
          },
          {
            "text": "  return scheduledWorkDays;",
            "lineNumber": 152
          },
          {
            "text": "};",
            "lineNumber": 153
          },
          {
            "lineNumber": 154
          },
          {
            "text": "/**",
            "lineNumber": 155
          },
          {
            "text": " * 日付を正規化する（YYYY-MM-DD形式の文字列に変換）。",
            "lineNumber": 156
          },
          {
            "text": " *",
            "lineNumber": 157
          },
          {
            "text": " * @param {Date|string} date 日付",
            "lineNumber": 158
          },
          {
            "text": " * @returns {string} YYYY-MM-DD形式の文字列",
            "lineNumber": 159
          },
          {
            "text": " */",
            "lineNumber": 160
          }
        ]
      },
      "score": 0.37610113620758057
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 567
          },
          "endPosition": {
            "line": 628
          }
        },
        "contents": "    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      const days = ['日', '月', '火', '水', '木', '金', '土']\n      return days[date.getDay()]\n    },\n    isLegalHoliday(dateStr) {\n      // 法定休日（日曜日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      return day === 0 // 日曜日\n    },\n    isScheduledHoliday(dateStr) {\n      // 所定休日（土曜日・祝日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      // 土曜日を所定休日として判定\n      if (day === 6) return true\n      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）\n      return false\n    },\n    isHoliday(dateStr) {\n      // 休日全般を判定（後方互換性のため残す）\n      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)\n    },\n    getEventText(day) {\n      if (day.remarkText) {\n        return day.remarkText\n      }\n      if (day.isDailyConfirmed) {\n        if (day.workLocationCode === 'HOME') {\n          return '日次確定-在宅'\n        }\n\n        return '日次確定-出勤'\n      }\n      if (day.workLocationCode === 'HOME') {\n        return '在宅'\n      }\n      return ''\n    },\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {\n        const date = new Date(timeStr)\n        const hours = date.getHours() // 先頭0を削除\n        const minutes = String(date.getMinutes()).padStart(2, '0')\n        return &#96;${hours}:${minutes}&#96;\n      }\n      // 既にHH:MM形式の場合は、先頭0を削除\n      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {\n        const [hours, minutes] = timeStr.split(':')\n        const hourNum = parseInt(hours, 10)\n        return &#96;${hourNum}:${minutes}&#96;\n      }\n      return timeStr\n    },\n    formatHours(hours) {\n      if (hours === null || hours === undefined) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 570
          },
          {
            "text": "      const days = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 571
          },
          {
            "text": "      return days[date.getDay()]",
            "lineNumber": 572
          },
          {
            "text": "    },",
            "lineNumber": 573
          },
          {
            "text": "    isLegalHoliday(dateStr) {",
            "lineNumber": 574
          },
          {
            "text": "      // 法定休日（日曜日）を判定",
            "lineNumber": 575
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 576
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 578
          },
          {
            "text": "      return day === 0 // 日曜日",
            "lineNumber": 579
          },
          {
            "text": "    },",
            "lineNumber": 580
          },
          {
            "text": "    isScheduledHoliday(dateStr) {",
            "lineNumber": 581
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 582
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 583
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 584
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 585
          },
          {
            "text": "      // 土曜日を所定休日として判定",
            "lineNumber": 586
          },
          {
            "text": "      if (day === 6) return true",
            "lineNumber": 587
          },
          {
            "text": "      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）",
            "lineNumber": 588
          },
          {
            "text": "      return false",
            "lineNumber": 589
          },
          {
            "text": "    },",
            "lineNumber": 590
          },
          {
            "text": "    isHoliday(dateStr) {",
            "lineNumber": 591
          },
          {
            "text": "      // 休日全般を判定（後方互換性のため残す）",
            "lineNumber": 592
          },
          {
            "text": "      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)",
            "lineNumber": 593
          },
          {
            "text": "    },",
            "lineNumber": 594
          },
          {
            "text": "    getEventText(day) {",
            "lineNumber": 595
          },
          {
            "text": "      if (day.remarkText) {",
            "lineNumber": 596
          },
          {
            "text": "        return day.remarkText",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      if (day.isDailyConfirmed) {",
            "lineNumber": 599
          },
          {
            "text": "        if (day.workLocationCode === 'HOME') {",
            "lineNumber": 600
          },
          {
            "text": "          return '日次確定-在宅'",
            "lineNumber": 601
          },
          {
            "text": "        }",
            "lineNumber": 602
          },
          {
            "lineNumber": 603
          },
          {
            "text": "        return '日次確定-出勤'",
            "lineNumber": 604
          },
          {
            "text": "      }",
            "lineNumber": 605
          },
          {
            "text": "      if (day.workLocationCode === 'HOME') {",
            "lineNumber": 606
          },
          {
            "text": "        return '在宅'",
            "lineNumber": 607
          },
          {
            "text": "      }",
            "lineNumber": 608
          },
          {
            "text": "      return ''",
            "lineNumber": 609
          },
          {
            "text": "    },",
            "lineNumber": 610
          },
          {
            "text": "    formatTime(timeStr) {",
            "lineNumber": 611
          },
          {
            "text": "      if (!timeStr) return ''",
            "lineNumber": 612
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; timeStr.includes('T')) {",
            "lineNumber": 613
          },
          {
            "text": "        const date = new Date(timeStr)",
            "lineNumber": 614
          },
          {
            "text": "        const hours = date.getHours() // 先頭0を削除",
            "lineNumber": 615
          },
          {
            "text": "        const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 616
          },
          {
            "text": "        return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 617
          },
          {
            "text": "      }",
            "lineNumber": 618
          },
          {
            "text": "      // 既にHH:MM形式の場合は、先頭0を削除",
            "lineNumber": 619
          },
          {
            "text": "      if (typeof timeStr === 'string' &amp;&amp; /^\\d{2}:\\d{2}$/.test(timeStr)) {",
            "lineNumber": 620
          },
          {
            "text": "        const [hours, minutes] = timeStr.split(':')",
            "lineNumber": 621
          },
          {
            "text": "        const hourNum = parseInt(hours, 10)",
            "lineNumber": 622
          },
          {
            "text": "        return &#96;${hourNum}:${minutes}&#96;",
            "lineNumber": 623
          },
          {
            "text": "      }",
            "lineNumber": 624
          },
          {
            "text": "      return timeStr",
            "lineNumber": 625
          },
          {
            "text": "    },",
            "lineNumber": 626
          },
          {
            "text": "    formatHours(hours) {",
            "lineNumber": 627
          },
          {
            "text": "      if (hours === null || hours === undefined) return ''",
            "lineNumber": 628
          }
        ]
      },
      "score": 0.36797329783439636
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\utils\\dateUtils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 21,
            "column": 3
          }
        },
        "contents": "/**\n * 日付処理ユーティリティ\n */\nconst HolidayJp = require('@holiday-jp/holiday_jp');\n\n/**\n * 日本時間（JST）で今日の日付を取得する。\n *\n * @returns {string} YYYY-MM-DD形式の日付文字列\n */\nconst getTodayJST = () =&gt; {\n  const now = new Date();\n  const jstOffset = 9 * 60; // UTC+9時間（分単位）\n  const jstDate = new Date(now.getTime() + (jstOffset + now.getTimezoneOffset()) * 60000);\n  return jstDate.toISOString().split('T')[0];\n};\n\n/**\n * 現在の日時を取得する。\n *\n * @returns {Date} 現在の日時\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 日付処理ユーティリティ",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const HolidayJp = require('@holiday-jp/holiday_jp');",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "/**",
            "lineNumber": 6
          },
          {
            "text": " * 日本時間（JST）で今日の日付を取得する。",
            "lineNumber": 7
          },
          {
            "text": " *",
            "lineNumber": 8
          },
          {
            "text": " * @returns {string} YYYY-MM-DD形式の日付文字列",
            "lineNumber": 9
          },
          {
            "text": " */",
            "lineNumber": 10
          },
          {
            "text": "const getTodayJST = () =&gt; {",
            "lineNumber": 11
          },
          {
            "text": "  const now = new Date();",
            "lineNumber": 12
          },
          {
            "text": "  const jstOffset = 9 * 60; // UTC+9時間（分単位）",
            "lineNumber": 13
          },
          {
            "text": "  const jstDate = new Date(now.getTime() + (jstOffset + now.getTimezoneOffset()) * 60000);",
            "lineNumber": 14
          },
          {
            "text": "  return jstDate.toISOString().split('T')[0];",
            "lineNumber": 15
          },
          {
            "text": "};",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "/**",
            "lineNumber": 18
          },
          {
            "text": " * 現在の日時を取得する。",
            "lineNumber": 19
          },
          {
            "text": " *",
            "lineNumber": 20
          },
          {
            "text": " * @returns {Date} 現在の日時",
            "lineNumber": 21
          },
          {
            "text": " */",
            "lineNumber": 22
          }
        ]
      },
      "score": 0.36187419295310974
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \nfor (let day = 1; day &lt;= daysInMonth; day++) {\n\n      }\n    }\n    \n    let attendanceId = null;\n    let clockInTime = null;\n    let clockOutTime = null;\n    let holidayWorkHours = 0;\n    let nightWorkHours = 0;\n    let workLocationCode = null;\n    let remarkText = null;\n    let isDailyConfirmed = false;\n\n    if (attendance) {\n      attendanceId = attendance.ATTENDANCE_ID;\n      clockInTime = attendance.CLOCK_IN_TIME;\n      clockOutTime = attendance.CLOCK_OUT_TIME;\n      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;\n      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;\n      workLocationCode = attendance.WORK_LOCATION_CODE;\n      remarkText = attendance.REMARK_TEXT;\n      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;\n    }\n\n    dailyData.push({\n      attendanceId: attendanceId,\n      employeeId: employeeId,\n      workDate: workDate,\n      clockInTime: clockInTime,\n      clockOutTime: clockOutTime,\n      actualWorkHours: actualWorkHours,\n      breakTimeTotal: breakTimeTotal,\n      overtimeHours: overtimeHours,\n      holidayWorkHours: holidayWorkHours,\n      nightWorkHours: nightWorkHours,\n      workLocationCode: workLocationCode,\n      remarkText: remarkText,\n      isDailyConfirmed: isDailyConfirmed\n    });\n  }\n  \n  // 3. 月次サマリーデータ取得（計算）\n  const actualWorkDays = attendanceRows.filter(row =&gt; \n    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME\n  ).length;\n  \n  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算\n  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）\n  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算\n  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算\n  \n  // 所定労働時間（1日7.5時間 × 所定出勤日数）\n  const scheduledWorkHours = scheduledWorkDays * 7.5;\n  \n  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）\n  let totalWorkMinutes = 0;\n  for (const row of attendanceRows) {\n    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME)\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            },
            {
              "startPosition": {
                "line": 47,
                "column": 3
              },
              "endPosition": {
                "line": 48,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "text": "for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 47
          },
          {
            "lineNumber": 106
          },
          {
            "text": "      }",
            "lineNumber": 107
          },
          {
            "text": "    }",
            "lineNumber": 108
          },
          {
            "text": "    ",
            "lineNumber": 109
          },
          {
            "text": "    let attendanceId = null;",
            "lineNumber": 110
          },
          {
            "text": "    let clockInTime = null;",
            "lineNumber": 111
          },
          {
            "text": "    let clockOutTime = null;",
            "lineNumber": 112
          },
          {
            "text": "    let holidayWorkHours = 0;",
            "lineNumber": 113
          },
          {
            "text": "    let nightWorkHours = 0;",
            "lineNumber": 114
          },
          {
            "text": "    let workLocationCode = null;",
            "lineNumber": 115
          },
          {
            "text": "    let remarkText = null;",
            "lineNumber": 116
          },
          {
            "text": "    let isDailyConfirmed = false;",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "    if (attendance) {",
            "lineNumber": 119
          },
          {
            "text": "      attendanceId = attendance.ATTENDANCE_ID;",
            "lineNumber": 120
          },
          {
            "text": "      clockInTime = attendance.CLOCK_IN_TIME;",
            "lineNumber": 121
          },
          {
            "text": "      clockOutTime = attendance.CLOCK_OUT_TIME;",
            "lineNumber": 122
          },
          {
            "text": "      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;",
            "lineNumber": 123
          },
          {
            "text": "      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;",
            "lineNumber": 124
          },
          {
            "text": "      workLocationCode = attendance.WORK_LOCATION_CODE;",
            "lineNumber": 125
          },
          {
            "text": "      remarkText = attendance.REMARK_TEXT;",
            "lineNumber": 126
          },
          {
            "text": "      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;",
            "lineNumber": 127
          },
          {
            "text": "    }",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    dailyData.push({",
            "lineNumber": 130
          },
          {
            "text": "      attendanceId: attendanceId,",
            "lineNumber": 131
          },
          {
            "text": "      employeeId: employeeId,",
            "lineNumber": 132
          },
          {
            "text": "      workDate: workDate,",
            "lineNumber": 133
          },
          {
            "text": "      clockInTime: clockInTime,",
            "lineNumber": 134
          },
          {
            "text": "      clockOutTime: clockOutTime,",
            "lineNumber": 135
          },
          {
            "text": "      actualWorkHours: actualWorkHours,",
            "lineNumber": 136
          },
          {
            "text": "      breakTimeTotal: breakTimeTotal,",
            "lineNumber": 137
          },
          {
            "text": "      overtimeHours: overtimeHours,",
            "lineNumber": 138
          },
          {
            "text": "      holidayWorkHours: holidayWorkHours,",
            "lineNumber": 139
          },
          {
            "text": "      nightWorkHours: nightWorkHours,",
            "lineNumber": 140
          },
          {
            "text": "      workLocationCode: workLocationCode,",
            "lineNumber": 141
          },
          {
            "text": "      remarkText: remarkText,",
            "lineNumber": 142
          },
          {
            "text": "      isDailyConfirmed: isDailyConfirmed",
            "lineNumber": 143
          },
          {
            "text": "    });",
            "lineNumber": 144
          },
          {
            "text": "  }",
            "lineNumber": 145
          },
          {
            "text": "  ",
            "lineNumber": 146
          },
          {
            "text": "  // 3. 月次サマリーデータ取得（計算）",
            "lineNumber": 147
          },
          {
            "text": "  const actualWorkDays = attendanceRows.filter(row =&gt; ",
            "lineNumber": 148
          },
          {
            "text": "    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME",
            "lineNumber": 149
          },
          {
            "text": "  ).length;",
            "lineNumber": 150
          },
          {
            "text": "  ",
            "lineNumber": 151
          },
          {
            "text": "  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算",
            "lineNumber": 152
          },
          {
            "text": "  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）",
            "lineNumber": 153
          },
          {
            "text": "  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算",
            "lineNumber": 154
          },
          {
            "text": "  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算",
            "lineNumber": 155
          },
          {
            "text": "  ",
            "lineNumber": 156
          },
          {
            "text": "  // 所定労働時間（1日7.5時間 × 所定出勤日数）",
            "lineNumber": 157
          },
          {
            "text": "  const scheduledWorkHours = scheduledWorkDays * 7.5;",
            "lineNumber": 158
          },
          {
            "text": "  ",
            "lineNumber": 159
          },
          {
            "text": "  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）",
            "lineNumber": 160
          },
          {
            "text": "  let totalWorkMinutes = 0;",
            "lineNumber": 161
          },
          {
            "text": "  for (const row of attendanceRows) {",
            "lineNumber": 162
          },
          {
            "text": "    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME)",
            "lineNumber": 163
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.32493850588798523
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 19,
            "column": 2
          },
          "endPosition": {
            "line": 50,
            "column": 3
          }
        },
        "contents": "/**\n * ジョブマスタを取得\n * @param {string} workDate - 対象日付（YYYY-MM-DD形式、オプション）\n * @returns {Promise&lt;Array&gt;} ジョブの配列\n */\nconst getJobs = async (workDate = null) =&gt; {\n  let query = &#96;\n    SELECT JOB_CODE, JOB_NAME, JOB_CATEGORY, PROJECT_CODE, START_DATE, END_DATE\n    FROM JOB_MASTER \n    WHERE IS_ACTIVE = TRUE\n  &#96;;\n  \n  const params = [];\n  \n  if (workDate) {\n    query += &#96; AND (START_DATE IS NULL OR START_DATE &lt;= ?) \n               AND (END_DATE IS NULL OR END_DATE &gt;= ?)&#96;;\n    params.push(workDate, workDate);\n  }\n  \n  query += &#96; ORDER BY JOB_CODE&#96;;\n  \n  const [rows] = await db.execute(query, params);\n  return rows;\n};\n\n/**\n * 休暇種別マスタを取得\n * @returns {Promise&lt;Array&gt;} 休暇種別の配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 22
          },
          {
            "text": " * ジョブマスタを取得",
            "lineNumber": 23
          },
          {
            "text": " * @param {string} workDate - 対象日付（YYYY-MM-DD形式、オプション）",
            "lineNumber": 24
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} ジョブの配列",
            "lineNumber": 25
          },
          {
            "text": " */",
            "lineNumber": 26
          },
          {
            "text": "const getJobs = async (workDate = null) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "  let query = &#96;",
            "lineNumber": 28
          },
          {
            "text": "    SELECT JOB_CODE, JOB_NAME, JOB_CATEGORY, PROJECT_CODE, START_DATE, END_DATE",
            "lineNumber": 29
          },
          {
            "text": "    FROM JOB_MASTER ",
            "lineNumber": 30
          },
          {
            "text": "    WHERE IS_ACTIVE = TRUE",
            "lineNumber": 31
          },
          {
            "text": "  &#96;;",
            "lineNumber": 32
          },
          {
            "text": "  ",
            "lineNumber": 33
          },
          {
            "text": "  const params = [];",
            "lineNumber": 34
          },
          {
            "text": "  ",
            "lineNumber": 35
          },
          {
            "text": "  if (workDate) {",
            "lineNumber": 36
          },
          {
            "text": "    query += &#96; AND (START_DATE IS NULL OR START_DATE &lt;= ?) ",
            "lineNumber": 37
          },
          {
            "text": "               AND (END_DATE IS NULL OR END_DATE &gt;= ?)&#96;;",
            "lineNumber": 38
          },
          {
            "text": "    params.push(workDate, workDate);",
            "lineNumber": 39
          },
          {
            "text": "  }",
            "lineNumber": 40
          },
          {
            "text": "  ",
            "lineNumber": 41
          },
          {
            "text": "  query += &#96; ORDER BY JOB_CODE&#96;;",
            "lineNumber": 42
          },
          {
            "text": "  ",
            "lineNumber": 43
          },
          {
            "text": "  const [rows] = await db.execute(query, params);",
            "lineNumber": 44
          },
          {
            "text": "  return rows;",
            "lineNumber": 45
          },
          {
            "text": "};",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "/**",
            "lineNumber": 48
          },
          {
            "text": " * 休暇種別マスタを取得",
            "lineNumber": 49
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇種別の配列",
            "lineNumber": 50
          },
          {
            "text": " */",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.31996649503707886
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


バックエンドに休暇・祝日情報を追加し、フロントエンドの表示ロジックを更新します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\utils\dateUtils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "VACATION_TYPEテーブルから休暇種別名を取得する処理",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 45,
            "column": 2
          },
          "endPosition": {
            "line": 69,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇種別マスタを取得\n * @returns {Promise&lt;Array&gt;} 休暇種別の配列\n */\nconst getVacationTypes = async () =&gt; {\n  const query = &#96;\n    SELECT VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, \n           IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER\n    FROM VACATION_TYPE \n    WHERE IS_ACTIVE = TRUE \n    ORDER BY DISPLAY_ORDER\n  &#96;;\n  \n  const [rows] = await db.execute(query);\n  return rows;\n};\n\n/**\n * お知らせ情報を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} department - 部署\n * @returns {Promise&lt;Array&gt;} お知らせの配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 48
          },
          {
            "text": " * 休暇種別マスタを取得",
            "lineNumber": 49
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇種別の配列",
            "lineNumber": 50
          },
          {
            "text": " */",
            "lineNumber": 51
          },
          {
            "text": "const getVacationTypes = async () =&gt; {",
            "lineNumber": 52
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 53
          },
          {
            "text": "    SELECT VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, ",
            "lineNumber": 54
          },
          {
            "text": "           IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER",
            "lineNumber": 55
          },
          {
            "text": "    FROM VACATION_TYPE ",
            "lineNumber": 56
          },
          {
            "text": "    WHERE IS_ACTIVE = TRUE ",
            "lineNumber": 57
          },
          {
            "text": "    ORDER BY DISPLAY_ORDER",
            "lineNumber": 58
          },
          {
            "text": "  &#96;;",
            "lineNumber": 59
          },
          {
            "text": "  ",
            "lineNumber": 60
          },
          {
            "text": "  const [rows] = await db.execute(query);",
            "lineNumber": 61
          },
          {
            "text": "  return rows;",
            "lineNumber": 62
          },
          {
            "text": "};",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "/**",
            "lineNumber": 65
          },
          {
            "text": " * お知らせ情報を取得",
            "lineNumber": 66
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} department - 部署",
            "lineNumber": 68
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} お知らせの配列",
            "lineNumber": 69
          },
          {
            "text": " */",
            "lineNumber": 70
          }
        ]
      },
      "score": 0.52470862865448
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\README_MySQL.md",
        "range": {
          "startPosition": {
            "line": 147
          },
          "endPosition": {
            "line": 176
          }
        },
        "contents": "| **PROJECT_CODE** | VARCHAR(50) | NULL | - | プロジェクトコード。関連プロジェクトを識別します。例: &#96;25152025-300&#96; |\n| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると工数入力の選択肢から除外されます。 |\n| **START_DATE** | DATE | NULL | - | ジョブの開始日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |\n| **END_DATE** | DATE | NULL | - | ジョブの終了日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n---\n\n### 4. 休暇種別マスタ (VACATION_TYPE)\n\n休暇の種類と付与ルールを管理するマスタテーブルです。\n\n| カラム名 | 型 | NULL | デフォルト | 説明 |\n|---------|-----|------|-----------|------|\n| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **主キー**。休暇種別を識別するコード。例: &#96;PAID_LEAVE&#96;（有給休暇）、&#96;SUMMER_LEAVE&#96;（夏季休暇） |\n| **VACATION_TYPE_NAME** | VARCHAR(50) | NOT NULL | - | 休暇種別の表示名。画面に表示されます。例: &#96;有給休暇&#96;、&#96;夏季休暇&#96; |\n| **VACATION_CATEGORY** | VARCHAR(20) | NOT NULL | - | 休暇のカテゴリ。分類に使用します。例: &#96;有給&#96;、&#96;特別&#96; |\n| **IS_PAID** | BOOLEAN | NULL | &#96;FALSE&#96; | 有給フラグ。&#96;TRUE&#96;=有給（給与支給あり）、&#96;FALSE&#96;=無給。 |\n| **ANNUAL_GRANT_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 年間付与日数。例: &#96;20.0&#96;=年間20日付与、&#96;3.0&#96;=年間3日付与 |\n| **DISPLAY_ORDER** | INT | NOT NULL | - | 表示順序。小さい順に表示されます。 |\n| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると選択肢から非表示になります。 |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n---\n\n### 5. お知らせマスタ (NOTIFICATION)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| **PROJECT_CODE** | VARCHAR(50) | NULL | - | プロジェクトコード。関連プロジェクトを識別します。例: &#96;25152025-300&#96; |",
            "lineNumber": 148
          },
          {
            "text": "| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると工数入力の選択肢から除外されます。 |",
            "lineNumber": 149
          },
          {
            "text": "| **START_DATE** | DATE | NULL | - | ジョブの開始日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |",
            "lineNumber": 150
          },
          {
            "text": "| **END_DATE** | DATE | NULL | - | ジョブの終了日。有効期間の判定に使用します。形式: &#96;YYYY-MM-DD&#96; |",
            "lineNumber": 151
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 152
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 153
          },
          {
            "lineNumber": 154
          },
          {
            "text": "---",
            "lineNumber": 155
          },
          {
            "lineNumber": 156
          },
          {
            "text": "### 4. 休暇種別マスタ (VACATION_TYPE)",
            "lineNumber": 157
          },
          {
            "lineNumber": 158
          },
          {
            "text": "休暇の種類と付与ルールを管理するマスタテーブルです。",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "| カラム名 | 型 | NULL | デフォルト | 説明 |",
            "lineNumber": 161
          },
          {
            "text": "|---------|-----|------|-----------|------|",
            "lineNumber": 162
          },
          {
            "text": "| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **主キー**。休暇種別を識別するコード。例: &#96;PAID_LEAVE&#96;（有給休暇）、&#96;SUMMER_LEAVE&#96;（夏季休暇） |",
            "lineNumber": 163
          },
          {
            "text": "| **VACATION_TYPE_NAME** | VARCHAR(50) | NOT NULL | - | 休暇種別の表示名。画面に表示されます。例: &#96;有給休暇&#96;、&#96;夏季休暇&#96; |",
            "lineNumber": 164
          },
          {
            "text": "| **VACATION_CATEGORY** | VARCHAR(20) | NOT NULL | - | 休暇のカテゴリ。分類に使用します。例: &#96;有給&#96;、&#96;特別&#96; |",
            "lineNumber": 165
          },
          {
            "text": "| **IS_PAID** | BOOLEAN | NULL | &#96;FALSE&#96; | 有給フラグ。&#96;TRUE&#96;=有給（給与支給あり）、&#96;FALSE&#96;=無給。 |",
            "lineNumber": 166
          },
          {
            "text": "| **ANNUAL_GRANT_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 年間付与日数。例: &#96;20.0&#96;=年間20日付与、&#96;3.0&#96;=年間3日付与 |",
            "lineNumber": 167
          },
          {
            "text": "| **DISPLAY_ORDER** | INT | NOT NULL | - | 表示順序。小さい順に表示されます。 |",
            "lineNumber": 168
          },
          {
            "text": "| **IS_ACTIVE** | BOOLEAN | NULL | &#96;TRUE&#96; | 有効フラグ。&#96;FALSE&#96;にすると選択肢から非表示になります。 |",
            "lineNumber": 169
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 170
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "---",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "### 5. お知らせマスタ (NOTIFICATION)",
            "lineNumber": 175
          }
        ]
      },
      "score": 0.45132210850715637
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 269
          },
          "endPosition": {
            "line": 306
          }
        },
        "contents": "CREATE TABLE VACATION_HISTORY (\n    VACATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇取得ID',\n    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',\n    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',\n    START_DATE DATE NOT NULL COMMENT '開始日',\n    END_DATE DATE NOT NULL COMMENT '終了日',\n    VACATION_DAYS DECIMAL(4,1) NOT NULL COMMENT '取得日数',\n    HALF_DAY_TYPE VARCHAR(20) COMMENT '半休種別(午前/午後)',\n    REASON TEXT COMMENT '取得理由',\n    APPROVAL_STATUS VARCHAR(20) DEFAULT 'PENDING' COMMENT '承認状態(申請中/承認済/却下)',\n    APPROVED_BY VARCHAR(50) COMMENT '承認者',\n    APPROVED_AT DATETIME COMMENT '承認日時',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',\n    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',\n    PRIMARY KEY (VACATION_ID),\n    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,\n    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),\n    INDEX IDX_EMP_DATE (EMPLOYEE_ID, START_DATE, END_DATE),\n    INDEX IDX_APPROVAL (APPROVAL_STATUS)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇取得履歴';\n\n-- ====================================================================\n-- マスタデータの投入\n-- ====================================================================\n\n-- 1. 勤務場所マスタの初期データ\nINSERT INTO WORK_LOCATION (LOCATION_CODE, LOCATION_NAME, DISPLAY_ORDER, IS_ACTIVE) VALUES\n('COMMUTE', '通勤', 1, TRUE),\n('REMOTE', '在宅', 2, TRUE),\n('DIRECT', '直行、直帰、直行直帰', 3, TRUE),\n('BUSINESS_TRIP', '出張', 4, TRUE);\n\n-- 2. 休暇種別マスタの初期データ\nINSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE) VALUES\n('PAID_LEAVE', '有給休暇', '有給', TRUE, 20.0, 1, TRUE),\n('SUMMER_LEAVE', '夏季休暇', '特別', TRUE, 3.0, 2, TRUE),\n('SICK_LEAVE', '病気休暇', '特別', TRUE, 5.0, 3, TRUE),",
        "signatures": {},
        "detailedLines": [
          {
            "text": "CREATE TABLE VACATION_HISTORY (",
            "lineNumber": 270
          },
          {
            "text": "    VACATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇取得ID',",
            "lineNumber": 271
          },
          {
            "text": "    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',",
            "lineNumber": 272
          },
          {
            "text": "    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',",
            "lineNumber": 273
          },
          {
            "text": "    START_DATE DATE NOT NULL COMMENT '開始日',",
            "lineNumber": 274
          },
          {
            "text": "    END_DATE DATE NOT NULL COMMENT '終了日',",
            "lineNumber": 275
          },
          {
            "text": "    VACATION_DAYS DECIMAL(4,1) NOT NULL COMMENT '取得日数',",
            "lineNumber": 276
          },
          {
            "text": "    HALF_DAY_TYPE VARCHAR(20) COMMENT '半休種別(午前/午後)',",
            "lineNumber": 277
          },
          {
            "text": "    REASON TEXT COMMENT '取得理由',",
            "lineNumber": 278
          },
          {
            "text": "    APPROVAL_STATUS VARCHAR(20) DEFAULT 'PENDING' COMMENT '承認状態(申請中/承認済/却下)',",
            "lineNumber": 279
          },
          {
            "text": "    APPROVED_BY VARCHAR(50) COMMENT '承認者',",
            "lineNumber": 280
          },
          {
            "text": "    APPROVED_AT DATETIME COMMENT '承認日時',",
            "lineNumber": 281
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',",
            "lineNumber": 282
          },
          {
            "text": "    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',",
            "lineNumber": 283
          },
          {
            "text": "    PRIMARY KEY (VACATION_ID),",
            "lineNumber": 284
          },
          {
            "text": "    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,",
            "lineNumber": 285
          },
          {
            "text": "    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),",
            "lineNumber": 286
          },
          {
            "text": "    INDEX IDX_EMP_DATE (EMPLOYEE_ID, START_DATE, END_DATE),",
            "lineNumber": 287
          },
          {
            "text": "    INDEX IDX_APPROVAL (APPROVAL_STATUS)",
            "lineNumber": 288
          },
          {
            "text": ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇取得履歴';",
            "lineNumber": 289
          },
          {
            "lineNumber": 290
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 291
          },
          {
            "text": "-- マスタデータの投入",
            "lineNumber": 292
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "-- 1. 勤務場所マスタの初期データ",
            "lineNumber": 295
          },
          {
            "text": "INSERT INTO WORK_LOCATION (LOCATION_CODE, LOCATION_NAME, DISPLAY_ORDER, IS_ACTIVE) VALUES",
            "lineNumber": 296
          },
          {
            "text": "('COMMUTE', '通勤', 1, TRUE),",
            "lineNumber": 297
          },
          {
            "text": "('REMOTE', '在宅', 2, TRUE),",
            "lineNumber": 298
          },
          {
            "text": "('DIRECT', '直行、直帰、直行直帰', 3, TRUE),",
            "lineNumber": 299
          },
          {
            "text": "('BUSINESS_TRIP', '出張', 4, TRUE);",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "-- 2. 休暇種別マスタの初期データ",
            "lineNumber": 302
          },
          {
            "text": "INSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE) VALUES",
            "lineNumber": 303
          },
          {
            "text": "('PAID_LEAVE', '有給休暇', '有給', TRUE, 20.0, 1, TRUE),",
            "lineNumber": 304
          },
          {
            "text": "('SUMMER_LEAVE', '夏季休暇', '特別', TRUE, 3.0, 2, TRUE),",
            "lineNumber": 305
          },
          {
            "text": "('SICK_LEAVE', '病気休暇', '特別', TRUE, 5.0, 3, TRUE),",
            "lineNumber": 306
          }
        ]
      },
      "score": 0.4360302686691284
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\masterController.js",
        "range": {
          "startPosition": {
            "line": 36,
            "column": 2
          },
          "endPosition": {
            "line": 81,
            "column": 1
          }
        },
        "contents": "/**\n * 休暇種別マスタ取得\n */\nconst getVacationTypes = async (req, res, next) =&gt; {\n  try {\n    const vacationTypes = await masterService.getVacationTypes();\n    \n    res.json({\n      success: true,\n      vacationTypes\n    });\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * 月次サマリー取得\n */\nconst getMonthlySummary = async (req, res, next)\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 39
          },
          {
            "text": " * 休暇種別マスタ取得",
            "lineNumber": 40
          },
          {
            "text": " */",
            "lineNumber": 41
          },
          {
            "text": "const getVacationTypes = async (req, res, next) =&gt; {",
            "lineNumber": 42
          },
          {
            "text": "  try {",
            "lineNumber": 43
          },
          {
            "text": "    const vacationTypes = await masterService.getVacationTypes();",
            "lineNumber": 44
          },
          {
            "text": "    ",
            "lineNumber": 45
          },
          {
            "text": "    res.json({",
            "lineNumber": 46
          },
          {
            "text": "      success: true,",
            "lineNumber": 47
          },
          {
            "text": "      vacationTypes",
            "lineNumber": 48
          },
          {
            "text": "    });",
            "lineNumber": 49
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 50
          },
          {
            "text": "    next(error);",
            "lineNumber": 51
          },
          {
            "text": "  }",
            "lineNumber": 52
          },
          {
            "text": "};",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "/**",
            "lineNumber": 55
          },
          {
            "text": " * 月次サマリー取得",
            "lineNumber": 56
          },
          {
            "text": " */",
            "lineNumber": 57
          },
          {
            "text": "const getMonthlySummary = async (req, res, next)",
            "lineNumber": 58
          },
          {
            "text": ";",
            "lineNumber": 82
          }
        ]
      },
      "score": 0.40812310576438904
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 52
          },
          "endPosition": {
            "line": 84
          }
        },
        "contents": "-- 3. ジョブマスタ (JOB_MASTER)\nCREATE TABLE JOB_MASTER (\n    JOB_CODE VARCHAR(50) NOT NULL COMMENT 'ジョブコード',\n    JOB_NAME VARCHAR(200) NOT NULL COMMENT 'ジョブ名',\n    JOB_CATEGORY VARCHAR(50) COMMENT 'ジョブカテゴリ',\n    PROJECT_CODE VARCHAR(50) COMMENT 'プロジェクトコード',\n    IS_ACTIVE BOOLEAN DEFAULT TRUE COMMENT '有効フラグ',\n    START_DATE DATE COMMENT '開始日',\n    END_DATE DATE COMMENT '終了日',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',\n    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',\n    PRIMARY KEY (JOB_CODE)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ジョブマスタ';\n\n-- 4. 休暇種別マスタ (VACATION_TYPE)\nCREATE TABLE VACATION_TYPE (\n    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',\n    VACATION_TYPE_NAME VARCHAR(50) NOT NULL COMMENT '休暇種別名',\n    VACATION_CATEGORY VARCHAR(20) NOT NULL COMMENT '休暇カテゴリ(有給/特別/etc)',\n    IS_PAID BOOLEAN DEFAULT FALSE COMMENT '有給フラグ',\n    ANNUAL_GRANT_DAYS DECIMAL(4,1) DEFAULT 0 COMMENT '年間付与日数',\n    DISPLAY_ORDER INT NOT NULL COMMENT '表示順',\n    IS_ACTIVE BOOLEAN DEFAULT TRUE COMMENT '有効フラグ',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',\n    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',\n    PRIMARY KEY (VACATION_TYPE_CODE)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇種別マスタ';\n\n-- 5. お知らせマスタ (NOTIFICATION)\nCREATE TABLE NOTIFICATION (\n    NOTIFICATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT 'お知らせID',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "-- 3. ジョブマスタ (JOB_MASTER)",
            "lineNumber": 54
          },
          {
            "text": "CREATE TABLE JOB_MASTER (",
            "lineNumber": 55
          },
          {
            "text": "    JOB_CODE VARCHAR(50) NOT NULL COMMENT 'ジョブコード',",
            "lineNumber": 56
          },
          {
            "text": "    JOB_NAME VARCHAR(200) NOT NULL COMMENT 'ジョブ名',",
            "lineNumber": 57
          },
          {
            "text": "    JOB_CATEGORY VARCHAR(50) COMMENT 'ジョブカテゴリ',",
            "lineNumber": 58
          },
          {
            "text": "    PROJECT_CODE VARCHAR(50) COMMENT 'プロジェクトコード',",
            "lineNumber": 59
          },
          {
            "text": "    IS_ACTIVE BOOLEAN DEFAULT TRUE COMMENT '有効フラグ',",
            "lineNumber": 60
          },
          {
            "text": "    START_DATE DATE COMMENT '開始日',",
            "lineNumber": 61
          },
          {
            "text": "    END_DATE DATE COMMENT '終了日',",
            "lineNumber": 62
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',",
            "lineNumber": 63
          },
          {
            "text": "    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',",
            "lineNumber": 64
          },
          {
            "text": "    PRIMARY KEY (JOB_CODE)",
            "lineNumber": 65
          },
          {
            "text": ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ジョブマスタ';",
            "lineNumber": 66
          },
          {
            "lineNumber": 67
          },
          {
            "text": "-- 4. 休暇種別マスタ (VACATION_TYPE)",
            "lineNumber": 68
          },
          {
            "text": "CREATE TABLE VACATION_TYPE (",
            "lineNumber": 69
          },
          {
            "text": "    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',",
            "lineNumber": 70
          },
          {
            "text": "    VACATION_TYPE_NAME VARCHAR(50) NOT NULL COMMENT '休暇種別名',",
            "lineNumber": 71
          },
          {
            "text": "    VACATION_CATEGORY VARCHAR(20) NOT NULL COMMENT '休暇カテゴリ(有給/特別/etc)',",
            "lineNumber": 72
          },
          {
            "text": "    IS_PAID BOOLEAN DEFAULT FALSE COMMENT '有給フラグ',",
            "lineNumber": 73
          },
          {
            "text": "    ANNUAL_GRANT_DAYS DECIMAL(4,1) DEFAULT 0 COMMENT '年間付与日数',",
            "lineNumber": 74
          },
          {
            "text": "    DISPLAY_ORDER INT NOT NULL COMMENT '表示順',",
            "lineNumber": 75
          },
          {
            "text": "    IS_ACTIVE BOOLEAN DEFAULT TRUE COMMENT '有効フラグ',",
            "lineNumber": 76
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',",
            "lineNumber": 77
          },
          {
            "text": "    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',",
            "lineNumber": 78
          },
          {
            "text": "    PRIMARY KEY (VACATION_TYPE_CODE)",
            "lineNumber": 79
          },
          {
            "text": ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇種別マスタ';",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "-- 5. お知らせマスタ (NOTIFICATION)",
            "lineNumber": 82
          },
          {
            "text": "CREATE TABLE NOTIFICATION (",
            "lineNumber": 83
          },
          {
            "text": "    NOTIFICATION_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT 'お知らせID',",
            "lineNumber": 84
          }
        ]
      },
      "score": 0.40484619140625
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\monthly-summary-screen.md",
        "range": {
          "startPosition": {
            "line": 404
          },
          "endPosition": {
            "line": 426
          }
        },
        "contents": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE\n  | 項目名 | 取得内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |\n  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |\n  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |\n  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |\n  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |\n  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |\n  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |\n  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |\n- 関連する取得仕様\n  - なし\n- 取得条件\n  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月\n  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月\n  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'\n  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）\n- その他\n  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE",
            "lineNumber": 405
          },
          {
            "text": "  | 項目名 | 取得内容 | 補足 |",
            "lineNumber": 406
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 407
          },
          {
            "text": "  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |",
            "lineNumber": 408
          },
          {
            "text": "  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |",
            "lineNumber": 409
          },
          {
            "text": "  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |",
            "lineNumber": 410
          },
          {
            "text": "  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 411
          },
          {
            "text": "  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |",
            "lineNumber": 412
          },
          {
            "text": "  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |",
            "lineNumber": 413
          },
          {
            "text": "  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |",
            "lineNumber": 414
          },
          {
            "text": "  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |",
            "lineNumber": 415
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 416
          },
          {
            "text": "  - なし",
            "lineNumber": 417
          },
          {
            "text": "- 取得条件",
            "lineNumber": 418
          },
          {
            "text": "  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 419
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') &lt;= 入出力項目定義.対象年月",
            "lineNumber": 420
          },
          {
            "text": "  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') &gt;= 入出力項目定義.対象年月",
            "lineNumber": 421
          },
          {
            "text": "  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 422
          },
          {
            "text": "  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'",
            "lineNumber": 423
          },
          {
            "text": "  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）",
            "lineNumber": 424
          },
          {
            "text": "- その他",
            "lineNumber": 425
          },
          {
            "text": "  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計",
            "lineNumber": 426
          }
        ]
      },
      "score": 0.40023016929626465
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 273,
            "column": 2
          },
          "endPosition": {
            "line": 303,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇残日数サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @returns {Promise&lt;Array&gt;} 休暇残日数の配列\n */\nconst getVacationBalanceSummary = async (employeeId) =&gt; {\n  const query = &#96;\n    SELECT \n      vbs.VACATION_TYPE_CODE,\n      vbs.VACATION_TYPE_NAME,\n      vbs.GRANTED_DAYS,\n      vbs.USED_DAYS,\n      vbs.REMAINING_DAYS,\n      vbs.EXPIRATION_DATE\n    FROM V_VACATION_BALANCE_SUMMARY vbs\n    WHERE vbs.EMPLOYEE_ID = ?\n    ORDER BY vbs.VACATION_TYPE_CODE\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId]);\n  return rows;\n};\n\n/**\n * 休暇取得履歴を取得\n * @param {string} employeeId - 従業員ID\n * @param {number} limit - 取得件数\n * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 276
          },
          {
            "text": " * 休暇残日数サマリーを取得",
            "lineNumber": 277
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 278
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇残日数の配列",
            "lineNumber": 279
          },
          {
            "text": " */",
            "lineNumber": 280
          },
          {
            "text": "const getVacationBalanceSummary = async (employeeId) =&gt; {",
            "lineNumber": 281
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 282
          },
          {
            "text": "    SELECT ",
            "lineNumber": 283
          },
          {
            "text": "      vbs.VACATION_TYPE_CODE,",
            "lineNumber": 284
          },
          {
            "text": "      vbs.VACATION_TYPE_NAME,",
            "lineNumber": 285
          },
          {
            "text": "      vbs.GRANTED_DAYS,",
            "lineNumber": 286
          },
          {
            "text": "      vbs.USED_DAYS,",
            "lineNumber": 287
          },
          {
            "text": "      vbs.REMAINING_DAYS,",
            "lineNumber": 288
          },
          {
            "text": "      vbs.EXPIRATION_DATE",
            "lineNumber": 289
          },
          {
            "text": "    FROM V_VACATION_BALANCE_SUMMARY vbs",
            "lineNumber": 290
          },
          {
            "text": "    WHERE vbs.EMPLOYEE_ID = ?",
            "lineNumber": 291
          },
          {
            "text": "    ORDER BY vbs.VACATION_TYPE_CODE",
            "lineNumber": 292
          },
          {
            "text": "  &#96;;",
            "lineNumber": 293
          },
          {
            "text": "  ",
            "lineNumber": 294
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId]);",
            "lineNumber": 295
          },
          {
            "text": "  return rows;",
            "lineNumber": 296
          },
          {
            "text": "};",
            "lineNumber": 297
          },
          {
            "lineNumber": 298
          },
          {
            "text": "/**",
            "lineNumber": 299
          },
          {
            "text": " * 休暇取得履歴を取得",
            "lineNumber": 300
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 301
          },
          {
            "text": " * @param {number} limit - 取得件数",
            "lineNumber": 302
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列",
            "lineNumber": 303
          },
          {
            "text": " */",
            "lineNumber": 304
          }
        ]
      },
      "score": 0.39188826084136963
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 63,
            "column": 2
          },
          "endPosition": {
            "line": 91,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇残日数を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} vacationTypeCode - 休暇種別コード\n * @returns {Promise&lt;number&gt;} 残日数\n */\nconst getVacationBalance = async (employeeId, vacationTypeCode) =&gt; {\n  const query = &#96;\n    SELECT REMAINING_DAYS\n    FROM V_VACATION_BALANCE_SUMMARY\n    WHERE EMPLOYEE_ID = ? AND VACATION_TYPE_CODE = ?\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, vacationTypeCode]);\n\n  if (rows.length &gt; 0) {\n    return rows[0].REMAINING_DAYS;\n  }\n\n  return 0;\n};\n\n/**\n * 申請履歴を作成\n * @param {Object} applicationData - 申請データ\n * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 66
          },
          {
            "text": " * 休暇残日数を取得",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 68
          },
          {
            "text": " * @param {string} vacationTypeCode - 休暇種別コード",
            "lineNumber": 69
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 残日数",
            "lineNumber": 70
          },
          {
            "text": " */",
            "lineNumber": 71
          },
          {
            "text": "const getVacationBalance = async (employeeId, vacationTypeCode) =&gt; {",
            "lineNumber": 72
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 73
          },
          {
            "text": "    SELECT REMAINING_DAYS",
            "lineNumber": 74
          },
          {
            "text": "    FROM V_VACATION_BALANCE_SUMMARY",
            "lineNumber": 75
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ? AND VACATION_TYPE_CODE = ?",
            "lineNumber": 76
          },
          {
            "text": "  &#96;;",
            "lineNumber": 77
          },
          {
            "text": "  ",
            "lineNumber": 78
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, vacationTypeCode]);",
            "lineNumber": 79
          },
          {
            "lineNumber": 80
          },
          {
            "text": "  if (rows.length &gt; 0) {",
            "lineNumber": 81
          },
          {
            "text": "    return rows[0].REMAINING_DAYS;",
            "lineNumber": 82
          },
          {
            "text": "  }",
            "lineNumber": 83
          },
          {
            "lineNumber": 84
          },
          {
            "text": "  return 0;",
            "lineNumber": 85
          },
          {
            "text": "};",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "/**",
            "lineNumber": 88
          },
          {
            "text": " * 申請履歴を作成",
            "lineNumber": 89
          },
          {
            "text": " * @param {Object} applicationData - 申請データ",
            "lineNumber": 90
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 作成されたAPPLICATION_ID",
            "lineNumber": 91
          },
          {
            "text": " */",
            "lineNumber": 92
          }
        ]
      },
      "score": 0.3848300874233246
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 109,
            "column": 2
          },
          "endPosition": {
            "line": 139,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇残日数サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @returns {Promise&lt;Array&gt;} 休暇残日数の配列\n */\nconst getVacationBalanceSummary = async (employeeId) =&gt; {\n  const query = &#96;\n    SELECT \n      vbs.VACATION_TYPE_CODE,\n      vbs.VACATION_TYPE_NAME,\n      vbs.GRANTED_DAYS,\n      vbs.USED_DAYS,\n      vbs.REMAINING_DAYS,\n      vbs.EXPIRATION_DATE\n    FROM V_VACATION_BALANCE_SUMMARY vbs\n    WHERE vbs.EMPLOYEE_ID = ?\n    ORDER BY vbs.VACATION_TYPE_CODE\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId]);\n  return rows;\n};\n\n/**\n * 休暇取得履歴を取得\n * @param {string} employeeId - 従業員ID\n * @param {number} limit - 取得件数\n * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 112
          },
          {
            "text": " * 休暇残日数サマリーを取得",
            "lineNumber": 113
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 114
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇残日数の配列",
            "lineNumber": 115
          },
          {
            "text": " */",
            "lineNumber": 116
          },
          {
            "text": "const getVacationBalanceSummary = async (employeeId) =&gt; {",
            "lineNumber": 117
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 118
          },
          {
            "text": "    SELECT ",
            "lineNumber": 119
          },
          {
            "text": "      vbs.VACATION_TYPE_CODE,",
            "lineNumber": 120
          },
          {
            "text": "      vbs.VACATION_TYPE_NAME,",
            "lineNumber": 121
          },
          {
            "text": "      vbs.GRANTED_DAYS,",
            "lineNumber": 122
          },
          {
            "text": "      vbs.USED_DAYS,",
            "lineNumber": 123
          },
          {
            "text": "      vbs.REMAINING_DAYS,",
            "lineNumber": 124
          },
          {
            "text": "      vbs.EXPIRATION_DATE",
            "lineNumber": 125
          },
          {
            "text": "    FROM V_VACATION_BALANCE_SUMMARY vbs",
            "lineNumber": 126
          },
          {
            "text": "    WHERE vbs.EMPLOYEE_ID = ?",
            "lineNumber": 127
          },
          {
            "text": "    ORDER BY vbs.VACATION_TYPE_CODE",
            "lineNumber": 128
          },
          {
            "text": "  &#96;;",
            "lineNumber": 129
          },
          {
            "text": "  ",
            "lineNumber": 130
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId]);",
            "lineNumber": 131
          },
          {
            "text": "  return rows;",
            "lineNumber": 132
          },
          {
            "text": "};",
            "lineNumber": 133
          },
          {
            "lineNumber": 134
          },
          {
            "text": "/**",
            "lineNumber": 135
          },
          {
            "text": " * 休暇取得履歴を取得",
            "lineNumber": 136
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 137
          },
          {
            "text": " * @param {number} limit - 取得件数",
            "lineNumber": 138
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列",
            "lineNumber": 139
          },
          {
            "text": " */",
            "lineNumber": 140
          }
        ]
      },
      "score": 0.38217440247535706
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 173
          },
          "endPosition": {
            "line": 228
          }
        },
        "contents": "        &lt;div class=\"form-container\"&gt;\n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;休暇種類 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n            &lt;select v-model=\"vacationForm.vacationType\" @change=\"onVacationTypeChange\"&gt;\n              &lt;option value=\"\"&gt;選択してください&lt;/option&gt;\n              &lt;option v-for=\"type in vacationTypes\" :key=\"type.code\" :value=\"type.code\"&gt;\n                {{ type.name }}\n              &lt;/option&gt;\n            &lt;/select&gt;\n          &lt;/div&gt;\n          \n          &lt;div v-if=\"vacationForm.vacationType === 'PAID_LEAVE'\" class=\"form-group\"&gt;\n            &lt;label&gt;有休残日数&lt;/label&gt;\n            &lt;div class=\"info-text\"&gt;{{ paidLeaveBalance }}日&lt;/div&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;期間 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;\n            &lt;div class=\"date-range\"&gt;\n              &lt;input \n                type=\"date\" \n                v-model=\"vacationForm.startDate\"\n                class=\"date-input\"\n              /&gt;\n              &lt;span class=\"date-separator\"&gt;～&lt;/span&gt;\n              &lt;input \n                type=\"date\" \n                v-model=\"vacationForm.endDate\"\n                class=\"date-input\"\n              /&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;備考&lt;/label&gt;\n            &lt;textarea \n              v-model=\"vacationForm.reason\"\n              class=\"textarea-input\"\n              rows=\"1\"\n              placeholder=\"休暇取得の理由や備考を入力してください\"\n            &gt;&lt;/textarea&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-group\"&gt;\n            &lt;label&gt;連絡先&lt;/label&gt;\n            &lt;input \n              type=\"text\" \n              v-model=\"vacationForm.contact\"\n              class=\"text-input\"\n              placeholder=\"連絡先を入力してください\"\n            /&gt;\n          &lt;/div&gt;\n          \n          &lt;div class=\"form-buttons\"&gt;\n            &lt;button class=\"submit-button\" @click=\"submitVacationApplication\"&gt;承認申請&lt;/button&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;div class=\"form-container\"&gt;",
            "lineNumber": 174
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 175
          },
          {
            "text": "            &lt;label&gt;休暇種類 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;",
            "lineNumber": 176
          },
          {
            "text": "            &lt;select v-model=\"vacationForm.vacationType\" @change=\"onVacationTypeChange\"&gt;",
            "lineNumber": 177
          },
          {
            "text": "              &lt;option value=\"\"&gt;選択してください&lt;/option&gt;",
            "lineNumber": 178
          },
          {
            "text": "              &lt;option v-for=\"type in vacationTypes\" :key=\"type.code\" :value=\"type.code\"&gt;",
            "lineNumber": 179
          },
          {
            "text": "                {{ type.name }}",
            "lineNumber": 180
          },
          {
            "text": "              &lt;/option&gt;",
            "lineNumber": 181
          },
          {
            "text": "            &lt;/select&gt;",
            "lineNumber": 182
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 183
          },
          {
            "text": "          ",
            "lineNumber": 184
          },
          {
            "text": "          &lt;div v-if=\"vacationForm.vacationType === 'PAID_LEAVE'\" class=\"form-group\"&gt;",
            "lineNumber": 185
          },
          {
            "text": "            &lt;label&gt;有休残日数&lt;/label&gt;",
            "lineNumber": 186
          },
          {
            "text": "            &lt;div class=\"info-text\"&gt;{{ paidLeaveBalance }}日&lt;/div&gt;",
            "lineNumber": 187
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 188
          },
          {
            "text": "          ",
            "lineNumber": 189
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 190
          },
          {
            "text": "            &lt;label&gt;期間 &lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;/label&gt;",
            "lineNumber": 191
          },
          {
            "text": "            &lt;div class=\"date-range\"&gt;",
            "lineNumber": 192
          },
          {
            "text": "              &lt;input ",
            "lineNumber": 193
          },
          {
            "text": "                type=\"date\" ",
            "lineNumber": 194
          },
          {
            "text": "                v-model=\"vacationForm.startDate\"",
            "lineNumber": 195
          },
          {
            "text": "                class=\"date-input\"",
            "lineNumber": 196
          },
          {
            "text": "              /&gt;",
            "lineNumber": 197
          },
          {
            "text": "              &lt;span class=\"date-separator\"&gt;～&lt;/span&gt;",
            "lineNumber": 198
          },
          {
            "text": "              &lt;input ",
            "lineNumber": 199
          },
          {
            "text": "                type=\"date\" ",
            "lineNumber": 200
          },
          {
            "text": "                v-model=\"vacationForm.endDate\"",
            "lineNumber": 201
          },
          {
            "text": "                class=\"date-input\"",
            "lineNumber": 202
          },
          {
            "text": "              /&gt;",
            "lineNumber": 203
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 204
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 205
          },
          {
            "text": "          ",
            "lineNumber": 206
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 207
          },
          {
            "text": "            &lt;label&gt;備考&lt;/label&gt;",
            "lineNumber": 208
          },
          {
            "text": "            &lt;textarea ",
            "lineNumber": 209
          },
          {
            "text": "              v-model=\"vacationForm.reason\"",
            "lineNumber": 210
          },
          {
            "text": "              class=\"textarea-input\"",
            "lineNumber": 211
          },
          {
            "text": "              rows=\"1\"",
            "lineNumber": 212
          },
          {
            "text": "              placeholder=\"休暇取得の理由や備考を入力してください\"",
            "lineNumber": 213
          },
          {
            "text": "            &gt;&lt;/textarea&gt;",
            "lineNumber": 214
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 215
          },
          {
            "text": "          ",
            "lineNumber": 216
          },
          {
            "text": "          &lt;div class=\"form-group\"&gt;",
            "lineNumber": 217
          },
          {
            "text": "            &lt;label&gt;連絡先&lt;/label&gt;",
            "lineNumber": 218
          },
          {
            "text": "            &lt;input ",
            "lineNumber": 219
          },
          {
            "text": "              type=\"text\" ",
            "lineNumber": 220
          },
          {
            "text": "              v-model=\"vacationForm.contact\"",
            "lineNumber": 221
          },
          {
            "text": "              class=\"text-input\"",
            "lineNumber": 222
          },
          {
            "text": "              placeholder=\"連絡先を入力してください\"",
            "lineNumber": 223
          },
          {
            "text": "            /&gt;",
            "lineNumber": 224
          },
          {
            "text": "          &lt;/div&gt;",
            "lineNumber": 225
          },
          {
            "text": "          ",
            "lineNumber": 226
          },
          {
            "text": "          &lt;div class=\"form-buttons\"&gt;",
            "lineNumber": 227
          },
          {
            "text": "            &lt;button class=\"submit-button\" @click=\"submitVacationApplication\"&gt;承認申請&lt;/button&gt;",
            "lineNumber": 228
          }
        ]
      },
      "score": 0.37177780270576477
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\masterService.js",
        "range": {
          "startPosition": {
            "line": 21,
            "column": 2
          },
          "endPosition": {
            "line": 37,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇種別マスタを取得\n * @returns {Promise&lt;Array&gt;} 休暇種別の配列\n */\nconst getVacationTypes = async () =&gt; {\n  return await masterModel.getVacationTypes();\n};\n\n/**\n * 月次サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @param {number} year - 年\n * @param {number} month - 月\n * @returns {Promise&lt;Object&gt;} 月次サマリー\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 24
          },
          {
            "text": " * 休暇種別マスタを取得",
            "lineNumber": 25
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇種別の配列",
            "lineNumber": 26
          },
          {
            "text": " */",
            "lineNumber": 27
          },
          {
            "text": "const getVacationTypes = async () =&gt; {",
            "lineNumber": 28
          },
          {
            "text": "  return await masterModel.getVacationTypes();",
            "lineNumber": 29
          },
          {
            "text": "};",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "/**",
            "lineNumber": 32
          },
          {
            "text": " * 月次サマリーを取得",
            "lineNumber": 33
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 34
          },
          {
            "text": " * @param {number} year - 年",
            "lineNumber": 35
          },
          {
            "text": " * @param {number} month - 月",
            "lineNumber": 36
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリー",
            "lineNumber": 37
          },
          {
            "text": " */",
            "lineNumber": 38
          }
        ]
      },
      "score": 0.36900073289871216
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\Dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 584,
            "column": 8
          },
          "endPosition": {
            "line": 618
          }
        },
        "contents": "return '申請タイプを選択してください。'\n      }\n      return ''\n    },\n    // 選択中のメニュー項目の説明文\n    currentMenuDescription() {\n      const descriptions = {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'\n    },\n    // 全メニュー項目の説明文\n    menuDescriptions() {\n      return {\n        dailyConfirmation: '日次確定を申請します。',\n        vacation: '休暇、代休、時間単位休暇を申請します。',\n        holidayWork: '休日出勤を申請します。',\n        overtime: '残業を申請します。',\n        earlyWork: '早朝勤務を申請します。',\n        transfer: '振替を申請します。'\n      }\n    },\n    // 対象日が休日かどうかを判定\n    isHoliday() {\n      if (!this.targetDate) return false\n      const date = new Date(this.targetDate)\n      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土曜日または日曜日の場合",
        "signatures": {},
        "detailedLines": [
          {
            "text": "return '申請タイプを選択してください。'",
            "lineNumber": 585
          },
          {
            "text": "      }",
            "lineNumber": 586
          },
          {
            "text": "      return ''",
            "lineNumber": 587
          },
          {
            "text": "    },",
            "lineNumber": 588
          },
          {
            "text": "    // 選択中のメニュー項目の説明文",
            "lineNumber": 589
          },
          {
            "text": "    currentMenuDescription() {",
            "lineNumber": 590
          },
          {
            "text": "      const descriptions = {",
            "lineNumber": 591
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 592
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 593
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 594
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 595
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 596
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 597
          },
          {
            "text": "      }",
            "lineNumber": 598
          },
          {
            "text": "      return descriptions[this.selectedMenuItem] || '日次確定を申請します。'",
            "lineNumber": 599
          },
          {
            "text": "    },",
            "lineNumber": 600
          },
          {
            "text": "    // 全メニュー項目の説明文",
            "lineNumber": 601
          },
          {
            "text": "    menuDescriptions() {",
            "lineNumber": 602
          },
          {
            "text": "      return {",
            "lineNumber": 603
          },
          {
            "text": "        dailyConfirmation: '日次確定を申請します。',",
            "lineNumber": 604
          },
          {
            "text": "        vacation: '休暇、代休、時間単位休暇を申請します。',",
            "lineNumber": 605
          },
          {
            "text": "        holidayWork: '休日出勤を申請します。',",
            "lineNumber": 606
          },
          {
            "text": "        overtime: '残業を申請します。',",
            "lineNumber": 607
          },
          {
            "text": "        earlyWork: '早朝勤務を申請します。',",
            "lineNumber": 608
          },
          {
            "text": "        transfer: '振替を申請します。'",
            "lineNumber": 609
          },
          {
            "text": "      }",
            "lineNumber": 610
          },
          {
            "text": "    },",
            "lineNumber": 611
          },
          {
            "text": "    // 対象日が休日かどうかを判定",
            "lineNumber": 612
          },
          {
            "text": "    isHoliday() {",
            "lineNumber": 613
          },
          {
            "text": "      if (!this.targetDate) return false",
            "lineNumber": 614
          },
          {
            "text": "      const date = new Date(this.targetDate)",
            "lineNumber": 615
          },
          {
            "text": "      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 616
          },
          {
            "text": "      ",
            "lineNumber": 617
          },
          {
            "text": "      // 土曜日または日曜日の場合",
            "lineNumber": 618
          }
        ]
      },
      "score": 0.356291800737381
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 44,
            "column": 2
          },
          "endPosition": {
            "line": 70,
            "column": 3
          }
        },
        "contents": "/**\n * 休暇申請を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} startDate - 開始日（YYYY-MM-DD形式）\n * @param {string} endDate - 終了日（YYYY-MM-DD形式）\n * @returns {Promise&lt;Array&gt;} 休暇申請の配列\n */\nconst getVacations = async (employeeId, startDate, endDate) =&gt; {\n  const query = &#96;\n    SELECT VACATION_ID, VACATION_TYPE_CODE, START_DATE, END_DATE, VACATION_DAYS, APPROVAL_STATUS\n    FROM VACATION_HISTORY\n    WHERE EMPLOYEE_ID = ? AND START_DATE BETWEEN ? AND ? AND APPROVAL_STATUS IN ('PENDING', 'APPROVED')\n    ORDER BY START_DATE\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, startDate, endDate]);\n  return rows;\n};\n\n/**\n * 休暇残日数を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} vacationTypeCode - 休暇種別コード\n * @returns {Promise&lt;number&gt;} 残日数\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 47
          },
          {
            "text": " * 休暇申請を取得",
            "lineNumber": 48
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 49
          },
          {
            "text": " * @param {string} startDate - 開始日（YYYY-MM-DD形式）",
            "lineNumber": 50
          },
          {
            "text": " * @param {string} endDate - 終了日（YYYY-MM-DD形式）",
            "lineNumber": 51
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇申請の配列",
            "lineNumber": 52
          },
          {
            "text": " */",
            "lineNumber": 53
          },
          {
            "text": "const getVacations = async (employeeId, startDate, endDate) =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 55
          },
          {
            "text": "    SELECT VACATION_ID, VACATION_TYPE_CODE, START_DATE, END_DATE, VACATION_DAYS, APPROVAL_STATUS",
            "lineNumber": 56
          },
          {
            "text": "    FROM VACATION_HISTORY",
            "lineNumber": 57
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ? AND START_DATE BETWEEN ? AND ? AND APPROVAL_STATUS IN ('PENDING', 'APPROVED')",
            "lineNumber": 58
          },
          {
            "text": "    ORDER BY START_DATE",
            "lineNumber": 59
          },
          {
            "text": "  &#96;;",
            "lineNumber": 60
          },
          {
            "text": "  ",
            "lineNumber": 61
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, startDate, endDate]);",
            "lineNumber": 62
          },
          {
            "text": "  return rows;",
            "lineNumber": 63
          },
          {
            "text": "};",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "/**",
            "lineNumber": 66
          },
          {
            "text": " * 休暇残日数を取得",
            "lineNumber": 67
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 68
          },
          {
            "text": " * @param {string} vacationTypeCode - 休暇種別コード",
            "lineNumber": 69
          },
          {
            "text": " * @returns {Promise&lt;number&gt;} 残日数",
            "lineNumber": 70
          },
          {
            "text": " */",
            "lineNumber": 71
          }
        ]
      },
      "score": 0.35512375831604004
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\routes\\master.js",
        "range": {
          "startPosition": {
            "line": 14,
            "column": 46
          },
          "endPosition": {
            "line": 22,
            "column": 24
          }
        },
        "contents": "/**\n * 休暇種別マスタ取得API\n * GET /api/master/vacation-types\n */\nrouter.get('/vacation-types', masterController.getVacationTypes);\n\nmodule.exports = router;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 17
          },
          {
            "text": " * 休暇種別マスタ取得API",
            "lineNumber": 18
          },
          {
            "text": " * GET /api/master/vacation-types",
            "lineNumber": 19
          },
          {
            "text": " */",
            "lineNumber": 20
          },
          {
            "text": "router.get('/vacation-types', masterController.getVacationTypes);",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "module.exports = router;",
            "lineNumber": 23
          }
        ]
      },
      "score": 0.3544991910457611
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 668
          },
          "endPosition": {
            "line": 709
          }
        },
        "contents": "-- 14. 月次承認履歴を取得（ステータスダイアログ用）\n-- SET @employee_id = '000001';\n-- SET @target_year_month = '2025-10';\n-- SELECT \n--     SEQ_NO AS '#',\n--     DATE_FORMAT(ACTION_DATETIME, '%Y-%m-%d %H:%i') AS '日時',\n--     ACTION_TYPE_DISPLAY AS '状況',\n--     ACTOR_NAME AS '実行者',\n--     COMMENT AS 'コメント'\n-- FROM V_MONTHLY_APPROVAL_HISTORY\n-- WHERE EMPLOYEE_ID = @employee_id\n--   AND TARGET_YEAR_MONTH = @target_year_month\n-- ORDER BY SEQ_NO;\n\n-- ====================================================================\n-- サンプルデータ\n-- ====================================================================\n\n-- ジョブマスタ\nINSERT INTO JOB_MASTER (JOB_CODE, JOB_NAME, JOB_CATEGORY, PROJECT_CODE, IS_ACTIVE, CREATED_AT, UPDATED_AT) VALUES\n('JOB001', '開発作業', '開発', 'PROJ001', TRUE, NOW(), NOW()),\n('JOB002', '設計作業', '開発', 'PROJ001', TRUE, NOW(), NOW()),\n('JOB003', 'レビュー', '品質管理', 'PROJ001', TRUE, NOW(), NOW()),\n('JOB004', '会議', '管理業務', NULL, TRUE, NOW(), NOW());\n\n-- 休暇種別マスタ\nINSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE, CREATED_AT, UPDATED_AT) VALUES\n('PAID', '有給休暇', '有給', TRUE, 20, 1, TRUE, NOW(), NOW()),\n('SPECIAL', '特別休暇', '特別', TRUE, 5, 2, TRUE, NOW(), NOW()),\n('SICK', '病気休暇', '特別', FALSE, 0, 3, TRUE, NOW(), NOW());\n\n\n-- ====================================================================\n-- ORIGINAL_CLOCK_IN_TIMEとORIGINAL_CLOCK_OUT_TIMEの既存データ移行\n-- 打刻種別がSTAMPの場合は、CLOCK_IN_TIME/CLOCK_OUT_TIMEをORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIMEに設定\n-- \n-- 【注意】既存のテーブルにカラムを追加する場合のALTER TABLE文（参考用）\n-- 注意: カラムが既に存在する場合はエラーになります。その場合は、以下のUPDATE文のみを実行してください。\n-- ALTER TABLE ATTENDANCE_RECORD \n-- ADD COLUMN ORIGINAL_CLOCK_IN_TIME DATETIME COMMENT '出勤打刻時刻: 打刻機による元の時刻。手入力で変更されても保持される。形式YYYY-MM-DD HH:MM:SS' AFTER CLOCK_OUT_TYPE,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "-- 14. 月次承認履歴を取得（ステータスダイアログ用）",
            "lineNumber": 670
          },
          {
            "text": "-- SET @employee_id = '000001';",
            "lineNumber": 671
          },
          {
            "text": "-- SET @target_year_month = '2025-10';",
            "lineNumber": 672
          },
          {
            "text": "-- SELECT ",
            "lineNumber": 673
          },
          {
            "text": "--     SEQ_NO AS '#',",
            "lineNumber": 674
          },
          {
            "text": "--     DATE_FORMAT(ACTION_DATETIME, '%Y-%m-%d %H:%i') AS '日時',",
            "lineNumber": 675
          },
          {
            "text": "--     ACTION_TYPE_DISPLAY AS '状況',",
            "lineNumber": 676
          },
          {
            "text": "--     ACTOR_NAME AS '実行者',",
            "lineNumber": 677
          },
          {
            "text": "--     COMMENT AS 'コメント'",
            "lineNumber": 678
          },
          {
            "text": "-- FROM V_MONTHLY_APPROVAL_HISTORY",
            "lineNumber": 679
          },
          {
            "text": "-- WHERE EMPLOYEE_ID = @employee_id",
            "lineNumber": 680
          },
          {
            "text": "--   AND TARGET_YEAR_MONTH = @target_year_month",
            "lineNumber": 681
          },
          {
            "text": "-- ORDER BY SEQ_NO;",
            "lineNumber": 682
          },
          {
            "lineNumber": 683
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 684
          },
          {
            "text": "-- サンプルデータ",
            "lineNumber": 685
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 686
          },
          {
            "lineNumber": 687
          },
          {
            "text": "-- ジョブマスタ",
            "lineNumber": 688
          },
          {
            "text": "INSERT INTO JOB_MASTER (JOB_CODE, JOB_NAME, JOB_CATEGORY, PROJECT_CODE, IS_ACTIVE, CREATED_AT, UPDATED_AT) VALUES",
            "lineNumber": 689
          },
          {
            "text": "('JOB001', '開発作業', '開発', 'PROJ001', TRUE, NOW(), NOW()),",
            "lineNumber": 690
          },
          {
            "text": "('JOB002', '設計作業', '開発', 'PROJ001', TRUE, NOW(), NOW()),",
            "lineNumber": 691
          },
          {
            "text": "('JOB003', 'レビュー', '品質管理', 'PROJ001', TRUE, NOW(), NOW()),",
            "lineNumber": 692
          },
          {
            "text": "('JOB004', '会議', '管理業務', NULL, TRUE, NOW(), NOW());",
            "lineNumber": 693
          },
          {
            "lineNumber": 694
          },
          {
            "text": "-- 休暇種別マスタ",
            "lineNumber": 695
          },
          {
            "text": "INSERT INTO VACATION_TYPE (VACATION_TYPE_CODE, VACATION_TYPE_NAME, VACATION_CATEGORY, IS_PAID, ANNUAL_GRANT_DAYS, DISPLAY_ORDER, IS_ACTIVE, CREATED_AT, UPDATED_AT) VALUES",
            "lineNumber": 696
          },
          {
            "text": "('PAID', '有給休暇', '有給', TRUE, 20, 1, TRUE, NOW(), NOW()),",
            "lineNumber": 697
          },
          {
            "text": "('SPECIAL', '特別休暇', '特別', TRUE, 5, 2, TRUE, NOW(), NOW()),",
            "lineNumber": 698
          },
          {
            "text": "('SICK', '病気休暇', '特別', FALSE, 0, 3, TRUE, NOW(), NOW());",
            "lineNumber": 699
          },
          {
            "lineNumber": 700
          },
          {
            "lineNumber": 701
          },
          {
            "text": "-- ====================================================================",
            "lineNumber": 702
          },
          {
            "text": "-- ORIGINAL_CLOCK_IN_TIMEとORIGINAL_CLOCK_OUT_TIMEの既存データ移行",
            "lineNumber": 703
          },
          {
            "text": "-- 打刻種別がSTAMPの場合は、CLOCK_IN_TIME/CLOCK_OUT_TIMEをORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIMEに設定",
            "lineNumber": 704
          },
          {
            "text": "-- ",
            "lineNumber": 705
          },
          {
            "text": "-- 【注意】既存のテーブルにカラムを追加する場合のALTER TABLE文（参考用）",
            "lineNumber": 706
          },
          {
            "text": "-- 注意: カラムが既に存在する場合はエラーになります。その場合は、以下のUPDATE文のみを実行してください。",
            "lineNumber": 707
          },
          {
            "text": "-- ALTER TABLE ATTENDANCE_RECORD ",
            "lineNumber": 708
          },
          {
            "text": "-- ADD COLUMN ORIGINAL_CLOCK_IN_TIME DATETIME COMMENT '出勤打刻時刻: 打刻機による元の時刻。手入力で変更されても保持される。形式YYYY-MM-DD HH:MM:SS' AFTER CLOCK_OUT_TYPE,",
            "lineNumber": 709
          }
        ]
      },
      "score": 0.3543514609336853
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\README_MySQL.md",
        "range": {
          "startPosition": {
            "line": 329
          },
          "endPosition": {
            "line": 356
          }
        },
        "contents": "|---------|-----|------|-----------|------|\n| **VACATION_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇取得を一意に識別するID。自動採番されます。 |\n| **EMPLOYEE_ID** | VARCHAR(50) | NOT NULL | - | **外部キー**。どの従業員が休暇を取得したか。&#96;EMPLOYEE&#96;テーブルを参照。 |\n| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **外部キー**。どの休暇種別か。&#96;VACATION_TYPE&#96;テーブルを参照。例: &#96;PAID_LEAVE&#96;、&#96;SUMMER_LEAVE&#96; |\n| **START_DATE** | DATE | NOT NULL | - | 開始日。休暇の開始日。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-11-20&#96; |\n| **END_DATE** | DATE | NOT NULL | - | 終了日。休暇の終了日。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-11-22&#96;（3日間の休暇） |\n| **VACATION_DAYS** | DECIMAL(4,1) | NOT NULL | - | 取得日数。何日間の休暇か。例: &#96;3.0&#96;=3日、&#96;0.5&#96;=半日 |\n| **HALF_DAY_TYPE** | VARCHAR(20) | NULL | - | 半休種別。&#96;AM&#96;=午前休、&#96;PM&#96;=午後休。全日の場合は&#96;NULL&#96;。 |\n| **REASON** | TEXT | NULL | - | 取得理由。なぜ休暇を取得したか。例: &#96;私用&#96;、&#96;夏季休暇&#96; |\n| **APPROVAL_STATUS** | VARCHAR(20) | NULL | &#96;PENDING&#96; | 承認状態。&#96;PENDING&#96;=申請中、&#96;APPROVED&#96;=承認済、&#96;REJECTED&#96;=却下 |\n| **APPROVED_BY** | VARCHAR(50) | NULL | - | 承認者。誰が承認したか。例: &#96;MGR001&#96;（管理者ID） |\n| **APPROVED_AT** | DATETIME | NULL | - | 承認日時。いつ承認されたか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n**使用例:**\n- 2025年11月20日〜22日の3日間の有給休暇（承認済み）\n\n---\n\n### 12. 月次勤怠 (MONTHLY_ATTENDANCE)\n\n月次の勤怠集計と承認状態を管理するテーブルです。従業員ごと、年月ごとに1レコードです。\n\n| カラム名 | 型 | NULL | デフォルト | 説明 |\n|---------|-----|------|-----------|------|\n| **MONTHLY_ATTENDANCE_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。月次勤怠を一意に識別するID。自動採番されます。 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "|---------|-----|------|-----------|------|",
            "lineNumber": 330
          },
          {
            "text": "| **VACATION_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇取得を一意に識別するID。自動採番されます。 |",
            "lineNumber": 331
          },
          {
            "text": "| **EMPLOYEE_ID** | VARCHAR(50) | NOT NULL | - | **外部キー**。どの従業員が休暇を取得したか。&#96;EMPLOYEE&#96;テーブルを参照。 |",
            "lineNumber": 332
          },
          {
            "text": "| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **外部キー**。どの休暇種別か。&#96;VACATION_TYPE&#96;テーブルを参照。例: &#96;PAID_LEAVE&#96;、&#96;SUMMER_LEAVE&#96; |",
            "lineNumber": 333
          },
          {
            "text": "| **START_DATE** | DATE | NOT NULL | - | 開始日。休暇の開始日。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-11-20&#96; |",
            "lineNumber": 334
          },
          {
            "text": "| **END_DATE** | DATE | NOT NULL | - | 終了日。休暇の終了日。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-11-22&#96;（3日間の休暇） |",
            "lineNumber": 335
          },
          {
            "text": "| **VACATION_DAYS** | DECIMAL(4,1) | NOT NULL | - | 取得日数。何日間の休暇か。例: &#96;3.0&#96;=3日、&#96;0.5&#96;=半日 |",
            "lineNumber": 336
          },
          {
            "text": "| **HALF_DAY_TYPE** | VARCHAR(20) | NULL | - | 半休種別。&#96;AM&#96;=午前休、&#96;PM&#96;=午後休。全日の場合は&#96;NULL&#96;。 |",
            "lineNumber": 337
          },
          {
            "text": "| **REASON** | TEXT | NULL | - | 取得理由。なぜ休暇を取得したか。例: &#96;私用&#96;、&#96;夏季休暇&#96; |",
            "lineNumber": 338
          },
          {
            "text": "| **APPROVAL_STATUS** | VARCHAR(20) | NULL | &#96;PENDING&#96; | 承認状態。&#96;PENDING&#96;=申請中、&#96;APPROVED&#96;=承認済、&#96;REJECTED&#96;=却下 |",
            "lineNumber": 339
          },
          {
            "text": "| **APPROVED_BY** | VARCHAR(50) | NULL | - | 承認者。誰が承認したか。例: &#96;MGR001&#96;（管理者ID） |",
            "lineNumber": 340
          },
          {
            "text": "| **APPROVED_AT** | DATETIME | NULL | - | 承認日時。いつ承認されたか。形式: &#96;YYYY-MM-DD HH:MM:SS&#96; |",
            "lineNumber": 341
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 342
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 343
          },
          {
            "lineNumber": 344
          },
          {
            "text": "**使用例:**",
            "lineNumber": 345
          },
          {
            "text": "- 2025年11月20日〜22日の3日間の有給休暇（承認済み）",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "---",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "### 12. 月次勤怠 (MONTHLY_ATTENDANCE)",
            "lineNumber": 350
          },
          {
            "lineNumber": 351
          },
          {
            "text": "月次の勤怠集計と承認状態を管理するテーブルです。従業員ごと、年月ごとに1レコードです。",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "| カラム名 | 型 | NULL | デフォルト | 説明 |",
            "lineNumber": 354
          },
          {
            "text": "|---------|-----|------|-----------|------|",
            "lineNumber": 355
          },
          {
            "text": "| **MONTHLY_ATTENDANCE_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。月次勤怠を一意に識別するID。自動採番されます。 |",
            "lineNumber": 356
          }
        ]
      },
      "score": 0.3506430387496948
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\README_MySQL.md",
        "range": {
          "startPosition": {
            "line": 304
          },
          "endPosition": {
            "line": 331
          }
        },
        "contents": "| **BALANCE_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇残日数を一意に識別するID。自動採番されます。 |\n| **EMPLOYEE_ID** | VARCHAR(50) | NOT NULL | - | **外部キー**。どの従業員の休暇残日数か。&#96;EMPLOYEE&#96;テーブルを参照。 |\n| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **外部キー**。どの休暇種別か。&#96;VACATION_TYPE&#96;テーブルを参照。例: &#96;PAID_LEAVE&#96;、&#96;SUMMER_LEAVE&#96; |\n| **FISCAL_YEAR** | INT | NOT NULL | - | 年度。どの年度の休暇残日数か。例: &#96;2025&#96;=2025年度（2025年4月〜2026年3月） |\n| **GRANTED_DAYS** | DECIMAL(4,1) | NOT NULL | - | 付与日数。その年度に付与された休暇日数。例: &#96;20.0&#96;=20日、&#96;15.0&#96;=15日 |\n| **USED_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 使用日数。その年度に使用した休暇日数。例: &#96;5.0&#96;=5日使用済み |\n| **REMAINING_DAYS** | DECIMAL(4,1) | NOT NULL | - | 残日数。付与日数から使用日数を引いた残り。例: &#96;15.0&#96;=15日残り（&#96;GRANTED_DAYS - USED_DAYS&#96;） |\n| **GRANT_DATE** | DATE | NOT NULL | - | 付与日。いつ休暇が付与されたか。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-04-01&#96;（年度初め） |\n| **EXPIRATION_DATE** | DATE | NULL | - | 有効期限。いつまで有効か。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2026-03-31&#96;（年度末） |\n| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |\n| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |\n\n**重要な制約:**\n- 1人の従業員は1つの休暇種別につき1年度1レコードのみ（&#96;EMPLOYEE_ID&#96; + &#96;VACATION_TYPE_CODE&#96; + &#96;FISCAL_YEAR&#96;でユニーク）\n\n**使用例:**\n- 2025年度の有給休暇: 付与20日、使用5日、残り15日\n\n---\n\n### 11. 休暇取得履歴 (VACATION_HISTORY)\n\n従業員が休暇を取得した履歴と承認状態を記録するテーブルです。\n\n| カラム名 | 型 | NULL | デフォルト | 説明 |\n|---------|-----|------|-----------|------|\n| **VACATION_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇取得を一意に識別するID。自動採番されます。 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| **BALANCE_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇残日数を一意に識別するID。自動採番されます。 |",
            "lineNumber": 305
          },
          {
            "text": "| **EMPLOYEE_ID** | VARCHAR(50) | NOT NULL | - | **外部キー**。どの従業員の休暇残日数か。&#96;EMPLOYEE&#96;テーブルを参照。 |",
            "lineNumber": 306
          },
          {
            "text": "| **VACATION_TYPE_CODE** | VARCHAR(20) | NOT NULL | - | **外部キー**。どの休暇種別か。&#96;VACATION_TYPE&#96;テーブルを参照。例: &#96;PAID_LEAVE&#96;、&#96;SUMMER_LEAVE&#96; |",
            "lineNumber": 307
          },
          {
            "text": "| **FISCAL_YEAR** | INT | NOT NULL | - | 年度。どの年度の休暇残日数か。例: &#96;2025&#96;=2025年度（2025年4月〜2026年3月） |",
            "lineNumber": 308
          },
          {
            "text": "| **GRANTED_DAYS** | DECIMAL(4,1) | NOT NULL | - | 付与日数。その年度に付与された休暇日数。例: &#96;20.0&#96;=20日、&#96;15.0&#96;=15日 |",
            "lineNumber": 309
          },
          {
            "text": "| **USED_DAYS** | DECIMAL(4,1) | NULL | &#96;0&#96; | 使用日数。その年度に使用した休暇日数。例: &#96;5.0&#96;=5日使用済み |",
            "lineNumber": 310
          },
          {
            "text": "| **REMAINING_DAYS** | DECIMAL(4,1) | NOT NULL | - | 残日数。付与日数から使用日数を引いた残り。例: &#96;15.0&#96;=15日残り（&#96;GRANTED_DAYS - USED_DAYS&#96;） |",
            "lineNumber": 311
          },
          {
            "text": "| **GRANT_DATE** | DATE | NOT NULL | - | 付与日。いつ休暇が付与されたか。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2025-04-01&#96;（年度初め） |",
            "lineNumber": 312
          },
          {
            "text": "| **EXPIRATION_DATE** | DATE | NULL | - | 有効期限。いつまで有効か。形式: &#96;YYYY-MM-DD&#96; 例: &#96;2026-03-31&#96;（年度末） |",
            "lineNumber": 313
          },
          {
            "text": "| **CREATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード作成日時。 |",
            "lineNumber": 314
          },
          {
            "text": "| **UPDATED_AT** | TIMESTAMP | NULL | CURRENT_TIMESTAMP | レコード更新日時。 |",
            "lineNumber": 315
          },
          {
            "lineNumber": 316
          },
          {
            "text": "**重要な制約:**",
            "lineNumber": 317
          },
          {
            "text": "- 1人の従業員は1つの休暇種別につき1年度1レコードのみ（&#96;EMPLOYEE_ID&#96; + &#96;VACATION_TYPE_CODE&#96; + &#96;FISCAL_YEAR&#96;でユニーク）",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "**使用例:**",
            "lineNumber": 320
          },
          {
            "text": "- 2025年度の有給休暇: 付与20日、使用5日、残り15日",
            "lineNumber": 321
          },
          {
            "lineNumber": 322
          },
          {
            "text": "---",
            "lineNumber": 323
          },
          {
            "lineNumber": 324
          },
          {
            "text": "### 11. 休暇取得履歴 (VACATION_HISTORY)",
            "lineNumber": 325
          },
          {
            "lineNumber": 326
          },
          {
            "text": "従業員が休暇を取得した履歴と承認状態を記録するテーブルです。",
            "lineNumber": 327
          },
          {
            "lineNumber": 328
          },
          {
            "text": "| カラム名 | 型 | NULL | デフォルト | 説明 |",
            "lineNumber": 329
          },
          {
            "text": "|---------|-----|------|-----------|------|",
            "lineNumber": 330
          },
          {
            "text": "| **VACATION_ID** | BIGINT | NOT NULL | AUTO_INCREMENT | **主キー**。休暇取得を一意に識別するID。自動採番されます。 |",
            "lineNumber": 331
          }
        ]
      },
      "score": 0.3455609083175659
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 138
          },
          "endPosition": {
            "line": 163
          }
        },
        "contents": "| 6 | 休暇種別マスタ | リスト | 正常 | | VACATION_TYPEテーブルから取得した休暇種別マスタ |\n| 7 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別情報 | オブジェクト | 正常 | | 1つの休暇種別の情報 |\n| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | 文字 | 正常 | | VACATION_TYPE.VACATION_TYPE_CODE |\n| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | 文字 | 正常 | | VACATION_TYPE.VACATION_TYPE_NAME |\n| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有給フラグ | フラグ | 正常 | | VACATION_TYPE.IS_PAID |\n| 11 | 有給残日数 | 整数 | 正常 | | 年次有給休暇の残日数 |\n| 12 | 日次勤務データ | オブジェクト | 正常 | | 対象日付の勤務データ |\n| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤時刻 | 日時 | 正常 | | ATTENDANCE_RECORD.CLOCK_IN_TIME |\n| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤時刻 | 日時 | 正常 | | ATTENDANCE_RECORD.CLOCK_OUT_TIME |\n| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ATTENDANCE_RECORD.ACTUAL_WORK_HOURS |\n| 16 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | ATTENDANCE_RECORD.REMARK_TEXT |\n| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | リスト | 正常 | | BREAK_TIMEテーブルから取得 |\n| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩開始時刻 | 時間 | 正常 | | BREAK_TIME.BREAK_START_TIME |\n| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩終了時刻 | 時間 | 正常 | | BREAK_TIME.BREAK_END_TIME |\n| 20 | エラーメッセージ | 文字 | 異常 | | エラー時に表示するメッセージ |\n\n## イベント処理説明\n\n#### 名称：初期表示処理、英名：initializeScreen、処理タイミング：-\n\n1. ローディング表示開始\n   - ローディングマークを表示する。\n\n2. 従業員情報取得\n   - 編集仕様に従い、ログイン中の従業員情報を取得する。",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| 6 | 休暇種別マスタ | リスト | 正常 | | VACATION_TYPEテーブルから取得した休暇種別マスタ |",
            "lineNumber": 139
          },
          {
            "text": "| 7 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別情報 | オブジェクト | 正常 | | 1つの休暇種別の情報 |",
            "lineNumber": 140
          },
          {
            "text": "| 8 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | 文字 | 正常 | | VACATION_TYPE.VACATION_TYPE_CODE |",
            "lineNumber": 141
          },
          {
            "text": "| 9 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | 文字 | 正常 | | VACATION_TYPE.VACATION_TYPE_NAME |",
            "lineNumber": 142
          },
          {
            "text": "| 10 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有給フラグ | フラグ | 正常 | | VACATION_TYPE.IS_PAID |",
            "lineNumber": 143
          },
          {
            "text": "| 11 | 有給残日数 | 整数 | 正常 | | 年次有給休暇の残日数 |",
            "lineNumber": 144
          },
          {
            "text": "| 12 | 日次勤務データ | オブジェクト | 正常 | | 対象日付の勤務データ |",
            "lineNumber": 145
          },
          {
            "text": "| 13 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;出勤時刻 | 日時 | 正常 | | ATTENDANCE_RECORD.CLOCK_IN_TIME |",
            "lineNumber": 146
          },
          {
            "text": "| 14 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;退勤時刻 | 日時 | 正常 | | ATTENDANCE_RECORD.CLOCK_OUT_TIME |",
            "lineNumber": 147
          },
          {
            "text": "| 15 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;実労働時間 | 小数 | 正常 | | ATTENDANCE_RECORD.ACTUAL_WORK_HOURS |",
            "lineNumber": 148
          },
          {
            "text": "| 16 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;備考 | 文字 | 正常 | | ATTENDANCE_RECORD.REMARK_TEXT |",
            "lineNumber": 149
          },
          {
            "text": "| 17 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩時間リスト | リスト | 正常 | | BREAK_TIMEテーブルから取得 |",
            "lineNumber": 150
          },
          {
            "text": "| 18 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩開始時刻 | 時間 | 正常 | | BREAK_TIME.BREAK_START_TIME |",
            "lineNumber": 151
          },
          {
            "text": "| 19 | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休憩終了時刻 | 時間 | 正常 | | BREAK_TIME.BREAK_END_TIME |",
            "lineNumber": 152
          },
          {
            "text": "| 20 | エラーメッセージ | 文字 | 異常 | | エラー時に表示するメッセージ |",
            "lineNumber": 153
          },
          {
            "lineNumber": 154
          },
          {
            "text": "## イベント処理説明",
            "lineNumber": 155
          },
          {
            "lineNumber": 156
          },
          {
            "text": "#### 名称：初期表示処理、英名：initializeScreen、処理タイミング：-",
            "lineNumber": 157
          },
          {
            "lineNumber": 158
          },
          {
            "text": "1. ローディング表示開始",
            "lineNumber": 159
          },
          {
            "text": "   - ローディングマークを表示する。",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "2. 従業員情報取得",
            "lineNumber": 162
          },
          {
            "text": "   - 編集仕様に従い、ログイン中の従業員情報を取得する。",
            "lineNumber": 163
          }
        ]
      },
      "score": 0.34177303314208984
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 1028
          },
          "endPosition": {
            "line": 1064
          }
        },
        "contents": "- 関連する取得仕様\n  - なし\n- その他\n  - V_MONTHLY_ATTENDANCEビューや関連テーブルから月間の勤務時間集計を取得\n  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算\n\n#### No.8\n- API仕様名：休暇情報取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/vacation/info | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 休暇残日数リスト | 休暇残日数リスト | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_CODE | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_NAME | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;付与日数 | V_VACATION_BALANCE_SUMMARY.GRANTED_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;使用日数 | V_VACATION_BALANCE_SUMMARY.USED_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残日数 | V_VACATION_BALANCE_SUMMARY.REMAINING_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有効期限 | V_VACATION_BALANCE_SUMMARY.EXPIRATION_DATE | YYYY-MM-DD形式 |\n  | 休暇取得履歴リスト | 休暇取得履歴リスト | JSON形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇取得ID | VACATION_HISTORY.VACATION_ID | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | VACATION_HISTORY.VACATION_TYPE_CODE | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | VACATION_HISTORY.START_DATE | YYYY-MM-DD形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | VACATION_HISTORY.END_DATE | YYYY-MM-DD形式 |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得日数 | VACATION_HISTORY.VACATION_DAYS | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得理由 | VACATION_HISTORY.REASON | |\n  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | VACATION_HISTORY.APPROVAL_STATUS | PENDING/APPROVED/REJECTED |\n- 関連する取得仕様\n  - なし\n- その他\n  - V_VACATION_BALANCE_SUMMARYビューから休暇残日数、VACATION_HISTORYテーブルから取得履歴を取得",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1029
          },
          {
            "text": "  - なし",
            "lineNumber": 1030
          },
          {
            "text": "- その他",
            "lineNumber": 1031
          },
          {
            "text": "  - V_MONTHLY_ATTENDANCEビューや関連テーブルから月間の勤務時間集計を取得",
            "lineNumber": 1032
          },
          {
            "text": "  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算",
            "lineNumber": 1033
          },
          {
            "lineNumber": 1034
          },
          {
            "text": "#### No.8",
            "lineNumber": 1035
          },
          {
            "text": "- API仕様名：休暇情報取得API",
            "lineNumber": 1036
          },
          {
            "text": "- リクエスト",
            "lineNumber": 1037
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 1038
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1039
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 1040
          },
          {
            "text": "  | エンドポイント | /api/vacation/info | |",
            "lineNumber": 1041
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |",
            "lineNumber": 1042
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1043
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1044
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1045
          },
          {
            "text": "  | 休暇残日数リスト | 休暇残日数リスト | JSON形式 |",
            "lineNumber": 1046
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_CODE | |",
            "lineNumber": 1047
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別名 | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_NAME | |",
            "lineNumber": 1048
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;付与日数 | V_VACATION_BALANCE_SUMMARY.GRANTED_DAYS | |",
            "lineNumber": 1049
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;使用日数 | V_VACATION_BALANCE_SUMMARY.USED_DAYS | |",
            "lineNumber": 1050
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;残日数 | V_VACATION_BALANCE_SUMMARY.REMAINING_DAYS | |",
            "lineNumber": 1051
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有効期限 | V_VACATION_BALANCE_SUMMARY.EXPIRATION_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1052
          },
          {
            "text": "  | 休暇取得履歴リスト | 休暇取得履歴リスト | JSON形式 |",
            "lineNumber": 1053
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇取得ID | VACATION_HISTORY.VACATION_ID | |",
            "lineNumber": 1054
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;休暇種別コード | VACATION_HISTORY.VACATION_TYPE_CODE | |",
            "lineNumber": 1055
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;開始日 | VACATION_HISTORY.START_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1056
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;終了日 | VACATION_HISTORY.END_DATE | YYYY-MM-DD形式 |",
            "lineNumber": 1057
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得日数 | VACATION_HISTORY.VACATION_DAYS | |",
            "lineNumber": 1058
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;取得理由 | VACATION_HISTORY.REASON | |",
            "lineNumber": 1059
          },
          {
            "text": "  | &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;承認状態 | VACATION_HISTORY.APPROVAL_STATUS | PENDING/APPROVED/REJECTED |",
            "lineNumber": 1060
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1061
          },
          {
            "text": "  - なし",
            "lineNumber": 1062
          },
          {
            "text": "- その他",
            "lineNumber": 1063
          },
          {
            "text": "  - V_VACATION_BALANCE_SUMMARYビューから休暇残日数、VACATION_HISTORYテーブルから取得履歴を取得",
            "lineNumber": 1064
          }
        ]
      },
      "score": 0.3347986936569214
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-application-screen.md",
        "range": {
          "startPosition": {
            "line": 530
          },
          "endPosition": {
            "line": 579
          }
        },
        "contents": "- テーブル名：ATTENDANCE_RECORD\n- 種別：更新\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |\n  | IS_DAILY_CONFIRMED | TRUE | |\n  | DAILY_CONFIRMED_AT | 現在日時 | |\n  | APPROVAL_STATUS | 'PENDING' | |\n  | UPDATED_AT | 現在日時 | |\n- 関連する取得仕様\n  - なし\n- 更新条件\n  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID\n  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付\n- その他\n  - 日次確定申請時にチェック仕様No.1のチェックを実行\n\n#### No.2\n- 更新仕様名：休暇申請登録\n- テーブル名：VACATION_HISTORY\n- 種別：登録\n  | 項目名 | 更新内容 | 補足 |\n  | :--- | :--- | :--- |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | |\n  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | |\n  | START_DATE | 画面項目定義.開始日 | |\n  | END_DATE | 画面項目定義.終了日 | |\n  | VACATION_DAYS | 計算値（終了日-開始日+1） | |\n  | REASON | 画面項目定義.備考 | |\n  | APPROVAL_STATUS | 'PENDING' | |\n  | CREATED_AT | 現在日時 | |\n  | UPDATED_AT | 現在日時 | |\n- 関連する取得仕様\n  - なし\n- 更新条件\n  - なし（新規登録）\n- その他\n  - 休暇申請時にチェック仕様No.2のチェックを実行\n\n## API利用仕様\n\n#### No.1\n- API仕様名：休暇種別マスタ取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/master/vacation-types | |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- テーブル名：ATTENDANCE_RECORD",
            "lineNumber": 531
          },
          {
            "text": "- 種別：更新",
            "lineNumber": 532
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 533
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 534
          },
          {
            "text": "  | IS_DAILY_CONFIRMED | TRUE | |",
            "lineNumber": 535
          },
          {
            "text": "  | DAILY_CONFIRMED_AT | 現在日時 | |",
            "lineNumber": 536
          },
          {
            "text": "  | APPROVAL_STATUS | 'PENDING' | |",
            "lineNumber": 537
          },
          {
            "text": "  | UPDATED_AT | 現在日時 | |",
            "lineNumber": 538
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 539
          },
          {
            "text": "  - なし",
            "lineNumber": 540
          },
          {
            "text": "- 更新条件",
            "lineNumber": 541
          },
          {
            "text": "  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID",
            "lineNumber": 542
          },
          {
            "text": "  - ATTENDANCE_RECORD.WORK_DATE = 入出力項目定義.対象日付",
            "lineNumber": 543
          },
          {
            "text": "- その他",
            "lineNumber": 544
          },
          {
            "text": "  - 日次確定申請時にチェック仕様No.1のチェックを実行",
            "lineNumber": 545
          },
          {
            "lineNumber": 546
          },
          {
            "text": "#### No.2",
            "lineNumber": 547
          },
          {
            "text": "- 更新仕様名：休暇申請登録",
            "lineNumber": 548
          },
          {
            "text": "- テーブル名：VACATION_HISTORY",
            "lineNumber": 549
          },
          {
            "text": "- 種別：登録",
            "lineNumber": 550
          },
          {
            "text": "  | 項目名 | 更新内容 | 補足 |",
            "lineNumber": 551
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 552
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | |",
            "lineNumber": 553
          },
          {
            "text": "  | VACATION_TYPE_CODE | 画面項目定義.休暇種類 | |",
            "lineNumber": 554
          },
          {
            "text": "  | START_DATE | 画面項目定義.開始日 | |",
            "lineNumber": 555
          },
          {
            "text": "  | END_DATE | 画面項目定義.終了日 | |",
            "lineNumber": 556
          },
          {
            "text": "  | VACATION_DAYS | 計算値（終了日-開始日+1） | |",
            "lineNumber": 557
          },
          {
            "text": "  | REASON | 画面項目定義.備考 | |",
            "lineNumber": 558
          },
          {
            "text": "  | APPROVAL_STATUS | 'PENDING' | |",
            "lineNumber": 559
          },
          {
            "text": "  | CREATED_AT | 現在日時 | |",
            "lineNumber": 560
          },
          {
            "text": "  | UPDATED_AT | 現在日時 | |",
            "lineNumber": 561
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 562
          },
          {
            "text": "  - なし",
            "lineNumber": 563
          },
          {
            "text": "- 更新条件",
            "lineNumber": 564
          },
          {
            "text": "  - なし（新規登録）",
            "lineNumber": 565
          },
          {
            "text": "- その他",
            "lineNumber": 566
          },
          {
            "text": "  - 休暇申請時にチェック仕様No.2のチェックを実行",
            "lineNumber": 567
          },
          {
            "lineNumber": 568
          },
          {
            "text": "## API利用仕様",
            "lineNumber": 569
          },
          {
            "lineNumber": 570
          },
          {
            "text": "#### No.1",
            "lineNumber": 571
          },
          {
            "text": "- API仕様名：休暇種別マスタ取得API",
            "lineNumber": 572
          },
          {
            "text": "- リクエスト",
            "lineNumber": 573
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 574
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 575
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 576
          },
          {
            "text": "  | エンドポイント | /api/master/vacation-types | |",
            "lineNumber": 577
          },
          {
            "text": "- レスポンス",
            "lineNumber": 578
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 579
          }
        ]
      },
      "score": 0.3329594135284424
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\entities\\mysql_table_design.sql",
        "range": {
          "startPosition": {
            "line": 211
          },
          "endPosition": {
            "line": 234
          }
        },
        "contents": "CREATE TABLE VACATION_BALANCE (\n    BALANCE_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇残日数ID',\n    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',\n    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',\n    FISCAL_YEAR INT NOT NULL COMMENT '年度',\n    GRANTED_DAYS DECIMAL(4,1) NOT NULL COMMENT '付与日数',\n    USED_DAYS DECIMAL(4,1) DEFAULT 0 COMMENT '使用日数',\n    REMAINING_DAYS DECIMAL(4,1) NOT NULL COMMENT '残日数',\n    GRANT_DATE DATE NOT NULL COMMENT '付与日',\n    EXPIRATION_DATE DATE COMMENT '有効期限',\n    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',\n    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',\n    PRIMARY KEY (BALANCE_ID),\n    UNIQUE KEY UK_EMP_TYPE_YEAR (EMPLOYEE_ID, VACATION_TYPE_CODE, FISCAL_YEAR),\n    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,\n    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),\n    INDEX IDX_FISCAL_YEAR (FISCAL_YEAR)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇残日数';\n\n-- 11. 月次勤怠 (MONTHLY_ATTENDANCE)\n-- 月次の勤怠集計と承認状態を管理するテーブル\nCREATE TABLE MONTHLY_ATTENDANCE (\n    MONTHLY_ATTENDANCE_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '月次勤怠ID: 主キー。月次勤怠記録を一意に識別するID（自動採番）',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "CREATE TABLE VACATION_BALANCE (",
            "lineNumber": 212
          },
          {
            "text": "    BALANCE_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '休暇残日数ID',",
            "lineNumber": 213
          },
          {
            "text": "    EMPLOYEE_ID VARCHAR(50) NOT NULL COMMENT '従業員ID',",
            "lineNumber": 214
          },
          {
            "text": "    VACATION_TYPE_CODE VARCHAR(20) NOT NULL COMMENT '休暇種別コード',",
            "lineNumber": 215
          },
          {
            "text": "    FISCAL_YEAR INT NOT NULL COMMENT '年度',",
            "lineNumber": 216
          },
          {
            "text": "    GRANTED_DAYS DECIMAL(4,1) NOT NULL COMMENT '付与日数',",
            "lineNumber": 217
          },
          {
            "text": "    USED_DAYS DECIMAL(4,1) DEFAULT 0 COMMENT '使用日数',",
            "lineNumber": 218
          },
          {
            "text": "    REMAINING_DAYS DECIMAL(4,1) NOT NULL COMMENT '残日数',",
            "lineNumber": 219
          },
          {
            "text": "    GRANT_DATE DATE NOT NULL COMMENT '付与日',",
            "lineNumber": 220
          },
          {
            "text": "    EXPIRATION_DATE DATE COMMENT '有効期限',",
            "lineNumber": 221
          },
          {
            "text": "    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '作成日時',",
            "lineNumber": 222
          },
          {
            "text": "    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',",
            "lineNumber": 223
          },
          {
            "text": "    PRIMARY KEY (BALANCE_ID),",
            "lineNumber": 224
          },
          {
            "text": "    UNIQUE KEY UK_EMP_TYPE_YEAR (EMPLOYEE_ID, VACATION_TYPE_CODE, FISCAL_YEAR),",
            "lineNumber": 225
          },
          {
            "text": "    FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE,",
            "lineNumber": 226
          },
          {
            "text": "    FOREIGN KEY (VACATION_TYPE_CODE) REFERENCES VACATION_TYPE(VACATION_TYPE_CODE),",
            "lineNumber": 227
          },
          {
            "text": "    INDEX IDX_FISCAL_YEAR (FISCAL_YEAR)",
            "lineNumber": 228
          },
          {
            "text": ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='休暇残日数';",
            "lineNumber": 229
          },
          {
            "lineNumber": 230
          },
          {
            "text": "-- 11. 月次勤怠 (MONTHLY_ATTENDANCE)",
            "lineNumber": 231
          },
          {
            "text": "-- 月次の勤怠集計と承認状態を管理するテーブル",
            "lineNumber": 232
          },
          {
            "text": "CREATE TABLE MONTHLY_ATTENDANCE (",
            "lineNumber": 233
          },
          {
            "text": "    MONTHLY_ATTENDANCE_ID BIGINT AUTO_INCREMENT NOT NULL COMMENT '月次勤怠ID: 主キー。月次勤怠記録を一意に識別するID（自動採番）',",
            "lineNumber": 234
          }
        ]
      },
      "score": 0.33082500100135803
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 776
          },
          "endPosition": {
            "line": 834
          }
        },
        "contents": "    initializeForms() {\n      // 日次確定申請フォームの初期化\n      this.dailyConfirmationForm = {\n        clockInOut: '',\n        breakTime: '',\n        totalWorkHours: '',\n        actualWorkHours: '',\n        remark: ''\n      }\n      // エラーメッセージをクリア\n      this.dailyConfirmationError = ''\n      \n      // 各フォームの日付を対象日付で初期化\n      this.vacationForm.startDate = this.targetDate\n      this.vacationForm.endDate = this.targetDate\n      this.holidayWorkForm.startDate = this.targetDate\n      this.holidayWorkForm.endDate = this.targetDate\n      this.overtimeForm.startDate = this.targetDate\n      this.overtimeForm.endDate = this.targetDate\n      this.earlyWorkForm.startDate = this.targetDate\n      this.earlyWorkForm.endDate = this.targetDate\n      this.transferForm.fromDate = this.targetDate\n      this.transferForm.toDate = this.targetDate\n    },\n    \n    async loadVacationTypes() {\n      try {\n        const response = await fetch('http://localhost:3000/api/master/vacation-types')\n        const data = await response.json()\n        if (data.success) {\n          this.vacationTypes = data.vacationTypes.map(type =&gt; ({\n            code: type.VACATION_TYPE_CODE,\n            name: type.VACATION_TYPE_NAME,\n            isPaid: type.IS_PAID\n          }))\n        }\n      } catch (error) {\n        console.error('休暇種別マスタ取得エラー:', error)\n      }\n    },\n    \n    async loadPaidLeaveBalance() {\n      try {\n        const response = await fetch(\n          &#96;http://localhost:3000/api/attendance/vacation/balance?employeeId=${this.employeeId}&amp;vacationTypeCode=PAID_LEAVE&#96;\n        )\n        const data = await response.json()\n        if (data.success) {\n          this.paidLeaveBalance = data.balance || 0\n        }\n      } catch (error) {\n        console.error('有給残日数取得エラー:', error)\n      }\n    },\n    \n    async loadHolidayWorkStatus() {\n      try {\n        const response = await getHolidayWorkStatus(this.employeeId, this.targetDate)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    initializeForms() {",
            "lineNumber": 777
          },
          {
            "text": "      // 日次確定申請フォームの初期化",
            "lineNumber": 778
          },
          {
            "text": "      this.dailyConfirmationForm = {",
            "lineNumber": 779
          },
          {
            "text": "        clockInOut: '',",
            "lineNumber": 780
          },
          {
            "text": "        breakTime: '',",
            "lineNumber": 781
          },
          {
            "text": "        totalWorkHours: '',",
            "lineNumber": 782
          },
          {
            "text": "        actualWorkHours: '',",
            "lineNumber": 783
          },
          {
            "text": "        remark: ''",
            "lineNumber": 784
          },
          {
            "text": "      }",
            "lineNumber": 785
          },
          {
            "text": "      // エラーメッセージをクリア",
            "lineNumber": 786
          },
          {
            "text": "      this.dailyConfirmationError = ''",
            "lineNumber": 787
          },
          {
            "text": "      ",
            "lineNumber": 788
          },
          {
            "text": "      // 各フォームの日付を対象日付で初期化",
            "lineNumber": 789
          },
          {
            "text": "      this.vacationForm.startDate = this.targetDate",
            "lineNumber": 790
          },
          {
            "text": "      this.vacationForm.endDate = this.targetDate",
            "lineNumber": 791
          },
          {
            "text": "      this.holidayWorkForm.startDate = this.targetDate",
            "lineNumber": 792
          },
          {
            "text": "      this.holidayWorkForm.endDate = this.targetDate",
            "lineNumber": 793
          },
          {
            "text": "      this.overtimeForm.startDate = this.targetDate",
            "lineNumber": 794
          },
          {
            "text": "      this.overtimeForm.endDate = this.targetDate",
            "lineNumber": 795
          },
          {
            "text": "      this.earlyWorkForm.startDate = this.targetDate",
            "lineNumber": 796
          },
          {
            "text": "      this.earlyWorkForm.endDate = this.targetDate",
            "lineNumber": 797
          },
          {
            "text": "      this.transferForm.fromDate = this.targetDate",
            "lineNumber": 798
          },
          {
            "text": "      this.transferForm.toDate = this.targetDate",
            "lineNumber": 799
          },
          {
            "text": "    },",
            "lineNumber": 800
          },
          {
            "text": "    ",
            "lineNumber": 801
          },
          {
            "text": "    async loadVacationTypes() {",
            "lineNumber": 802
          },
          {
            "text": "      try {",
            "lineNumber": 803
          },
          {
            "text": "        const response = await fetch('http://localhost:3000/api/master/vacation-types')",
            "lineNumber": 804
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 805
          },
          {
            "text": "        if (data.success) {",
            "lineNumber": 806
          },
          {
            "text": "          this.vacationTypes = data.vacationTypes.map(type =&gt; ({",
            "lineNumber": 807
          },
          {
            "text": "            code: type.VACATION_TYPE_CODE,",
            "lineNumber": 808
          },
          {
            "text": "            name: type.VACATION_TYPE_NAME,",
            "lineNumber": 809
          },
          {
            "text": "            isPaid: type.IS_PAID",
            "lineNumber": 810
          },
          {
            "text": "          }))",
            "lineNumber": 811
          },
          {
            "text": "        }",
            "lineNumber": 812
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 813
          },
          {
            "text": "        console.error('休暇種別マスタ取得エラー:', error)",
            "lineNumber": 814
          },
          {
            "text": "      }",
            "lineNumber": 815
          },
          {
            "text": "    },",
            "lineNumber": 816
          },
          {
            "text": "    ",
            "lineNumber": 817
          },
          {
            "text": "    async loadPaidLeaveBalance() {",
            "lineNumber": 818
          },
          {
            "text": "      try {",
            "lineNumber": 819
          },
          {
            "text": "        const response = await fetch(",
            "lineNumber": 820
          },
          {
            "text": "          &#96;http://localhost:3000/api/attendance/vacation/balance?employeeId=${this.employeeId}&amp;vacationTypeCode=PAID_LEAVE&#96;",
            "lineNumber": 821
          },
          {
            "text": "        )",
            "lineNumber": 822
          },
          {
            "text": "        const data = await response.json()",
            "lineNumber": 823
          },
          {
            "text": "        if (data.success) {",
            "lineNumber": 824
          },
          {
            "text": "          this.paidLeaveBalance = data.balance || 0",
            "lineNumber": 825
          },
          {
            "text": "        }",
            "lineNumber": 826
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 827
          },
          {
            "text": "        console.error('有給残日数取得エラー:', error)",
            "lineNumber": 828
          },
          {
            "text": "      }",
            "lineNumber": 829
          },
          {
            "text": "    },",
            "lineNumber": 830
          },
          {
            "text": "    ",
            "lineNumber": 831
          },
          {
            "text": "    async loadHolidayWorkStatus() {",
            "lineNumber": 832
          },
          {
            "text": "      try {",
            "lineNumber": 833
          },
          {
            "text": "        const response = await getHolidayWorkStatus(this.employeeId, this.targetDate)",
            "lineNumber": 834
          }
        ]
      },
      "score": 0.32044288516044617
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 23
          },
          "endPosition": {
            "line": 353,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    legalHolidayWorkDays,\n    scheduledHolidayWorkDays,\n    scheduledWorkHours,\n    totalWorkHours,\n    totalWorkHoursExcludingLegalHoliday,\n    overUnderHours,\n    currentMonthOvertime,\n    safetyOvertime,\n    legalWorkHours,\n    actualWorkHoursExcludingLegalHoliday,\n    withinLegalOvertime,\n    overLegalOvertime,\n    legalHolidayWorkHours,\n    nightWorkHours,\n    overtimeOver45Hours,\n    overtimeOver60Hours,\n    lateCount,\n    lateHours,\n    earlyLeaveCount,\n    earlyLeaveHours,\n    privateOutingCount,\n    privateOutingHours,\n    totalBreakHours\n  };\n  \n  // 4. 休暇情報取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n  \n  // 有給取得日数\n  const paidLeaveDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n  \n  // 有給取得日数内訳\n  let paidLeaveTypeName = '';\n\n  if (paidLeaveDays &gt; 0) {\n    paidLeaveTypeName = '年次有給休暇';\n  }\n\n  // 代休取得日数\n  const substituteHolidayDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n\n  // 代休取得日数内訳\n  let substituteHolidayTypeName = '';\n\n  if (substituteHolidayDays &gt; 0) {\n    substituteHolidayTypeName = '代休';\n  }\n  \n  // 無給休暇日数（簡易的に0とする）\n  const unpaidLeaveDays = 0;\n  const unpaidLeaveTypeName = '';\n  \n  // 有給残日数（月末日時点）\n  const endOfMonth = new Date(year, month, 0);\n  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];\n  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');\n  \n  // 計画付与予定日（次月以降）\n  let nextMonth = { year, month: month + 1 };\n\n  if (month === 12) {\n    nextMonth = { year: year + 1, month: 1 };\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 24,
                "column": 1
              },
              "endPosition": {
                "line": 24,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 24,
                "column": 7
              },
              "endPosition": {
                "line": 24,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 24
          },
          {
            "lineNumber": 253
          },
          {
            "text": "  ",
            "lineNumber": 254
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 255
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 256
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 257
          },
          {
            "text": "    legalHolidayWorkDays,",
            "lineNumber": 258
          },
          {
            "text": "    scheduledHolidayWorkDays,",
            "lineNumber": 259
          },
          {
            "text": "    scheduledWorkHours,",
            "lineNumber": 260
          },
          {
            "text": "    totalWorkHours,",
            "lineNumber": 261
          },
          {
            "text": "    totalWorkHoursExcludingLegalHoliday,",
            "lineNumber": 262
          },
          {
            "text": "    overUnderHours,",
            "lineNumber": 263
          },
          {
            "text": "    currentMonthOvertime,",
            "lineNumber": 264
          },
          {
            "text": "    safetyOvertime,",
            "lineNumber": 265
          },
          {
            "text": "    legalWorkHours,",
            "lineNumber": 266
          },
          {
            "text": "    actualWorkHoursExcludingLegalHoliday,",
            "lineNumber": 267
          },
          {
            "text": "    withinLegalOvertime,",
            "lineNumber": 268
          },
          {
            "text": "    overLegalOvertime,",
            "lineNumber": 269
          },
          {
            "text": "    legalHolidayWorkHours,",
            "lineNumber": 270
          },
          {
            "text": "    nightWorkHours,",
            "lineNumber": 271
          },
          {
            "text": "    overtimeOver45Hours,",
            "lineNumber": 272
          },
          {
            "text": "    overtimeOver60Hours,",
            "lineNumber": 273
          },
          {
            "text": "    lateCount,",
            "lineNumber": 274
          },
          {
            "text": "    lateHours,",
            "lineNumber": 275
          },
          {
            "text": "    earlyLeaveCount,",
            "lineNumber": 276
          },
          {
            "text": "    earlyLeaveHours,",
            "lineNumber": 277
          },
          {
            "text": "    privateOutingCount,",
            "lineNumber": 278
          },
          {
            "text": "    privateOutingHours,",
            "lineNumber": 279
          },
          {
            "text": "    totalBreakHours",
            "lineNumber": 280
          },
          {
            "text": "  };",
            "lineNumber": 281
          },
          {
            "text": "  ",
            "lineNumber": 282
          },
          {
            "text": "  // 4. 休暇情報取得",
            "lineNumber": 283
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 284
          },
          {
            "text": "  ",
            "lineNumber": 285
          },
          {
            "text": "  // 有給取得日数",
            "lineNumber": 286
          },
          {
            "text": "  const paidLeaveDays = vacations",
            "lineNumber": 287
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 288
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 289
          },
          {
            "text": "  ",
            "lineNumber": 290
          },
          {
            "text": "  // 有給取得日数内訳",
            "lineNumber": 291
          },
          {
            "text": "  let paidLeaveTypeName = '';",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "  if (paidLeaveDays &gt; 0) {",
            "lineNumber": 294
          },
          {
            "text": "    paidLeaveTypeName = '年次有給休暇';",
            "lineNumber": 295
          },
          {
            "text": "  }",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "  // 代休取得日数",
            "lineNumber": 298
          },
          {
            "text": "  const substituteHolidayDays = vacations",
            "lineNumber": 299
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 300
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 301
          },
          {
            "lineNumber": 302
          },
          {
            "text": "  // 代休取得日数内訳",
            "lineNumber": 303
          },
          {
            "text": "  let substituteHolidayTypeName = '';",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "  if (substituteHolidayDays &gt; 0) {",
            "lineNumber": 306
          },
          {
            "text": "    substituteHolidayTypeName = '代休';",
            "lineNumber": 307
          },
          {
            "text": "  }",
            "lineNumber": 308
          },
          {
            "text": "  ",
            "lineNumber": 309
          },
          {
            "text": "  // 無給休暇日数（簡易的に0とする）",
            "lineNumber": 310
          },
          {
            "text": "  const unpaidLeaveDays = 0;",
            "lineNumber": 311
          },
          {
            "text": "  const unpaidLeaveTypeName = '';",
            "lineNumber": 312
          },
          {
            "text": "  ",
            "lineNumber": 313
          },
          {
            "text": "  // 有給残日数（月末日時点）",
            "lineNumber": 314
          },
          {
            "text": "  const endOfMonth = new Date(year, month, 0);",
            "lineNumber": 315
          },
          {
            "text": "  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];",
            "lineNumber": 316
          },
          {
            "text": "  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');",
            "lineNumber": 317
          },
          {
            "text": "  ",
            "lineNumber": 318
          },
          {
            "text": "  // 計画付与予定日（次月以降）",
            "lineNumber": 319
          },
          {
            "text": "  let nextMonth = { year, month: month + 1 };",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "  if (month === 12) {",
            "lineNumber": 322
          },
          {
            "text": "    nextMonth = { year: year + 1, month: 1 };",
            "lineNumber": 323
          },
          {
            "text": "  }",
            "lineNumber": 324
          },
          {
            "text": ";",
            "lineNumber": 354
          }
        ]
      },
      "score": 0.31485140323638916
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 132,
            "column": 2
          },
          "endPosition": {
            "line": 163,
            "column": 19
          }
        },
        "contents": "/**\n * 休暇取得履歴を取得\n * @param {string} employeeId - 従業員ID\n * @param {number} limit - 取得件数\n * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列\n */\nconst getVacationHistory = async (employeeId, limit = 20) =&gt; {\n  const query = &#96;\n    SELECT \n      VACATION_ID,\n      VACATION_TYPE_CODE,\n      START_DATE,\n      END_DATE,\n      VACATION_DAYS,\n      REASON,\n      APPROVAL_STATUS\n    FROM VACATION_HISTORY\n    WHERE EMPLOYEE_ID = ?\n    ORDER BY START_DATE DESC\n    LIMIT ?\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, limit]);\n  return rows;\n};\n\nmodule.exports = {\n  getWorkLocations,\n  getJobs,\n  getVacationTypes,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 135
          },
          {
            "text": " * 休暇取得履歴を取得",
            "lineNumber": 136
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 137
          },
          {
            "text": " * @param {number} limit - 取得件数",
            "lineNumber": 138
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列",
            "lineNumber": 139
          },
          {
            "text": " */",
            "lineNumber": 140
          },
          {
            "text": "const getVacationHistory = async (employeeId, limit = 20) =&gt; {",
            "lineNumber": 141
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 142
          },
          {
            "text": "    SELECT ",
            "lineNumber": 143
          },
          {
            "text": "      VACATION_ID,",
            "lineNumber": 144
          },
          {
            "text": "      VACATION_TYPE_CODE,",
            "lineNumber": 145
          },
          {
            "text": "      START_DATE,",
            "lineNumber": 146
          },
          {
            "text": "      END_DATE,",
            "lineNumber": 147
          },
          {
            "text": "      VACATION_DAYS,",
            "lineNumber": 148
          },
          {
            "text": "      REASON,",
            "lineNumber": 149
          },
          {
            "text": "      APPROVAL_STATUS",
            "lineNumber": 150
          },
          {
            "text": "    FROM VACATION_HISTORY",
            "lineNumber": 151
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ?",
            "lineNumber": 152
          },
          {
            "text": "    ORDER BY START_DATE DESC",
            "lineNumber": 153
          },
          {
            "text": "    LIMIT ?",
            "lineNumber": 154
          },
          {
            "text": "  &#96;;",
            "lineNumber": 155
          },
          {
            "text": "  ",
            "lineNumber": 156
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, limit]);",
            "lineNumber": 157
          },
          {
            "text": "  return rows;",
            "lineNumber": 158
          },
          {
            "text": "};",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "module.exports = {",
            "lineNumber": 161
          },
          {
            "text": "  getWorkLocations,",
            "lineNumber": 162
          },
          {
            "text": "  getJobs,",
            "lineNumber": 163
          },
          {
            "text": "  getVacationTypes,",
            "lineNumber": 164
          }
        ]
      },
      "score": 0.3113752603530884
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\applicationModel.js",
        "range": {
          "startPosition": {
            "line": 296,
            "column": 2
          },
          "endPosition": {
            "line": 327,
            "column": 21
          }
        },
        "contents": "/**\n * 休暇取得履歴を取得\n * @param {string} employeeId - 従業員ID\n * @param {number} limit - 取得件数\n * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列\n */\nconst getVacationHistory = async (employeeId, limit = 20) =&gt; {\n  const query = &#96;\n    SELECT \n      VACATION_ID,\n      VACATION_TYPE_CODE,\n      START_DATE,\n      END_DATE,\n      VACATION_DAYS,\n      REASON,\n      APPROVAL_STATUS\n    FROM VACATION_HISTORY\n    WHERE EMPLOYEE_ID = ?\n    ORDER BY START_DATE DESC\n    LIMIT ?\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, limit]);\n  return rows;\n};\n\nmodule.exports = {\n  createVacation,\n  getVacations,\n  getVacationBalance,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 299
          },
          {
            "text": " * 休暇取得履歴を取得",
            "lineNumber": 300
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 301
          },
          {
            "text": " * @param {number} limit - 取得件数",
            "lineNumber": 302
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇取得履歴の配列",
            "lineNumber": 303
          },
          {
            "text": " */",
            "lineNumber": 304
          },
          {
            "text": "const getVacationHistory = async (employeeId, limit = 20) =&gt; {",
            "lineNumber": 305
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 306
          },
          {
            "text": "    SELECT ",
            "lineNumber": 307
          },
          {
            "text": "      VACATION_ID,",
            "lineNumber": 308
          },
          {
            "text": "      VACATION_TYPE_CODE,",
            "lineNumber": 309
          },
          {
            "text": "      START_DATE,",
            "lineNumber": 310
          },
          {
            "text": "      END_DATE,",
            "lineNumber": 311
          },
          {
            "text": "      VACATION_DAYS,",
            "lineNumber": 312
          },
          {
            "text": "      REASON,",
            "lineNumber": 313
          },
          {
            "text": "      APPROVAL_STATUS",
            "lineNumber": 314
          },
          {
            "text": "    FROM VACATION_HISTORY",
            "lineNumber": 315
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ?",
            "lineNumber": 316
          },
          {
            "text": "    ORDER BY START_DATE DESC",
            "lineNumber": 317
          },
          {
            "text": "    LIMIT ?",
            "lineNumber": 318
          },
          {
            "text": "  &#96;;",
            "lineNumber": 319
          },
          {
            "text": "  ",
            "lineNumber": 320
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, limit]);",
            "lineNumber": 321
          },
          {
            "text": "  return rows;",
            "lineNumber": 322
          },
          {
            "text": "};",
            "lineNumber": 323
          },
          {
            "lineNumber": 324
          },
          {
            "text": "module.exports = {",
            "lineNumber": 325
          },
          {
            "text": "  createVacation,",
            "lineNumber": 326
          },
          {
            "text": "  getVacations,",
            "lineNumber": 327
          },
          {
            "text": "  getVacationBalance,",
            "lineNumber": 328
          }
        ]
      },
      "score": 0.30978038907051086
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


バックエンドとフロントエンドを修正し、ドキュメントを更新します。


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] バックエンドでdailyDataに休暇情報と祝日情報を追加
- [ ] フロントエンドのgetEventTextメソッドを修正して新しい表示形式に対応
- [ ] ドキュメントに新しい表示形式を記載

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\models\masterModel.js</summary>

</details>
</tool-use>

---



---


バックエンドを修正し、dailyDataに休暇情報と祝日情報を追加中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "0ede5fd4-1a0d-4c81-8ca9-4c3a52f55494"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "c6e3646c-31e5-442c-b047-86030eb4553c"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "e386a479-4932-4654-afc9-08a19efd54e1"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "ef748781-2163-4b75-b5cd-e8eb9ebc479a"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "981876da-f83d-4cf9-b82d-5adbd49267f9"
}
```
Status: **completed**


</details>
</tool-use>

---



---


フロントエンドの`getEventText`メソッドを修正中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "8eae9b4d-3763-4e59-8b1f-39c0df321d68"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] バックエンドでdailyDataに休暇情報と祝日情報を追加
- [x] フロントエンドのgetEventTextメソッドを修正して新しい表示形式に対応
- [ ] ドキュメントに新しい表示形式を記載

</details>
</tool-use>

---



---


ドキュメントを更新中です。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\detailed-design\ui\monthly-summary-screen.md</summary>

</details>
</tool-use>

---



---


ドキュメントの「イベント/勤務状況/勤務場所」の表示形式を更新中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "61239cde-23c2-4354-8387-6c19393dd5a8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "a63d3237-b198-471f-9123-92f7ae150917"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\detailed-design\ui\monthly-summary-screen.md</summary>

</details>
</tool-use>

---



---


ドキュメントの「その他の項目定義」に、`holidayName`と`vacationTypeName`を追加中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "d0c11620-8cf7-4246-87b0-3c8b7955ccb8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] バックエンドでdailyDataに休暇情報と祝日情報を追加
- [x] フロントエンドのgetEventTextメソッドを修正して新しい表示形式に対応
- [x] ドキュメントに新しい表示形式を記載

</details>
</tool-use>

---



---


テーブル取得仕様に祝日名と休暇種別名の取得を追加中です。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\detailed-design\ui\monthly-summary-screen.md</summary>

</details>
</tool-use>

---



---


テーブル取得仕様に祝日名と休暇種別名の取得を追加中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "25b16801-a18e-4284-a77e-6e014560c4a0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\detailed-design\ui\monthly-summary-screen.md</summary>

</details>
</tool-use>

---



---


補足説明セクションに「イベント/勤務状況/勤務場所の表示形式について」を追加し、変更履歴を更新中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "e5a85c7e-4c78-4f84-9b44-8ec66e085699"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "086c6e23-a3a5-4f79-97e2-22c60a7b7276"
}
```
Status: **completed**


</details>
</tool-use>

---



---


バックエンドの祝日名取得ロジックを確認・修正中です。


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "HolidayJp",
  "path": "backend",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "HolidayJp",
    "path": "backend",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "backend\\services\\monthlySummaryService.js",
              "matches": [
                {
                  "lineNumber": 17,
                  "content": "const HolidayJp = require('@holiday-jp/holiday_jp');"
                },
                {
                  "lineNumber": 65,
                  "content": "    const holidayInfo = HolidayJp.between(dateObj, dateObj);"
                }
              ]
            },
            {
              "file": "backend\\utils\\dateUtils.js",
              "matches": [
                {
                  "lineNumber": 4,
                  "content": "const HolidayJp = require('@holiday-jp/holiday_jp');"
                },
                {
                  "lineNumber": 141,
                  "content": "      if (HolidayJp.isHoliday(date)) {"
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="web_search">
<details>
            <summary>Tool use: **web_search** • Searched web `undefined` • **1** results</summary>
        
| Title | URL | Chunk |
|-------|-----|-------|
| Web Search Results |  | To retrieve the name of a Japanese holiday for a specific date using the `@holiday-jp/holiday_jp` library, you can utilize the `isHoliday` function. This function checks if a given date is a holiday and returns the corresponding holiday object if it is. Here's how you can implement it:<br/><br/><br/>```javascript<br/>const holiday_jp = require('@holiday-jp/holiday_jp');<br/><br/>const date = new Date('2025-12-15'); // Replace with your desired date<br/>const holiday = holiday_jp.isHoliday(date);<br/><br/>if (holiday) \{<br/>  console.log(`The holiday on $\{date.toDateString()\} is $\{holiday.name\}.`);<br/>\} else \{<br/>  console.log(`$\{date.toDateString()\} is not a holiday.`);<br/>\}<br/>```<br/><br/><br/>In this example:<br/><br/>- Replace `'2025-12-15'` with the date you want to check.<br/>- The `isHoliday` function returns the holiday object if the date is a holiday; otherwise, it returns `null`.<br/>- If the date is a holiday, the holiday's name is logged to the console.<br/><br/>Ensure you have installed the `@holiday-jp/holiday_jp` package in your project:<br/><br/><br/>```bash<br/>npm install @holiday-jp/holiday_jp<br/>```<br/><br/><br/>For more details, refer to the official documentation: ([npmjs.com](https://www.npmjs.com/package/%40holiday-jp/holiday_jp?utm_source=openai)) |

</details>
</tool-use>

---



---


バックエンドの祝日名取得ロジックを修正中です。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "59e9efd9-72fb-430a-895b-9a57b5b105de"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "backend/services/monthlySummaryService.js",
    "frontend/src/views/MonthlySummaryScreen.vue"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "backend/services/monthlySummaryService.js"
    },
    {
      "relativeWorkspacePath": "frontend/src/views/MonthlySummaryScreen.vue"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


実装を完了しました。変更内容は以下の通りです。

## 実装内容

### 1. バックエンドの修正 (`backend/services/monthlySummaryService.js`)
- 休暇情報と祝日情報をdailyDataに追加
- 祝日名は`@holiday-jp/holiday_jp`から取得
- 休暇種別名は`VACATION_TYPE`マスタから取得

### 2. フロントエンドの修正 (`frontend/src/views/MonthlySummaryScreen.vue`)
- `getEventText`メソッドを更新し、以下の優先順位で表示：
  1. **祝日**: `(祝日名)` 形式（例: `(勤労感謝の日)`）
  2. **休暇**: `休暇(休暇種別名)` 形式（例: `休暇(年次有給休暇)`）
  3. **日時確定済み**: `日時確定,勤務場所` 形式（例: `日時確定,在宅`、`日時確定,通勤`）
  4. **通常勤務**: 勤務場所のみ（例: `在宅`、`通勤`）

### 3. ドキュメントの更新 (`docs/detailed-design/ui/monthly-summary-screen.md`)
- 「イベント/勤務状況/勤務場所」欄の表示形式を記載
- その他の項目定義に`holidayName`と`vacationTypeName`を追加
- テーブル取得仕様に祝日名と休暇種別名の取得方法を追加
- 補足説明に表示形式の詳細を追加
- 変更履歴を更新

これで、月次サマリー情報画面の「イベント/勤務状況/勤務場所」欄が、画像に示された形式で表示されます。

---

_**User**_

通勤以外何も表示されない。

---

_**Agent (model composer-1, mode Agent)**_



---


「通勤」以外が表示されない原因を確認中。バックエンドのデータ構造とフロントエンドの表示ロジックを確認します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\views\MonthlySummaryScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "getMonthlySummaryDetail APIエンドポイントの実装",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\services\\api.js",
        "range": {
          "startPosition": {
            "line": 181,
            "column": 1
          },
          "endPosition": {
            "line": 193,
            "column": 1
          }
        },
        "contents": "/**\n * 月次サマリー情報を取得する（月次サマリー情報画面用）。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} yearMonth 対象年月（YYYY-MM形式）\n * @returns {Promise&lt;Object&gt;} 月次サマリー情報データ\n */\nexport async function getMonthlySummaryDetail(employeeId, yearMonth) {\n  const endpoint = &#96;/attendance/monthly-summary-detail?employeeId=${employeeId}&amp;yearMonth=${yearMonth}&#96;\n  return await apiRequest(endpoint, { method: 'GET' })\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 184
          },
          {
            "text": " * 月次サマリー情報を取得する（月次サマリー情報画面用）。",
            "lineNumber": 185
          },
          {
            "text": " *",
            "lineNumber": 186
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 187
          },
          {
            "text": " * @param {string} yearMonth 対象年月（YYYY-MM形式）",
            "lineNumber": 188
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリー情報データ",
            "lineNumber": 189
          },
          {
            "text": " */",
            "lineNumber": 190
          },
          {
            "text": "export async function getMonthlySummaryDetail(employeeId, yearMonth) {",
            "lineNumber": 191,
            "isSignature": true
          },
          {
            "text": "  const endpoint = &#96;/attendance/monthly-summary-detail?employeeId=${employeeId}&amp;yearMonth=${yearMonth}&#96;",
            "lineNumber": 192
          },
          {
            "text": "  return await apiRequest(endpoint, { method: 'GET' })",
            "lineNumber": 193
          },
          {
            "text": "}",
            "lineNumber": 194,
            "isSignature": true
          }
        ]
      },
      "score": 0.5644509792327881
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\routes\\attendance.js",
        "range": {
          "startPosition": {
            "line": 122,
            "column": 83
          },
          "endPosition": {
            "line": 134,
            "column": 68
          }
        },
        "contents": "/**\n * 月次サマリー取得API（月次サマリー情報画面用）\n * GET /api/attendance/monthly-summary-detail\n */\nrouter.get('/monthly-summary-detail', monthlySummaryController.getMonthlySummary);\n\n/**\n * 休暇情報取得API\n * GET /api/attendance/vacation-info\n */\nrouter.get('/vacation-info', applicationController.getVacationInfo);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 125
          },
          {
            "text": " * 月次サマリー取得API（月次サマリー情報画面用）",
            "lineNumber": 126
          },
          {
            "text": " * GET /api/attendance/monthly-summary-detail",
            "lineNumber": 127
          },
          {
            "text": " */",
            "lineNumber": 128
          },
          {
            "text": "router.get('/monthly-summary-detail', monthlySummaryController.getMonthlySummary);",
            "lineNumber": 129
          },
          {
            "lineNumber": 130
          },
          {
            "text": "/**",
            "lineNumber": 131
          },
          {
            "text": " * 休暇情報取得API",
            "lineNumber": 132
          },
          {
            "text": " * GET /api/attendance/vacation-info",
            "lineNumber": 133
          },
          {
            "text": " */",
            "lineNumber": 134
          },
          {
            "text": "router.get('/vacation-info', applicationController.getVacationInfo);",
            "lineNumber": 135
          }
        ]
      },
      "score": 0.5157986283302307
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\monthlySummaryController.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40,
            "column": 2
          }
        },
        "contents": "/**\n * 月次サマリーコントローラー\n */\nconst monthlySummaryService = require('../services/monthlySummaryService');\n\n/**\n * 月次サマリー情報取得\n */\nconst getMonthlySummary = async (req, res, next) =&gt; {\n  try {\n    const { employeeId, yearMonth } = req.query;\n    \n    if (!employeeId || !yearMonth) {\n      return res.status(400).json({\n        success: false,\n        message: '従業員IDと対象年月が必要です。'\n      });\n    }\n    \n    // 対象年月の形式チェック（YYYY-MM形式）\n    if (!/^\\d{4}-\\d{2}$/.test(yearMonth)) {\n      return res.status(400).json({\n        success: false,\n        message: '対象年月の形式が正しくありません。YYYY-MM形式で指定してください。'\n      });\n    }\n    \n    const result = await monthlySummaryService.getMonthlySummary(employeeId, yearMonth);\n    \n    res.json({\n      success: true,\n      ...result\n    });\n  } catch (error) {\n    next(error);\n  }\n};\n\nmodule.exports = {\n  getMonthlySummary\n};",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 月次サマリーコントローラー",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const monthlySummaryService = require('../services/monthlySummaryService');",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "/**",
            "lineNumber": 6
          },
          {
            "text": " * 月次サマリー情報取得",
            "lineNumber": 7
          },
          {
            "text": " */",
            "lineNumber": 8
          },
          {
            "text": "const getMonthlySummary = async (req, res, next) =&gt; {",
            "lineNumber": 9
          },
          {
            "text": "  try {",
            "lineNumber": 10
          },
          {
            "text": "    const { employeeId, yearMonth } = req.query;",
            "lineNumber": 11
          },
          {
            "text": "    ",
            "lineNumber": 12
          },
          {
            "text": "    if (!employeeId || !yearMonth) {",
            "lineNumber": 13
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 14
          },
          {
            "text": "        success: false,",
            "lineNumber": 15
          },
          {
            "text": "        message: '従業員IDと対象年月が必要です。'",
            "lineNumber": 16
          },
          {
            "text": "      });",
            "lineNumber": 17
          },
          {
            "text": "    }",
            "lineNumber": 18
          },
          {
            "text": "    ",
            "lineNumber": 19
          },
          {
            "text": "    // 対象年月の形式チェック（YYYY-MM形式）",
            "lineNumber": 20
          },
          {
            "text": "    if (!/^\\d{4}-\\d{2}$/.test(yearMonth)) {",
            "lineNumber": 21
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 22
          },
          {
            "text": "        success: false,",
            "lineNumber": 23
          },
          {
            "text": "        message: '対象年月の形式が正しくありません。YYYY-MM形式で指定してください。'",
            "lineNumber": 24
          },
          {
            "text": "      });",
            "lineNumber": 25
          },
          {
            "text": "    }",
            "lineNumber": 26
          },
          {
            "text": "    ",
            "lineNumber": 27
          },
          {
            "text": "    const result = await monthlySummaryService.getMonthlySummary(employeeId, yearMonth);",
            "lineNumber": 28
          },
          {
            "text": "    ",
            "lineNumber": 29
          },
          {
            "text": "    res.json({",
            "lineNumber": 30
          },
          {
            "text": "      success: true,",
            "lineNumber": 31
          },
          {
            "text": "      ...result",
            "lineNumber": 32
          },
          {
            "text": "    });",
            "lineNumber": 33
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 34
          },
          {
            "text": "    next(error);",
            "lineNumber": 35
          },
          {
            "text": "  }",
            "lineNumber": 36
          },
          {
            "text": "};",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "module.exports = {",
            "lineNumber": 39
          },
          {
            "text": "  getMonthlySummary",
            "lineNumber": 40
          },
          {
            "text": "};",
            "lineNumber": 41
          }
        ]
      },
      "score": 0.4916923940181732
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\masterController.js",
        "range": {
          "startPosition": {
            "line": 52,
            "column": 2
          },
          "endPosition": {
            "line": 86,
            "column": 19
          }
        },
        "contents": "/**\n * 月次サマリー取得\n */\nconst getMonthlySummary = async (req, res, next) =&gt; {\n  try {\n    const { employeeId, year, month } = req.query;\n    \n    if (!employeeId || !year || !month) {\n      return res.status(400).json({\n        success: false,\n        message: '従業員ID、年、月が必要です。'\n      });\n    }\n    \n    const summary = await masterService.getMonthlySummary(\n      employeeId,\n      parseInt(year),\n      parseInt(month)\n    );\n    \n    res.json({\n      success: true,\n      summary\n    });\n  } catch (error) {\n    next(error);\n  }\n};\n\nmodule.exports = {\n  getWorkLocations,\n  getJobs,\n  getVacationTypes,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 55
          },
          {
            "text": " * 月次サマリー取得",
            "lineNumber": 56
          },
          {
            "text": " */",
            "lineNumber": 57
          },
          {
            "text": "const getMonthlySummary = async (req, res, next) =&gt; {",
            "lineNumber": 58
          },
          {
            "text": "  try {",
            "lineNumber": 59
          },
          {
            "text": "    const { employeeId, year, month } = req.query;",
            "lineNumber": 60
          },
          {
            "text": "    ",
            "lineNumber": 61
          },
          {
            "text": "    if (!employeeId || !year || !month) {",
            "lineNumber": 62
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 63
          },
          {
            "text": "        success: false,",
            "lineNumber": 64
          },
          {
            "text": "        message: '従業員ID、年、月が必要です。'",
            "lineNumber": 65
          },
          {
            "text": "      });",
            "lineNumber": 66
          },
          {
            "text": "    }",
            "lineNumber": 67
          },
          {
            "text": "    ",
            "lineNumber": 68
          },
          {
            "text": "    const summary = await masterService.getMonthlySummary(",
            "lineNumber": 69
          },
          {
            "text": "      employeeId,",
            "lineNumber": 70
          },
          {
            "text": "      parseInt(year),",
            "lineNumber": 71
          },
          {
            "text": "      parseInt(month)",
            "lineNumber": 72
          },
          {
            "text": "    );",
            "lineNumber": 73
          },
          {
            "text": "    ",
            "lineNumber": 74
          },
          {
            "text": "    res.json({",
            "lineNumber": 75
          },
          {
            "text": "      success: true,",
            "lineNumber": 76
          },
          {
            "text": "      summary",
            "lineNumber": 77
          },
          {
            "text": "    });",
            "lineNumber": 78
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 79
          },
          {
            "text": "    next(error);",
            "lineNumber": 80
          },
          {
            "text": "  }",
            "lineNumber": 81
          },
          {
            "text": "};",
            "lineNumber": 82
          },
          {
            "lineNumber": 83
          },
          {
            "text": "module.exports = {",
            "lineNumber": 84
          },
          {
            "text": "  getWorkLocations,",
            "lineNumber": 85
          },
          {
            "text": "  getJobs,",
            "lineNumber": 86
          },
          {
            "text": "  getVacationTypes,",
            "lineNumber": 87
          }
        ]
      },
      "score": 0.47140011191368103
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\services\\api.js",
        "range": {
          "startPosition": {
            "line": 123,
            "column": 1
          },
          "endPosition": {
            "line": 143,
            "column": 3
          }
        },
        "contents": "/**\n * 月次サマリーを取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} year 年（YYYY形式）\n * @param {string} month 月（MM形式）\n * @returns {Promise&lt;Object&gt;} 月次サマリーデータ\n */\nexport async function getMonthlySummary(employeeId, year, month) {\n  const endpoint = &#96;/attendance/monthly-summary?employeeId=${employeeId}&amp;year=${year}&amp;month=${month}&#96;\n  return await apiRequest(endpoint, { method: 'GET' })\n}\n\n/**\n * 休暇情報を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @returns {Promise&lt;Object&gt;} 休暇情報データ\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 126
          },
          {
            "text": " * 月次サマリーを取得する。",
            "lineNumber": 127
          },
          {
            "text": " *",
            "lineNumber": 128
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 129
          },
          {
            "text": " * @param {string} year 年（YYYY形式）",
            "lineNumber": 130
          },
          {
            "text": " * @param {string} month 月（MM形式）",
            "lineNumber": 131
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリーデータ",
            "lineNumber": 132
          },
          {
            "text": " */",
            "lineNumber": 133
          },
          {
            "text": "export async function getMonthlySummary(employeeId, year, month) {",
            "lineNumber": 134,
            "isSignature": true
          },
          {
            "text": "  const endpoint = &#96;/attendance/monthly-summary?employeeId=${employeeId}&amp;year=${year}&amp;month=${month}&#96;",
            "lineNumber": 135
          },
          {
            "text": "  return await apiRequest(endpoint, { method: 'GET' })",
            "lineNumber": 136
          },
          {
            "text": "}",
            "lineNumber": 137,
            "isSignature": true
          },
          {
            "lineNumber": 138
          },
          {
            "text": "/**",
            "lineNumber": 139
          },
          {
            "text": " * 休暇情報を取得する。",
            "lineNumber": 140
          },
          {
            "text": " *",
            "lineNumber": 141
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 142
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 休暇情報データ",
            "lineNumber": 143
          },
          {
            "text": " */",
            "lineNumber": 144
          }
        ]
      },
      "score": 0.45702651143074036
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 510
          },
          "endPosition": {
            "line": 569
          }
        },
        "contents": "  },\n  methods: {\n    async loadData(employeeId, yearMonth) {\n      this.loading = true\n      this.error = null\n      \n      try {\n        const response = await getMonthlySummaryDetail(employeeId, yearMonth)\n        \n        if (response.success) {\n          this.employee = response.employee\n          this.dailyData = response.dailyData || []\n          this.monthlySummary = response.monthlySummary || {}\n          this.vacationInfo = response.vacationInfo || {}\n          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'\n        } else {\n          this.error = response.message || 'データの取得に失敗しました。'\n        }\n      } catch (err) {\n        console.error('月次サマリー情報の取得エラー:', err)\n        this.error = err.message || 'データの取得に失敗しました。'\n      } finally {\n        this.loading = false\n      }\n    },\n    formatDate(dateStr, index) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      // 最初の行だけ月を含める\n      if (index === 0) {\n        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;\n      }\n      return &#96;${date.getDate()}&#96;\n    },\n    getDatePaddingLeft(index, dateStr) {\n      // 最初の行の日付の1桁目の位置に合わせる\n      if (index === 0) return 0\n      \n      if (!dateStr) return 18\n      const date = new Date(dateStr)\n      const day = date.getDate()\n      \n      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）\n      // 約18px程度の幅があると仮定\n      let baseOffset = 18\n      \n      // 2~9は4px左にずらす\n      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {\n        baseOffset -= 4\n      }\n      // 10~31は9px左にずらす\n      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {\n        baseOffset -= 9\n      }\n      \n      return baseOffset\n    },\n    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  },",
            "lineNumber": 511
          },
          {
            "text": "  methods: {",
            "lineNumber": 512
          },
          {
            "text": "    async loadData(employeeId, yearMonth) {",
            "lineNumber": 513
          },
          {
            "text": "      this.loading = true",
            "lineNumber": 514
          },
          {
            "text": "      this.error = null",
            "lineNumber": 515
          },
          {
            "text": "      ",
            "lineNumber": 516
          },
          {
            "text": "      try {",
            "lineNumber": 517
          },
          {
            "text": "        const response = await getMonthlySummaryDetail(employeeId, yearMonth)",
            "lineNumber": 518
          },
          {
            "text": "        ",
            "lineNumber": 519
          },
          {
            "text": "        if (response.success) {",
            "lineNumber": 520
          },
          {
            "text": "          this.employee = response.employee",
            "lineNumber": 521
          },
          {
            "text": "          this.dailyData = response.dailyData || []",
            "lineNumber": 522
          },
          {
            "text": "          this.monthlySummary = response.monthlySummary || {}",
            "lineNumber": 523
          },
          {
            "text": "          this.vacationInfo = response.vacationInfo || {}",
            "lineNumber": 524
          },
          {
            "text": "          this.monthlyApprovalStatus = response.monthlyApprovalStatus || 'NOT_SUBMITTED'",
            "lineNumber": 525
          },
          {
            "text": "        } else {",
            "lineNumber": 526
          },
          {
            "text": "          this.error = response.message || 'データの取得に失敗しました。'",
            "lineNumber": 527
          },
          {
            "text": "        }",
            "lineNumber": 528
          },
          {
            "text": "      } catch (err) {",
            "lineNumber": 529
          },
          {
            "text": "        console.error('月次サマリー情報の取得エラー:', err)",
            "lineNumber": 530
          },
          {
            "text": "        this.error = err.message || 'データの取得に失敗しました。'",
            "lineNumber": 531
          },
          {
            "text": "      } finally {",
            "lineNumber": 532
          },
          {
            "text": "        this.loading = false",
            "lineNumber": 533
          },
          {
            "text": "      }",
            "lineNumber": 534
          },
          {
            "text": "    },",
            "lineNumber": 535
          },
          {
            "text": "    formatDate(dateStr, index) {",
            "lineNumber": 536
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 537
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 538
          },
          {
            "text": "      // 最初の行だけ月を含める",
            "lineNumber": 539
          },
          {
            "text": "      if (index === 0) {",
            "lineNumber": 540
          },
          {
            "text": "        return &#96;${date.getMonth() + 1}/${date.getDate()}&#96;",
            "lineNumber": 541
          },
          {
            "text": "      }",
            "lineNumber": 542
          },
          {
            "text": "      return &#96;${date.getDate()}&#96;",
            "lineNumber": 543
          },
          {
            "text": "    },",
            "lineNumber": 544
          },
          {
            "text": "    getDatePaddingLeft(index, dateStr) {",
            "lineNumber": 545
          },
          {
            "text": "      // 最初の行の日付の1桁目の位置に合わせる",
            "lineNumber": 546
          },
          {
            "text": "      if (index === 0) return 0",
            "lineNumber": 547
          },
          {
            "text": "      ",
            "lineNumber": 548
          },
          {
            "text": "      if (!dateStr) return 18",
            "lineNumber": 549
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 550
          },
          {
            "text": "      const day = date.getDate()",
            "lineNumber": 551
          },
          {
            "text": "      ",
            "lineNumber": 552
          },
          {
            "text": "      // 「12/」の幅を計算（フォントサイズ10px、文字数3文字分）",
            "lineNumber": 553
          },
          {
            "text": "      // 約18px程度の幅があると仮定",
            "lineNumber": 554
          },
          {
            "text": "      let baseOffset = 18",
            "lineNumber": 555
          },
          {
            "text": "      ",
            "lineNumber": 556
          },
          {
            "text": "      // 2~9は4px左にずらす",
            "lineNumber": 557
          },
          {
            "text": "      if (day &gt;= 2 &amp;&amp; day &lt;= 9) {",
            "lineNumber": 558
          },
          {
            "text": "        baseOffset -= 4",
            "lineNumber": 559
          },
          {
            "text": "      }",
            "lineNumber": 560
          },
          {
            "text": "      // 10~31は9px左にずらす",
            "lineNumber": 561
          },
          {
            "text": "      if (day &gt;= 10 &amp;&amp; day &lt;= 31) {",
            "lineNumber": 562
          },
          {
            "text": "        baseOffset -= 9",
            "lineNumber": 563
          },
          {
            "text": "      }",
            "lineNumber": 564
          },
          {
            "text": "      ",
            "lineNumber": 565
          },
          {
            "text": "      return baseOffset",
            "lineNumber": 566
          },
          {
            "text": "    },",
            "lineNumber": 567
          },
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.4394855499267578
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\masterService.js",
        "range": {
          "startPosition": {
            "line": 29,
            "column": 2
          },
          "endPosition": {
            "line": 77,
            "column": 19
          }
        },
        "contents": "/**\n * 月次サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @param {number} year - 年\n * @param {number} month - 月\n * @returns {Promise&lt;Object&gt;} 月次サマリー\n */\nconst getMonthlySummary = async (employeeId, year, month) =&gt; {\n  const summary = await masterModel.getMonthlySummary(employeeId, year, month);\n  \n  if (!summary) {\n    return {\n      scheduledWorkDays: 0,\n      actualWorkDays: 0,\n      scheduledWorkHours: '0:00',\n      totalWorkHours: '0:00',\n      overUnderTime: '+0:00',\n      legalHolidayWork: '0:00',\n      withinLegalOvertime: '0:00',\n      overLegalOvertime: '0:00'\n    };\n  }\n  \n  return {\n    scheduledWorkDays: summary.SCHEDULED_WORK_DAYS || 0,\n    actualWorkDays: summary.ACTUAL_WORK_DAYS || 0,\n    scheduledWorkHours: formatHours(summary.SCHEDULED_WORK_HOURS),\n    totalWorkHours: formatHours(summary.TOTAL_WORK_HOURS),\n    overUnderTime: (() =&gt; {\n      let sign = '';\n\n      if (summary.OVER_UNDER_TIME &gt;= 0) {\n        sign = '+';\n      }\n\n      return &#96;${sign}${formatHours(Math.abs(summary.OVER_UNDER_TIME))}&#96;;\n    })(),\n    legalHolidayWork: formatHours(summary.LEGAL_HOLIDAY_WORK_HOURS),\n    withinLegalOvertime: formatHours(summary.WITHIN_LEGAL_OVERTIME_HOURS),\n    overLegalOvertime: formatHours(summary.OVER_LEGAL_OVERTIME_HOURS)\n  };\n};\n\nmodule.exports = {\n  getWorkLocations,\n  getJobs,\n  getVacationTypes,",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 32
          },
          {
            "text": " * 月次サマリーを取得",
            "lineNumber": 33
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 34
          },
          {
            "text": " * @param {number} year - 年",
            "lineNumber": 35
          },
          {
            "text": " * @param {number} month - 月",
            "lineNumber": 36
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリー",
            "lineNumber": 37
          },
          {
            "text": " */",
            "lineNumber": 38
          },
          {
            "text": "const getMonthlySummary = async (employeeId, year, month) =&gt; {",
            "lineNumber": 39
          },
          {
            "text": "  const summary = await masterModel.getMonthlySummary(employeeId, year, month);",
            "lineNumber": 40
          },
          {
            "text": "  ",
            "lineNumber": 41
          },
          {
            "text": "  if (!summary) {",
            "lineNumber": 42
          },
          {
            "text": "    return {",
            "lineNumber": 43
          },
          {
            "text": "      scheduledWorkDays: 0,",
            "lineNumber": 44
          },
          {
            "text": "      actualWorkDays: 0,",
            "lineNumber": 45
          },
          {
            "text": "      scheduledWorkHours: '0:00',",
            "lineNumber": 46
          },
          {
            "text": "      totalWorkHours: '0:00',",
            "lineNumber": 47
          },
          {
            "text": "      overUnderTime: '+0:00',",
            "lineNumber": 48
          },
          {
            "text": "      legalHolidayWork: '0:00',",
            "lineNumber": 49
          },
          {
            "text": "      withinLegalOvertime: '0:00',",
            "lineNumber": 50
          },
          {
            "text": "      overLegalOvertime: '0:00'",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "text": "  }",
            "lineNumber": 53
          },
          {
            "text": "  ",
            "lineNumber": 54
          },
          {
            "text": "  return {",
            "lineNumber": 55
          },
          {
            "text": "    scheduledWorkDays: summary.SCHEDULED_WORK_DAYS || 0,",
            "lineNumber": 56
          },
          {
            "text": "    actualWorkDays: summary.ACTUAL_WORK_DAYS || 0,",
            "lineNumber": 57
          },
          {
            "text": "    scheduledWorkHours: formatHours(summary.SCHEDULED_WORK_HOURS),",
            "lineNumber": 58
          },
          {
            "text": "    totalWorkHours: formatHours(summary.TOTAL_WORK_HOURS),",
            "lineNumber": 59
          },
          {
            "text": "    overUnderTime: (() =&gt; {",
            "lineNumber": 60
          },
          {
            "text": "      let sign = '';",
            "lineNumber": 61
          },
          {
            "lineNumber": 62
          },
          {
            "text": "      if (summary.OVER_UNDER_TIME &gt;= 0) {",
            "lineNumber": 63
          },
          {
            "text": "        sign = '+';",
            "lineNumber": 64
          },
          {
            "text": "      }",
            "lineNumber": 65
          },
          {
            "lineNumber": 66
          },
          {
            "text": "      return &#96;${sign}${formatHours(Math.abs(summary.OVER_UNDER_TIME))}&#96;;",
            "lineNumber": 67
          },
          {
            "text": "    })(),",
            "lineNumber": 68
          },
          {
            "text": "    legalHolidayWork: formatHours(summary.LEGAL_HOLIDAY_WORK_HOURS),",
            "lineNumber": 69
          },
          {
            "text": "    withinLegalOvertime: formatHours(summary.WITHIN_LEGAL_OVERTIME_HOURS),",
            "lineNumber": 70
          },
          {
            "text": "    overLegalOvertime: formatHours(summary.OVER_LEGAL_OVERTIME_HOURS)",
            "lineNumber": 71
          },
          {
            "text": "  };",
            "lineNumber": 72
          },
          {
            "text": "};",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "module.exports = {",
            "lineNumber": 75
          },
          {
            "text": "  getWorkLocations,",
            "lineNumber": 76
          },
          {
            "text": "  getJobs,",
            "lineNumber": 77
          },
          {
            "text": "  getVacationTypes,",
            "lineNumber": 78
          }
        ]
      },
      "score": 0.43072769045829773
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "/**\n * 月次サマリーサービス\n */\nconst employeeModel = require('../models/employeeModel');\nconst attendanceModel = require('../models/attendanceModel');\nconst breakTimeModel = require('../models/breakTimeModel');\nconst applicationModel = require('../models/applicationModel');\nconst masterModel = require('../models/masterModel');\nconst { \n  getMonthRange,\n  getScheduledWorkDays,\n  normalizeDate,\n  formatHours,\n  formatOverUnder,\n  calculateMinutes\n} = require('../utils/dateUtils');\nconst HolidayJp = require('@holiday-jp/holiday_jp');\nconst db = require('../config/database');\n\n/**\n * 月次サマリー情報を取得\n * @param {string} employeeId - 従業員ID\n * @param {string} yearMonth - 対象年月（YYYY-MM形式）\n * @returns {Promise&lt;Object&gt;} 月次サマリー情報\n */\nconst getMonthlySummary = async (employeeId, yearMonth) =&gt; {\n  // 年月をパース\n  const [year, month] = yearMonth.split('-').map(Number);\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 月次サマリーサービス",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const employeeModel = require('../models/employeeModel');",
            "lineNumber": 4
          },
          {
            "text": "const attendanceModel = require('../models/attendanceModel');",
            "lineNumber": 5
          },
          {
            "text": "const breakTimeModel = require('../models/breakTimeModel');",
            "lineNumber": 6
          },
          {
            "text": "const applicationModel = require('../models/applicationModel');",
            "lineNumber": 7
          },
          {
            "text": "const masterModel = require('../models/masterModel');",
            "lineNumber": 8
          },
          {
            "text": "const { ",
            "lineNumber": 9
          },
          {
            "text": "  getMonthRange,",
            "lineNumber": 10
          },
          {
            "text": "  getScheduledWorkDays,",
            "lineNumber": 11
          },
          {
            "text": "  normalizeDate,",
            "lineNumber": 12
          },
          {
            "text": "  formatHours,",
            "lineNumber": 13
          },
          {
            "text": "  formatOverUnder,",
            "lineNumber": 14
          },
          {
            "text": "  calculateMinutes",
            "lineNumber": 15
          },
          {
            "text": "} = require('../utils/dateUtils');",
            "lineNumber": 16
          },
          {
            "text": "const HolidayJp = require('@holiday-jp/holiday_jp');",
            "lineNumber": 17
          },
          {
            "text": "const db = require('../config/database');",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "/**",
            "lineNumber": 20
          },
          {
            "text": " * 月次サマリー情報を取得",
            "lineNumber": 21
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 22
          },
          {
            "text": " * @param {string} yearMonth - 対象年月（YYYY-MM形式）",
            "lineNumber": 23
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月次サマリー情報",
            "lineNumber": 24
          },
          {
            "text": " */",
            "lineNumber": 25
          },
          {
            "text": "const getMonthlySummary = async (employeeId, yearMonth) =&gt; {",
            "lineNumber": 26
          },
          {
            "text": "  // 年月をパース",
            "lineNumber": 27
          },
          {
            "text": "  const [year, month] = yearMonth.split('-').map(Number);",
            "lineNumber": 28
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.4291723072528839
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async  {\n  // 年月をパース\n  const [year, month] = yearMonth.split('-').map(Number);\n  const { startDate, endDate } = getMonthRange(year, month);\n  \n  // 1. 従業員情報取得\n  const employee = await employeeModel.getEmployeeById(employeeId);\n  if (!employee) {\n    throw new Error('従業員情報が見つかりません。');\n  }\n  \n  // 2. 月間勤務データ取得\n  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);\n  \n  // 休暇情報を取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n  \n  // 休暇種別マスタを取得（休暇種別名を取得するため）\n  const vacationTypes = await masterModel.getVacationTypes();\n  const vacationTypeMap = {};\n  for (const vt of vacationTypes) {\n    vacationTypeMap[vt.VACATION_TYPE_CODE] = vt.VACATION_TYPE_NAME;\n  }\n  \n  // 月間の全ての日付を生成（勤務記録がない日も含む）\n  const daysInMonth = new Date(year, month, 0).getDate();\n  const scheduledWorkDays = getScheduledWorkDays(year, month);\n  const monthlyScheduledWorkHours = scheduledWorkDays * 7.5;\n  const monthlyLegalWorkHours = scheduledWorkDays * 8;\n  \n  const dailyData = [];\n  let previousCumulativeWorkHours = 0;\n  \n  for (let day = 1; day &lt;= daysInMonth; day++) {\n    \n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async  {",
            "lineNumber": 26
          },
          {
            "text": "  // 年月をパース",
            "lineNumber": 27
          },
          {
            "text": "  const [year, month] = yearMonth.split('-').map(Number);",
            "lineNumber": 28
          },
          {
            "text": "  const { startDate, endDate } = getMonthRange(year, month);",
            "lineNumber": 29
          },
          {
            "text": "  ",
            "lineNumber": 30
          },
          {
            "text": "  // 1. 従業員情報取得",
            "lineNumber": 31
          },
          {
            "text": "  const employee = await employeeModel.getEmployeeById(employeeId);",
            "lineNumber": 32
          },
          {
            "text": "  if (!employee) {",
            "lineNumber": 33
          },
          {
            "text": "    throw new Error('従業員情報が見つかりません。');",
            "lineNumber": 34
          },
          {
            "text": "  }",
            "lineNumber": 35
          },
          {
            "text": "  ",
            "lineNumber": 36
          },
          {
            "text": "  // 2. 月間勤務データ取得",
            "lineNumber": 37
          },
          {
            "text": "  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);",
            "lineNumber": 38
          },
          {
            "text": "  ",
            "lineNumber": 39
          },
          {
            "text": "  // 休暇情報を取得",
            "lineNumber": 40
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 41
          },
          {
            "text": "  ",
            "lineNumber": 42
          },
          {
            "text": "  // 休暇種別マスタを取得（休暇種別名を取得するため）",
            "lineNumber": 43
          },
          {
            "text": "  const vacationTypes = await masterModel.getVacationTypes();",
            "lineNumber": 44
          },
          {
            "text": "  const vacationTypeMap = {};",
            "lineNumber": 45
          },
          {
            "text": "  for (const vt of vacationTypes) {",
            "lineNumber": 46
          },
          {
            "text": "    vacationTypeMap[vt.VACATION_TYPE_CODE] = vt.VACATION_TYPE_NAME;",
            "lineNumber": 47
          },
          {
            "text": "  }",
            "lineNumber": 48
          },
          {
            "text": "  ",
            "lineNumber": 49
          },
          {
            "text": "  // 月間の全ての日付を生成（勤務記録がない日も含む）",
            "lineNumber": 50
          },
          {
            "text": "  const daysInMonth = new Date(year, month, 0).getDate();",
            "lineNumber": 51
          },
          {
            "text": "  const scheduledWorkDays = getScheduledWorkDays(year, month);",
            "lineNumber": 52
          },
          {
            "text": "  const monthlyScheduledWorkHours = scheduledWorkDays * 7.5;",
            "lineNumber": 53
          },
          {
            "text": "  const monthlyLegalWorkHours = scheduledWorkDays * 8;",
            "lineNumber": 54
          },
          {
            "text": "  ",
            "lineNumber": 55
          },
          {
            "text": "  const dailyData = [];",
            "lineNumber": 56
          },
          {
            "text": "  let previousCumulativeWorkHours = 0;",
            "lineNumber": 57
          },
          {
            "text": "  ",
            "lineNumber": 58
          },
          {
            "text": "  for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 59
          },
          {
            "text": "    ",
            "lineNumber": 60
          },
          {
            "text": "  }",
            "lineNumber": 173
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.4253959655761719
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\models\\masterModel.js",
        "range": {
          "startPosition": {
            "line": 88,
            "column": 2
          },
          "endPosition": {
            "line": 115,
            "column": 3
          }
        },
        "contents": "/**\n * 月次サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @param {number} year - 年\n * @param {number} month - 月\n * @returns {Promise&lt;Object|null&gt;} 月次サマリー\n */\nconst getMonthlySummary = async (employeeId, year, month) =&gt; {\n  const query = &#96;\n    SELECT * FROM V_MONTHLY_ATTENDANCE \n    WHERE EMPLOYEE_ID = ? AND WORK_YEAR = ? AND WORK_MONTH = ?\n  &#96;;\n  \n  const [rows] = await db.execute(query, [employeeId, year, month]);\n  if (rows.length &gt; 0) {\n    return rows[0];\n  }\n\n  return null;\n};\n\n/**\n * 休暇残日数サマリーを取得\n * @param {string} employeeId - 従業員ID\n * @returns {Promise&lt;Array&gt;} 休暇残日数の配列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 91
          },
          {
            "text": " * 月次サマリーを取得",
            "lineNumber": 92
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 93
          },
          {
            "text": " * @param {number} year - 年",
            "lineNumber": 94
          },
          {
            "text": " * @param {number} month - 月",
            "lineNumber": 95
          },
          {
            "text": " * @returns {Promise&lt;Object|null&gt;} 月次サマリー",
            "lineNumber": 96
          },
          {
            "text": " */",
            "lineNumber": 97
          },
          {
            "text": "const getMonthlySummary = async (employeeId, year, month) =&gt; {",
            "lineNumber": 98
          },
          {
            "text": "  const query = &#96;",
            "lineNumber": 99
          },
          {
            "text": "    SELECT * FROM V_MONTHLY_ATTENDANCE ",
            "lineNumber": 100
          },
          {
            "text": "    WHERE EMPLOYEE_ID = ? AND WORK_YEAR = ? AND WORK_MONTH = ?",
            "lineNumber": 101
          },
          {
            "text": "  &#96;;",
            "lineNumber": 102
          },
          {
            "text": "  ",
            "lineNumber": 103
          },
          {
            "text": "  const [rows] = await db.execute(query, [employeeId, year, month]);",
            "lineNumber": 104
          },
          {
            "text": "  if (rows.length &gt; 0) {",
            "lineNumber": 105
          },
          {
            "text": "    return rows[0];",
            "lineNumber": 106
          },
          {
            "text": "  }",
            "lineNumber": 107
          },
          {
            "lineNumber": 108
          },
          {
            "text": "  return null;",
            "lineNumber": 109
          },
          {
            "text": "};",
            "lineNumber": 110
          },
          {
            "lineNumber": 111
          },
          {
            "text": "/**",
            "lineNumber": 112
          },
          {
            "text": " * 休暇残日数サマリーを取得",
            "lineNumber": 113
          },
          {
            "text": " * @param {string} employeeId - 従業員ID",
            "lineNumber": 114
          },
          {
            "text": " * @returns {Promise&lt;Array&gt;} 休暇残日数の配列",
            "lineNumber": 115
          },
          {
            "text": " */",
            "lineNumber": 116
          }
        ]
      },
      "score": 0.41940951347351074
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    legalHolidayWorkDays,\n    scheduledHolidayWorkDays,\n    scheduledWorkHours,\n    totalWorkHours,\n    totalWorkHoursExcludingLegalHoliday,\n    overUnderHours,\n    currentMonthOvertime,\n    safetyOvertime,\n    legalWorkHours,\n    actualWorkHoursExcludingLegalHoliday,\n    withinLegalOvertime,\n    overLegalOvertime,\n    legalHolidayWorkHours,\n    nightWorkHours,\n    overtimeOver45Hours,\n    overtimeOver60Hours,\n    lateCount,\n    lateHours,\n    earlyLeaveCount,\n    earlyLeaveHours,\n    privateOutingCount,\n    privateOutingHours,\n    totalBreakHours\n  };\n  \n  // 4. 休暇情報取得（月次サマリー用の集計）\n  // 有給取得日数\n  const paidLeaveDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n  \n  // 有給取得日数内訳\n  let paidLeaveTypeName = '';\n\n  if (paidLeaveDays &gt; 0) {\n    paidLeaveTypeName = '年次有給休暇';\n  }\n\n  // 代休取得日数\n  const substituteHolidayDays = vacations\n    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')\n    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);\n\n  // 代休取得日数内訳\n  let substituteHolidayTypeName = '';\n\n  if (substituteHolidayDays &gt; 0) {\n    substituteHolidayTypeName = '代休';\n  }\n  \n  // 無給休暇日数（簡易的に0とする）\n  const unpaidLeaveDays = 0;\n  const unpaidLeaveTypeName = '';\n  \n  // 有給残日数（月末日時点）\n  const endOfMonth = new Date(year, month, 0);\n  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];\n  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');\n  \n  // 計画付与予定日（次月以降）\n  let nextMonth = { year, month: month + 1 };\n\n  if (month === 12) {\n    nextMonth = { year: year + 1, month: 1 };\n  }\n  const plannedGrantDays = 0; // TODO: 計画付与予定日を取得\n  \n  const vacationInfo = {\n    paidLeaveDays\n  };\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "lineNumber": 281
          },
          {
            "text": "  ",
            "lineNumber": 282
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 283
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 284
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 285
          },
          {
            "text": "    legalHolidayWorkDays,",
            "lineNumber": 286
          },
          {
            "text": "    scheduledHolidayWorkDays,",
            "lineNumber": 287
          },
          {
            "text": "    scheduledWorkHours,",
            "lineNumber": 288
          },
          {
            "text": "    totalWorkHours,",
            "lineNumber": 289
          },
          {
            "text": "    totalWorkHoursExcludingLegalHoliday,",
            "lineNumber": 290
          },
          {
            "text": "    overUnderHours,",
            "lineNumber": 291
          },
          {
            "text": "    currentMonthOvertime,",
            "lineNumber": 292
          },
          {
            "text": "    safetyOvertime,",
            "lineNumber": 293
          },
          {
            "text": "    legalWorkHours,",
            "lineNumber": 294
          },
          {
            "text": "    actualWorkHoursExcludingLegalHoliday,",
            "lineNumber": 295
          },
          {
            "text": "    withinLegalOvertime,",
            "lineNumber": 296
          },
          {
            "text": "    overLegalOvertime,",
            "lineNumber": 297
          },
          {
            "text": "    legalHolidayWorkHours,",
            "lineNumber": 298
          },
          {
            "text": "    nightWorkHours,",
            "lineNumber": 299
          },
          {
            "text": "    overtimeOver45Hours,",
            "lineNumber": 300
          },
          {
            "text": "    overtimeOver60Hours,",
            "lineNumber": 301
          },
          {
            "text": "    lateCount,",
            "lineNumber": 302
          },
          {
            "text": "    lateHours,",
            "lineNumber": 303
          },
          {
            "text": "    earlyLeaveCount,",
            "lineNumber": 304
          },
          {
            "text": "    earlyLeaveHours,",
            "lineNumber": 305
          },
          {
            "text": "    privateOutingCount,",
            "lineNumber": 306
          },
          {
            "text": "    privateOutingHours,",
            "lineNumber": 307
          },
          {
            "text": "    totalBreakHours",
            "lineNumber": 308
          },
          {
            "text": "  };",
            "lineNumber": 309
          },
          {
            "text": "  ",
            "lineNumber": 310
          },
          {
            "text": "  // 4. 休暇情報取得（月次サマリー用の集計）",
            "lineNumber": 311
          },
          {
            "text": "  // 有給取得日数",
            "lineNumber": 312
          },
          {
            "text": "  const paidLeaveDays = vacations",
            "lineNumber": 313
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'PAID_LEAVE' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 314
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 315
          },
          {
            "text": "  ",
            "lineNumber": 316
          },
          {
            "text": "  // 有給取得日数内訳",
            "lineNumber": 317
          },
          {
            "text": "  let paidLeaveTypeName = '';",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "  if (paidLeaveDays &gt; 0) {",
            "lineNumber": 320
          },
          {
            "text": "    paidLeaveTypeName = '年次有給休暇';",
            "lineNumber": 321
          },
          {
            "text": "  }",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "  // 代休取得日数",
            "lineNumber": 324
          },
          {
            "text": "  const substituteHolidayDays = vacations",
            "lineNumber": 325
          },
          {
            "text": "    .filter(v =&gt; v.VACATION_TYPE_CODE === 'SUBSTITUTE_HOLIDAY' &amp;&amp; v.APPROVAL_STATUS === 'APPROVED')",
            "lineNumber": 326
          },
          {
            "text": "    .reduce((sum, v) =&gt; sum + (parseFloat(v.VACATION_DAYS) || 0), 0);",
            "lineNumber": 327
          },
          {
            "lineNumber": 328
          },
          {
            "text": "  // 代休取得日数内訳",
            "lineNumber": 329
          },
          {
            "text": "  let substituteHolidayTypeName = '';",
            "lineNumber": 330
          },
          {
            "lineNumber": 331
          },
          {
            "text": "  if (substituteHolidayDays &gt; 0) {",
            "lineNumber": 332
          },
          {
            "text": "    substituteHolidayTypeName = '代休';",
            "lineNumber": 333
          },
          {
            "text": "  }",
            "lineNumber": 334
          },
          {
            "text": "  ",
            "lineNumber": 335
          },
          {
            "text": "  // 無給休暇日数（簡易的に0とする）",
            "lineNumber": 336
          },
          {
            "text": "  const unpaidLeaveDays = 0;",
            "lineNumber": 337
          },
          {
            "text": "  const unpaidLeaveTypeName = '';",
            "lineNumber": 338
          },
          {
            "text": "  ",
            "lineNumber": 339
          },
          {
            "text": "  // 有給残日数（月末日時点）",
            "lineNumber": 340
          },
          {
            "text": "  const endOfMonth = new Date(year, month, 0);",
            "lineNumber": 341
          },
          {
            "text": "  const endOfMonthStr = endOfMonth.toISOString().split('T')[0];",
            "lineNumber": 342
          },
          {
            "text": "  const paidLeaveBalance = await applicationModel.getVacationBalance(employeeId, 'PAID_LEAVE');",
            "lineNumber": 343
          },
          {
            "text": "  ",
            "lineNumber": 344
          },
          {
            "text": "  // 計画付与予定日（次月以降）",
            "lineNumber": 345
          },
          {
            "text": "  let nextMonth = { year, month: month + 1 };",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "  if (month === 12) {",
            "lineNumber": 348
          },
          {
            "text": "    nextMonth = { year: year + 1, month: 1 };",
            "lineNumber": 349
          },
          {
            "text": "  }",
            "lineNumber": 350
          },
          {
            "text": "  const plannedGrantDays = 0; // TODO: 計画付与予定日を取得",
            "lineNumber": 351
          },
          {
            "text": "  ",
            "lineNumber": 352
          },
          {
            "text": "  const vacationInfo = {",
            "lineNumber": 353
          },
          {
            "text": "    paidLeaveDays",
            "lineNumber": 354
          },
          {
            "text": "  };",
            "lineNumber": 362
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.3633880913257599
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {
            "line": 331,
            "column": 2
          },
          "endPosition": {
            "line": 483,
            "column": 1
          }
        },
        "contents": "/**\n * 月間勤務表を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {number} year 年\n * @param {number} month 月\n * @returns {Promise&lt;Object&gt;} 月間勤務表データ\n */\nconst getMonthlyAttendance = async (employeeId, year, month) =&gt; {\n  const { startDate, endDate } = getMonthRange(year, month);\n  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);\n\n  // 各勤怠記録に対して休憩時間、公用外出、工数実績を取得\n  const dailyData = [];\n  for (const attendance of attendanceRows) {\n    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n    const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);\n    const workHours = await workHoursModel.getWorkHours(employeeId, normalizeDate(attendance.WORK_DATE));\n    \n    dailyData.push({\n      ...attendance,\n      WORK_DATE: normalizeDate(attendance.WORK_DATE),\n      breakTimes,\n      officialOutings,\n      workHours\n    });\n  }\n  \n  // 月次サマリーを計算\n  const todayStr = getTodayJST();\n  const isCurrentMonth = parseInt(year) === new Date().getFullYear() &amp;&amp; parseInt(month) === new Date().getMonth() + 1;\n  let cutoffDate = endDate;\n\n  if (isCurrentMonth) {\n    cutoffDate = todayStr;\n  }\n\n  // 当日退勤していない場合は前日までの過不足時間を計算\n  if (isCurrentMonth) {\n    const todayRecord = attendanceRows.find(row =&gt; {\n      const workDateStr = normalizeDate(row.WORK_DATE);\n      return workDateStr === todayStr;\n    });\n    \n    if (todayRecord &amp;&amp; todayRecord.CLOCK_IN_TIME &amp;&amp; !todayRecord.CLOCK_OUT_TIME) {\n      const yesterday = new Date(todayStr);\n      yesterday.setDate(yesterday.getDate() - 1);\n      cutoffDate = yesterday.toISOString().split('T')[0];\n    }\n  }\n  \n  // 所定出勤日数を計算\n  const scheduledWorkDays = getScheduledWorkDays(year, month);\n  const scheduledWorkDaysUntilCutoff = getScheduledWorkDays(year, month, cutoffDate);\n\n  // 実出勤日数\n  const actualWorkDays = attendanceRows.filter\n;\n;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 334
          },
          {
            "text": " * 月間勤務表を取得する。",
            "lineNumber": 335
          },
          {
            "text": " *",
            "lineNumber": 336
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 337
          },
          {
            "text": " * @param {number} year 年",
            "lineNumber": 338
          },
          {
            "text": " * @param {number} month 月",
            "lineNumber": 339
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月間勤務表データ",
            "lineNumber": 340
          },
          {
            "text": " */",
            "lineNumber": 341
          },
          {
            "text": "const getMonthlyAttendance = async (employeeId, year, month) =&gt; {",
            "lineNumber": 342
          },
          {
            "text": "  const { startDate, endDate } = getMonthRange(year, month);",
            "lineNumber": 343
          },
          {
            "text": "  const attendanceRows = await attendanceModel.getMonthlyAttendance(employeeId, startDate, endDate);",
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "  // 各勤怠記録に対して休憩時間、公用外出、工数実績を取得",
            "lineNumber": 346
          },
          {
            "text": "  const dailyData = [];",
            "lineNumber": 347
          },
          {
            "text": "  for (const attendance of attendanceRows) {",
            "lineNumber": 348
          },
          {
            "text": "    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 349
          },
          {
            "text": "    const officialOutings = await breakTimeModel.getOfficialOutings(attendance.ATTENDANCE_ID);",
            "lineNumber": 350
          },
          {
            "text": "    const workHours = await workHoursModel.getWorkHours(employeeId, normalizeDate(attendance.WORK_DATE));",
            "lineNumber": 351
          },
          {
            "text": "    ",
            "lineNumber": 352
          },
          {
            "text": "    dailyData.push({",
            "lineNumber": 353
          },
          {
            "text": "      ...attendance,",
            "lineNumber": 354
          },
          {
            "text": "      WORK_DATE: normalizeDate(attendance.WORK_DATE),",
            "lineNumber": 355
          },
          {
            "text": "      breakTimes,",
            "lineNumber": 356
          },
          {
            "text": "      officialOutings,",
            "lineNumber": 357
          },
          {
            "text": "      workHours",
            "lineNumber": 358
          },
          {
            "text": "    });",
            "lineNumber": 359
          },
          {
            "text": "  }",
            "lineNumber": 360
          },
          {
            "text": "  ",
            "lineNumber": 361
          },
          {
            "text": "  // 月次サマリーを計算",
            "lineNumber": 362
          },
          {
            "text": "  const todayStr = getTodayJST();",
            "lineNumber": 363
          },
          {
            "text": "  const isCurrentMonth = parseInt(year) === new Date().getFullYear() &amp;&amp; parseInt(month) === new Date().getMonth() + 1;",
            "lineNumber": 364
          },
          {
            "text": "  let cutoffDate = endDate;",
            "lineNumber": 365
          },
          {
            "lineNumber": 366
          },
          {
            "text": "  if (isCurrentMonth) {",
            "lineNumber": 367
          },
          {
            "text": "    cutoffDate = todayStr;",
            "lineNumber": 368
          },
          {
            "text": "  }",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "  // 当日退勤していない場合は前日までの過不足時間を計算",
            "lineNumber": 371
          },
          {
            "text": "  if (isCurrentMonth) {",
            "lineNumber": 372
          },
          {
            "text": "    const todayRecord = attendanceRows.find(row =&gt; {",
            "lineNumber": 373
          },
          {
            "text": "      const workDateStr = normalizeDate(row.WORK_DATE);",
            "lineNumber": 374
          },
          {
            "text": "      return workDateStr === todayStr;",
            "lineNumber": 375
          },
          {
            "text": "    });",
            "lineNumber": 376
          },
          {
            "text": "    ",
            "lineNumber": 377
          },
          {
            "text": "    if (todayRecord &amp;&amp; todayRecord.CLOCK_IN_TIME &amp;&amp; !todayRecord.CLOCK_OUT_TIME) {",
            "lineNumber": 378
          },
          {
            "text": "      const yesterday = new Date(todayStr);",
            "lineNumber": 379
          },
          {
            "text": "      yesterday.setDate(yesterday.getDate() - 1);",
            "lineNumber": 380
          },
          {
            "text": "      cutoffDate = yesterday.toISOString().split('T')[0];",
            "lineNumber": 381
          },
          {
            "text": "    }",
            "lineNumber": 382
          },
          {
            "text": "  }",
            "lineNumber": 383
          },
          {
            "text": "  ",
            "lineNumber": 384
          },
          {
            "text": "  // 所定出勤日数を計算",
            "lineNumber": 385
          },
          {
            "text": "  const scheduledWorkDays = getScheduledWorkDays(year, month);",
            "lineNumber": 386
          },
          {
            "text": "  const scheduledWorkDaysUntilCutoff = getScheduledWorkDays(year, month, cutoffDate);",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "  // 実出勤日数",
            "lineNumber": 389
          },
          {
            "text": "  const actualWorkDays = attendanceRows.filter",
            "lineNumber": 390
          },
          {
            "text": ";",
            "lineNumber": 392
          },
          {
            "text": ";",
            "lineNumber": 484
          }
        ]
      },
      "score": 0.36241626739501953
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 467
          },
          "endPosition": {
            "line": 513,
            "column": 6
          }
        },
        "contents": "export default {\n  name: 'MonthlySummaryScreen',\n  data() {\n    return {\n      employee: null,\n      yearMonth: '',\n      dailyData: [],\n      monthlySummary: null,\n      vacationInfo: null,\n      monthlyApprovalStatus: 'NOT_SUBMITTED',\n      loading: false,\n      error: null,\n      tableColumnDividers: [229, 530, 670, 805, 935, 1070, 1200, 1330, 1465]\n    }\n  },\n  computed: {\n    formattedYearMonth() {\n      if (!this.yearMonth) return ''\n      const [year, month] = this.yearMonth.split('-')\n      return &#96;${year}年${month}月&#96;\n    },\n    approvalStatusText() {\n      const statusMap = {\n        'NOT_SUBMITTED': '未確定',\n        'PENDING': '承認中',\n        'APPROVED': '承認済み',\n        'REJECTED': '却下'\n      }\n      return statusMap[this.monthlyApprovalStatus] || '未確定'\n    }\n  },\n  async mounted() {\n    const params = new URLSearchParams(window.location.search)\n    const employeeId = params.get('employeeId')\n    const yearMonth = params.get('yearMonth')\n    \n    if (!employeeId || !yearMonth) {\n      this.error = '従業員IDと対象年月が必要です。'\n      return\n    }\n    \n    this.yearMonth = yearMonth\n    await this.loadData(employeeId, yearMonth)\n  },\n  methods: {\n    async loadData(employeeId, yearMonth) {\n      ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "export default {",
            "lineNumber": 468
          },
          {
            "text": "  name: 'MonthlySummaryScreen',",
            "lineNumber": 469
          },
          {
            "text": "  data() {",
            "lineNumber": 470
          },
          {
            "text": "    return {",
            "lineNumber": 471
          },
          {
            "text": "      employee: null,",
            "lineNumber": 472
          },
          {
            "text": "      yearMonth: '',",
            "lineNumber": 473
          },
          {
            "text": "      dailyData: [],",
            "lineNumber": 474
          },
          {
            "text": "      monthlySummary: null,",
            "lineNumber": 475
          },
          {
            "text": "      vacationInfo: null,",
            "lineNumber": 476
          },
          {
            "text": "      monthlyApprovalStatus: 'NOT_SUBMITTED',",
            "lineNumber": 477
          },
          {
            "text": "      loading: false,",
            "lineNumber": 478
          },
          {
            "text": "      error: null,",
            "lineNumber": 479
          },
          {
            "text": "      tableColumnDividers: [229, 530, 670, 805, 935, 1070, 1200, 1330, 1465]",
            "lineNumber": 480
          },
          {
            "text": "    }",
            "lineNumber": 481
          },
          {
            "text": "  },",
            "lineNumber": 482
          },
          {
            "text": "  computed: {",
            "lineNumber": 483
          },
          {
            "text": "    formattedYearMonth() {",
            "lineNumber": 484
          },
          {
            "text": "      if (!this.yearMonth) return ''",
            "lineNumber": 485
          },
          {
            "text": "      const [year, month] = this.yearMonth.split('-')",
            "lineNumber": 486
          },
          {
            "text": "      return &#96;${year}年${month}月&#96;",
            "lineNumber": 487
          },
          {
            "text": "    },",
            "lineNumber": 488
          },
          {
            "text": "    approvalStatusText() {",
            "lineNumber": 489
          },
          {
            "text": "      const statusMap = {",
            "lineNumber": 490
          },
          {
            "text": "        'NOT_SUBMITTED': '未確定',",
            "lineNumber": 491
          },
          {
            "text": "        'PENDING': '承認中',",
            "lineNumber": 492
          },
          {
            "text": "        'APPROVED': '承認済み',",
            "lineNumber": 493
          },
          {
            "text": "        'REJECTED': '却下'",
            "lineNumber": 494
          },
          {
            "text": "      }",
            "lineNumber": 495
          },
          {
            "text": "      return statusMap[this.monthlyApprovalStatus] || '未確定'",
            "lineNumber": 496
          },
          {
            "text": "    }",
            "lineNumber": 497
          },
          {
            "text": "  },",
            "lineNumber": 498
          },
          {
            "text": "  async mounted() {",
            "lineNumber": 499
          },
          {
            "text": "    const params = new URLSearchParams(window.location.search)",
            "lineNumber": 500
          },
          {
            "text": "    const employeeId = params.get('employeeId')",
            "lineNumber": 501
          },
          {
            "text": "    const yearMonth = params.get('yearMonth')",
            "lineNumber": 502
          },
          {
            "text": "    ",
            "lineNumber": 503
          },
          {
            "text": "    if (!employeeId || !yearMonth) {",
            "lineNumber": 504
          },
          {
            "text": "      this.error = '従業員IDと対象年月が必要です。'",
            "lineNumber": 505
          },
          {
            "text": "      return",
            "lineNumber": 506
          },
          {
            "text": "    }",
            "lineNumber": 507
          },
          {
            "text": "    ",
            "lineNumber": 508
          },
          {
            "text": "    this.yearMonth = yearMonth",
            "lineNumber": 509
          },
          {
            "text": "    await this.loadData(employeeId, yearMonth)",
            "lineNumber": 510
          },
          {
            "text": "  },",
            "lineNumber": 511
          },
          {
            "text": "  methods: {",
            "lineNumber": 512
          },
          {
            "text": "    async loadData(employeeId, yearMonth) {",
            "lineNumber": 513
          },
          {
            "text": "      ",
            "lineNumber": 514
          }
        ]
      },
      "score": 0.36089518666267395
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \nfor (let day = 1; day &lt;= daysInMonth; day++) {\n\n    let overtimeHours = 0;\n    \n    if (attendance) {\n      const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n      breakTimeTotal = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0) / 60;\n      actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;\n      \n      // 月次累積ロジックに基づいて残業時間を計算\n      if (actualWorkHours &gt; 0) {\n        // 月の所定労働時間の残り\n        const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours);\n        // 月の法定労働時間の残り\n        const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours);\n        \n        let scheduledWorkHours = 0;\n        let withinLegalOvertime = 0;\n        let overLegalOvertime = 0;\n        \n        // 前日までの累積が月の所定労働時間以下の場合\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            },
            {
              "startPosition": {
                "line": 59,
                "column": 3
              },
              "endPosition": {
                "line": 60,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "text": "for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 59
          },
          {
            "lineNumber": 78
          },
          {
            "text": "    let overtimeHours = 0;",
            "lineNumber": 79
          },
          {
            "text": "    ",
            "lineNumber": 80
          },
          {
            "text": "    if (attendance) {",
            "lineNumber": 81
          },
          {
            "text": "      const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 82
          },
          {
            "text": "      breakTimeTotal = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0) / 60;",
            "lineNumber": 83
          },
          {
            "text": "      actualWorkHours = parseFloat(attendance.ACTUAL_WORK_HOURS) || 0;",
            "lineNumber": 84
          },
          {
            "text": "      ",
            "lineNumber": 85
          },
          {
            "text": "      // 月次累積ロジックに基づいて残業時間を計算",
            "lineNumber": 86
          },
          {
            "text": "      if (actualWorkHours &gt; 0) {",
            "lineNumber": 87
          },
          {
            "text": "        // 月の所定労働時間の残り",
            "lineNumber": 88
          },
          {
            "text": "        const remainingScheduledWorkHours = Math.max(0, monthlyScheduledWorkHours - previousCumulativeWorkHours);",
            "lineNumber": 89
          },
          {
            "text": "        // 月の法定労働時間の残り",
            "lineNumber": 90
          },
          {
            "text": "        const remainingLegalWorkHours = Math.max(0, monthlyLegalWorkHours - previousCumulativeWorkHours);",
            "lineNumber": 91
          },
          {
            "text": "        ",
            "lineNumber": 92
          },
          {
            "text": "        let scheduledWorkHours = 0;",
            "lineNumber": 93
          },
          {
            "text": "        let withinLegalOvertime = 0;",
            "lineNumber": 94
          },
          {
            "text": "        let overLegalOvertime = 0;",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        // 前日までの累積が月の所定労働時間以下の場合",
            "lineNumber": 97
          },
          {
            "text": "  }",
            "lineNumber": 173
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.3494352102279663
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\attendanceService.js",
        "range": {
          "startPosition": {
            "line": 341
          },
          "endPosition": {
            "line": 491,
            "column": 3
          }
        },
        "contents": "const getMonthlyAttendance = async \n\n  \n  // 実労働時間が所定労働時間を超えている場合のみ残業を計算\n  let withinLegalOvertime = 0;\n  let overLegalOvertime = 0;\n\n  if (totalWorkHours &gt; scheduledWorkHoursUntilCutoff) {\n    // 実労働時間が所定労働時間を超えている\n    const overtimeHours = totalWorkHours - scheduledWorkHoursUntilCutoff;\n\n    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分\n    // 上限: (所定出勤日数 * 8:00) - 所定労働時間\n    const maxWithinLegalOvertime = legalWorkHoursUntilCutoff - scheduledWorkHoursUntilCutoff;\n    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);\n\n    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分\n    if (totalWorkHours &gt; legalWorkHoursUntilCutoff) {\n      overLegalOvertime = totalWorkHours - legalWorkHoursUntilCutoff;\n    }\n  }\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n    scheduledWorkHours: formatHours(scheduledWorkHours),\n    totalWorkHours: formatHours(totalWorkHours),\n    overUnderTime: formatOverUnder(overUnderTime),\n    legalHolidayWork: formatHours(legalHolidayWork),\n    withinLegalOvertime: formatHours(withinLegalOvertime),\n    overLegalOvertime: formatHours(overLegalOvertime),\n    cutoffDate: cutoffDate.split('-').slice(1).join('/')\n  };\n  \n  // 休暇申請データを取得\n  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);\n\n  return {\n    dailyData,\n    monthlySummary,\n    vacations\n  };\n};\n\n/**\n * 日次確定申請を行う。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;void&gt;}\n */",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 342,
                "column": 1
              },
              "endPosition": {
                "line": 342,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 342,
                "column": 7
              },
              "endPosition": {
                "line": 342,
                "column": 36
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlyAttendance = async ",
            "lineNumber": 342
          },
          {
            "lineNumber": 443
          },
          {
            "text": "  ",
            "lineNumber": 444
          },
          {
            "text": "  // 実労働時間が所定労働時間を超えている場合のみ残業を計算",
            "lineNumber": 445
          },
          {
            "text": "  let withinLegalOvertime = 0;",
            "lineNumber": 446
          },
          {
            "text": "  let overLegalOvertime = 0;",
            "lineNumber": 447
          },
          {
            "lineNumber": 448
          },
          {
            "text": "  if (totalWorkHours &gt; scheduledWorkHoursUntilCutoff) {",
            "lineNumber": 449
          },
          {
            "text": "    // 実労働時間が所定労働時間を超えている",
            "lineNumber": 450
          },
          {
            "text": "    const overtimeHours = totalWorkHours - scheduledWorkHoursUntilCutoff;",
            "lineNumber": 451
          },
          {
            "lineNumber": 452
          },
          {
            "text": "    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分",
            "lineNumber": 453
          },
          {
            "text": "    // 上限: (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 454
          },
          {
            "text": "    const maxWithinLegalOvertime = legalWorkHoursUntilCutoff - scheduledWorkHoursUntilCutoff;",
            "lineNumber": 455
          },
          {
            "text": "    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);",
            "lineNumber": 456
          },
          {
            "lineNumber": 457
          },
          {
            "text": "    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分",
            "lineNumber": 458
          },
          {
            "text": "    if (totalWorkHours &gt; legalWorkHoursUntilCutoff) {",
            "lineNumber": 459
          },
          {
            "text": "      overLegalOvertime = totalWorkHours - legalWorkHoursUntilCutoff;",
            "lineNumber": 460
          },
          {
            "text": "    }",
            "lineNumber": 461
          },
          {
            "text": "  }",
            "lineNumber": 462
          },
          {
            "text": "  ",
            "lineNumber": 463
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 464
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 465
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 466
          },
          {
            "text": "    scheduledWorkHours: formatHours(scheduledWorkHours),",
            "lineNumber": 467
          },
          {
            "text": "    totalWorkHours: formatHours(totalWorkHours),",
            "lineNumber": 468
          },
          {
            "text": "    overUnderTime: formatOverUnder(overUnderTime),",
            "lineNumber": 469
          },
          {
            "text": "    legalHolidayWork: formatHours(legalHolidayWork),",
            "lineNumber": 470
          },
          {
            "text": "    withinLegalOvertime: formatHours(withinLegalOvertime),",
            "lineNumber": 471
          },
          {
            "text": "    overLegalOvertime: formatHours(overLegalOvertime),",
            "lineNumber": 472
          },
          {
            "text": "    cutoffDate: cutoffDate.split('-').slice(1).join('/')",
            "lineNumber": 473
          },
          {
            "text": "  };",
            "lineNumber": 474
          },
          {
            "text": "  ",
            "lineNumber": 475
          },
          {
            "text": "  // 休暇申請データを取得",
            "lineNumber": 476
          },
          {
            "text": "  const vacations = await applicationModel.getVacations(employeeId, startDate, endDate);",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "  return {",
            "lineNumber": 479
          },
          {
            "text": "    dailyData,",
            "lineNumber": 480
          },
          {
            "text": "    monthlySummary,",
            "lineNumber": 481
          },
          {
            "text": "    vacations",
            "lineNumber": 482
          },
          {
            "text": "  };",
            "lineNumber": 483
          },
          {
            "text": "};",
            "lineNumber": 484
          },
          {
            "lineNumber": 485
          },
          {
            "text": "/**",
            "lineNumber": 486
          },
          {
            "text": " * 日次確定申請を行う。",
            "lineNumber": 487
          },
          {
            "text": " *",
            "lineNumber": 488
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 489
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 490
          },
          {
            "text": " * @returns {Promise&lt;void&gt;}",
            "lineNumber": 491
          },
          {
            "text": " */",
            "lineNumber": 492
          }
        ]
      },
      "score": 0.3479982614517212
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \nfor (let day = 1; day &lt;= daysInMonth; day++) {\n\n      }\n    }\n    \n    let attendanceId = null;\n    let clockInTime = null;\n    let clockOutTime = null;\n    let holidayWorkHours = 0;\n    let nightWorkHours = 0;\n    let workLocationCode = null;\n    let remarkText = null;\n    let isDailyConfirmed = false;\n\n    if (attendance) {\n      attendanceId = attendance.ATTENDANCE_ID;\n      clockInTime = attendance.CLOCK_IN_TIME;\n      clockOutTime = attendance.CLOCK_OUT_TIME;\n      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;\n      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;\n      workLocationCode = attendance.WORK_LOCATION_CODE;\n      remarkText = attendance.REMARK_TEXT;\n      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;\n    }\n\n    dailyData.push({\n      attendanceId: attendanceId,\n      employeeId: employeeId,\n      workDate: workDate,\n      clockInTime: clockInTime,\n      clockOutTime: clockOutTime,\n      actualWorkHours: actualWorkHours,\n      breakTimeTotal: breakTimeTotal,\n      overtimeHours: overtimeHours,\n      holidayWorkHours: holidayWorkHours,\n      nightWorkHours: nightWorkHours,\n      workLocationCode: workLocationCode,\n      remarkText: remarkText,\n      isDailyConfirmed: isDailyConfirmed,\n      holidayName: holidayName,\n      vacationTypeName: vacationTypeName\n    });\n  }\n  \n  // 3. 月次サマリーデータ取得（計算）\n  const actualWorkDays = attendanceRows.filter(row =&gt; \n    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME\n  ).length;\n  \n  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算\n  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）\n  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算\n  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算\n  \n  // 所定労働時間（1日7.5時間 × 所定出勤日数）\n  const scheduledWorkHours = scheduledWorkDays * 7.5;\n  \n  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            },
            {
              "startPosition": {
                "line": 59,
                "column": 3
              },
              "endPosition": {
                "line": 60,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "text": "for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 59
          },
          {
            "lineNumber": 132
          },
          {
            "text": "      }",
            "lineNumber": 133
          },
          {
            "text": "    }",
            "lineNumber": 134
          },
          {
            "text": "    ",
            "lineNumber": 135
          },
          {
            "text": "    let attendanceId = null;",
            "lineNumber": 136
          },
          {
            "text": "    let clockInTime = null;",
            "lineNumber": 137
          },
          {
            "text": "    let clockOutTime = null;",
            "lineNumber": 138
          },
          {
            "text": "    let holidayWorkHours = 0;",
            "lineNumber": 139
          },
          {
            "text": "    let nightWorkHours = 0;",
            "lineNumber": 140
          },
          {
            "text": "    let workLocationCode = null;",
            "lineNumber": 141
          },
          {
            "text": "    let remarkText = null;",
            "lineNumber": 142
          },
          {
            "text": "    let isDailyConfirmed = false;",
            "lineNumber": 143
          },
          {
            "lineNumber": 144
          },
          {
            "text": "    if (attendance) {",
            "lineNumber": 145
          },
          {
            "text": "      attendanceId = attendance.ATTENDANCE_ID;",
            "lineNumber": 146
          },
          {
            "text": "      clockInTime = attendance.CLOCK_IN_TIME;",
            "lineNumber": 147
          },
          {
            "text": "      clockOutTime = attendance.CLOCK_OUT_TIME;",
            "lineNumber": 148
          },
          {
            "text": "      holidayWorkHours = parseFloat(attendance.HOLIDAY_WORK_HOURS) || 0;",
            "lineNumber": 149
          },
          {
            "text": "      nightWorkHours = parseFloat(attendance.NIGHT_WORK_HOURS) || 0;",
            "lineNumber": 150
          },
          {
            "text": "      workLocationCode = attendance.WORK_LOCATION_CODE;",
            "lineNumber": 151
          },
          {
            "text": "      remarkText = attendance.REMARK_TEXT;",
            "lineNumber": 152
          },
          {
            "text": "      isDailyConfirmed = attendance.IS_DAILY_CONFIRMED;",
            "lineNumber": 153
          },
          {
            "text": "    }",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "    dailyData.push({",
            "lineNumber": 156
          },
          {
            "text": "      attendanceId: attendanceId,",
            "lineNumber": 157
          },
          {
            "text": "      employeeId: employeeId,",
            "lineNumber": 158
          },
          {
            "text": "      workDate: workDate,",
            "lineNumber": 159
          },
          {
            "text": "      clockInTime: clockInTime,",
            "lineNumber": 160
          },
          {
            "text": "      clockOutTime: clockOutTime,",
            "lineNumber": 161
          },
          {
            "text": "      actualWorkHours: actualWorkHours,",
            "lineNumber": 162
          },
          {
            "text": "      breakTimeTotal: breakTimeTotal,",
            "lineNumber": 163
          },
          {
            "text": "      overtimeHours: overtimeHours,",
            "lineNumber": 164
          },
          {
            "text": "      holidayWorkHours: holidayWorkHours,",
            "lineNumber": 165
          },
          {
            "text": "      nightWorkHours: nightWorkHours,",
            "lineNumber": 166
          },
          {
            "text": "      workLocationCode: workLocationCode,",
            "lineNumber": 167
          },
          {
            "text": "      remarkText: remarkText,",
            "lineNumber": 168
          },
          {
            "text": "      isDailyConfirmed: isDailyConfirmed,",
            "lineNumber": 169
          },
          {
            "text": "      holidayName: holidayName,",
            "lineNumber": 170
          },
          {
            "text": "      vacationTypeName: vacationTypeName",
            "lineNumber": 171
          },
          {
            "text": "    });",
            "lineNumber": 172
          },
          {
            "text": "  }",
            "lineNumber": 173
          },
          {
            "text": "  ",
            "lineNumber": 174
          },
          {
            "text": "  // 3. 月次サマリーデータ取得（計算）",
            "lineNumber": 175
          },
          {
            "text": "  const actualWorkDays = attendanceRows.filter(row =&gt; ",
            "lineNumber": 176
          },
          {
            "text": "    row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME",
            "lineNumber": 177
          },
          {
            "text": "  ).length;",
            "lineNumber": 178
          },
          {
            "text": "  ",
            "lineNumber": 179
          },
          {
            "text": "  // 法定休日出勤日数、所定休日出勤日数は簡易的に計算",
            "lineNumber": 180
          },
          {
            "text": "  // （実際の実装では、祝日マスタやカレンダーマスタを参照する必要がある）",
            "lineNumber": 181
          },
          {
            "text": "  const legalHolidayWorkDays = 0; // TODO: 法定休日出勤日数を計算",
            "lineNumber": 182
          },
          {
            "text": "  const scheduledHolidayWorkDays = 0; // TODO: 所定休日出勤日数を計算",
            "lineNumber": 183
          },
          {
            "text": "  ",
            "lineNumber": 184
          },
          {
            "text": "  // 所定労働時間（1日7.5時間 × 所定出勤日数）",
            "lineNumber": 185
          },
          {
            "text": "  const scheduledWorkHours = scheduledWorkDays * 7.5;",
            "lineNumber": 186
          },
          {
            "text": "  ",
            "lineNumber": 187
          },
          {
            "text": "  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）",
            "lineNumber": 188
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.3441978693008423
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  \n  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）\n  let totalWorkMinutes = 0;\n  for (const row of attendanceRows) {\n    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME) {\n      const totalMinutes = calculateMinutes(row.CLOCK_IN_TIME, row.CLOCK_OUT_TIME);\n      const breakTimes = await breakTimeModel.getBreakTimes(row.ATTENDANCE_ID);\n      const officialOutings = await breakTimeModel.getOfficialOutings(row.ATTENDANCE_ID);\n      \n      let breakMinutes = 0;\n      for (const bt of breakTimes) {\n        breakMinutes += bt.BREAK_DURATION_MINUTES || 0;\n      }\n      for (const outing of officialOutings) {\n        breakMinutes += outing.OUTING_DURATION_MINUTES || 0;\n      }\n      \n      totalWorkMinutes += totalMinutes - breakMinutes;\n    }\n  }\n  const totalWorkHours = totalWorkMinutes / 60;\n  \n  // 総労働時間-法定休日労働\n  const totalWorkHoursExcludingLegalHoliday = totalWorkHours - \n    attendanceRows.reduce((sum, row) =&gt; sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0);\n  \n  // 過不足時間\n  // 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)\n  // 注意: このAPIでは月全体の過不足時間を計算（cutoffDateの考慮はattendanceService.jsで実装）\n  const overUnderHours = totalWorkHours - scheduledWorkHours;\n  \n  // 当月度の超過時間、安全配慮上の超過時間は簡易的に0とする\n  const currentMonthOvertime = 0;\n  const safetyOvertime = 0;\n  \n  // 法定労働時間（1日8時間 × 所定出勤日数）\n  const legalWorkHours = scheduledWorkDays * 8;\n  \n  // 実労働時間-法定休日労働(有休を含めない)\n  const actualWorkHoursExcludingLegalHoliday = totalWorkHoursExcludingLegalHoliday;\n  \n  // 法定時間内残業・法定時間外残業\n  // 計算方法:\n  // - 実労働時間が所定労働時間を超えた場合にのみ残業が発生\n  // - 法定時間内残業: 実労働時間が所定労働時間を超えた部分のうち、法定労働時間（8時間/日 × 所定出勤日数）以内の部分\n  // - 法定時間外残業: 実労働時間が法定労働時間を超えた部分\n  \n  // 実労働時間が所定労働時間を超えている場合のみ残業を計算\n  let withinLegalOvertime = 0;\n  let overLegalOvertime = 0;\n  \n  if (totalWorkHours &gt; scheduledWorkHours)\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "lineNumber": 186
          },
          {
            "text": "  ",
            "lineNumber": 187
          },
          {
            "text": "  // 総労働時間（丸め誤差を避けるため、各日の出退勤時刻と休憩時間から直接計算）",
            "lineNumber": 188
          },
          {
            "text": "  let totalWorkMinutes = 0;",
            "lineNumber": 189
          },
          {
            "text": "  for (const row of attendanceRows) {",
            "lineNumber": 190
          },
          {
            "text": "    if (row.CLOCK_IN_TIME &amp;&amp; row.CLOCK_OUT_TIME) {",
            "lineNumber": 191
          },
          {
            "text": "      const totalMinutes = calculateMinutes(row.CLOCK_IN_TIME, row.CLOCK_OUT_TIME);",
            "lineNumber": 192
          },
          {
            "text": "      const breakTimes = await breakTimeModel.getBreakTimes(row.ATTENDANCE_ID);",
            "lineNumber": 193
          },
          {
            "text": "      const officialOutings = await breakTimeModel.getOfficialOutings(row.ATTENDANCE_ID);",
            "lineNumber": 194
          },
          {
            "text": "      ",
            "lineNumber": 195
          },
          {
            "text": "      let breakMinutes = 0;",
            "lineNumber": 196
          },
          {
            "text": "      for (const bt of breakTimes) {",
            "lineNumber": 197
          },
          {
            "text": "        breakMinutes += bt.BREAK_DURATION_MINUTES || 0;",
            "lineNumber": 198
          },
          {
            "text": "      }",
            "lineNumber": 199
          },
          {
            "text": "      for (const outing of officialOutings) {",
            "lineNumber": 200
          },
          {
            "text": "        breakMinutes += outing.OUTING_DURATION_MINUTES || 0;",
            "lineNumber": 201
          },
          {
            "text": "      }",
            "lineNumber": 202
          },
          {
            "text": "      ",
            "lineNumber": 203
          },
          {
            "text": "      totalWorkMinutes += totalMinutes - breakMinutes;",
            "lineNumber": 204
          },
          {
            "text": "    }",
            "lineNumber": 205
          },
          {
            "text": "  }",
            "lineNumber": 206
          },
          {
            "text": "  const totalWorkHours = totalWorkMinutes / 60;",
            "lineNumber": 207
          },
          {
            "text": "  ",
            "lineNumber": 208
          },
          {
            "text": "  // 総労働時間-法定休日労働",
            "lineNumber": 209
          },
          {
            "text": "  const totalWorkHoursExcludingLegalHoliday = totalWorkHours - ",
            "lineNumber": 210
          },
          {
            "text": "    attendanceRows.reduce((sum, row) =&gt; sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0);",
            "lineNumber": 211
          },
          {
            "text": "  ",
            "lineNumber": 212
          },
          {
            "text": "  // 過不足時間",
            "lineNumber": 213
          },
          {
            "text": "  // 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)",
            "lineNumber": 214
          },
          {
            "text": "  // 注意: このAPIでは月全体の過不足時間を計算（cutoffDateの考慮はattendanceService.jsで実装）",
            "lineNumber": 215
          },
          {
            "text": "  const overUnderHours = totalWorkHours - scheduledWorkHours;",
            "lineNumber": 216
          },
          {
            "text": "  ",
            "lineNumber": 217
          },
          {
            "text": "  // 当月度の超過時間、安全配慮上の超過時間は簡易的に0とする",
            "lineNumber": 218
          },
          {
            "text": "  const currentMonthOvertime = 0;",
            "lineNumber": 219
          },
          {
            "text": "  const safetyOvertime = 0;",
            "lineNumber": 220
          },
          {
            "text": "  ",
            "lineNumber": 221
          },
          {
            "text": "  // 法定労働時間（1日8時間 × 所定出勤日数）",
            "lineNumber": 222
          },
          {
            "text": "  const legalWorkHours = scheduledWorkDays * 8;",
            "lineNumber": 223
          },
          {
            "text": "  ",
            "lineNumber": 224
          },
          {
            "text": "  // 実労働時間-法定休日労働(有休を含めない)",
            "lineNumber": 225
          },
          {
            "text": "  const actualWorkHoursExcludingLegalHoliday = totalWorkHoursExcludingLegalHoliday;",
            "lineNumber": 226
          },
          {
            "text": "  ",
            "lineNumber": 227
          },
          {
            "text": "  // 法定時間内残業・法定時間外残業",
            "lineNumber": 228
          },
          {
            "text": "  // 計算方法:",
            "lineNumber": 229
          },
          {
            "text": "  // - 実労働時間が所定労働時間を超えた場合にのみ残業が発生",
            "lineNumber": 230
          },
          {
            "text": "  // - 法定時間内残業: 実労働時間が所定労働時間を超えた部分のうち、法定労働時間（8時間/日 × 所定出勤日数）以内の部分",
            "lineNumber": 231
          },
          {
            "text": "  // - 法定時間外残業: 実労働時間が法定労働時間を超えた部分",
            "lineNumber": 232
          },
          {
            "text": "  ",
            "lineNumber": 233
          },
          {
            "text": "  // 実労働時間が所定労働時間を超えている場合のみ残業を計算",
            "lineNumber": 234
          },
          {
            "text": "  let withinLegalOvertime = 0;",
            "lineNumber": 235
          },
          {
            "text": "  let overLegalOvertime = 0;",
            "lineNumber": 236
          },
          {
            "text": "  ",
            "lineNumber": 237
          },
          {
            "text": "  if (totalWorkHours &gt; scheduledWorkHours)",
            "lineNumber": 238
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.3439750075340271
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\detailed-design\\ui\\attendance-table-screen.md",
        "range": {
          "startPosition": {
            "line": 973
          },
          "endPosition": {
            "line": 1018
          }
        },
        "contents": "- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n  | 更新後の勤怠データ | 更新後のATTENDANCE_RECORDデータ | JSON形式 |\n- 関連する取得仕様\n  - なし\n- その他\n  - 日次確定済み（IS_DAILY_CONFIRMED=TRUE）の場合は更新不可\n  - 出勤時刻・退勤時刻を更新した場合、ACTUAL_WORK_HOURSを自動計算\n  - 手入力（MANUAL）の場合、備考の入力を推奨\n\n#### No.6\n- API仕様名：日次確定申請API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | POST | |\n  | エンドポイント | /api/attendance/daily-confirmation | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |\n  | WORK_DATE | 選択した日付 | リクエストボディ、YYYY-MM-DD形式 |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |\n  | :--- | :--- | :--- |\n  | 成功フラグ | 成功/失敗 | true/false |\n  | メッセージ | 処理結果メッセージ | |\n- 関連する取得仕様\n  - なし\n- その他\n  - 勤務場所が設定されているか、工数合計と実労働時間が一致するかをチェック\n  - 問題なければIS_DAILY_CONFIRMED=TRUE、DAILY_CONFIRMED_ATを現在時刻で更新\n\n#### No.7\n- API仕様名：月次サマリー取得API\n- リクエスト\n  | 項目名 | リクエスト内容 | 補足 |\n  | :--- | :--- | :--- |\n  | HTTPメソッド | GET | |\n  | エンドポイント | /api/attendance/monthly-summary | |\n  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |\n  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |\n  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |\n- レスポンス\n  | 項目名 | レスポンス内容 | 補足 |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- レスポンス",
            "lineNumber": 974
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 975
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 976
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 977
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 978
          },
          {
            "text": "  | 更新後の勤怠データ | 更新後のATTENDANCE_RECORDデータ | JSON形式 |",
            "lineNumber": 979
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 980
          },
          {
            "text": "  - なし",
            "lineNumber": 981
          },
          {
            "text": "- その他",
            "lineNumber": 982
          },
          {
            "text": "  - 日次確定済み（IS_DAILY_CONFIRMED=TRUE）の場合は更新不可",
            "lineNumber": 983
          },
          {
            "text": "  - 出勤時刻・退勤時刻を更新した場合、ACTUAL_WORK_HOURSを自動計算",
            "lineNumber": 984
          },
          {
            "text": "  - 手入力（MANUAL）の場合、備考の入力を推奨",
            "lineNumber": 985
          },
          {
            "lineNumber": 986
          },
          {
            "text": "#### No.6",
            "lineNumber": 987
          },
          {
            "text": "- API仕様名：日次確定申請API",
            "lineNumber": 988
          },
          {
            "text": "- リクエスト",
            "lineNumber": 989
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 990
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 991
          },
          {
            "text": "  | HTTPメソッド | POST | |",
            "lineNumber": 992
          },
          {
            "text": "  | エンドポイント | /api/attendance/daily-confirmation | |",
            "lineNumber": 993
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |",
            "lineNumber": 994
          },
          {
            "text": "  | WORK_DATE | 選択した日付 | リクエストボディ、YYYY-MM-DD形式 |",
            "lineNumber": 995
          },
          {
            "text": "- レスポンス",
            "lineNumber": 996
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 997
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 998
          },
          {
            "text": "  | 成功フラグ | 成功/失敗 | true/false |",
            "lineNumber": 999
          },
          {
            "text": "  | メッセージ | 処理結果メッセージ | |",
            "lineNumber": 1000
          },
          {
            "text": "- 関連する取得仕様",
            "lineNumber": 1001
          },
          {
            "text": "  - なし",
            "lineNumber": 1002
          },
          {
            "text": "- その他",
            "lineNumber": 1003
          },
          {
            "text": "  - 勤務場所が設定されているか、工数合計と実労働時間が一致するかをチェック",
            "lineNumber": 1004
          },
          {
            "text": "  - 問題なければIS_DAILY_CONFIRMED=TRUE、DAILY_CONFIRMED_ATを現在時刻で更新",
            "lineNumber": 1005
          },
          {
            "lineNumber": 1006
          },
          {
            "text": "#### No.7",
            "lineNumber": 1007
          },
          {
            "text": "- API仕様名：月次サマリー取得API",
            "lineNumber": 1008
          },
          {
            "text": "- リクエスト",
            "lineNumber": 1009
          },
          {
            "text": "  | 項目名 | リクエスト内容 | 補足 |",
            "lineNumber": 1010
          },
          {
            "text": "  | :--- | :--- | :--- |",
            "lineNumber": 1011
          },
          {
            "text": "  | HTTPメソッド | GET | |",
            "lineNumber": 1012
          },
          {
            "text": "  | エンドポイント | /api/attendance/monthly-summary | |",
            "lineNumber": 1013
          },
          {
            "text": "  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |",
            "lineNumber": 1014
          },
          {
            "text": "  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |",
            "lineNumber": 1015
          },
          {
            "text": "  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |",
            "lineNumber": 1016
          },
          {
            "text": "- レスポンス",
            "lineNumber": 1017
          },
          {
            "text": "  | 項目名 | レスポンス内容 | 補足 |",
            "lineNumber": 1018
          }
        ]
      },
      "score": 0.33941319584846497
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\monthlySummaryController.js",
        "range": {
          "startPosition": {
            "line": 36,
            "column": 2
          },
          "endPosition": {
            "line": 40,
            "column": 2
          }
        },
        "contents": "module.exports = {\n  getMonthlySummary\n};",
        "signatures": {},
        "detailedLines": [
          {
            "text": "module.exports = {",
            "lineNumber": 39
          },
          {
            "text": "  getMonthlySummary",
            "lineNumber": 40
          },
          {
            "text": "};",
            "lineNumber": 41
          }
        ]
      },
      "score": 0.3370473384857178
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 379,
            "column": 2
          },
          "endPosition": {
            "line": 383,
            "column": 2
          }
        },
        "contents": "module.exports = {\n  getMonthlySummary\n};",
        "signatures": {},
        "detailedLines": [
          {
            "text": "module.exports = {",
            "lineNumber": 382
          },
          {
            "text": "  getMonthlySummary",
            "lineNumber": 383
          },
          {
            "text": "};",
            "lineNumber": 384
          }
        ]
      },
      "score": 0.33657974004745483
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 430
          },
          "endPosition": {
            "line": 469
          }
        },
        "contents": "    &lt;div class=\"summary-section section-10\"&gt;\n      &lt;svg class=\"section-border\" viewBox=\"0 0 580 42\" preserveAspectRatio=\"none\"&gt;\n        &lt;path d=\"M 0.5 0.5 L 579.5 0.5 M 0.5 0.5 L 0.5 41.5 M 579.5 0.5 L 579.5 41.5\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 0px;\" viewBox=\"0 0 580 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"580\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;\n        &lt;path d=\"M 0 0 L 580 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;div class=\"section-row section-row-white\" style=\"top: 0px;\"&gt;\n        &lt;span class=\"section-label\"&gt;{{ getPaidLeaveBalanceLabel() }}&lt;/span&gt;\n        &lt;span class=\"section-value\"&gt;{{ vacationInfo?.paidLeaveBalance || 0 }} 日&lt;/span&gt;\n      &lt;/div&gt;\n      &lt;svg class=\"section-row-border\" style=\"top: 21px;\" viewBox=\"0 0 580 21\" preserveAspectRatio=\"none\"&gt;\n        &lt;rect width=\"580\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;\n        &lt;path d=\"M 0 0 L 580 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;\n      &lt;/svg&gt;\n      &lt;div class=\"section-row section-row-gray\" style=\"top: 21px;\"&gt;\n        &lt;span class=\"section-label\"&gt;{{ getPlannedGrantDaysLabel() }}&lt;/span&gt;\n        &lt;span class=\"section-value\"&gt;{{ vacationInfo?.plannedGrantDays || 0 }} 日&lt;/span&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Loading Overlay --&gt;\n    &lt;div v-if=\"loading\" class=\"loading-overlay\"&gt;\n      &lt;div class=\"loading-spinner\"&gt;読み込み中...&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Error Message --&gt;\n    &lt;div v-if=\"error\" class=\"error-message\"&gt;\n      {{ error }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport { getMonthlySummaryDetail } from '@/services/api'\n\nexport default {\n  name: 'MonthlySummaryScreen',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;div class=\"summary-section section-10\"&gt;",
            "lineNumber": 431
          },
          {
            "text": "      &lt;svg class=\"section-border\" viewBox=\"0 0 580 42\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 432
          },
          {
            "text": "        &lt;path d=\"M 0.5 0.5 L 579.5 0.5 M 0.5 0.5 L 0.5 41.5 M 579.5 0.5 L 579.5 41.5\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 433
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 434
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 0px;\" viewBox=\"0 0 580 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 435
          },
          {
            "text": "        &lt;rect width=\"580\" height=\"21\" fill=\"rgb(255, 255, 255)\" /&gt;",
            "lineNumber": 436
          },
          {
            "text": "        &lt;path d=\"M 0 0 L 580 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 437
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 438
          },
          {
            "text": "      &lt;div class=\"section-row section-row-white\" style=\"top: 0px;\"&gt;",
            "lineNumber": 439
          },
          {
            "text": "        &lt;span class=\"section-label\"&gt;{{ getPaidLeaveBalanceLabel() }}&lt;/span&gt;",
            "lineNumber": 440
          },
          {
            "text": "        &lt;span class=\"section-value\"&gt;{{ vacationInfo?.paidLeaveBalance || 0 }} 日&lt;/span&gt;",
            "lineNumber": 441
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 442
          },
          {
            "text": "      &lt;svg class=\"section-row-border\" style=\"top: 21px;\" viewBox=\"0 0 580 21\" preserveAspectRatio=\"none\"&gt;",
            "lineNumber": 443
          },
          {
            "text": "        &lt;rect width=\"580\" height=\"21\" fill=\"rgb(245, 245, 245)\" /&gt;",
            "lineNumber": 444
          },
          {
            "text": "        &lt;path d=\"M 0 0 L 580 0\" stroke=\"rgb(0, 0, 0)\" stroke-width=\"1\" fill=\"none\" /&gt;",
            "lineNumber": 445
          },
          {
            "text": "      &lt;/svg&gt;",
            "lineNumber": 446
          },
          {
            "text": "      &lt;div class=\"section-row section-row-gray\" style=\"top: 21px;\"&gt;",
            "lineNumber": 447
          },
          {
            "text": "        &lt;span class=\"section-label\"&gt;{{ getPlannedGrantDaysLabel() }}&lt;/span&gt;",
            "lineNumber": 448
          },
          {
            "text": "        &lt;span class=\"section-value\"&gt;{{ vacationInfo?.plannedGrantDays || 0 }} 日&lt;/span&gt;",
            "lineNumber": 449
          },
          {
            "text": "      &lt;/div&gt;",
            "lineNumber": 450
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 451
          },
          {
            "lineNumber": 452
          },
          {
            "text": "    &lt;!-- Loading Overlay --&gt;",
            "lineNumber": 453
          },
          {
            "text": "    &lt;div v-if=\"loading\" class=\"loading-overlay\"&gt;",
            "lineNumber": 454
          },
          {
            "text": "      &lt;div class=\"loading-spinner\"&gt;読み込み中...&lt;/div&gt;",
            "lineNumber": 455
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 456
          },
          {
            "lineNumber": 457
          },
          {
            "text": "    &lt;!-- Error Message --&gt;",
            "lineNumber": 458
          },
          {
            "text": "    &lt;div v-if=\"error\" class=\"error-message\"&gt;",
            "lineNumber": 459
          },
          {
            "text": "      {{ error }}",
            "lineNumber": 460
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 461
          },
          {
            "text": "  &lt;/div&gt;",
            "lineNumber": 462
          },
          {
            "text": "&lt;/template&gt;",
            "lineNumber": 463
          },
          {
            "lineNumber": 464
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 465
          },
          {
            "text": "import { getMonthlySummaryDetail } from '@/services/api'",
            "lineNumber": 466
          },
          {
            "lineNumber": 467
          },
          {
            "text": "export default {",
            "lineNumber": 468
          },
          {
            "text": "  name: 'MonthlySummaryScreen',",
            "lineNumber": 469
          }
        ]
      },
      "score": 0.3316276967525482
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\services\\api.js",
        "range": {
          "startPosition": {
            "line": 47,
            "column": 1
          },
          "endPosition": {
            "line": 68,
            "column": 3
          }
        },
        "contents": "/**\n * 月間勤務表を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} year 年（YYYY形式）\n * @param {string} month 月（MM形式）\n * @returns {Promise&lt;Object&gt;} 月間勤務表データ\n */\nexport async function getMonthlyAttendance(employeeId, year, month) {\n  const endpoint = &#96;/attendance/monthly?employeeId=${employeeId}&amp;year=${year}&amp;month=${month}&#96;\n  return await apiRequest(endpoint, { method: 'GET' })\n}\n\n/**\n * 日次勤怠記録を取得する。\n *\n * @param {string} employeeId 従業員ID\n * @param {string} workDate 勤務日（YYYY-MM-DD形式）\n * @returns {Promise&lt;Object&gt;} 日次勤怠記録データ\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 50
          },
          {
            "text": " * 月間勤務表を取得する。",
            "lineNumber": 51
          },
          {
            "text": " *",
            "lineNumber": 52
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 53
          },
          {
            "text": " * @param {string} year 年（YYYY形式）",
            "lineNumber": 54
          },
          {
            "text": " * @param {string} month 月（MM形式）",
            "lineNumber": 55
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 月間勤務表データ",
            "lineNumber": 56
          },
          {
            "text": " */",
            "lineNumber": 57
          },
          {
            "text": "export async function getMonthlyAttendance(employeeId, year, month) {",
            "lineNumber": 58,
            "isSignature": true
          },
          {
            "text": "  const endpoint = &#96;/attendance/monthly?employeeId=${employeeId}&amp;year=${year}&amp;month=${month}&#96;",
            "lineNumber": 59
          },
          {
            "text": "  return await apiRequest(endpoint, { method: 'GET' })",
            "lineNumber": 60
          },
          {
            "text": "}",
            "lineNumber": 61,
            "isSignature": true
          },
          {
            "lineNumber": 62
          },
          {
            "text": "/**",
            "lineNumber": 63
          },
          {
            "text": " * 日次勤怠記録を取得する。",
            "lineNumber": 64
          },
          {
            "text": " *",
            "lineNumber": 65
          },
          {
            "text": " * @param {string} employeeId 従業員ID",
            "lineNumber": 66
          },
          {
            "text": " * @param {string} workDate 勤務日（YYYY-MM-DD形式）",
            "lineNumber": 67
          },
          {
            "text": " * @returns {Promise&lt;Object&gt;} 日次勤怠記録データ",
            "lineNumber": 68
          },
          {
            "text": " */",
            "lineNumber": 69
          }
        ]
      },
      "score": 0.32390931248664856
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 379,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  let withinLegalOvertime = 0;\n  let overLegalOvertime = 0;\n  \n  if (totalWorkHours &gt; scheduledWorkHours) {\n    // 実労働時間が所定労働時間を超えている\n    const overtimeHours = totalWorkHours - scheduledWorkHours;\n    \n    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分\n    // 上限: (所定出勤日数 * 8:00) - 所定労働時間\n    const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours;\n    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);\n    \n    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分\n    if (totalWorkHours &gt; legalWorkHours) {\n      overLegalOvertime = totalWorkHours - legalWorkHours;\n    }\n  }\n  \n  // 法定休日労働時間\n  const legalHolidayWorkHours = attendanceRows.reduce((sum, row) =&gt; \n    sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0\n  );\n  \n  // 深夜労働時間\n  const nightWorkHours = attendanceRows.reduce((sum, row) =&gt; \n    sum + (parseFloat(row.NIGHT_WORK_HOURS) || 0), 0\n  );\n  \n  // 45時間を超える時間外労働、60時間を超える時間外労働は簡易的に0とする\n  const overtimeOver45Hours = 0;\n  const overtimeOver60Hours = 0;\n  \n  // 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は簡易的に0とする\n  const lateCount = 0;\n  const lateHours = 0;\n  const earlyLeaveCount = 0;\n  const earlyLeaveHours = 0;\n  const privateOutingCount = 0;\n  const privateOutingHours = 0;\n  \n  // 休憩時間合計\n  let totalBreakHours = 0;\n  for (const attendance of attendanceRows) {\n    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);\n    const breakMinutes = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0);\n    totalBreakHours += breakMinutes / 60;\n  }\n  \n  const monthlySummary = {\n    scheduledWorkDays,\n    actualWorkDays,\n  };\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "lineNumber": 234
          },
          {
            "text": "  let withinLegalOvertime = 0;",
            "lineNumber": 235
          },
          {
            "text": "  let overLegalOvertime = 0;",
            "lineNumber": 236
          },
          {
            "text": "  ",
            "lineNumber": 237
          },
          {
            "text": "  if (totalWorkHours &gt; scheduledWorkHours) {",
            "lineNumber": 238
          },
          {
            "text": "    // 実労働時間が所定労働時間を超えている",
            "lineNumber": 239
          },
          {
            "text": "    const overtimeHours = totalWorkHours - scheduledWorkHours;",
            "lineNumber": 240
          },
          {
            "text": "    ",
            "lineNumber": 241
          },
          {
            "text": "    // 法定時間内残業: 超過分のうち、法定労働時間以内の部分",
            "lineNumber": 242
          },
          {
            "text": "    // 上限: (所定出勤日数 * 8:00) - 所定労働時間",
            "lineNumber": 243
          },
          {
            "text": "    const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours;",
            "lineNumber": 244
          },
          {
            "text": "    withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime);",
            "lineNumber": 245
          },
          {
            "text": "    ",
            "lineNumber": 246
          },
          {
            "text": "    // 法定時間外残業: 実労働時間が法定労働時間を超えた部分",
            "lineNumber": 247
          },
          {
            "text": "    if (totalWorkHours &gt; legalWorkHours) {",
            "lineNumber": 248
          },
          {
            "text": "      overLegalOvertime = totalWorkHours - legalWorkHours;",
            "lineNumber": 249
          },
          {
            "text": "    }",
            "lineNumber": 250
          },
          {
            "text": "  }",
            "lineNumber": 251
          },
          {
            "text": "  ",
            "lineNumber": 252
          },
          {
            "text": "  // 法定休日労働時間",
            "lineNumber": 253
          },
          {
            "text": "  const legalHolidayWorkHours = attendanceRows.reduce((sum, row) =&gt; ",
            "lineNumber": 254
          },
          {
            "text": "    sum + (parseFloat(row.HOLIDAY_WORK_HOURS) || 0), 0",
            "lineNumber": 255
          },
          {
            "text": "  );",
            "lineNumber": 256
          },
          {
            "text": "  ",
            "lineNumber": 257
          },
          {
            "text": "  // 深夜労働時間",
            "lineNumber": 258
          },
          {
            "text": "  const nightWorkHours = attendanceRows.reduce((sum, row) =&gt; ",
            "lineNumber": 259
          },
          {
            "text": "    sum + (parseFloat(row.NIGHT_WORK_HOURS) || 0), 0",
            "lineNumber": 260
          },
          {
            "text": "  );",
            "lineNumber": 261
          },
          {
            "text": "  ",
            "lineNumber": 262
          },
          {
            "text": "  // 45時間を超える時間外労働、60時間を超える時間外労働は簡易的に0とする",
            "lineNumber": 263
          },
          {
            "text": "  const overtimeOver45Hours = 0;",
            "lineNumber": 264
          },
          {
            "text": "  const overtimeOver60Hours = 0;",
            "lineNumber": 265
          },
          {
            "text": "  ",
            "lineNumber": 266
          },
          {
            "text": "  // 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は簡易的に0とする",
            "lineNumber": 267
          },
          {
            "text": "  const lateCount = 0;",
            "lineNumber": 268
          },
          {
            "text": "  const lateHours = 0;",
            "lineNumber": 269
          },
          {
            "text": "  const earlyLeaveCount = 0;",
            "lineNumber": 270
          },
          {
            "text": "  const earlyLeaveHours = 0;",
            "lineNumber": 271
          },
          {
            "text": "  const privateOutingCount = 0;",
            "lineNumber": 272
          },
          {
            "text": "  const privateOutingHours = 0;",
            "lineNumber": 273
          },
          {
            "text": "  ",
            "lineNumber": 274
          },
          {
            "text": "  // 休憩時間合計",
            "lineNumber": 275
          },
          {
            "text": "  let totalBreakHours = 0;",
            "lineNumber": 276
          },
          {
            "text": "  for (const attendance of attendanceRows) {",
            "lineNumber": 277
          },
          {
            "text": "    const breakTimes = await breakTimeModel.getBreakTimes(attendance.ATTENDANCE_ID);",
            "lineNumber": 278
          },
          {
            "text": "    const breakMinutes = breakTimes.reduce((sum, bt) =&gt; sum + (bt.BREAK_DURATION_MINUTES || 0), 0);",
            "lineNumber": 279
          },
          {
            "text": "    totalBreakHours += breakMinutes / 60;",
            "lineNumber": 280
          },
          {
            "text": "  }",
            "lineNumber": 281
          },
          {
            "text": "  ",
            "lineNumber": 282
          },
          {
            "text": "  const monthlySummary = {",
            "lineNumber": 283
          },
          {
            "text": "    scheduledWorkDays,",
            "lineNumber": 284
          },
          {
            "text": "    actualWorkDays,",
            "lineNumber": 285
          },
          {
            "text": "  };",
            "lineNumber": 309
          },
          {
            "text": ";",
            "lineNumber": 380
          }
        ]
      },
      "score": 0.32384398579597473
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\controllers\\attendanceController.js",
        "range": {
          "startPosition": {
            "line": 83,
            "column": 2
          },
          "endPosition": {
            "line": 124,
            "column": 3
          }
        },
        "contents": "/**\n * 月間勤務表を取得する。\n *\n * @param {Object} req リクエストオブジェクト\n * @param {Object} res レスポンスオブジェクト\n * @param {Function} next 次のミドルウェア関数\n */\nconst getMonthlyAttendance = async (req, res, next) =&gt; {\n  try {\n    const { employeeId, year, month } = req.query;\n    \n    if (!employeeId || !year || !month) {\n      return res.status(400).json({\n        success: false,\n        message: '従業員ID、年、月が必要です。'\n      });\n    }\n    \n    const result = await attendanceService.getMonthlyAttendance(\n      employeeId,\n      parseInt(year),\n      parseInt(month)\n    );\n    \n    res.json({\n      success: true,\n      ...result\n    });\n  } catch (error) {\n    next(error);\n  }\n};\n\n/**\n * 日次確定申請を行う。\n *\n * @param {Object} req リクエストオブジェクト\n * @param {Object} res レスポンスオブジェクト\n * @param {Function} next 次のミドルウェア関数\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 86
          },
          {
            "text": " * 月間勤務表を取得する。",
            "lineNumber": 87
          },
          {
            "text": " *",
            "lineNumber": 88
          },
          {
            "text": " * @param {Object} req リクエストオブジェクト",
            "lineNumber": 89
          },
          {
            "text": " * @param {Object} res レスポンスオブジェクト",
            "lineNumber": 90
          },
          {
            "text": " * @param {Function} next 次のミドルウェア関数",
            "lineNumber": 91
          },
          {
            "text": " */",
            "lineNumber": 92
          },
          {
            "text": "const getMonthlyAttendance = async (req, res, next) =&gt; {",
            "lineNumber": 93
          },
          {
            "text": "  try {",
            "lineNumber": 94
          },
          {
            "text": "    const { employeeId, year, month } = req.query;",
            "lineNumber": 95
          },
          {
            "text": "    ",
            "lineNumber": 96
          },
          {
            "text": "    if (!employeeId || !year || !month) {",
            "lineNumber": 97
          },
          {
            "text": "      return res.status(400).json({",
            "lineNumber": 98
          },
          {
            "text": "        success: false,",
            "lineNumber": 99
          },
          {
            "text": "        message: '従業員ID、年、月が必要です。'",
            "lineNumber": 100
          },
          {
            "text": "      });",
            "lineNumber": 101
          },
          {
            "text": "    }",
            "lineNumber": 102
          },
          {
            "text": "    ",
            "lineNumber": 103
          },
          {
            "text": "    const result = await attendanceService.getMonthlyAttendance(",
            "lineNumber": 104
          },
          {
            "text": "      employeeId,",
            "lineNumber": 105
          },
          {
            "text": "      parseInt(year),",
            "lineNumber": 106
          },
          {
            "text": "      parseInt(month)",
            "lineNumber": 107
          },
          {
            "text": "    );",
            "lineNumber": 108
          },
          {
            "text": "    ",
            "lineNumber": 109
          },
          {
            "text": "    res.json({",
            "lineNumber": 110
          },
          {
            "text": "      success: true,",
            "lineNumber": 111
          },
          {
            "text": "      ...result",
            "lineNumber": 112
          },
          {
            "text": "    });",
            "lineNumber": 113
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 114
          },
          {
            "text": "    next(error);",
            "lineNumber": 115
          },
          {
            "text": "  }",
            "lineNumber": 116
          },
          {
            "text": "};",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "/**",
            "lineNumber": 119
          },
          {
            "text": " * 日次確定申請を行う。",
            "lineNumber": 120
          },
          {
            "text": " *",
            "lineNumber": 121
          },
          {
            "text": " * @param {Object} req リクエストオブジェクト",
            "lineNumber": 122
          },
          {
            "text": " * @param {Object} res レスポンスオブジェクト",
            "lineNumber": 123
          },
          {
            "text": " * @param {Function} next 次のミドルウェア関数",
            "lineNumber": 124
          },
          {
            "text": " */",
            "lineNumber": 125
          }
        ]
      },
      "score": 0.32117488980293274
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\IMPLEMENTATION_GUIDE.md",
        "range": {
          "startPosition": {
            "line": 124
          },
          "endPosition": {
            "line": 182
          }
        },
        "contents": "   - 日曜日が赤色の背景と文字で表示されること\n\n   **月次サマリー：**\n   - 所定出勤日数、実出勤日数が表示されること\n   - 所定労働時間、総労働時間が表示されること\n   - 過不足時間が表示されること\n\n### 3. 機能テスト\n\n#### 年月切り替え\n- 年月選択ドロップダウンで別の月を選択\n- 前月/今月/次月リンクをクリック\n- データが切り替わることを確認\n\n#### 日次確定申請\n- 未申請の日（+マーク）をクリック\n- 確認ダイアログが表示されること\n- ただし、出社・退社時刻が未入力の場合はエラーメッセージが表示されること\n\n#### ローディング表示\n- 年月を切り替えた際にローディングスピナーが表示されること\n- データ取得後にローディングが消えること\n\n#### エラーハンドリング\n- バックエンドを停止した状態で年月を切り替え\n- エラーメッセージと「再読み込み」ボタンが表示されること\n\n## APIエンドポイント一覧\n\n### 認証関連\n- &#96;POST /api/auth/login&#96; - ログイン\n- &#96;GET /api/auth/employee/:employeeId&#96; - 従業員情報取得\n\n### 勤怠関連\n- &#96;GET /api/attendance/monthly&#96; - 月間勤務表取得\n- &#96;GET /api/attendance/daily&#96; - 日次勤怠記録取得\n- &#96;PUT /api/attendance/record&#96; - 勤怠記録更新\n- &#96;POST /api/attendance/daily-confirmation&#96; - 日次確定申請\n- &#96;GET /api/attendance/monthly-summary&#96; - 月次サマリー取得\n- &#96;POST /api/attendance/clock-in&#96; - 出勤打刻\n- &#96;POST /api/attendance/clock-out&#96; - 退勤打刻\n- &#96;GET /api/attendance/work-hours&#96; - 工数実績取得\n- &#96;POST /api/attendance/work-hours&#96; - 工数実績登録\n\n### マスタ関連\n- &#96;GET /api/master/work-locations&#96; - 勤務場所マスタ取得\n\n## トラブルシューティング\n\n### データベース接続エラー\n\n&#96;&#96;&#96;\nError: connect ECONNREFUSED\n&#96;&#96;&#96;\n\n**解決策:**\n1. MySQLサーバーが起動しているか確認\n2. &#96;.env&#96;ファイルのDB設定を確認",
        "signatures": {},
        "detailedLines": [
          {
            "text": "   - 日曜日が赤色の背景と文字で表示されること",
            "lineNumber": 125
          },
          {
            "lineNumber": 126
          },
          {
            "text": "   **月次サマリー：**",
            "lineNumber": 127
          },
          {
            "text": "   - 所定出勤日数、実出勤日数が表示されること",
            "lineNumber": 128
          },
          {
            "text": "   - 所定労働時間、総労働時間が表示されること",
            "lineNumber": 129
          },
          {
            "text": "   - 過不足時間が表示されること",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "### 3. 機能テスト",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "#### 年月切り替え",
            "lineNumber": 134
          },
          {
            "text": "- 年月選択ドロップダウンで別の月を選択",
            "lineNumber": 135
          },
          {
            "text": "- 前月/今月/次月リンクをクリック",
            "lineNumber": 136
          },
          {
            "text": "- データが切り替わることを確認",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "#### 日次確定申請",
            "lineNumber": 139
          },
          {
            "text": "- 未申請の日（+マーク）をクリック",
            "lineNumber": 140
          },
          {
            "text": "- 確認ダイアログが表示されること",
            "lineNumber": 141
          },
          {
            "text": "- ただし、出社・退社時刻が未入力の場合はエラーメッセージが表示されること",
            "lineNumber": 142
          },
          {
            "lineNumber": 143
          },
          {
            "text": "#### ローディング表示",
            "lineNumber": 144
          },
          {
            "text": "- 年月を切り替えた際にローディングスピナーが表示されること",
            "lineNumber": 145
          },
          {
            "text": "- データ取得後にローディングが消えること",
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "#### エラーハンドリング",
            "lineNumber": 148
          },
          {
            "text": "- バックエンドを停止した状態で年月を切り替え",
            "lineNumber": 149
          },
          {
            "text": "- エラーメッセージと「再読み込み」ボタンが表示されること",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "## APIエンドポイント一覧",
            "lineNumber": 152
          },
          {
            "lineNumber": 153
          },
          {
            "text": "### 認証関連",
            "lineNumber": 154
          },
          {
            "text": "- &#96;POST /api/auth/login&#96; - ログイン",
            "lineNumber": 155
          },
          {
            "text": "- &#96;GET /api/auth/employee/:employeeId&#96; - 従業員情報取得",
            "lineNumber": 156
          },
          {
            "lineNumber": 157
          },
          {
            "text": "### 勤怠関連",
            "lineNumber": 158
          },
          {
            "text": "- &#96;GET /api/attendance/monthly&#96; - 月間勤務表取得",
            "lineNumber": 159
          },
          {
            "text": "- &#96;GET /api/attendance/daily&#96; - 日次勤怠記録取得",
            "lineNumber": 160
          },
          {
            "text": "- &#96;PUT /api/attendance/record&#96; - 勤怠記録更新",
            "lineNumber": 161
          },
          {
            "text": "- &#96;POST /api/attendance/daily-confirmation&#96; - 日次確定申請",
            "lineNumber": 162
          },
          {
            "text": "- &#96;GET /api/attendance/monthly-summary&#96; - 月次サマリー取得",
            "lineNumber": 163
          },
          {
            "text": "- &#96;POST /api/attendance/clock-in&#96; - 出勤打刻",
            "lineNumber": 164
          },
          {
            "text": "- &#96;POST /api/attendance/clock-out&#96; - 退勤打刻",
            "lineNumber": 165
          },
          {
            "text": "- &#96;GET /api/attendance/work-hours&#96; - 工数実績取得",
            "lineNumber": 166
          },
          {
            "text": "- &#96;POST /api/attendance/work-hours&#96; - 工数実績登録",
            "lineNumber": 167
          },
          {
            "lineNumber": 168
          },
          {
            "text": "### マスタ関連",
            "lineNumber": 169
          },
          {
            "text": "- &#96;GET /api/master/work-locations&#96; - 勤務場所マスタ取得",
            "lineNumber": 170
          },
          {
            "lineNumber": 171
          },
          {
            "text": "## トラブルシューティング",
            "lineNumber": 172
          },
          {
            "lineNumber": 173
          },
          {
            "text": "### データベース接続エラー",
            "lineNumber": 174
          },
          {
            "lineNumber": 175
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 176
          },
          {
            "text": "Error: connect ECONNREFUSED",
            "lineNumber": 177
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "**解決策:**",
            "lineNumber": 180
          },
          {
            "text": "1. MySQLサーバーが起動しているか確認",
            "lineNumber": 181
          },
          {
            "text": "2. &#96;.env&#96;ファイルのDB設定を確認",
            "lineNumber": 182
          }
        ]
      },
      "score": 0.3211160898208618
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


データ構造と表示ロジックを確認中。デバッグ用にコンソールログを追加し、実際のデータを確認します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\views\MonthlySummaryScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---



---


`getEventText`のロジックを確認。`workLocationCode`が`null`/`undefined`でも「通勤」が表示される可能性があるため、デバッグログを追加して実際のデータを確認します。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "61942d1c-d287-4106-ad3a-0d6783e887c0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---



---


バックエンドのコードを確認。`WORK_LOCATION_CODE`の値が`'HOME'`ではなく`'REMOTE'`の可能性があるため、両方に対応します。また、データが正しく取得されているか確認します。


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "WORK_LOCATION|LOCATION_CODE",
  "path": "backend",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "WORK_LOCATION|LOCATION_CODE",
    "path": "backend",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {
          "matches": [
            {
              "file": "backend\\services\\monthlySummaryService.js",
              "matches": [
                {
                  "lineNumber": 151,
                  "content": "      workLocationCode = attendance.WORK_LOCATION_CODE;"
                }
              ]
            },
            {
              "file": "backend\\models\\masterModel.js",
              "matches": [
                {
                  "lineNumber": 12,
                  "content": "    SELECT LOCATION_CODE AS WORK_LOCATION_CODE, LOCATION_NAME AS WORK_LOCATION_NAME, DISPLAY_ORDER"
                },
                {
                  "lineNumber": 13,
                  "content": "    FROM WORK_LOCATION "
                }
              ]
            },
            {
              "file": "backend\\services\\attendanceService.js",
              "matches": [
                {
                  "lineNumber": 507,
                  "content": "  if (!attendance.WORK_LOCATION_CODE) {"
                }
              ]
            },
            {
              "file": "backend\\services\\clockService.js",
              "matches": [
                {
                  "lineNumber": 193,
                  "content": "    workLocationCode: attendance.WORK_LOCATION_CODE,"
                }
              ]
            },
            {
              "file": "backend\\docs\\API_SPECIFICATION.md",
              "matches": [
                {
                  "lineNumber": 306,
                  "content": "      \"LOCATION_CODE\": \"COMMUTE\","
                },
                {
                  "lineNumber": 311,
                  "content": "      \"LOCATION_CODE\": \"REMOTE\","
                },
                {
                  "lineNumber": 316,
                  "content": "      \"LOCATION_CODE\": \"DIRECT_BOTH\","
                },
                {
                  "lineNumber": 321,
                  "content": "      \"LOCATION_CODE\": \"BUSINESS_TRIP\","
                },
                {
                  "lineNumber": 468,
                  "content": "   - &#96;CLOCK_IN_TIME&#96;、&#96;CLOCK_OUT_TIME&#96;、&#96;CLOCK_IN_TYPE&#96;、&#96;CLOCK_OUT_TYPE&#96;、&#96;WORK_LOCATION_CODE&#96;を更新"
                },
                {
                  "lineNumber": 470,
                  "content": "4. **WORK_LOCATION（勤務場所マスタ）**"
                },
                {
                  "lineNumber": 472,
                  "content": "   - &#96;LOCATION_CODE&#96;、&#96;LOCATION_NAME&#96;を参照"
                }
              ]
            },
            {
              "file": "backend\\models\\attendanceModel.js",
              "matches": [
                {
                  "lineNumber": 15,
                  "content": "    SELECT ATTENDANCE_ID, CLOCK_IN_TIME, CLOCK_OUT_TIME, WORK_LOCATION_CODE"
                },
                {
                  "lineNumber": 49,
                  "content": "      WORK_LOCATION_CODE,"
                },
                {
                  "lineNumber": 87,
                  "content": "      ar.WORK_LOCATION_CODE,"
                },
                {
                  "lineNumber": 88,
                  "content": "      wl.LOCATION_NAME AS WORK_LOCATION_NAME,"
                },
                {
                  "lineNumber": 99,
                  "content": "    LEFT JOIN WORK_LOCATION wl ON ar.WORK_LOCATION_CODE = wl.LOCATION_CODE"
                },
                {
                  "lineNumber": 132,
                  "content": "    (EMPLOYEE_ID, WORK_DATE, CLOCK_IN_TIME, CLOCK_OUT_TIME, CLOCK_IN_TYPE, CLOCK_OUT_TYPE, ORIGINAL_CLOCK_IN_TIME, ORIGINAL_CLOCK_OUT_TIME, WORK_LOCATION_CODE, REMARK_TEXT, CREATED_AT, UPDATED_AT)"
                },
                {
                  "lineNumber": 190,
                  "content": "    updateFields.push('WORK_LOCATION_CODE = ?');"
                }
              ]
            },
            {
              "file": "backend\\controllers\\attendanceController.js",
              "matches": [
                {
                  "lineNumber": 67,
                  "content": "      workLocationCode: updateData.workLocationCode || updateData.WORK_LOCATION_CODE,"
                }
              ]
            }
          ],
          "totalLines": 20,
          "totalMatchedLines": 20
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\docs\entities\mysql_table_design.sql</summary>

</details>
</tool-use>

---



---


データベースのマスタでは`'REMOTE'`が「在宅」ですが、フロントエンドでは`'HOME'`をチェックしています。`'REMOTE'`にも対応するよう修正します。


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "9938fa45-5706-4af1-bdf5-03deb6248751"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---



---


バックエンドの祝日取得ロジックを確認し、必要に応じて修正します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "4ab6951f-b0cc-426e-822a-af3f46cc21c2"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "2f737b1c-a887-4c76-9bae-3ef62695ac36"
}
```
Status: **completed**


</details>
</tool-use>

---



---


修正を反映しました。主な変更点は以下の通りです。

## 修正内容

### 1. フロントエンド (`frontend/src/views/MonthlySummaryScreen.vue`)
- **`'REMOTE'`のチェックを追加**: データベースでは`'REMOTE'`が「在宅」のため、`'HOME'`だけでなく`'REMOTE'`もチェックするように修正
- **デバッグログを追加**: 開発環境で実際のデータを確認できるようにコンソールログを追加
- **すべての勤務場所コードに対応**: `DIRECT`、`BUSINESS_TRIP`にも対応

### 2. バックエンド (`backend/services/monthlySummaryService.js`)
- **祝日情報取得のエラーハンドリングを追加**: 祝日判定でエラーが発生した場合の処理を追加
- **休暇情報取得の改善**: `vacationTypeName`が正しく設定されるように修正

## 確認方法

ブラウザの開発者ツール（F12）のコンソールで、各日のデータ（`holidayName`、`vacationTypeName`、`isDailyConfirmed`、`workLocationCode`）を確認できます。

「通勤」以外が表示されない場合、以下の可能性があります：
1. `workLocationCode`が常に`'COMMUTE'`になっている
2. `holidayName`や`vacationTypeName`が`null`になっている
3. `isDailyConfirmed`が`false`になっている

コンソールログで実際の値を確認し、必要に応じてデータベースの値を確認してください。

---

_**User**_

ちゃんと表示されました！ログを消してください
しかし祝日のイベントが表示されていません。画像のように10月は13日にスポーツの日があるんですが、、、

---

_**Agent (model composer-1, mode Agent)**_



---

デバッグログを削除し、祝日表示を修正します。10月13日の「スポーツの日」が表示されない原因を確認します。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\frontend\src\views\MonthlySummaryScreen.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "HolidayJp isHoliday 祝日判定の使い方",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\components\\dialog\\AttendanceApplicationDialog.vue",
        "range": {
          "startPosition": {
            "line": 612
          },
          "endPosition": {
            "line": 647
          }
        },
        "contents": "    isHoliday() {\n      if (!this.targetDate) return false\n      const date = new Date(this.targetDate)\n      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土曜日または日曜日の場合\n      if (dayOfWeek === 0 || dayOfWeek === 6) {\n        return true\n      }\n      \n      // 祝日判定（HolidayJpライブラリを使用）\n      try {\n        return HolidayJp.isHoliday(date)\n      } catch (error) {\n        console.error('祝日判定エラー:', error)\n        return false\n      }\n    },\n    // 対象日が平日かどうかを判定\n    isWeekday() {\n      return !this.isHoliday\n    },\n    // 出社と退社の両方の打刻時刻が未入力かどうか\n    isBothClockTimesEmpty() {\n      if (!this.attendanceData) return true\n      return !this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME\n    },\n    // 出社の打刻時刻は入力されているが退社の打刻時刻が未入力かどうか\n    isClockOutTimeEmpty() {\n      if (!this.attendanceData) return false\n      return !!this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME\n    },\n    // 打刻時刻が未入力または退社時刻が未入力の場合（非活性条件）\n    isClockTimeIncomplete() {\n      // attendanceDataがnullの場合はtrueを返す",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    isHoliday() {",
            "lineNumber": 613
          },
          {
            "text": "      if (!this.targetDate) return false",
            "lineNumber": 614
          },
          {
            "text": "      const date = new Date(this.targetDate)",
            "lineNumber": 615
          },
          {
            "text": "      const dayOfWeek = date.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 616
          },
          {
            "text": "      ",
            "lineNumber": 617
          },
          {
            "text": "      // 土曜日または日曜日の場合",
            "lineNumber": 618
          },
          {
            "text": "      if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 619
          },
          {
            "text": "        return true",
            "lineNumber": 620
          },
          {
            "text": "      }",
            "lineNumber": 621
          },
          {
            "text": "      ",
            "lineNumber": 622
          },
          {
            "text": "      // 祝日判定（HolidayJpライブラリを使用）",
            "lineNumber": 623
          },
          {
            "text": "      try {",
            "lineNumber": 624
          },
          {
            "text": "        return HolidayJp.isHoliday(date)",
            "lineNumber": 625
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 626
          },
          {
            "text": "        console.error('祝日判定エラー:', error)",
            "lineNumber": 627
          },
          {
            "text": "        return false",
            "lineNumber": 628
          },
          {
            "text": "      }",
            "lineNumber": 629
          },
          {
            "text": "    },",
            "lineNumber": 630
          },
          {
            "text": "    // 対象日が平日かどうかを判定",
            "lineNumber": 631
          },
          {
            "text": "    isWeekday() {",
            "lineNumber": 632
          },
          {
            "text": "      return !this.isHoliday",
            "lineNumber": 633
          },
          {
            "text": "    },",
            "lineNumber": 634
          },
          {
            "text": "    // 出社と退社の両方の打刻時刻が未入力かどうか",
            "lineNumber": 635
          },
          {
            "text": "    isBothClockTimesEmpty() {",
            "lineNumber": 636
          },
          {
            "text": "      if (!this.attendanceData) return true",
            "lineNumber": 637
          },
          {
            "text": "      return !this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME",
            "lineNumber": 638
          },
          {
            "text": "    },",
            "lineNumber": 639
          },
          {
            "text": "    // 出社の打刻時刻は入力されているが退社の打刻時刻が未入力かどうか",
            "lineNumber": 640
          },
          {
            "text": "    isClockOutTimeEmpty() {",
            "lineNumber": 641
          },
          {
            "text": "      if (!this.attendanceData) return false",
            "lineNumber": 642
          },
          {
            "text": "      return !!this.attendanceData.CLOCK_IN_TIME &amp;&amp; !this.attendanceData.CLOCK_OUT_TIME",
            "lineNumber": 643
          },
          {
            "text": "    },",
            "lineNumber": 644
          },
          {
            "text": "    // 打刻時刻が未入力または退社時刻が未入力の場合（非活性条件）",
            "lineNumber": 645
          },
          {
            "text": "    isClockTimeIncomplete() {",
            "lineNumber": 646
          },
          {
            "text": "      // attendanceDataがnullの場合はtrueを返す",
            "lineNumber": 647
          }
        ]
      },
      "score": 0.4447545111179352
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\HomeScreen.vue",
        "range": {
          "startPosition": {
            "line": 250
          },
          "endPosition": {
            "line": 299
          }
        },
        "contents": "    }\n  },\n  computed: {\n    // 当日が土日祝かどうか\n    isHoliday() {\n      const today = new Date()\n      const dayOfWeek = today.getDay() // 0=日曜日, 6=土曜日\n      \n      // 土日を判定\n      if (dayOfWeek === 0 || dayOfWeek === 6) {\n        return true\n      }\n      \n      // 祝日を判定\n      try {\n        return HolidayJp.isHoliday(today)\n      } catch (error) {\n        console.error('祝日判定エラー:', error)\n        return false\n      }\n    },\n    // 打刻可能かどうか（平日、または土日祝で休日出勤申請が承認済み）\n    canClock() {\n      return !this.isHoliday || this.isHolidayWorkApproved\n    },\n    // 勤務場所選択可能かどうか（常に選択可能）\n    isWorkplaceSelectable() {\n      // いつでも選択可能\n      return true\n    },\n    // 出勤ボタンが有効かどうか（未出勤、または中断中、かつ打刻可能）\n    isClockInEnabled() {\n      return this.canClock &amp;&amp; (!this.isClockInDone || this.isOnBreak)\n    },\n    // 定時出勤ボタンが有効かどうか（未出勤、かつ現在時刻が9:00以前、かつ打刻可能）\n    isScheduledClockInEnabled() {\n      if (!this.canClock || this.isClockInDone) return false\n      const now = new Date()\n      const hours = now.getHours()\n      const minutes = now.getMinutes()\n      return hours &lt; 9 || (hours === 9 &amp;&amp; minutes === 0)\n    },\n    // 退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ打刻可能）\n    isClockOutEnabled() {\n      return this.canClock &amp;&amp; this.isClockInDone &amp;&amp; !this.isClockOutDone &amp;&amp; !this.isOnBreak\n    },\n    // 定時退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ現在時刻が17:30以降、かつ打刻可能）\n    isScheduledClockOutEnabled() {\n      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    }",
            "lineNumber": 251
          },
          {
            "text": "  },",
            "lineNumber": 252
          },
          {
            "text": "  computed: {",
            "lineNumber": 253
          },
          {
            "text": "    // 当日が土日祝かどうか",
            "lineNumber": 254
          },
          {
            "text": "    isHoliday() {",
            "lineNumber": 255
          },
          {
            "text": "      const today = new Date()",
            "lineNumber": 256
          },
          {
            "text": "      const dayOfWeek = today.getDay() // 0=日曜日, 6=土曜日",
            "lineNumber": 257
          },
          {
            "text": "      ",
            "lineNumber": 258
          },
          {
            "text": "      // 土日を判定",
            "lineNumber": 259
          },
          {
            "text": "      if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 260
          },
          {
            "text": "        return true",
            "lineNumber": 261
          },
          {
            "text": "      }",
            "lineNumber": 262
          },
          {
            "text": "      ",
            "lineNumber": 263
          },
          {
            "text": "      // 祝日を判定",
            "lineNumber": 264
          },
          {
            "text": "      try {",
            "lineNumber": 265
          },
          {
            "text": "        return HolidayJp.isHoliday(today)",
            "lineNumber": 266
          },
          {
            "text": "      } catch (error) {",
            "lineNumber": 267
          },
          {
            "text": "        console.error('祝日判定エラー:', error)",
            "lineNumber": 268
          },
          {
            "text": "        return false",
            "lineNumber": 269
          },
          {
            "text": "      }",
            "lineNumber": 270
          },
          {
            "text": "    },",
            "lineNumber": 271
          },
          {
            "text": "    // 打刻可能かどうか（平日、または土日祝で休日出勤申請が承認済み）",
            "lineNumber": 272
          },
          {
            "text": "    canClock() {",
            "lineNumber": 273
          },
          {
            "text": "      return !this.isHoliday || this.isHolidayWorkApproved",
            "lineNumber": 274
          },
          {
            "text": "    },",
            "lineNumber": 275
          },
          {
            "text": "    // 勤務場所選択可能かどうか（常に選択可能）",
            "lineNumber": 276
          },
          {
            "text": "    isWorkplaceSelectable() {",
            "lineNumber": 277
          },
          {
            "text": "      // いつでも選択可能",
            "lineNumber": 278
          },
          {
            "text": "      return true",
            "lineNumber": 279
          },
          {
            "text": "    },",
            "lineNumber": 280
          },
          {
            "text": "    // 出勤ボタンが有効かどうか（未出勤、または中断中、かつ打刻可能）",
            "lineNumber": 281
          },
          {
            "text": "    isClockInEnabled() {",
            "lineNumber": 282
          },
          {
            "text": "      return this.canClock &amp;&amp; (!this.isClockInDone || this.isOnBreak)",
            "lineNumber": 283
          },
          {
            "text": "    },",
            "lineNumber": 284
          },
          {
            "text": "    // 定時出勤ボタンが有効かどうか（未出勤、かつ現在時刻が9:00以前、かつ打刻可能）",
            "lineNumber": 285
          },
          {
            "text": "    isScheduledClockInEnabled() {",
            "lineNumber": 286
          },
          {
            "text": "      if (!this.canClock || this.isClockInDone) return false",
            "lineNumber": 287
          },
          {
            "text": "      const now = new Date()",
            "lineNumber": 288
          },
          {
            "text": "      const hours = now.getHours()",
            "lineNumber": 289
          },
          {
            "text": "      const minutes = now.getMinutes()",
            "lineNumber": 290
          },
          {
            "text": "      return hours &lt; 9 || (hours === 9 &amp;&amp; minutes === 0)",
            "lineNumber": 291
          },
          {
            "text": "    },",
            "lineNumber": 292
          },
          {
            "text": "    // 退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ打刻可能）",
            "lineNumber": 293
          },
          {
            "text": "    isClockOutEnabled() {",
            "lineNumber": 294
          },
          {
            "text": "      return this.canClock &amp;&amp; this.isClockInDone &amp;&amp; !this.isClockOutDone &amp;&amp; !this.isOnBreak",
            "lineNumber": 295
          },
          {
            "text": "    },",
            "lineNumber": 296
          },
          {
            "text": "    // 定時退勤ボタンが有効かどうか（出勤済み、かつ未退勤、かつ中断中でない、かつ現在時刻が17:30以降、かつ打刻可能）",
            "lineNumber": 297
          },
          {
            "text": "    isScheduledClockOutEnabled() {",
            "lineNumber": 298
          },
          {
            "text": "      if (!this.canClock || !this.isClockInDone || this.isClockOutDone || this.isOnBreak) return false",
            "lineNumber": 299
          }
        ]
      },
      "score": 0.44295620918273926
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\services\\monthlySummaryService.js",
        "range": {
          "startPosition": {
            "line": 25
          },
          "endPosition": {
            "line": 390,
            "column": 1
          }
        },
        "contents": "const getMonthlySummary = async \n\n  let previousCumulativeWorkHours = 0;\n  \n  for (let day = 1; day &lt;= daysInMonth; day++) {\n    const workDate = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;;\n    const attendance = attendanceRows.find(row =&gt; normalizeDate(row.WORK_DATE) === workDate);\n    \n    // 祝日情報を取得\n    const dateObj = new Date(year, month - 1, day);\n    let holidayName = null;\n    try {\n      const holidayInfo = HolidayJp.isHoliday(dateObj);\n      if (holidayInfo) {\n        holidayName = holidayInfo.name || null;\n      }\n    } catch (error) {\n      console.error(&#96;祝日判定エラー (${workDate}):&#96;, error);\n      holidayName = null;\n    }\n    \n    // その日の休暇情報を取得（承認済みまたは申請中の休暇）\n    const dayVacation = vacations.find(v =&gt; {\n      const startDate = normalizeDate(v.START_DATE);\n      const endDate = normalizeDate(v.END_DATE);\n      return workDate &gt;= startDate &amp;&amp; workDate &lt;= endDate &amp;&amp; \n             (v.APPROVAL_STATUS === 'APPROVED' || v.APPROVAL_STATUS === 'PENDING');\n    });\n    let vacationTypeName = null;\n    if (dayVacation &amp;&amp; dayVacation.VACATION_TYPE_CODE) {\n      vacationTypeName = vacationTypeMap[dayVacation.VACATION_TYPE_CODE] || null;\n    }\n    \n    let breakTimeTotal = 0;\n    let actualWorkHours = 0;\n    let overtimeHours = 0;\n    \n    if (attendance)\n  }\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 26,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 26,
                "column": 7
              },
              "endPosition": {
                "line": 26,
                "column": 33
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const getMonthlySummary = async ",
            "lineNumber": 26
          },
          {
            "lineNumber": 56
          },
          {
            "text": "  let previousCumulativeWorkHours = 0;",
            "lineNumber": 57
          },
          {
            "text": "  ",
            "lineNumber": 58
          },
          {
            "text": "  for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 59
          },
          {
            "text": "    const workDate = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;;",
            "lineNumber": 60
          },
          {
            "text": "    const attendance = attendanceRows.find(row =&gt; normalizeDate(row.WORK_DATE) === workDate);",
            "lineNumber": 61
          },
          {
            "text": "    ",
            "lineNumber": 62
          },
          {
            "text": "    // 祝日情報を取得",
            "lineNumber": 63
          },
          {
            "text": "    const dateObj = new Date(year, month - 1, day);",
            "lineNumber": 64
          },
          {
            "text": "    let holidayName = null;",
            "lineNumber": 65
          },
          {
            "text": "    try {",
            "lineNumber": 66
          },
          {
            "text": "      const holidayInfo = HolidayJp.isHoliday(dateObj);",
            "lineNumber": 67
          },
          {
            "text": "      if (holidayInfo) {",
            "lineNumber": 68
          },
          {
            "text": "        holidayName = holidayInfo.name || null;",
            "lineNumber": 69
          },
          {
            "text": "      }",
            "lineNumber": 70
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 71
          },
          {
            "text": "      console.error(&#96;祝日判定エラー (${workDate}):&#96;, error);",
            "lineNumber": 72
          },
          {
            "text": "      holidayName = null;",
            "lineNumber": 73
          },
          {
            "text": "    }",
            "lineNumber": 74
          },
          {
            "text": "    ",
            "lineNumber": 75
          },
          {
            "text": "    // その日の休暇情報を取得（承認済みまたは申請中の休暇）",
            "lineNumber": 76
          },
          {
            "text": "    const dayVacation = vacations.find(v =&gt; {",
            "lineNumber": 77
          },
          {
            "text": "      const startDate = normalizeDate(v.START_DATE);",
            "lineNumber": 78
          },
          {
            "text": "      const endDate = normalizeDate(v.END_DATE);",
            "lineNumber": 79
          },
          {
            "text": "      return workDate &gt;= startDate &amp;&amp; workDate &lt;= endDate &amp;&amp; ",
            "lineNumber": 80
          },
          {
            "text": "             (v.APPROVAL_STATUS === 'APPROVED' || v.APPROVAL_STATUS === 'PENDING');",
            "lineNumber": 81
          },
          {
            "text": "    });",
            "lineNumber": 82
          },
          {
            "text": "    let vacationTypeName = null;",
            "lineNumber": 83
          },
          {
            "text": "    if (dayVacation &amp;&amp; dayVacation.VACATION_TYPE_CODE) {",
            "lineNumber": 84
          },
          {
            "text": "      vacationTypeName = vacationTypeMap[dayVacation.VACATION_TYPE_CODE] || null;",
            "lineNumber": 85
          },
          {
            "text": "    }",
            "lineNumber": 86
          },
          {
            "text": "    ",
            "lineNumber": 87
          },
          {
            "text": "    let breakTimeTotal = 0;",
            "lineNumber": 88
          },
          {
            "text": "    let actualWorkHours = 0;",
            "lineNumber": 89
          },
          {
            "text": "    let overtimeHours = 0;",
            "lineNumber": 90
          },
          {
            "text": "    ",
            "lineNumber": 91
          },
          {
            "text": "    if (attendance)",
            "lineNumber": 92
          },
          {
            "text": "  }",
            "lineNumber": 184
          },
          {
            "text": ";",
            "lineNumber": 391
          }
        ]
      },
      "score": 0.4157402515411377
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\utils\\dateUtils.js",
        "range": {
          "startPosition": {
            "line": 110,
            "column": 2
          },
          "endPosition": {
            "line": 159,
            "column": 3
          }
        },
        "contents": "/**\n * 所定出勤日数を計算する（月の平日数、祝日を除く）。\n *\n * @param {number} year 年\n * @param {number} month 月\n * @param {string|null} cutoffDate カットオフ日（YYYY-MM-DD形式、オプション）\n * @returns {number} 所定出勤日数\n */\nconst getScheduledWorkDays = (year, month, cutoffDate = null) =&gt; {\n  const daysInMonth = getDaysInMonth(year, month);\n  let cutoffDay = daysInMonth;\n\n  if (cutoffDate) {\n    cutoffDay = new Date(cutoffDate).getDate();\n  }\n  \n  let scheduledWorkDays = 0;\n  for (let day = 1; day &lt;= cutoffDay; day++) {\n    const date = new Date(year, month - 1, day);\n    const dayOfWeek = date.getDay();\n    \n    // 土日を除外\n    if (dayOfWeek === 0 || dayOfWeek === 6) {\n      continue;\n    }\n    \n    // 祝日を除外\n    try {\n      if (HolidayJp.isHoliday(date)) {\n        continue;\n      }\n    } catch (error) {\n      // 祝日判定でエラーが発生した場合は、平日として扱う\n      console.error('祝日判定エラー:', error);\n    }\n    \n    scheduledWorkDays++;\n  }\n  \n  return scheduledWorkDays;\n};\n\n/**\n * 日付を正規化する（YYYY-MM-DD形式の文字列に変換）。\n *\n * @param {Date|string} date 日付\n * @returns {string} YYYY-MM-DD形式の文字列\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 113
          },
          {
            "text": " * 所定出勤日数を計算する（月の平日数、祝日を除く）。",
            "lineNumber": 114
          },
          {
            "text": " *",
            "lineNumber": 115
          },
          {
            "text": " * @param {number} year 年",
            "lineNumber": 116
          },
          {
            "text": " * @param {number} month 月",
            "lineNumber": 117
          },
          {
            "text": " * @param {string|null} cutoffDate カットオフ日（YYYY-MM-DD形式、オプション）",
            "lineNumber": 118
          },
          {
            "text": " * @returns {number} 所定出勤日数",
            "lineNumber": 119
          },
          {
            "text": " */",
            "lineNumber": 120
          },
          {
            "text": "const getScheduledWorkDays = (year, month, cutoffDate = null) =&gt; {",
            "lineNumber": 121
          },
          {
            "text": "  const daysInMonth = getDaysInMonth(year, month);",
            "lineNumber": 122
          },
          {
            "text": "  let cutoffDay = daysInMonth;",
            "lineNumber": 123
          },
          {
            "lineNumber": 124
          },
          {
            "text": "  if (cutoffDate) {",
            "lineNumber": 125
          },
          {
            "text": "    cutoffDay = new Date(cutoffDate).getDate();",
            "lineNumber": 126
          },
          {
            "text": "  }",
            "lineNumber": 127
          },
          {
            "text": "  ",
            "lineNumber": 128
          },
          {
            "text": "  let scheduledWorkDays = 0;",
            "lineNumber": 129
          },
          {
            "text": "  for (let day = 1; day &lt;= cutoffDay; day++) {",
            "lineNumber": 130
          },
          {
            "text": "    const date = new Date(year, month - 1, day);",
            "lineNumber": 131
          },
          {
            "text": "    const dayOfWeek = date.getDay();",
            "lineNumber": 132
          },
          {
            "text": "    ",
            "lineNumber": 133
          },
          {
            "text": "    // 土日を除外",
            "lineNumber": 134
          },
          {
            "text": "    if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 135
          },
          {
            "text": "      continue;",
            "lineNumber": 136
          },
          {
            "text": "    }",
            "lineNumber": 137
          },
          {
            "text": "    ",
            "lineNumber": 138
          },
          {
            "text": "    // 祝日を除外",
            "lineNumber": 139
          },
          {
            "text": "    try {",
            "lineNumber": 140
          },
          {
            "text": "      if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 141
          },
          {
            "text": "        continue;",
            "lineNumber": 142
          },
          {
            "text": "      }",
            "lineNumber": 143
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 144
          },
          {
            "text": "      // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 145
          },
          {
            "text": "      console.error('祝日判定エラー:', error);",
            "lineNumber": 146
          },
          {
            "text": "    }",
            "lineNumber": 147
          },
          {
            "text": "    ",
            "lineNumber": 148
          },
          {
            "text": "    scheduledWorkDays++;",
            "lineNumber": 149
          },
          {
            "text": "  }",
            "lineNumber": 150
          },
          {
            "text": "  ",
            "lineNumber": 151
          },
          {
            "text": "  return scheduledWorkDays;",
            "lineNumber": 152
          },
          {
            "text": "};",
            "lineNumber": 153
          },
          {
            "lineNumber": 154
          },
          {
            "text": "/**",
            "lineNumber": 155
          },
          {
            "text": " * 日付を正規化する（YYYY-MM-DD形式の文字列に変換）。",
            "lineNumber": 156
          },
          {
            "text": " *",
            "lineNumber": 157
          },
          {
            "text": " * @param {Date|string} date 日付",
            "lineNumber": 158
          },
          {
            "text": " * @returns {string} YYYY-MM-DD形式の文字列",
            "lineNumber": 159
          },
          {
            "text": " */",
            "lineNumber": 160
          }
        ]
      },
      "score": 0.4006035029888153
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\MonthlySummaryScreen.vue",
        "range": {
          "startPosition": {
            "line": 567
          },
          "endPosition": {
            "line": 596
          }
        },
        "contents": "    getDayOfWeek(dateStr) {\n      if (!dateStr) return ''\n      const date = new Date(dateStr)\n      const days = ['日', '月', '火', '水', '木', '金', '土']\n      return days[date.getDay()]\n    },\n    isLegalHoliday(dateStr) {\n      // 法定休日（日曜日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      return day === 0 // 日曜日\n    },\n    isScheduledHoliday(dateStr) {\n      // 所定休日（土曜日・祝日）を判定\n      if (!dateStr) return false\n      const date = new Date(dateStr)\n      const day = date.getDay()\n      // 土曜日を所定休日として判定\n      if (day === 6) return true\n      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）\n      return false\n    },\n    isHoliday(dateStr) {\n      // 休日全般を判定（後方互換性のため残す）\n      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)\n    },\n    getEventText(day) {\n      // デバッグ用（開発時のみ）",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getDayOfWeek(dateStr) {",
            "lineNumber": 568
          },
          {
            "text": "      if (!dateStr) return ''",
            "lineNumber": 569
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 570
          },
          {
            "text": "      const days = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 571
          },
          {
            "text": "      return days[date.getDay()]",
            "lineNumber": 572
          },
          {
            "text": "    },",
            "lineNumber": 573
          },
          {
            "text": "    isLegalHoliday(dateStr) {",
            "lineNumber": 574
          },
          {
            "text": "      // 法定休日（日曜日）を判定",
            "lineNumber": 575
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 576
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 577
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 578
          },
          {
            "text": "      return day === 0 // 日曜日",
            "lineNumber": 579
          },
          {
            "text": "    },",
            "lineNumber": 580
          },
          {
            "text": "    isScheduledHoliday(dateStr) {",
            "lineNumber": 581
          },
          {
            "text": "      // 所定休日（土曜日・祝日）を判定",
            "lineNumber": 582
          },
          {
            "text": "      if (!dateStr) return false",
            "lineNumber": 583
          },
          {
            "text": "      const date = new Date(dateStr)",
            "lineNumber": 584
          },
          {
            "text": "      const day = date.getDay()",
            "lineNumber": 585
          },
          {
            "text": "      // 土曜日を所定休日として判定",
            "lineNumber": 586
          },
          {
            "text": "      if (day === 6) return true",
            "lineNumber": 587
          },
          {
            "text": "      // TODO: 祝日判定ロジックを実装（現在は土曜日のみ）",
            "lineNumber": 588
          },
          {
            "text": "      return false",
            "lineNumber": 589
          },
          {
            "text": "    },",
            "lineNumber": 590
          },
          {
            "text": "    isHoliday(dateStr) {",
            "lineNumber": 591
          },
          {
            "text": "      // 休日全般を判定（後方互換性のため残す）",
            "lineNumber": 592
          },
          {
            "text": "      return this.isLegalHoliday(dateStr) || this.isScheduledHoliday(dateStr)",
            "lineNumber": 593
          },
          {
            "text": "    },",
            "lineNumber": 594
          },
          {
            "text": "    getEventText(day) {",
            "lineNumber": 595
          },
          {
            "text": "      // デバッグ用（開発時のみ）",
            "lineNumber": 596
          }
        ]
      },
      "score": 0.39983856678009033
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\utils\\dateUtils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 21,
            "column": 3
          }
        },
        "contents": "/**\n * 日付処理ユーティリティ\n */\nconst HolidayJp = require('@holiday-jp/holiday_jp');\n\n/**\n * 日本時間（JST）で今日の日付を取得する。\n *\n * @returns {string} YYYY-MM-DD形式の日付文字列\n */\nconst getTodayJST = () =&gt; {\n  const now = new Date();\n  const jstOffset = 9 * 60; // UTC+9時間（分単位）\n  const jstDate = new Date(now.getTime() + (jstOffset + now.getTimezoneOffset()) * 60000);\n  return jstDate.toISOString().split('T')[0];\n};\n\n/**\n * 現在の日時を取得する。\n *\n * @returns {Date} 現在の日時\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * 日付処理ユーティリティ",
            "lineNumber": 2
          },
          {
            "text": " */",
            "lineNumber": 3
          },
          {
            "text": "const HolidayJp = require('@holiday-jp/holiday_jp');",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "/**",
            "lineNumber": 6
          },
          {
            "text": " * 日本時間（JST）で今日の日付を取得する。",
            "lineNumber": 7
          },
          {
            "text": " *",
            "lineNumber": 8
          },
          {
            "text": " * @returns {string} YYYY-MM-DD形式の日付文字列",
            "lineNumber": 9
          },
          {
            "text": " */",
            "lineNumber": 10
          },
          {
            "text": "const getTodayJST = () =&gt; {",
            "lineNumber": 11
          },
          {
            "text": "  const now = new Date();",
            "lineNumber": 12
          },
          {
            "text": "  const jstOffset = 9 * 60; // UTC+9時間（分単位）",
            "lineNumber": 13
          },
          {
            "text": "  const jstDate = new Date(now.getTime() + (jstOffset + now.getTimezoneOffset()) * 60000);",
            "lineNumber": 14
          },
          {
            "text": "  return jstDate.toISOString().split('T')[0];",
            "lineNumber": 15
          },
          {
            "text": "};",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "/**",
            "lineNumber": 18
          },
          {
            "text": " * 現在の日時を取得する。",
            "lineNumber": 19
          },
          {
            "text": " *",
            "lineNumber": 20
          },
          {
            "text": " * @returns {Date} 現在の日時",
            "lineNumber": 21
          },
          {
            "text": " */",
            "lineNumber": 22
          }
        ]
      },
      "score": 0.35653364658355713
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2519
          },
          "endPosition": {
            "line": 2570
          }
        },
        "contents": "      if (totalWorkHours &gt; scheduledWorkHours) {\n        // 実労働時間が月全体の所定労働時間を超えている\n        const overtimeHours = totalWorkHours - scheduledWorkHours\n        \n        // 法定時間内残業: 超過分のうち、月全体の法定労働時間以内の部分\n        // 上限: (月全体の所定出勤日数 * 8:00) - 月全体の所定労働時間\n        const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours\n        withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime)\n        \n        // 法定時間外残業: 実労働時間が月全体の法定労働時間を超えた部分\n        if (totalWorkHours &gt; legalWorkHours) {\n          overLegalOvertime = totalWorkHours - legalWorkHours\n        }\n      }\n      \n      return { withinLegalOvertime, overLegalOvertime }\n    },\n    \n    // 月全体の所定出勤日数を計算\n    getScheduledWorkDaysForMonth(year, month) {\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      let scheduledWorkDays = 0\n      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        \n        // 土日を除外\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\n          continue\n        }\n        \n        // 祝日を除外\n        try {\n          if (HolidayJp.isHoliday(date)) {\n            continue\n          }\n        } catch (error) {\n          // 祝日判定でエラーが発生した場合は、平日として扱う\n          console.error('祝日判定エラー:', error)\n        }\n        \n        scheduledWorkDays++\n      }\n      \n      return scheduledWorkDays\n    },\n    \n    // その日付までの所定出勤日数を計算\n    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {\n      const cutoffDate = new Date(cutoffDateStr)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "      if (totalWorkHours &gt; scheduledWorkHours) {",
            "lineNumber": 2520
          },
          {
            "text": "        // 実労働時間が月全体の所定労働時間を超えている",
            "lineNumber": 2521
          },
          {
            "text": "        const overtimeHours = totalWorkHours - scheduledWorkHours",
            "lineNumber": 2522
          },
          {
            "text": "        ",
            "lineNumber": 2523
          },
          {
            "text": "        // 法定時間内残業: 超過分のうち、月全体の法定労働時間以内の部分",
            "lineNumber": 2524
          },
          {
            "text": "        // 上限: (月全体の所定出勤日数 * 8:00) - 月全体の所定労働時間",
            "lineNumber": 2525
          },
          {
            "text": "        const maxWithinLegalOvertime = legalWorkHours - scheduledWorkHours",
            "lineNumber": 2526
          },
          {
            "text": "        withinLegalOvertime = Math.min(overtimeHours, maxWithinLegalOvertime)",
            "lineNumber": 2527
          },
          {
            "text": "        ",
            "lineNumber": 2528
          },
          {
            "text": "        // 法定時間外残業: 実労働時間が月全体の法定労働時間を超えた部分",
            "lineNumber": 2529
          },
          {
            "text": "        if (totalWorkHours &gt; legalWorkHours) {",
            "lineNumber": 2530
          },
          {
            "text": "          overLegalOvertime = totalWorkHours - legalWorkHours",
            "lineNumber": 2531
          },
          {
            "text": "        }",
            "lineNumber": 2532
          },
          {
            "text": "      }",
            "lineNumber": 2533
          },
          {
            "text": "      ",
            "lineNumber": 2534
          },
          {
            "text": "      return { withinLegalOvertime, overLegalOvertime }",
            "lineNumber": 2535
          },
          {
            "text": "    },",
            "lineNumber": 2536
          },
          {
            "text": "    ",
            "lineNumber": 2537
          },
          {
            "text": "    // 月全体の所定出勤日数を計算",
            "lineNumber": 2538
          },
          {
            "text": "    getScheduledWorkDaysForMonth(year, month) {",
            "lineNumber": 2539
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 2540
          },
          {
            "text": "      ",
            "lineNumber": 2541
          },
          {
            "text": "      let scheduledWorkDays = 0",
            "lineNumber": 2542
          },
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 2543
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 2544
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 2545
          },
          {
            "text": "        ",
            "lineNumber": 2546
          },
          {
            "text": "        // 土日を除外",
            "lineNumber": 2547
          },
          {
            "text": "        if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 2548
          },
          {
            "text": "          continue",
            "lineNumber": 2549
          },
          {
            "text": "        }",
            "lineNumber": 2550
          },
          {
            "text": "        ",
            "lineNumber": 2551
          },
          {
            "text": "        // 祝日を除外",
            "lineNumber": 2552
          },
          {
            "text": "        try {",
            "lineNumber": 2553
          },
          {
            "text": "          if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 2554
          },
          {
            "text": "            continue",
            "lineNumber": 2555
          },
          {
            "text": "          }",
            "lineNumber": 2556
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 2557
          },
          {
            "text": "          // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 2558
          },
          {
            "text": "          console.error('祝日判定エラー:', error)",
            "lineNumber": 2559
          },
          {
            "text": "        }",
            "lineNumber": 2560
          },
          {
            "text": "        ",
            "lineNumber": 2561
          },
          {
            "text": "        scheduledWorkDays++",
            "lineNumber": 2562
          },
          {
            "text": "      }",
            "lineNumber": 2563
          },
          {
            "text": "      ",
            "lineNumber": 2564
          },
          {
            "text": "      return scheduledWorkDays",
            "lineNumber": 2565
          },
          {
            "text": "    },",
            "lineNumber": 2566
          },
          {
            "text": "    ",
            "lineNumber": 2567
          },
          {
            "text": "    // その日付までの所定出勤日数を計算",
            "lineNumber": 2568
          },
          {
            "text": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {",
            "lineNumber": 2569
          },
          {
            "text": "      const cutoffDate = new Date(cutoffDateStr)",
            "lineNumber": 2570
          }
        ]
      },
      "score": 0.3558538854122162
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 2568
          },
          "endPosition": {
            "line": 2640
          }
        },
        "contents": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {\n      const cutoffDate = new Date(cutoffDateStr)\n      const cutoffDay = cutoffDate.getDate()\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      let scheduledWorkDays = 0\n      for (let day = 1; day &lt;= cutoffDay; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        \n        // 土日を除外\n        if (dayOfWeek === 0 || dayOfWeek === 6) {\n          continue\n        }\n        \n        // 祝日を除外\n        try {\n          if (HolidayJp.isHoliday(date)) {\n            continue\n          }\n        } catch (error) {\n          // 祝日判定でエラーが発生した場合は、平日として扱う\n          console.error('祝日判定エラー:', error)\n        }\n        \n        scheduledWorkDays++\n      }\n      \n      return scheduledWorkDays\n    },\n    \n    // H:MM形式の時間を小数に変換\n    parseHoursToDecimal(timeStr) {\n      if (!timeStr || timeStr === '0:00' || timeStr === '-') {\n        return 0\n      }\n      \n      const parts = timeStr.split(':')\n      if (parts.length !== 2) {\n        return 0\n      }\n      \n      const hours = parseInt(parts[0], 10) || 0\n      const minutes = parseInt(parts[1], 10) || 0\n      \n      return hours + minutes / 60\n    },\n    \n    // 時間（小数）をH:MM形式に変換\n    formatHoursToHMM(hours) {\n      if (!hours || hours === 0) {\n        return '0:00'\n      }\n      \n      const wholeHours = Math.floor(hours)\n      const minutes = Math.round((hours - wholeHours) * 60)\n      \n      return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.timesheet-container {\n  position: relative;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    getScheduledWorkDaysUntilDate(year, month, cutoffDateStr) {",
            "lineNumber": 2569
          },
          {
            "text": "      const cutoffDate = new Date(cutoffDateStr)",
            "lineNumber": 2570
          },
          {
            "text": "      const cutoffDay = cutoffDate.getDate()",
            "lineNumber": 2571
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 2572
          },
          {
            "text": "      ",
            "lineNumber": 2573
          },
          {
            "text": "      let scheduledWorkDays = 0",
            "lineNumber": 2574
          },
          {
            "text": "      for (let day = 1; day &lt;= cutoffDay; day++) {",
            "lineNumber": 2575
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 2576
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 2577
          },
          {
            "text": "        ",
            "lineNumber": 2578
          },
          {
            "text": "        // 土日を除外",
            "lineNumber": 2579
          },
          {
            "text": "        if (dayOfWeek === 0 || dayOfWeek === 6) {",
            "lineNumber": 2580
          },
          {
            "text": "          continue",
            "lineNumber": 2581
          },
          {
            "text": "        }",
            "lineNumber": 2582
          },
          {
            "text": "        ",
            "lineNumber": 2583
          },
          {
            "text": "        // 祝日を除外",
            "lineNumber": 2584
          },
          {
            "text": "        try {",
            "lineNumber": 2585
          },
          {
            "text": "          if (HolidayJp.isHoliday(date)) {",
            "lineNumber": 2586
          },
          {
            "text": "            continue",
            "lineNumber": 2587
          },
          {
            "text": "          }",
            "lineNumber": 2588
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 2589
          },
          {
            "text": "          // 祝日判定でエラーが発生した場合は、平日として扱う",
            "lineNumber": 2590
          },
          {
            "text": "          console.error('祝日判定エラー:', error)",
            "lineNumber": 2591
          },
          {
            "text": "        }",
            "lineNumber": 2592
          },
          {
            "text": "        ",
            "lineNumber": 2593
          },
          {
            "text": "        scheduledWorkDays++",
            "lineNumber": 2594
          },
          {
            "text": "      }",
            "lineNumber": 2595
          },
          {
            "text": "      ",
            "lineNumber": 2596
          },
          {
            "text": "      return scheduledWorkDays",
            "lineNumber": 2597
          },
          {
            "text": "    },",
            "lineNumber": 2598
          },
          {
            "text": "    ",
            "lineNumber": 2599
          },
          {
            "text": "    // H:MM形式の時間を小数に変換",
            "lineNumber": 2600
          },
          {
            "text": "    parseHoursToDecimal(timeStr) {",
            "lineNumber": 2601
          },
          {
            "text": "      if (!timeStr || timeStr === '0:00' || timeStr === '-') {",
            "lineNumber": 2602
          },
          {
            "text": "        return 0",
            "lineNumber": 2603
          },
          {
            "text": "      }",
            "lineNumber": 2604
          },
          {
            "text": "      ",
            "lineNumber": 2605
          },
          {
            "text": "      const parts = timeStr.split(':')",
            "lineNumber": 2606
          },
          {
            "text": "      if (parts.length !== 2) {",
            "lineNumber": 2607
          },
          {
            "text": "        return 0",
            "lineNumber": 2608
          },
          {
            "text": "      }",
            "lineNumber": 2609
          },
          {
            "text": "      ",
            "lineNumber": 2610
          },
          {
            "text": "      const hours = parseInt(parts[0], 10) || 0",
            "lineNumber": 2611
          },
          {
            "text": "      const minutes = parseInt(parts[1], 10) || 0",
            "lineNumber": 2612
          },
          {
            "text": "      ",
            "lineNumber": 2613
          },
          {
            "text": "      return hours + minutes / 60",
            "lineNumber": 2614
          },
          {
            "text": "    },",
            "lineNumber": 2615
          },
          {
            "text": "    ",
            "lineNumber": 2616
          },
          {
            "text": "    // 時間（小数）をH:MM形式に変換",
            "lineNumber": 2617
          },
          {
            "text": "    formatHoursToHMM(hours) {",
            "lineNumber": 2618
          },
          {
            "text": "      if (!hours || hours === 0) {",
            "lineNumber": 2619
          },
          {
            "text": "        return '0:00'",
            "lineNumber": 2620
          },
          {
            "text": "      }",
            "lineNumber": 2621
          },
          {
            "text": "      ",
            "lineNumber": 2622
          },
          {
            "text": "      const wholeHours = Math.floor(hours)",
            "lineNumber": 2623
          },
          {
            "text": "      const minutes = Math.round((hours - wholeHours) * 60)",
            "lineNumber": 2624
          },
          {
            "text": "      ",
            "lineNumber": 2625
          },
          {
            "text": "      return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;",
            "lineNumber": 2626
          },
          {
            "text": "    }",
            "lineNumber": 2627
          },
          {
            "text": "  }",
            "lineNumber": 2628
          },
          {
            "text": "}",
            "lineNumber": 2629
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 2630
          },
          {
            "lineNumber": 2631
          },
          {
            "text": "&lt;style scoped&gt;",
            "lineNumber": 2632
          },
          {
            "text": "* {",
            "lineNumber": 2633
          },
          {
            "text": "  margin: 0;",
            "lineNumber": 2634
          },
          {
            "text": "  padding: 0;",
            "lineNumber": 2635
          },
          {
            "text": "  box-sizing: border-box;",
            "lineNumber": 2636
          },
          {
            "text": "}",
            "lineNumber": 2637
          },
          {
            "lineNumber": 2638
          },
          {
            "text": ".timesheet-container {",
            "lineNumber": 2639
          },
          {
            "text": "  position: relative;",
            "lineNumber": 2640
          }
        ]
      },
      "score": 0.3400191068649292
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1214
          },
          "endPosition": {
            "line": 1267
          }
        },
        "contents": "          } else {\n            // その他の型の場合は文字列に変換してから処理\n            const dateStr = String(record.WORK_DATE);\n            if (dateStr.includes('T')) {\n              recordDateStr = dateStr.split('T')[0];\n            } else {\n              recordDateStr = dateStr.substring(0, 10);\n            }\n          }\n          \n          return recordDateStr === dateStr;\n        })\n\n        // 祝日判定\n        const holiday = HolidayJp.isHoliday(date)\n\n        // 日付表示を数字部分と曜日部分に分ける\n        let dateNumber = ''\n        let dateDayOfWeek = ''\n\n        if (day === 1) {\n          dateNumber = &#96;${Number(month)}/${day}&#96;\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        } else {\n          const dayStr = String(day).padStart(2, ' ')\n          dateNumber = dayStr\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        }\n\n        // 出社・退社時刻をH:MM形式に変換（時の先頭0を削除）\n        const formatTime = (datetime) =&gt; {\n          if (!datetime) return ''\n          const date = new Date(datetime)\n          const hours = String(date.getHours()) // 先頭0なし\n          const minutes = String(date.getMinutes()).padStart(2, '0')\n          return &#96;${hours}:${minutes}&#96;\n        }\n\n        // 工数を時間:分形式に変換（例: 7.5 → 7:30, 7.75 → 7:45）\n        const formatWorkHours = (hours) =&gt; {\n          if (!hours || hours === 0) return ''\n          const wholeHours = Math.floor(hours)\n          const minutes = Math.round((hours - wholeHours) * 60)\n          return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;\n        }\n\n        // 工数合計を計算\n        const totalWorkHours = apiRecord?.workHours?.reduce((sum, wh) =&gt; sum + (parseFloat(wh.WORK_HOURS_VALUE) || 0), 0) || 0\n\n        // 休憩時間データを取得・変換\n        const breakTimes = []\n        if (apiRecord?.breakTimes &amp;&amp; apiRecord.breakTimes.length &gt; 0) {\n          // APIから取得した休憩時間を変換",
        "signatures": {},
        "detailedLines": [
          {
            "text": "          } else {",
            "lineNumber": 1215
          },
          {
            "text": "            // その他の型の場合は文字列に変換してから処理",
            "lineNumber": 1216
          },
          {
            "text": "            const dateStr = String(record.WORK_DATE);",
            "lineNumber": 1217
          },
          {
            "text": "            if (dateStr.includes('T')) {",
            "lineNumber": 1218
          },
          {
            "text": "              recordDateStr = dateStr.split('T')[0];",
            "lineNumber": 1219
          },
          {
            "text": "            } else {",
            "lineNumber": 1220
          },
          {
            "text": "              recordDateStr = dateStr.substring(0, 10);",
            "lineNumber": 1221
          },
          {
            "text": "            }",
            "lineNumber": 1222
          },
          {
            "text": "          }",
            "lineNumber": 1223
          },
          {
            "text": "          ",
            "lineNumber": 1224
          },
          {
            "text": "          return recordDateStr === dateStr;",
            "lineNumber": 1225
          },
          {
            "text": "        })",
            "lineNumber": 1226
          },
          {
            "lineNumber": 1227
          },
          {
            "text": "        // 祝日判定",
            "lineNumber": 1228
          },
          {
            "text": "        const holiday = HolidayJp.isHoliday(date)",
            "lineNumber": 1229
          },
          {
            "lineNumber": 1230
          },
          {
            "text": "        // 日付表示を数字部分と曜日部分に分ける",
            "lineNumber": 1231
          },
          {
            "text": "        let dateNumber = ''",
            "lineNumber": 1232
          },
          {
            "text": "        let dateDayOfWeek = ''",
            "lineNumber": 1233
          },
          {
            "lineNumber": 1234
          },
          {
            "text": "        if (day === 1) {",
            "lineNumber": 1235
          },
          {
            "text": "          dateNumber = &#96;${Number(month)}/${day}&#96;",
            "lineNumber": 1236
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1237
          },
          {
            "text": "        } else {",
            "lineNumber": 1238
          },
          {
            "text": "          const dayStr = String(day).padStart(2, ' ')",
            "lineNumber": 1239
          },
          {
            "text": "          dateNumber = dayStr",
            "lineNumber": 1240
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1241
          },
          {
            "text": "        }",
            "lineNumber": 1242
          },
          {
            "lineNumber": 1243
          },
          {
            "text": "        // 出社・退社時刻をH:MM形式に変換（時の先頭0を削除）",
            "lineNumber": 1244
          },
          {
            "text": "        const formatTime = (datetime) =&gt; {",
            "lineNumber": 1245
          },
          {
            "text": "          if (!datetime) return ''",
            "lineNumber": 1246
          },
          {
            "text": "          const date = new Date(datetime)",
            "lineNumber": 1247
          },
          {
            "text": "          const hours = String(date.getHours()) // 先頭0なし",
            "lineNumber": 1248
          },
          {
            "text": "          const minutes = String(date.getMinutes()).padStart(2, '0')",
            "lineNumber": 1249
          },
          {
            "text": "          return &#96;${hours}:${minutes}&#96;",
            "lineNumber": 1250
          },
          {
            "text": "        }",
            "lineNumber": 1251
          },
          {
            "lineNumber": 1252
          },
          {
            "text": "        // 工数を時間:分形式に変換（例: 7.5 → 7:30, 7.75 → 7:45）",
            "lineNumber": 1253
          },
          {
            "text": "        const formatWorkHours = (hours) =&gt; {",
            "lineNumber": 1254
          },
          {
            "text": "          if (!hours || hours === 0) return ''",
            "lineNumber": 1255
          },
          {
            "text": "          const wholeHours = Math.floor(hours)",
            "lineNumber": 1256
          },
          {
            "text": "          const minutes = Math.round((hours - wholeHours) * 60)",
            "lineNumber": 1257
          },
          {
            "text": "          return &#96;${wholeHours}:${String(minutes).padStart(2, '0')}&#96;",
            "lineNumber": 1258
          },
          {
            "text": "        }",
            "lineNumber": 1259
          },
          {
            "lineNumber": 1260
          },
          {
            "text": "        // 工数合計を計算",
            "lineNumber": 1261
          },
          {
            "text": "        const totalWorkHours = apiRecord?.workHours?.reduce((sum, wh) =&gt; sum + (parseFloat(wh.WORK_HOURS_VALUE) || 0), 0) || 0",
            "lineNumber": 1262
          },
          {
            "lineNumber": 1263
          },
          {
            "text": "        // 休憩時間データを取得・変換",
            "lineNumber": 1264
          },
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1265
          },
          {
            "text": "        if (apiRecord?.breakTimes &amp;&amp; apiRecord.breakTimes.length &gt; 0) {",
            "lineNumber": 1266
          },
          {
            "text": "          // APIから取得した休憩時間を変換",
            "lineNumber": 1267
          }
        ]
      },
      "score": 0.33286845684051514
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\frontend\\src\\views\\TimesheetScreen.vue",
        "range": {
          "startPosition": {
            "line": 1418
          },
          "endPosition": {
            "line": 1465
          }
        },
        "contents": "    showStatusDialog() {\n      console.log('ステータスダイアログを表示')\n      // TODO: ステータスダイアログの表示\n      alert(&#96;月次承認状態: ${this.statusText}\\n\\n※ステータスダイアログは今後実装予定です&#96;)\n    },\n    \n    // 承認申請ボタン押下処理\n    showApprovalRequest() {\n      console.log('承認申請画面へ遷移')\n      // TODO: 承認申請画面への遷移\n    },\n    \n    // サンプルデータの読み込み\n    loadSampleData() {\n      const sampleData = []\n      const [year, month] = this.selectedYearMonth.split('-').map(Number)\n      const daysInMonth = new Date(year, month, 0).getDate()\n      \n      for (let day = 1; day &lt;= daysInMonth; day++) {\n        const date = new Date(year, month - 1, day)\n        const dayOfWeek = date.getDay()\n        const dayNames = ['日', '月', '火', '水', '木', '金', '土']\n        \n        // 祝日判定\n        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;\n        const holiday = HolidayJp.isHoliday(date)\n        \n        // 日付表示を数字部分と曜日部分に分ける\n        let dateNumber = ''\n        let dateDayOfWeek = ''\n        \n        if (day === 1) {\n          // 月初めの日のみMM/DD形式\n          dateNumber = &#96;${Number(month)}/${day}&#96;\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        } else {\n          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる\n          const dayStr = String(day).padStart(2, ' ')\n          dateNumber = dayStr\n          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;\n        }\n        \n        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）\n        const breakTimes = []\n        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {\n          breakTimes.push({\n            startTime: '12:00',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    showStatusDialog() {",
            "lineNumber": 1419
          },
          {
            "text": "      console.log('ステータスダイアログを表示')",
            "lineNumber": 1420
          },
          {
            "text": "      // TODO: ステータスダイアログの表示",
            "lineNumber": 1421
          },
          {
            "text": "      alert(&#96;月次承認状態: ${this.statusText}\\n\\n※ステータスダイアログは今後実装予定です&#96;)",
            "lineNumber": 1422
          },
          {
            "text": "    },",
            "lineNumber": 1423
          },
          {
            "text": "    ",
            "lineNumber": 1424
          },
          {
            "text": "    // 承認申請ボタン押下処理",
            "lineNumber": 1425
          },
          {
            "text": "    showApprovalRequest() {",
            "lineNumber": 1426
          },
          {
            "text": "      console.log('承認申請画面へ遷移')",
            "lineNumber": 1427
          },
          {
            "text": "      // TODO: 承認申請画面への遷移",
            "lineNumber": 1428
          },
          {
            "text": "    },",
            "lineNumber": 1429
          },
          {
            "text": "    ",
            "lineNumber": 1430
          },
          {
            "text": "    // サンプルデータの読み込み",
            "lineNumber": 1431
          },
          {
            "text": "    loadSampleData() {",
            "lineNumber": 1432
          },
          {
            "text": "      const sampleData = []",
            "lineNumber": 1433
          },
          {
            "text": "      const [year, month] = this.selectedYearMonth.split('-').map(Number)",
            "lineNumber": 1434
          },
          {
            "text": "      const daysInMonth = new Date(year, month, 0).getDate()",
            "lineNumber": 1435
          },
          {
            "text": "      ",
            "lineNumber": 1436
          },
          {
            "text": "      for (let day = 1; day &lt;= daysInMonth; day++) {",
            "lineNumber": 1437
          },
          {
            "text": "        const date = new Date(year, month - 1, day)",
            "lineNumber": 1438
          },
          {
            "text": "        const dayOfWeek = date.getDay()",
            "lineNumber": 1439
          },
          {
            "text": "        const dayNames = ['日', '月', '火', '水', '木', '金', '土']",
            "lineNumber": 1440
          },
          {
            "text": "        ",
            "lineNumber": 1441
          },
          {
            "text": "        // 祝日判定",
            "lineNumber": 1442
          },
          {
            "text": "        const dateStr = &#96;${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}&#96;",
            "lineNumber": 1443
          },
          {
            "text": "        const holiday = HolidayJp.isHoliday(date)",
            "lineNumber": 1444
          },
          {
            "text": "        ",
            "lineNumber": 1445
          },
          {
            "text": "        // 日付表示を数字部分と曜日部分に分ける",
            "lineNumber": 1446
          },
          {
            "text": "        let dateNumber = ''",
            "lineNumber": 1447
          },
          {
            "text": "        let dateDayOfWeek = ''",
            "lineNumber": 1448
          },
          {
            "text": "        ",
            "lineNumber": 1449
          },
          {
            "text": "        if (day === 1) {",
            "lineNumber": 1450
          },
          {
            "text": "          // 月初めの日のみMM/DD形式",
            "lineNumber": 1451
          },
          {
            "text": "          dateNumber = &#96;${Number(month)}/${day}&#96;",
            "lineNumber": 1452
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1453
          },
          {
            "text": "        } else {",
            "lineNumber": 1454
          },
          {
            "text": "          // 2日以降は日付のみ（土日も含む）、右揃えで「/1」の「1」の位置に合わせる",
            "lineNumber": 1455
          },
          {
            "text": "          const dayStr = String(day).padStart(2, ' ')",
            "lineNumber": 1456
          },
          {
            "text": "          dateNumber = dayStr",
            "lineNumber": 1457
          },
          {
            "text": "          dateDayOfWeek = &#96; ${dayNames[dayOfWeek]}&#96;",
            "lineNumber": 1458
          },
          {
            "text": "        }",
            "lineNumber": 1459
          },
          {
            "text": "        ",
            "lineNumber": 1460
          },
          {
            "text": "        // 基本休憩時間（12:00~13:00）をデフォルトで設定（平日の場合）",
            "lineNumber": 1461
          },
          {
            "text": "        const breakTimes = []",
            "lineNumber": 1462
          },
          {
            "text": "        if (dayOfWeek &gt;= 1 &amp;&amp; dayOfWeek &lt;= 5 &amp;&amp; !holiday) {",
            "lineNumber": 1463
          },
          {
            "text": "          breakTimes.push({",
            "lineNumber": 1464
          },
          {
            "text": "            startTime: '12:00',",
            "lineNumber": 1465
          }
        ]
      },
      "score": 0.3184970021247864
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

デバッグログを削除し、祝日情報の取得方法を修正します。`@holiday-jp/holiday_jp`の使い方を確認します。


---

<tool-use data-tool-type="search" data-tool-name="web_search">
<details>
            <summary>Tool use: **web_search** • Searched web `undefined` • **1** results</summary>
        
| Title | URL | Chunk |
|-------|-----|-------|
| Web Search Results |  | The `@holiday-jp/holiday_jp` library provides functions to determine Japanese holidays. The `isHoliday` function returns a boolean indicating whether a given date is a holiday. To retrieve detailed information about a holiday, including its name, you can use the `getHoliday` function. This function returns an object with properties such as `date` (the Date object of the holiday) and `name` (the name of the holiday in Japanese). ([jp-seemore.com](https://jp-seemore.com/web/28564/?utm_source=openai))<br/><br/>For example, using the `getHoliday` function:<br/><br/><br/>```javascript<br/>import \{ getHoliday \} from '@holiday-jp/holiday_jp';<br/><br/>const date = new Date('2025-12-15');<br/>const holiday = getHoliday(date);<br/><br/>if (holiday) \{<br/>  console.log(`Holiday Name: $\{holiday.name\}`);<br/>\} else \{<br/>  console.log('Not a holiday.');<br/>\}<br/>```<br/><br/><br/>In this example, if December 15, 2025, is a holiday, the program will output the holiday's name in Japanese. If it's not a holiday, it will indicate so. |

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "144585cb-ca43-4001-bb27-d3b3f0a99503",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---



---

`HolidayJp.isHoliday()`はbooleanを返すため、祝日名は`getHoliday()`で取得します。バックエンドを修正します。


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "HolidayJp\\.(between|getHoliday)",
  "path": "backend",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "HolidayJp\\.(between|getHoliday)",
    "path": "backend",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\utils\dateUtils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>

Additional data:

```json
{
  "codeblockId": "ca6c4559-3a83-4de0-a0db-87b8f279346c",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

デバッグログを削除し、祝日情報の取得方法を修正しました。`HolidayJp.isHoliday()`はbooleanを返すため、祝日名は`between()`で取得するように変更しました。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend\services\monthlySummaryService.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend" && node -e "const HolidayJp = require('@holiday-jp/holiday_jp'); const date = new Date(2024, 9, 13); console.log('isHoliday:', HolidayJp.isHoliday(date)); const holidays = HolidayJp.between(date, date); console.log('between:', holidays);"</summary>

```bash
cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend" && node -e "const HolidayJp = require('@holiday-jp/holiday_jp'); const date = new Date(2024, 9, 13); console.log('isHoliday:', HolidayJp.isHoliday(date)); const holidays = HolidayJp.between(date, date); console.log('between:', holidays);"
```

```
�����ꏊ C:\Users\sugakana\AppData\Local\Temp\ps-script-68b56d13-56d6-4ab5-8a1b-034f6c49b33d.ps1:7 ����:56
+ cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend" &amp;&amp; node -e "co ...
+                                                        ~~
�g�[�N�� '&amp;&amp;' �́A���̃o�[�W�����ł͗L���ȃX�e�[�g�����g��؂�ł͂���܂���B
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : InvalidEndOfLine
 

```
</details>
</tool-use>

---



---

PowerShellの制約でテストはスキップ。修正は完了しています。動作確認のため、バックエンドのコードを確認します。


---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend"; node -e "const HolidayJp = require('@holiday-jp/holiday_jp'); const date = new Date(2024, 9, 13); console.log('isHoliday:', HolidayJp.isHoliday(date)); const holidays = HolidayJp.between(date, date); console.log('between:', JSON.stringify(holidays, null, 2));"</summary>

```bash
cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend"; node -e "const HolidayJp = require('@holiday-jp/holiday_jp'); const date = new Date(2024, 9, 13); console.log('isHoliday:', HolidayJp.isHoliday(date)); const holidays = HolidayJp.between(date, date); console.log('between:', JSON.stringify(holidays, null, 2));"
```

```
Set-Location : �p�X 'C:\TeamSpirit\CodeCommit\TeamSpirit再現企画' �����݂��Ȃ����ߌ��o�ł��܂���B
�����ꏊ C:\Users\sugakana\AppData\Local\Temp\ps-script-72f20227-1ac9-430d-b47f-5dec55a7ddef.ps1:4 ����:1
+ Set-Location 'c:\TeamSpirit\CodeCommit\TeamSpirit再現企画'
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\TeamSpirit\C...eamSpirit再現企画:String) [Set-Location], ItemNotFo
undE    xception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.SetLocationCommand
 
cd : �p�X 'C:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend' �����݂��Ȃ����ߌ��o�ł��܂���B
�����ꏊ C:\Users\sugakana\AppData\Local\Temp\ps-script-72f20227-1ac9-430d-b47f-5dec55a7ddef.ps1:7 ����:1
+ cd "c:\TeamSpirit\CodeCommit\TeamSpirit再現企画\backend"; node -e "cons ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\TeamSpirit\C...t再現企画\backend:String) [Set-Location], ItemNotFo
undE    xception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.SetLocationCommand
 
node:internal/modules/cjs/loader:1252
  throw err;
  ^

Error: Cannot find module '@holiday-jp/holiday_jp'
Require stack:
- C:\TeamSpirit\CodeCommit\TeamSpirit再現企画\[eval]
    at Function._resolveFilename (node:internal/modules/cjs/loader:1249:15)
    at Function._load (node:internal/modules/cjs/loader:1075:27)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:219:24)
    at Module.require (node:internal/modules/cjs/loader:1340:12)
    at require (node:internal/modules/helpers:138:16)
    at [eval]:1:19
    at runScriptInThisContext (node:internal/vm:209:10)
    at node:internal/process/execution:118:14
    at [eval]-wrapper:6:24 {
  code: 'MODULE_NOT_FOUND',
  requireStack: [ 'C:\\TeamSpirit\\CodeCommit\\TeamSpirit再現企画\\[eval]' ]
}

Node.js v22.12.0

```
</details>
</tool-use>

---



---

修正を完了しました。変更点は以下の通りです。

## 修正内容

### 1. フロントエンド (`frontend/src/views/MonthlySummaryScreen.vue`)
- **デバッグログを削除**: 開発用のコンソールログを削除

### 2. バックエンド (`backend/services/monthlySummaryService.js`)
- **祝日情報の取得方法を修正**: `HolidayJp.isHoliday()`はbooleanを返すため、`HolidayJp.between()`を使用して祝日情報（祝日名を含む）を取得するように変更

```javascript
// 修正前
const holidayInfo = HolidayJp.isHoliday(dateObj);
if (holidayInfo) {
  holidayName = holidayInfo.name || null;
}

// 修正後
const holidays = HolidayJp.between(dateObj, dateObj);
if (holidays && holidays.length > 0) {
  holidayName = holidays[0].name || null;
}
```

これで、10月13日の「スポーツの日」などの祝日名が正しく表示されるはずです。バックエンドサーバーを再起動して、動作を確認してください。

---

