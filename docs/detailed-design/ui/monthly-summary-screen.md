# TeamSpirit勤怠管理システム
# 月次サマリー情報画面

## 概要
本画面は、月間の勤務表データを一覧表示し、月次の勤怠サマリー情報を表示する機能です。
勤務表画面から「月次サマリー」リンクを押下することで、新規ウィンドウが開き、そのウィンドウに月次サマリー情報が記載されています。
月間の日次勤務記録（出退勤時刻、休憩時間、実労働時間など）と、月次集計データ（所定出勤日数、実出勤日数、総労働時間、過不足時間など）を表示します。

## 画面レイアウト

### Figmaデザイン

**月次サマリー情報画面のデザイン（Figma）**

https://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=5-1572&t=RqArqbX2wGvNeiKv-4

### 参考HTML

以下のHTMLファイルは参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。

- 月次サマリー情報画面（参考）

![月次サマリー情報画面](../../figma-plugin/figma-json-split/monthly-report/monthly-report-full.html)

## 画面項目定義

| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |
| | <ヘッダー部分> | | | | | | | | | | | |
| 1 | プリンタへ出力ボタン | ボタン | | | | | | | 表示 | 活性 | | 青色のボタン。押下で印刷ダイアログを表示 |
| 2 | 閉じるリンク | リンク | | | | | | | 表示 | 活性 | | 画面を閉じる |
| | <情報ヘッダー部分> | | | | | | | | | | | |
| 3 | 勤務表 | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 固定表示 |
| 4 | ステータス | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のラベル |
| 5 | 対象年月 | 出力 | | 文字 | | | | YYYY年MM月 | 表示 | 活性 | | 表示対象の年月（例: 2025年11月） |
| 6 | 承認状態 | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態（未確定/承認中/承認済み） |
| 7 | 部署 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の所属部署 |
| 8 | 勤怠体系 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系のラベル |
| 9 | 勤怠体系名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 勤怠体系名（例: フレックスタイム制(一般)） |
| 10 | 社員コード | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員コードのラベル |
| 11 | 社員コード値 | 出力 | | 文字 | | | 6 | | 表示 | 活性 | | 従業員の社員コード（6桁数字） |
| 12 | 社員名 | 出力 | | 文字 | | | | | 表示 | 活性 | | 社員名のラベル |
| 13 | 社員名値 | 出力 | | 文字 | | | | | 表示 | 活性 | | 従業員の氏名 |
| | <テーブルヘッダー部分> | | | | | | | | | | | |
| 14 | テーブルヘッダー背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 青色（#6B9BC3）の背景 |
| 15 | 日付 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 16 | イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 17 | 出社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 18 | 退社 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 19 | 休憩 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 20 | 実労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー（2行表示） |
| 21 | 残業 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 22 | 休日 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 23 | 深夜 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| 24 | 備考 | 出力 | | 文字 | | | | | 表示 | 活性 | | テーブル列ヘッダー |
| | <テーブル行部分> | | | | | | | | | | | |
| 25 | 勤務表テーブル | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |
| 26 | &nbsp;&nbsp;&nbsp;&nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録（30日分） |
| 27 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |
| 28 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日 |
| 29 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 所定休日（○：勤務表画面のテーブルでいえば土と祝日、青い背景色）、法定休日（◎：日曜日、赤い背景色）、有休計画付与日（△）のアイコン |
| 30 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;イベント/勤務状況/勤務場所 | 出力 | | 文字 | | | | | 表示 | 活性 | | 以下の優先順位で表示する。<br>1. 祝日の場合は「(祝日名)」形式（例: (勤労感謝の日)）<br>2. 休暇の場合は「休暇(休暇種別名)」形式（例: 休暇(年次有給休暇)、休暇(夏季休暇)）<br>3. 休日出勤申請が承認済みまたは申請中の場合は「休日出勤、日次確定、勤務場所」形式（例: 休日出勤、日次確定、在宅）または「休日出勤、勤務場所」形式（日次確定がない場合）<br>4. 日時確定済みの場合は「日時確定,勤務場所」形式（例: 日時確定,在宅、日時確定,通勤）<br>5. 通常勤務で日時確定ではない場合は勤務場所のみ（例: 在宅、通勤） |
| 31 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 出社時刻。記録がない場合は表示しない |
| 32 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退社時刻 | 出力 | | 時間 | | | | HH:MM | 条件付き表示 | 活性 | | 退社時刻。記録がない場合は表示しない |
| 33 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計。記録がない場合は表示しない |
| 34 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間。記録がない場合は表示しない |
| 35 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;残業時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 残業時間。記録がない場合は表示しない |
| 36 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 休日労働時間。記録がない場合は表示しない |
| 37 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | 出力 | | 時間 | | | | H:MM | 条件付き表示 | 活性 | | 深夜労働時間。記録がない場合は表示しない |
| 38 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;備考 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 備考テキスト。打刻漏れや手入力修正の情報も表示。記録がない場合は表示しない |
| | <合計行部分> | | | | | | | | | | | |
| 39 | 合計行背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 水色（#E8F4F8）の背景 |
| 40 | 合計ラベル | 出力 | | 文字 | | | | | 表示 | 活性 | 合計 | 固定表示 |
| 41 | 合計出社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の出社時刻の合計（意味がないため通常は表示しない） |
| 42 | 合計退社時刻 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の退社時刻の合計（意味がないため通常は表示しない） |
| 43 | 合計休憩時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休憩時間の合計 |
| 44 | 合計実労働時間 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 月間の実労働時間の合計 |
| 45 | 合計残業時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の残業時間の合計 |
| 46 | 合計休日労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の休日労働時間の合計 |
| 47 | 合計深夜労働時間 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 月間の深夜労働時間の合計 |
| | <記号説明部分> | | | | | | | | | | | |
| 48 | 記号の説明 | 出力 | | 文字 | | | | | 表示 | 活性 | | 記号の説明テキスト（○＝所定休日（勤務表画面のテーブルでいえば土と祝日）、◎＝法定休日（日曜日）、△＝有休計画付与日） |
| | <月次サマリータイトル部分> | | | | | | | | | | | |
| 49 | 月次サマリータイトル | 出力 | | 文字 | | | | | 表示 | 活性 | | YYYY年MM月月次サマリー（例: 2025年11月月次サマリー） |
| | <左カラム部分 - Section 1> | | | | | | | | | | | |
| 50 | Section 1背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 51 | 所定出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 52 | 所定出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定出勤日数（例: 18 日） |
| 53 | 実出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 54 | 実出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 実出勤日数（例: 14 日） |
| 55 | 法定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 56 | 法定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 法定休日出勤日数（例: 0 日） |
| 57 | 所定休日出勤日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 58 | 所定休日出勤日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 所定休日出勤日数（例: 0 日） |
| | <左カラム部分 - Section 2> | | | | | | | | | | | | |
| 59 | Section 2背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |
| 60 | 所定労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 61 | 所定労働時間値 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 所定労働時間（例: 136:00） |
| 62 | 総労働時間(有休を含む) | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 63 | 総労働時間(有休を含む)値 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 総労働時間(有休を含む)（例: 114:05） |
| 64 | 総労働時間-法定休日労働(有休を含む) | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 65 | 総労働時間-法定休日労働(有休を含む)値 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 総労働時間-法定休日労働(有休を含む)（例: 114:05） |
| 66 | 過不足時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 67 | 過不足時間値 | 出力 | | 時間 | | | | +/-H:MM | 表示 | 活性 | | 過不足時間（例: -20:55）。マイナスの場合は赤色表示 |
| | <左カラム部分 - Section 3> | | | | | | | | | | | | |
| 68 | Section 3背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 69 | 当月度の超過時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 70 | 当月度の超過時間値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 当月度の超過時間（例: 0:00） |
| 71 | 安全配慮上の超過時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 72 | 安全配慮上の超過時間値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 安全配慮上の超過時間（例: 0:00） |
| | <中央カラム部分 - Section 4> | | | | | | | | | | | | |
| 73 | Section 4背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 74 | 法定労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 75 | 法定労働時間値 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 法定労働時間（例: 144:05） |
| 76 | 実労働時間-法定休日労働(有休を含めない) | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 77 | 実労働時間-法定休日労働(有休を含めない)値 | 出力 | | 時間 | | | | HHH:MM | 表示 | 活性 | | 実労働時間-法定休日労働(有休を含めない)（例: 114:05） |
| 78 | 法定時間内残業 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 79 | 法定時間内残業値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 法定時間内残業（例: 0:00） |
| 80 | 法定時間外残業 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 81 | 法定時間外残業値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 法定時間外残業（例: 0:00） |
| 82 | 法定休日労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 83 | 法定休日労働時間値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 法定休日労働時間（例: 0:00） |
| | <中央カラム部分 - Section 5> | | | | | | | | | | | | |
| 84 | Section 5背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |
| 85 | 深夜労働時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 86 | 深夜労働時間値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 深夜労働時間（例: 0:00） |
| 87 | 45時間を超える時間外労働 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 88 | 45時間を超える時間外労働値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 45時間を超える時間外労働（例: 0:00） |
| 89 | 60時間を超える時間外労働 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 90 | 60時間を超える時間外労働値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 60時間を超える時間外労働（例: 0:00） |
| | <中央カラム部分 - Section 6> | | | | | | | | | | | | |
| 91 | Section 6背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 92 | 遅刻回数・時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 93 | 遅刻回数・時間値 | 出力 | | 文字 | | | | | 表示 | 活性 | | 遅刻回数・時間（例: 0回 0:00） |
| 94 | 早退回数・時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 95 | 早退回数・時間値 | 出力 | | 文字 | | | | | 表示 | 活性 | | 早退回数・時間（例: 0回 0:00） |
| 96 | コア時間内の私用外出回数・時間 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 97 | コア時間内の私用外出回数・時間値 | 出力 | | 文字 | | | | | 表示 | 活性 | | コア時間内の私用外出回数・時間（例: 0回 0:00） |
| | <右カラム部分 - Section 7> | | | | | | | | | | | | |
| 98 | Section 7背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 99 | 有給取得日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 100 | 有給取得日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 有給取得日数（例: 0 日） |
| 101 | [内訳]（有給取得日数） | 出力 | | 文字 | | | | | 表示 | 活性 | | 有給取得日数の内訳。データがある場合は具体的な内訳名（例: [内訳]年次有給休暇）、データがない場合は「[内訳] ---」と表示（グレー色） |
| | <右カラム部分 - Section 8> | | | | | | | | | | | | |
| 102 | Section 8背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |
| 103 | 代休取得日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 104 | 代休取得日数値 | 出力 | | 時間 | | | | H:MM | 表示 | 活性 | | 代休取得日数（例: 0:00） |
| 105 | [内訳]（代休取得日数） | 出力 | | 文字 | | | | | 表示 | 活性 | | 代休取得日数の内訳。データがある場合は具体的な内訳名、データがない場合は「[内訳] ---」と表示（グレー色） |
| | <右カラム部分 - Section 9> | | | | | | | | | | | | |
| 106 | Section 9背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | 白色の背景。枠でグループ化されている |
| 107 | 無給休暇日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル |
| 108 | 無給休暇日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 無給休暇日数（例: 0 日） |
| 109 | [内訳]（無給休暇日数） | 出力 | | 文字 | | | | | 表示 | 活性 | | 無給休暇日数の内訳。データがある場合は具体的な内訳名、データがない場合は「[内訳] ---」と表示（グレー色） |
| | <右カラム部分 - Section 10> | | | | | | | | | | | | |
| 110 | Section 10背景 | 出力 | | 画像 | | | | | 表示 | 活性 | | グレー色（#F5F5F5）の背景。枠でグループ化されている |
| 111 | 有給残日数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル（対象年月の月末日時点を表示。例: 有休残日数(12/31時点)） |
| 112 | 有給残日数値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 有給残日数（例: 11 日） |
| 113 | 計画付与予定日 | 出力 | | 文字 | | | | | 表示 | 活性 | | 項目ラベル（対象年月の次月以降を表示。例: 2026年01月度以降の 計画付与予定日。12月の場合は来年1月以降） |
| 114 | 計画付与予定日値 | 出力 | | 整数 | | | | | 表示 | 活性 | | 計画付与予定日（例: 0 日） |

## 入出力項目定義

| No | 項目名 | 種別 | 画面遷移 | ドメイン | 必須 | デフォルト値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |
| 1 | 従業員ID | 入力 | 勤務表画面 | 文字 | 必須 | | ログイン中の従業員ID |
| 2 | 対象年月 | 入力 | 勤務表画面 | 文字 | 必須 | | YYYY-MM形式。表示対象の年月 |

## その他の項目定義

| No | 項目名 | ドメイン | 正常異常区分 | デフォルト値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- |
| 1 | 月間勤務データ | リスト | 正常 | | 月間の勤務記録リスト（30日分） |
| 2 | &nbsp;&nbsp;&nbsp;&nbsp;日次勤務データ | オブジェクト | 正常 | | 1日分の勤務記録 |
| 3 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤怠ID | 整数 | 正常 | | ATTENDANCE_ID |
| 4 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |
| 5 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務日 | 日付 | 正常 | | WORK_DATE |
| 6 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | 日時 | 正常 | | CLOCK_IN_TIME |
| 7 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | 日時 | 正常 | | CLOCK_OUT_TIME |
| 7-1 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤打刻種別 | 文字 | 正常 | | CLOCK_IN_TYPE（STAMP/SCHEDULED/MANUAL） |
| 7-2 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤打刻種別 | 文字 | 正常 | | CLOCK_OUT_TYPE（STAMP/SCHEDULED/MANUAL） |
| 7-3 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;元の出勤打刻時刻 | 日時 | 正常 | | ORIGINAL_CLOCK_IN_TIME（打刻機による元の時刻） |
| 7-4 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;元の退勤打刻時刻 | 日時 | 正常 | | ORIGINAL_CLOCK_OUT_TIME（打刻機による元の時刻） |
| 8 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |
| 9 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間合計 | 小数 | 正常 | | BREAK_TIMEの合計 |
| 10 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;残業時間 | 小数 | 正常 | | OVERTIME_HOURS |
| 11 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日労働時間 | 小数 | 正常 | | HOLIDAY_WORK_HOURS |
| 12 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS |
| 13 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |
| 14 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |
| 15 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |
| 16 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;祝日名 | 文字 | 正常 | | 祝日マスタから取得した祝日名（祝日の場合のみ） |
| 17 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休暇種別名 | 文字 | 正常 | | VACATION_TYPEから取得した休暇種別名（休暇の場合のみ） |
| 18 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日出勤申請情報 | オブジェクト | 正常 | | 休日出勤申請が承認済みまたは申請中の場合の申請情報（HOLIDAY_WORK_APPLICATIONから取得） |
| 16 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |
| 17 | &nbsp;&nbsp;&nbsp;&nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |
| 18 | &nbsp;&nbsp;&nbsp;&nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS |
| 19 | &nbsp;&nbsp;&nbsp;&nbsp;法定休日出勤日数 | 整数 | 正常 | | 法定休日に出勤した日数 |
| 20 | &nbsp;&nbsp;&nbsp;&nbsp;所定休日出勤日数 | 整数 | 正常 | | 所定休日に出勤した日数 |
| 21 | &nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 小数 | 正常 | | SCHEDULED_WORK_HOURS（時間単位） |
| 22 | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 小数 | 正常 | | TOTAL_WORK_HOURS（時間単位） |
| 23 | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間-法定休日労働 | 小数 | 正常 | | 総労働時間から法定休日労働を除いた時間（時間単位） |
| 24 | &nbsp;&nbsp;&nbsp;&nbsp;過不足時間 | 小数 | 正常 | | OVER_UNDER_HOURS（時間単位） |
| 25 | &nbsp;&nbsp;&nbsp;&nbsp;当月度の超過時間 | 小数 | 正常 | | 当月度の超過時間（時間単位） |
| 26 | &nbsp;&nbsp;&nbsp;&nbsp;安全配慮上の超過時間 | 小数 | 正常 | | 安全配慮上の超過時間（時間単位） |
| 27 | &nbsp;&nbsp;&nbsp;&nbsp;法定労働時間 | 小数 | 正常 | | 法定労働時間（時間単位） |
| 28 | &nbsp;&nbsp;&nbsp;&nbsp;実労働時間-法定休日労働(有休を含めない) | 小数 | 正常 | | 実労働時間から法定休日労働を除いた時間（有休を含めない、時間単位） |
| 29 | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 小数 | 正常 | | WITHIN_LEGAL_OVERTIME_HOURS（時間単位） |
| 30 | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 小数 | 正常 | | OVER_LEGAL_OVERTIME_HOURS（時間単位） |
| 31 | &nbsp;&nbsp;&nbsp;&nbsp;法定休日労働時間 | 小数 | 正常 | | LEGAL_HOLIDAY_WORK_HOURS（時間単位） |
| 32 | &nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | 小数 | 正常 | | NIGHT_WORK_HOURS（時間単位） |
| 33 | &nbsp;&nbsp;&nbsp;&nbsp;45時間を超える時間外労働 | 小数 | 正常 | | 45時間を超える時間外労働（時間単位） |
| 34 | &nbsp;&nbsp;&nbsp;&nbsp;60時間を超える時間外労働 | 小数 | 正常 | | 60時間を超える時間外労働（時間単位） |
| 35 | &nbsp;&nbsp;&nbsp;&nbsp;遅刻回数 | 整数 | 正常 | | 遅刻回数 |
| 36 | &nbsp;&nbsp;&nbsp;&nbsp;遅刻時間 | 小数 | 正常 | | 遅刻時間（時間単位） |
| 37 | &nbsp;&nbsp;&nbsp;&nbsp;早退回数 | 整数 | 正常 | | 早退回数 |
| 38 | &nbsp;&nbsp;&nbsp;&nbsp;早退時間 | 小数 | 正常 | | 早退時間（時間単位） |
| 39 | &nbsp;&nbsp;&nbsp;&nbsp;コア時間内の私用外出回数 | 整数 | 正常 | | コア時間内の私用外出回数 |
| 40 | &nbsp;&nbsp;&nbsp;&nbsp;コア時間内の私用外出時間 | 小数 | 正常 | | コア時間内の私用外出時間（時間単位） |
| 41 | 従業員情報 | オブジェクト | 正常 | | 従業員の基本情報 |
| 42 | &nbsp;&nbsp;&nbsp;&nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |
| 43 | &nbsp;&nbsp;&nbsp;&nbsp;従業員名 | 文字 | 正常 | | EMPLOYEE_NAME |
| 44 | &nbsp;&nbsp;&nbsp;&nbsp;部署 | 文字 | 正常 | | DEPARTMENT |
| 45 | &nbsp;&nbsp;&nbsp;&nbsp;勤怠体系 | 文字 | 正常 | | 勤怠体系名 |
| 46 | 月次承認状態 | 文字 | 正常 | NOT_SUBMITTED | MONTHLY_APPROVAL_STATUS |
| 47 | 休暇情報 | オブジェクト | 正常 | | 休暇関連情報 |
| 48 | &nbsp;&nbsp;&nbsp;&nbsp;有給取得日数 | 小数 | 正常 | | 有給取得日数 |
| 49 | &nbsp;&nbsp;&nbsp;&nbsp;有給取得日数内訳 | 文字 | 正常 | | 有給取得日数の内訳名（例: 年次有給休暇）。データがない場合は空文字 |
| 50 | &nbsp;&nbsp;&nbsp;&nbsp;代休取得日数 | 小数 | 正常 | | 代休取得日数 |
| 51 | &nbsp;&nbsp;&nbsp;&nbsp;代休取得日数内訳 | 文字 | 正常 | | 代休取得日数の内訳名。データがない場合は空文字 |
| 52 | &nbsp;&nbsp;&nbsp;&nbsp;無給休暇日数 | 小数 | 正常 | | 無給休暇日数 |
| 53 | &nbsp;&nbsp;&nbsp;&nbsp;無給休暇日数内訳 | 文字 | 正常 | | 無給休暇日数の内訳名。データがない場合は空文字 |
| 54 | &nbsp;&nbsp;&nbsp;&nbsp;有給残日数 | 小数 | 正常 | | 対象年月の月末日時点の有給残日数 |
| 55 | &nbsp;&nbsp;&nbsp;&nbsp;計画付与予定日 | 整数 | 正常 | | 対象年月の次月以降の計画付与予定日 |

## イベント処理説明

#### 名称：初期処理、英名：initialize、処理タイミング：-
1. 従業員情報取得
   - テーブル取得仕様に従い、従業員情報を取得する。
   - 【テーブル取得仕様 No.1（従業員情報取得）】

2. 月間勤務データ取得
   - テーブル取得仕様に従い、月間の勤務データを取得する。
   - 【テーブル取得仕様 No.2（月間勤務データ取得）】

3. 月次サマリーデータ取得
   - テーブル取得仕様に従い、月次サマリーデータを取得する。
   - 【テーブル取得仕様 No.3（月次サマリーデータ取得）】

4. 休暇情報取得
   - テーブル取得仕様に従い、休暇情報を取得する。
   - 【テーブル取得仕様 No.4（休暇情報取得）】

5. 初期表示
   - 編集仕様に従い、初期表示を行う。
   - 【編集仕様 No.1（初期表示）】

#### 名称：プリンタへ出力処理、英名：printReport、処理タイミング：月次サマリー情報画面.プリンタへ出力ボタン.押下
1. 印刷ダイアログ表示
   - ブラウザの印刷ダイアログを表示する。

#### 名称：閉じる処理、英名：closeWindow、処理タイミング：月次サマリー情報画面.閉じるリンク.押下
1. ウィンドウを閉じる
   - 現在のウィンドウを閉じる。

## 編集仕様

#### No.1
- 編集仕様名：初期表示
- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）、テーブル取得仕様 No.2（月間勤務データ取得）、テーブル取得仕様 No.3（月次サマリーデータ取得）、テーブル取得仕様 No.4（休暇情報取得）
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | 対象年月 | 入出力項目定義.対象年月をYYYY年MM月形式に変換 | |
  | 承認状態 | 月次承認状態に応じて表示（未確定/承認中/承認済み） | |
  | 部署 | 従業員情報取得.部署 | |
  | 勤怠体系名 | 従業員情報取得.勤怠体系 | |
  | 社員コード値 | 従業員情報取得.従業員ID | |
  | 社員名値 | 従業員情報取得.従業員名 | |
  | 勤務表行 | 月間勤務データ取得の日次勤務データを30日分表示 | 対象年月の1日から月末日まで |
  | &nbsp;&nbsp;&nbsp;&nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;曜日 | 日次勤務データ.勤務日の曜日を表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;休日アイコン | 祝日・休日・有休の場合は該当アイコンを表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;イベント/勤務状況/勤務場所 | 以下の優先順位で表示する。<br>1. 祝日の場合は「(祝日名)」形式（例: (勤労感謝の日)）<br>2. 休暇の場合は「休暇(休暇種別名)」形式（例: 休暇(年次有給休暇)、休暇(夏季休暇)）<br>3. 休日出勤申請が承認済みまたは申請中の場合は「休日出勤、日次確定、勤務場所」形式（例: 休日出勤、日次確定、在宅）または「休日出勤、勤務場所」形式（日次確定がない場合）<br>4. 日時確定済みの場合は「日時確定,勤務場所」形式（例: 日時確定,在宅、日時確定,通勤）<br>5. 通常勤務で日時確定ではない場合は勤務場所のみ（例: 在宅、通勤） | |
  | &nbsp;&nbsp;&nbsp;&nbsp;出社時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 出勤時刻が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;退社時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 退勤時刻が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;休憩時間 | 日次勤務データ.休憩時間合計をH:MM形式で表示 | 休憩時間が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 実労働時間が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;残業時間 | 日次勤務データ.残業時間をH:MM形式で表示 | 残業時間が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;休日労働時間 | 日次勤務データ.休日労働時間をH:MM形式で表示 | 休日労働時間が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | 日次勤務データ.深夜労働時間をH:MM形式で表示 | 深夜労働時間が存在する場合のみ |
  | &nbsp;&nbsp;&nbsp;&nbsp;備考 | 日次勤務データ.備考を表示。打刻漏れや手入力修正の情報も表示 | 備考が存在する場合、または打刻漏れ・手入力修正がある場合のみ |
  | 合計休憩時間 | 月次サマリーデータ取得の休憩時間合計をH:MM形式で表示 | |
  | 合計実労働時間 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |
  | 合計残業時間 | 月次サマリーデータ取得.法定時間内残業 + 法定時間外残業をH:MM形式で表示 | |
  | 合計休日労働時間 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |
  | 合計深夜労働時間 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |
  | 月次サマリータイトル | 入出力項目定義.対象年月をYYYY年MM月月次サマリー形式で表示 | |
  | 所定出勤日数値 | 月次サマリーデータ取得.所定出勤日数を「XX 日」形式で表示 | |
  | 実出勤日数値 | 月次サマリーデータ取得.実出勤日数を「XX 日」形式で表示 | |
  | 法定休日出勤日数値 | 月次サマリーデータ取得.法定休日出勤日数を「XX 日」形式で表示 | |
  | 所定休日出勤日数値 | 月次サマリーデータ取得.所定休日出勤日数を「XX 日」形式で表示 | |
  | 所定労働時間値 | 月次サマリーデータ取得.所定労働時間をHHH:MM形式で表示 | |
  | 総労働時間(有休を含む)値 | 月次サマリーデータ取得.総労働時間をHHH:MM形式で表示 | |
  | 総労働時間-法定休日労働(有休を含む)値 | 月次サマリーデータ取得.総労働時間-法定休日労働をHHH:MM形式で表示 | |
  | 過不足時間値 | 月次サマリーデータ取得.過不足時間を+/-H:MM形式で表示 | マイナスの場合は赤色表示 |
  | 当月度の超過時間値 | 月次サマリーデータ取得.当月度の超過時間をH:MM形式で表示 | |
  | 安全配慮上の超過時間値 | 月次サマリーデータ取得.安全配慮上の超過時間をH:MM形式で表示 | |
  | 法定労働時間値 | 月次サマリーデータ取得.法定労働時間をHHH:MM形式で表示 | |
  | 実労働時間-法定休日労働(有休を含めない)値 | 月次サマリーデータ取得.実労働時間-法定休日労働(有休を含めない)をHHH:MM形式で表示 | |
  | 法定時間内残業値 | 月次サマリーデータ取得.法定時間内残業をH:MM形式で表示 | |
  | 法定時間外残業値 | 月次サマリーデータ取得.法定時間外残業をH:MM形式で表示 | |
  | 法定休日労働時間値 | 月次サマリーデータ取得.法定休日労働時間をH:MM形式で表示 | |
  | 深夜労働時間値 | 月次サマリーデータ取得.深夜労働時間をH:MM形式で表示 | |
  | 45時間を超える時間外労働値 | 月次サマリーデータ取得.45時間を超える時間外労働をH:MM形式で表示 | |
  | 60時間を超える時間外労働値 | 月次サマリーデータ取得.60時間を超える時間外労働をH:MM形式で表示 | |
  | 遅刻回数・時間値 | 月次サマリーデータ取得.遅刻回数と遅刻時間を「XX回 XX:XX」形式で表示 | |
  | 早退回数・時間値 | 月次サマリーデータ取得.早退回数と早退時間を「XX回 XX:XX」形式で表示 | |
  | コア時間内の私用外出回数・時間値 | 月次サマリーデータ取得.コア時間内の私用外出回数と時間を「XX回 XX:XX」形式で表示 | |
  | 有給取得日数値 | 休暇情報取得.有給取得日数を「XX 日」形式で表示 | |
  | [内訳]（有給取得日数） | 休暇情報取得.有給取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.有給取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |
  | 代休取得日数値 | 休暇情報取得.代休取得日数をH:MM形式で表示 | |
  | [内訳]（代休取得日数） | 休暇情報取得.代休取得日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.代休取得日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |
  | 無給休暇日数値 | 休暇情報取得.無給休暇日数を「XX 日」形式で表示 | |
  | [内訳]（無給休暇日数） | 休暇情報取得.無給休暇日数内訳が空文字でない場合は「[内訳]」+ 休暇情報取得.無給休暇日数内訳を表示、空文字の場合は「[内訳] ---」と表示（グレー色） | |
  | 有給残日数 | 対象年月の月末日時点の有給残日数を表示（例: 有休残日数(12/31時点)） | |
  | 有給残日数値 | 休暇情報取得.有給残日数を「XX 日」形式で表示 | 対象年月の月末日時点の有給残日数 |
  | 計画付与予定日 | 対象年月の次月以降の計画付与予定日を表示（例: 2026年01月度以降の 計画付与予定日。12月の場合は来年1月以降） | |
  | 計画付与予定日値 | 休暇情報取得.計画付与予定日を「XX 日」形式で表示 | 対象年月の次月以降の計画付与予定日 |

## チェック仕様

#### No.1
- チェック仕様：入力チェック
- 分類：単項目チェック
- 取得元：入出力項目定義
  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |
  | :--- | :--- | :--- | :--- | :--- |
  | 従業員ID | 必須 | 従業員IDがNullまたは空の場合、エラー | E00001 | {0}は必須です。 |
  | 対象年月 | 必須 | 対象年月がNullまたは空の場合、エラー | E00001 | {0}は必須です。 |
  | 対象年月 | フォーマット | 対象年月がYYYY-MM形式でない場合、エラー | E00010 | {0}の形式が正しくありません。 |

## テーブル取得仕様

#### No.1
- 取得仕様名：従業員情報取得
- テーブル名：EMPLOYEE
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 従業員ID | EMPLOYEE.EMPLOYEE_ID | |
  | 従業員名 | EMPLOYEE.EMPLOYEE_NAME | |
  | 部署 | EMPLOYEE.DEPARTMENT | |
  | 勤怠体系 | 固定値「フレックスタイム制(一般)」 | 将来的にマスタから取得する可能性あり |
- 関連する取得仕様
  - なし
- 取得条件
  - EMPLOYEE.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - EMPLOYEE.IS_ACTIVE = TRUE
- その他
  - なし

#### No.2
- 取得仕様名：月間勤務データ取得
- テーブル名：ATTENDANCE_RECORD
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 勤怠ID | ATTENDANCE_RECORD.ATTENDANCE_ID | |
  | 従業員ID | ATTENDANCE_RECORD.EMPLOYEE_ID | |
  | 勤務日 | ATTENDANCE_RECORD.WORK_DATE | |
  | 出勤時刻 | ATTENDANCE_RECORD.CLOCK_IN_TIME | |
  | 退勤時刻 | ATTENDANCE_RECORD.CLOCK_OUT_TIME | |
  | 出勤打刻種別 | ATTENDANCE_RECORD.CLOCK_IN_TYPE | STAMP/SCHEDULED/MANUAL |
  | 退勤打刻種別 | ATTENDANCE_RECORD.CLOCK_OUT_TYPE | STAMP/SCHEDULED/MANUAL |
  | 元の出勤打刻時刻 | ATTENDANCE_RECORD.ORIGINAL_CLOCK_IN_TIME | 打刻機による元の時刻 |
  | 元の退勤打刻時刻 | ATTENDANCE_RECORD.ORIGINAL_CLOCK_OUT_TIME | 打刻機による元の時刻 |
  | 実労働時間 | ATTENDANCE_RECORD.ACTUAL_WORK_HOURS | |
  | 残業時間 | ATTENDANCE_RECORD.OVERTIME_HOURS | |
  | 休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |
  | 深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |
  | 勤務場所コード | ATTENDANCE_RECORD.WORK_LOCATION_CODE | |
  | 備考 | ATTENDANCE_RECORD.REMARK_TEXT | |
  | 日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |
- 関連する取得仕様
  - テーブル取得仕様 No.5（休憩時間取得）
- 取得条件
  - ATTENDANCE_RECORD.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - DATE_FORMAT(ATTENDANCE_RECORD.WORK_DATE, '%Y-%m') = 入出力項目定義.対象年月
- その他
  - 対象年月の1日から月末日まで、全ての日付のレコードを取得（勤務記録がない日も含む）
  - WORK_DATEで昇順ソート
  - 各日付ごとに以下の情報を追加で取得する：
    - 祝日名: 祝日マスタ（@holiday-jp/holiday_jp）から取得した祝日名（祝日の場合のみ）
    - 休暇種別名: VACATION_HISTORYとVACATION_TYPEを結合して取得した休暇種別名（承認済みまたは申請中の休暇がある場合のみ）
    - 休日出勤申請情報: HOLIDAY_WORK_APPLICATIONから取得した休日出勤申請情報（承認済みまたは申請中の休日出勤申請がある場合のみ）

#### No.3
- 取得仕様名：月次サマリーデータ取得
- テーブル名：V_MONTHLY_ATTENDANCE（ビュー）
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 所定出勤日数 | V_MONTHLY_ATTENDANCE.SCHEDULED_WORK_DAYS | |
  | 実出勤日数 | V_MONTHLY_ATTENDANCE.ACTUAL_WORK_DAYS | |
  | 所定労働時間 | V_MONTHLY_ATTENDANCE.SCHEDULED_WORK_HOURS | |
  | 総労働時間 | V_MONTHLY_ATTENDANCE.TOTAL_WORK_HOURS | |
  | 過不足時間 | V_MONTHLY_ATTENDANCE.OVER_UNDER_HOURS | |
  | 法定休日労働時間 | V_MONTHLY_ATTENDANCE.LEGAL_HOLIDAY_WORK_HOURS | |
  | 法定時間内残業 | V_MONTHLY_ATTENDANCE.WITHIN_LEGAL_OVERTIME_HOURS | |
  | 法定時間外残業 | V_MONTHLY_ATTENDANCE.OVER_LEGAL_OVERTIME_HOURS | |
  | 深夜労働時間 | V_MONTHLY_ATTENDANCE.NIGHT_WORK_HOURS | |
- 関連する取得仕様
  - なし
- 取得条件
  - V_MONTHLY_ATTENDANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - V_MONTHLY_ATTENDANCE.YEAR_MONTH = 入出力項目定義.対象年月
- その他
  - ビューV_MONTHLY_ATTENDANCEを使用して月次集計データを取得
  - 法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、ATTENDANCE_RECORDテーブルから別途集計する必要がある

#### No.4
- 取得仕様名：休暇情報取得
- テーブル名：VACATION_HISTORY、VACATION_BALANCE、VACATION_TYPE
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 有給取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'PAID_LEAVE' かつ対象年月内の取得日数 |
  | 有給取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'PAID_LEAVE' に対応する休暇種別名（例: 年次有給休暇）。データがない場合は空文字 |
  | 代休取得日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' かつ対象年月内の取得日数 |
  | 代休取得日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODE = 'SUBSTITUTE_HOLIDAY' に対応する休暇種別名。データがない場合は空文字 |
  | 無給休暇日数 | VACATION_HISTORY.VACATION_DAYSの合計 | VACATION_TYPE_CODEが無給の休暇種別 かつ対象年月内の取得日数 |
  | 無給休暇日数内訳 | VACATION_TYPE.VACATION_TYPE_NAME | VACATION_TYPE_CODEが無給の休暇種別に対応する休暇種別名。データがない場合は空文字 |
  | 有給残日数 | VACATION_BALANCE.REMAINING_DAYS | 対象年月の月末日時点の有給残日数 |
  | 計画付与予定日 | VACATION_BALANCE.GRANTED_DAYS | 対象年月の次月以降の計画付与予定日 |
- 関連する取得仕様
  - なし
- 取得条件
  - VACATION_HISTORY.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - DATE_FORMAT(VACATION_HISTORY.START_DATE, '%Y-%m') <= 入出力項目定義.対象年月
  - DATE_FORMAT(VACATION_HISTORY.END_DATE, '%Y-%m') >= 入出力項目定義.対象年月
  - VACATION_BALANCE.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - VACATION_BALANCE.VACATION_TYPE_CODE = 'PAID_LEAVE'
  - VACATION_TYPE.VACATION_TYPE_CODE = VACATION_HISTORY.VACATION_TYPE_CODE（JOIN条件）
- その他
  - 有給取得日数、代休取得日数、無給休暇日数は対象年月内の取得日数を集計
  - 有給残日数は対象年月の月末日時点の残日数を取得
  - 計画付与予定日は対象年月の次月以降の計画付与予定日を取得（12月の場合は来年1月以降）
  - 内訳は、該当する休暇種別が存在する場合のみVACATION_TYPEテーブルから取得し、存在しない場合は空文字とする（有給残日数と計画付与予定日には内訳は表示しない）

#### No.5
- 取得仕様名：休憩時間取得
- テーブル名：BREAK_TIME
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 休憩時間合計 | SUM(BREAK_TIME.BREAK_DURATION_MINUTES) / 60 | 分を時間に変換 |
- 関連する取得仕様
  - なし
- 取得条件
  - BREAK_TIME.ATTENDANCE_ID = 月間勤務データ取得.勤怠ID
- その他
  - 各勤怠記録ごとに休憩時間の合計を計算

## テーブル更新仕様

なし（本画面は参照専用のため、テーブル更新は行わない）

## API利用仕様

なし（本画面は直接DBからデータを取得する）

## 補足説明

### 画面の表示について
- 本画面は勤務表画面から「月次サマリー」リンクを押下することで、新規ウィンドウが開きます。
- ウィンドウサイズは1920x1080pxを想定していますが、実際の表示環境に応じて調整可能です。

### セクションごとの枠分けについて
- 月次サマリー情報は、セクションごとに枠でグループ化されて表示されます。
- **左カラム**:
  - **Section 1**: 所定出勤日数、実出勤日数、法定休日出勤日数、所定休日出勤日数
  - **Section 2**: 所定労働時間、総労働時間(有休を含む)、総労働時間-法定休日労働(有休を含む)、過不足時間
  - **Section 3**: 当月度の超過時間、安全配慮上の超過時間
- **中央カラム**:
  - **Section 4**: 法定労働時間、実労働時間-法定休日労働(有休を含めない)、法定時間内残業、法定時間外残業、法定休日労働時間
  - **Section 5**: 深夜労働時間、45時間を超える時間外労働、60時間を超える時間外労働
  - **Section 6**: 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間
- **右カラム**:
  - **Section 7**: 有給取得日数、[内訳]
  - **Section 8**: 代休取得日数、[内訳]
  - **Section 9**: 無給休暇日数、[内訳]
  - **Section 10**: 有給残日数(月末日時点)、計画付与予定日（次月以降）

### データの表示形式について
- 時間の表示形式は、H:MM（例: 8:00）またはHHH:MM（例: 114:05）です。
- 日数の表示形式は、「XX 日」（例: 18 日）です。
- 過不足時間がマイナスの場合は赤色（#D9534F）で表示します。

### 月次サマリーの計算について
- 月次サマリーデータは、V_MONTHLY_ATTENDANCEビューを使用して取得します。
- 一部の項目（法定休日出勤日数、所定休日出勤日数、45時間を超える時間外労働、60時間を超える時間外労働、遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間）は、ATTENDANCE_RECORDテーブルから別途集計する必要があります。

### 遅刻回数・時間などの表示形式について
- 遅刻回数・時間、早退回数・時間、コア時間内の私用外出回数・時間は、「XX回 XX:XX」形式で表示します（例: 0回 0:00）。
- 回数と時間の間にスペースを1つ入れます。

### 休日アイコンの表示について
- 所定休日: ○（白い丸）
- 法定休日: ◎（二重丸）
- 有休計画付与日: △（三角）

### 記号の説明について
- 画面下部に「記号の説明 ○＝所定休日、◎＝法定休日、△＝有休計画付与日」を表示します。
- 記号の詳細説明：
  - **○（所定休日）**: 勤務表画面のテーブルでいえば土曜日と祝日に対応します。
  - **◎（法定休日）**: 日曜日に対応します。
  - **△（有休計画付与日）**: 有給休暇の計画付与日を表します。

### 内訳の表示について
- 有給取得日数、代休取得日数、無給休暇日数の内訳は、データがある場合とない場合で表示が異なります。
  - データがある場合: 具体的な内訳名を表示します（例: [内訳]年次有給休暇）。
  - データがない場合: 「[内訳] ---」と表示します（グレー色）。
- 有給残日数と計画付与予定日には内訳は表示しません。

### イベント/勤務状況/勤務場所の表示形式について
- 本欄には、以下の優先順位で表示内容が決定されます：
  1. **祝日の場合**: 「(祝日名)」形式で表示します（例: (勤労感謝の日)）
  2. **休暇の場合**: 「休暇(休暇種別名)」形式で表示します（例: 休暇(年次有給休暇)、休暇(夏季休暇)）
  3. **休日出勤申請の場合**: 休日出勤申請が承認済みまたは申請中の場合は、以下の形式で表示します：
     - 日次確定ありの場合: 「休日出勤、日次確定、勤務場所」形式（例: 休日出勤、日次確定、在宅）
     - 日次確定なしの場合: 「休日出勤、勤務場所」形式（例: 休日出勤、在宅）
     - 勤務場所がない場合: 「休日出勤」のみ
  4. **日時確定済みの場合**: 「日時確定,勤務場所」形式で表示します（例: 日時確定,在宅、日時確定,通勤）
  5. **通常勤務で日時確定ではない場合**: 勤務場所のみを表示します（例: 在宅、通勤）
- 備考欄の内容は、本欄には表示されません（備考欄に別途表示されます）。

### 備考欄の表示形式について
- 備考欄には、以下の情報が表示されます：
  1. **打刻漏れの情報**（打刻のし忘れなどで手入力で入力した場合）:
     - 出社のみの場合: 「(出社打刻なし)」を備考欄の先頭に表示
     - 退社のみの場合: 「(退社打刻なし)」を備考欄の先頭に表示
     - 両方の場合: 「(出退打刻なし)」を備考欄の先頭に表示
     - 判定条件: 打刻種別がMANUALで、かつ元の打刻時刻（ORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIME）がなく、かつ手入力で時刻（CLOCK_IN_TIME/CLOCK_OUT_TIME）が入力されている場合
  2. **打刻時刻の手入力修正の情報**:
     - 出社時刻を手入力で修正した場合: 「((出社打刻 HH:MM))」形式で表示（例: ((出社打刻 8:51))）
     - 退社時刻を手入力で修正した場合: 「((退社打刻 HH:MM))」形式で表示（例: ((退社打刻 18:30))）
     - 判定条件: 元の打刻時刻（ORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIME）が存在し、かつ現在の時刻と異なる場合（打刻種別がSTAMP/SCHEDULED/MANUALのいずれでも対象）
  3. **既存の備考テキスト**: 上記の情報の後に表示
- 打刻漏れや手入力修正の情報のテキスト色は、#7955D5（紫色）で表示します。

## 変更履歴
| 日付 | 変更内容 | 変更者 |
| --- | --- | --- |
| 2025-12-08 | 初版作成 | AI Assistant |
| 2025-12-08 | 休日アイコンの説明を「有休計画付与日」に修正、遅刻回数などの表示形式を「XX回 XX:XX」に修正、内訳の表示ロジックを追加 | AI Assistant |
| 2025-12-08 | 有給残日数の表示を「有休残日数(月末日時点)」形式に修正、計画付与予定日を「次月以降の計画付与予定日」形式に修正 | AI Assistant |
| 2025-12-08 | カラム部分をセクションごとに分けて記載するように修正（Section 1～10） | AI Assistant |
| 2025-12-08 | Section 6のNo重複を修正（89-93 → 93-97）、右カラム部分にSection 7を追加（94-101 → 98-101） | AI Assistant |
| 2025-12-08 | イベント/勤務状況/勤務場所欄の表示形式を変更。祝日は「(祝日名)」、休暇は「休暇(休暇種別名)」、日時確定済みは「日時確定,勤務場所」、通常勤務は「勤務場所のみ」の形式で表示するように修正 | AI Assistant |
| 2025-12-09 | 備考欄に打刻漏れや手入力修正の情報を表示する機能を追加。打刻漏れの場合は「(出社打刻なし)」「(退社打刻なし)」「(出退打刻なし)」を、手入力修正の場合は「(出社打刻 HH:MM)」「(退社打刻 HH:MM)」を表示。テキスト色は#7955D5 | AI Assistant |
| 2025-12-15 | イベント/勤務状況/勤務場所欄に休日出勤申請の情報を追加。休日出勤申請が承認済みまたは申請中の場合は「休日出勤、日次確定、勤務場所」または「休日出勤、勤務場所」形式で表示するように修正 | AI Assistant |
| 2025-12-15 | 備考欄の打刻漏れの判定条件を修正。打刻種別がMANUALで、かつ元の打刻時刻がなく、かつ手入力で時刻が入力されている場合に「(出社打刻なし)」「(退社打刻なし)」「(出退打刻なし)」を表示するように修正 | AI Assistant |

