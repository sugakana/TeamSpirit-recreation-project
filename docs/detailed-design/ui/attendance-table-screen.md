# TeamSpirit勤怠管理システム
# 勤務表画面

## 概要
本画面は、月間の勤務表をカレンダー形式で表示し、各種勤務情報の入力・確認を行う機能です。
出退勤時刻、休憩時間、公用外出、工数実績、備考などを日次で管理し、日次確定申請を行うことができます。
ホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、該当日の出社・退社の列に時刻が記録されます。
打刻（STAMP）と手入力（MANUAL）は背景色で区別され、打刻は白色、手入力は黄色で表示されます。

## 画面レイアウト

### Figmaデザイン

**勤務表画面のデザイン（Figma）**

https://www.figma.com/design/OVw1Ofj7KB3O5zuj4NzLiu/%E7%84%A1%E9%A1%8C?node-id=37-1005&t=UudYlcZ8FhU0XfxI-4

### 参考画像（操作マニュアルより）

以下の画像は参考として掲載しています。正式なデザイン仕様は上記のFigmaを参照してください。

- 勤務表メイン画面（参考）

![勤務表画面](../../OperationManual/スクリーンショット%202025-12-01%20114925.png)

- 勤怠情報入力画面（参考）

![勤怠情報入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114931.png)

- 工数実績入力画面（参考）

![工数実績入力画面](../../OperationManual/スクリーンショット%202025-12-01%20114937.png)

## 画面項目定義

| No | 項目名 | 種別 | 入力タイプ | ドメイン | 最小桁数 | 最大桁数 | 表示文字数 | 表示形式 | 表示/非表示 | 活性/非活性 | 初期値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |
| | <ヘッダー部分（青色バー）> | | | | | | | | | | | |
| 1 | メニューアイコン | ボタン | | | | | | | 表示 | 活性 | | メニューを開く。「≡」アイコン |
| 2 | 勤務表タイトル | 出力 | | 文字 | | | | | 表示 | 活性 | 勤務表 | 画面タイトル「勤務表」を表示 |
| 3 | 年月選択 | 入力 | プルダウン | 文字 | | | | YYYY年MM月 | 表示 | 活性 | システム日付の年月 | 年月を選択して表示対象月を変更 |
| 4 | 前月ボタン | ボタン | | | | | | | 表示 | 活性 | | 前月の勤務表を表示。「<前月」と表示 |
| 5 | 次月ボタン | ボタン | | | | | | | 表示 | 活性 | | 次月の勤務表を表示。「次月>」と表示 |
| 6 | 社員名表示 | 出力 | | 文字 | | | | | 表示 | 活性 | | ログイン中の社員名を表示 |
| 7 | 所属部署表示 | 出力 | | 文字 | | | | | 表示 | 活性 | | ログイン中の社員の所属部署を表示 |
| 8 | 申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 各種申請画面へ遷移。緑色のボタン |
| 9 | 休暇情報ボタン | ボタン | | | | | | | 表示 | 活性 | | 休暇情報画面を表示。青色のボタン |
| 10 | ヘルプボタン | ボタン | | | | | | | 表示 | 活性 | | ヘルプ画面を表示。「？」マーク、黄色のボタン |
| | <テーブル上部操作エリア> | | | | | | | | | | | |
| 11 | 年月選択（テーブル用） | 入力 | プルダウン | 文字 | | | | YYYY年MM月 | 表示 | 活性 | システム日付の年月 | テーブル上部の年月選択。ヘッダーの年月選択と連動 |
| 12 | 前月リンク | リンク | | | | | | | 表示 | 活性 | | 前月の勤務表を表示。「<前月」と表示 |
| 13 | 今月リンク | リンク | | | | | | | 表示 | 活性 | | 今月（当月）の勤務表を表示。「今月」と表示 |
| 14 | 次月リンク | リンク | | | | | | | 表示 | 活性 | | 次月の勤務表を表示。「次月>」と表示 |
| 15 | お知らせリンク | リンク | | | | | | | 表示 | 活性 | | お知らせ画面を表示。リンク形式 |
| 16 | 月次サマリーリンク | リンク | | | | | | | 表示 | 活性 | | 月次サマリー画面を表示。リンク形式 |
| 17 | ステータス表示 | リンク | | 文字 | | | | | 表示 | 活性 | | 月次確定状態を表示するリンク。「ステータス - 」の後に状態を表示。押下でステータスダイアログを表示 |
| 18 | &nbsp;&nbsp;&nbsp;&nbsp;ステータスアイコン | 出力 | | 画像 | | | | | 表示 | 活性 | | 月次確定状態に応じたアイコン。未確定=-（ハイフン）、承認中=↑マーク、承認済み=✓チェックマーク |
| 19 | &nbsp;&nbsp;&nbsp;&nbsp;ステータステキスト | 出力 | | 文字 | | | | | 表示 | 活性 | | 月次確定状態のテキスト。未確定/承認中/承認済み |
| 20 | 承認申請ボタン | ボタン | | | | | | | 表示 | 活性 | | 承認申請画面へ遷移。青色のボタン |
| | <勤務表テーブル> | | | | | | | | | | | |
| 21 | 勤務表 | テーブル | | | | | | | 表示 | 活性 | | 月間の勤務記録を表示 |
| 22 | &nbsp;&nbsp;&nbsp;&nbsp;勤務表行 | テーブル行 | | | | | | | 表示 | 活性 | | 日次の勤務記録 |
| 23 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日付 | 出力 | | 日付 | | | | M/D | 表示 | 活性 | | 勤務日の日付 |
| 24 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;曜日 | 出力 | | 文字 | | | | 日月火水木金土 | 表示 | 活性 | | 勤務日の曜日。日曜日は#FF0000（赤色）、土曜日・祝日は#0000FF（青色）で表示。日曜日に祝日イベントがあっても日曜日と同じ扱い（#FF0000） |
| 25 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定ボタン（+アイコン） | ボタン | | | | | | | 条件付き表示 | 活性 | | 日付列に表示される+マーク（グレー色）。押下で日次確定申請を実行。未確定（NOT_SUBMITTED）の日のみ表示。休暇申請がある場合は非表示 |
| 26 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務状況アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 通常勤務時はNIKKORIアイコン（青色の丸の中に白い笑顔）、注意が必要な場合は青色の丸の中に「!」マーク。マウスホバーでツールチップ表示 |
| 26-1 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務状況ツールチップ | 出力 | | オブジェクト | | | | | 条件付き表示 | 活性 | | 勤務状況アイコンにマウスホバー時に表示される詳細情報。通常勤務の場合は「通常勤務日」と表示 |
| 27 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;申請状況アイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 申請中（↑マーク・黒色）、承認済み（青色の丸の中に白い✓チェックマーク）、却下（×マーク・赤色）。未申請（NOT_SUBMITTED）時は+マークを表示 |
| 28 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | 入出力 | | 時間 | | | | HH:MM | 条件付き表示 | 条件付き活性 | | 出勤時刻。手入力（MANUAL）は黄色背景、打刻（STAMP/SCHEDULED）は白色背景。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示。押下で勤怠情報入力ダイアログを表示 |
| 29 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | 入出力 | | 時間 | | | | HH:MM | 条件付き表示 | 条件付き活性 | | 退勤時刻。手入力（MANUAL）は黄色背景、打刻（STAMP/SCHEDULED）は白色背景。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示。押下で勤怠情報入力ダイアログを表示 |
| 30 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務場所 | 入出力 | | 文字 | | | | | 条件付き表示 | 条件付き活性 | | 通勤、在宅、直行直帰、出張。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示。押下で勤怠情報入力ダイアログを表示 |
| 31 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務グラフ | 出力 | | 画像 | | | | | 表示 | 活性 | | 勤務時間を視覚的に表示（0-48時の時間軸を上部と下部に配置）。平日は標準勤務時間帯（9:00-17:30）をグレーの長方形で常時表示。休日出勤申請が承認されている土日祝の場合も、標準勤務時間帯（9:00-17:30）と休憩時間をグレーの長方形で表示。出勤/退勤時刻が記録されると青色バーと▼マークで表示。マウスホバーでツールチップ表示 |
| 32 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;グラフツールチップ | 出力 | | オブジェクト | | | | | 条件付き表示 | 活性 | | 勤務グラフにマウスホバー時に表示される詳細情報 |
| 33 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;標準の勤務時間（見出し） | 出力 | | 文字 | | | | | 表示 | 活性 | | 「標準の勤務時間」という見出し。■マーク（グレー）付き |
| 34 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;標準勤務時間 | 出力 | | 文字 | | | | HH:MM-HH:MM | 表示 | 活性 | | 所定勤務時間（例: 9:00-17:30） |
| 35 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所定休憩時間 | 出力 | | 文字 | | | | HH:MM-HH:MM | 表示 | 活性 | | 所定の休憩時間帯（例: 12:00-13:00） |
| 36 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;区切り線 | 出力 | | オブジェクト | | | | | 条件付き表示 | 活性 | | 標準の勤務時間セクションと実際の勤務詳細セクションの間に区切り線を表示。通常勤務の場合のみ表示 |
| 37 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出退社時刻 | 出力 | | 文字 | | | | HH:MM-HH:MM | 条件付き表示 | 活性 | | 実際の出退社時刻（例: 8:37-18:02）。通常勤務の場合のみ表示 |
| 38 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間 | 出力 | | 文字 | | | | HH:MM-HH:MM | 条件付き表示 | 活性 | | 実際の休憩時間帯（例: 12:00-13:00）。通常勤務の場合のみ表示 |
| 39 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 出力 | | 文字 | | | | H:MM | 表示 | 活性 | | 総労働時間（例: 8:25）。休暇の場合は7:30固定 |
| 40 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 出力 | | 文字 | | | | H:MM | 条件付き表示 | 活性 | | 実労働時間（例: 8:25）。通常勤務の場合のみ表示 |
| 41 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間合計 | 出力 | | 文字 | | | | H:MM | 条件付き表示 | 活性 | | 休憩時間の合計（例: 1:00）。■マーク（青色）付き。通常勤務の場合のみ表示 |
| 42 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所定内労働 | 出力 | | 文字 | | | | H:MM | 条件付き表示 | 活性 | | 月の所定労働時間の残りまでの労働時間（例: 8:25）。■マーク（ライトブルー）付き。月次累積で計算。その日までの累積実労働時間が月の所定労働時間（所定出勤日数 * 7.5時間）を超えていない場合、その日の実労働時間のうち月の所定労働時間の残りまでを表示。通常勤務の場合のみ表示 |
| 43 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 出力 | | 文字 | | | | H:MM | 条件付き表示 | 活性 | | 月の法定労働時間の残りまでの残業時間（例: 4:10）。■マーク（黄土色）付き。月次累積で計算。その日までの累積実労働時間が月の所定労働時間を超えている場合、その日の実労働時間のうち月の法定労働時間（所定出勤日数 * 8時間）の残りまでを表示 |
| 44 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 出力 | | 文字 | | | | H:MM | 条件付き表示 | 活性 | | 月の法定労働時間を超えた残業時間（例: 3:49）。■マーク（オレンジ色）付き。月次累積で計算。その日までの累積実労働時間が月の法定労働時間を超えている場合、その日の実労働時間のうち法定労働時間を超えた分を表示 |
| 42 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;工数 | 出力 | | 文字 | | | | | 表示 | 活性 | | 工数実績の表示。未登録の場合は+アイコン |
| 43 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;備考 | ボタン | | 画像 | | | | | 表示 | 活性 | | 常に+アイコンを表示。押下すると備考入力ダイアログを開く |
| 44 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;エラーアイコン | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | 工数合計と実労働時間の不一致時に赤い!マークを表示 |
| | <勤務グラフ凡例> | | | | | | | | | | | |
| 45 | グラフ凡例 | ラベル | | | | | | | 表示 | 活性 | | 勤務グラフの色の意味を説明 |
| 46 | &nbsp;&nbsp;&nbsp;&nbsp;未出勤日の所定勤務時間 | ラベル | | | | | | | 表示 | 活性 | | 薄いグレーの塗りつぶし |
| 47 | &nbsp;&nbsp;&nbsp;&nbsp;平日の所定内の労働時間、残業時間 | ラベル | | | | | | | 表示 | 活性 | | 青色の塗りつぶし（濃い青と薄い青のセグメント） |
| 48 | &nbsp;&nbsp;&nbsp;&nbsp;休日（法定時間内かつ法定休日ではない）の労働時間 | ラベル | | | | | | | 表示 | 活性 | | 法定時間内残業と同じ色（黄土色、#B0B000）の塗りつぶし。土曜日または祝日（所定休日）の労働時間に適用 |
| 49 | &nbsp;&nbsp;&nbsp;&nbsp;法定休日の労働時間 | ラベル | | | | | | | 表示 | 活性 | | #DE9EDD（薄い紫色/ラベンダー色）の塗りつぶし。日曜日（法定休日）の労働時間に適用 |
| 50 | &nbsp;&nbsp;&nbsp;&nbsp;有給の休暇の取得日または裁量労働日の労働時間 | ラベル | | | | | | | 表示 | 活性 | | 青色の塗りつぶし（濃い青と薄い青のセグメント）。勤務状況のアイコンで区別 |
| 51 | &nbsp;&nbsp;&nbsp;&nbsp;代休の取得日 | ラベル | | | | | | | 表示 | 活性 | | 薄いグレーの塗りつぶし |
| 52 | &nbsp;&nbsp;&nbsp;&nbsp;無給の休暇の取得日 | ラベル | | | | | | | 表示 | 活性 | | 薄いグレーの塗りつぶし |
| 53 | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外割増時間 | ラベル | | | | | | | 表示 | 活性 | | 紫色の部分（セグメント内の紫色部分） |
| 54 | &nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | ラベル | | | | | | | 表示 | 活性 | | 赤色の部分（セグメント内の赤色部分） |
| 55 | &nbsp;&nbsp;&nbsp;&nbsp;公用外出時間 | ラベル | | | | | | | 表示 | 活性 | | 水色の部分（セグメント内の水色部分） |
| | <サマリー部分（下部）> | | | | | | | | | | | |
| 57 | 所定出勤日数 | 出力 | | 整数 | | | | | 表示 | 活性 | | 月間の所定出勤日数（例: 20日） |
| 58 | 実出勤日数 | 出力 | | 整数 | | | | | 表示 | 活性 | | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数、例: 4日） |
| 59 | 所定労働時間 | 出力 | | 文字 | | | | HHH:MM | 表示 | 活性 | | 月間の所定労働時間（例: 150:00） |
| 60 | 総労働時間 | 出力 | | 文字 | | | | HHH:MM | 表示 | 活性 | | 月間の総労働時間（例: 70:01） |
| 61 | 過不足時間 | 出力 | | 文字 | | | | +/-H:MM | 表示 | 活性 | | 現在日までの過不足時間（例: +2:31） |
| 62 | 法定休日労働 | 出力 | | 文字 | | | | H:MM | 表示 | 活性 | | 法定休日の労働時間（例: 0:00） |
| 63 | 法定時間内残業 | 出力 | | 文字 | | | | H:MM | 表示 | 活性 | | 法定時間内の残業時間（例: 0:00） |
| 64 | 法定時間外残業 | 出力 | | 文字 | | | | H:MM | 表示 | 活性 | | 法定時間外の残業時間（例: 0:00） |
| | <ローディング表示> | | | | | | | | | | | |
| 65 | ローディングマーク | 出力 | | 画像 | | | | | 条件付き表示 | 活性 | | API通信中やデータ処理中に表示されるローディングインジケーター |
| | <確認ダイアログ> | | | | | | | | | | | |
| 66 | 確認ダイアログ | ラベル | | | | | | | 条件付き表示 | 活性 | | 日次確定申請時のエラー時に表示 |
| 67 | &nbsp;&nbsp;&nbsp;&nbsp;タイトル | ラベル | | 文字 | | | | | 表示 | 活性 | 確認 | ダイアログのタイトル |
| 68 | &nbsp;&nbsp;&nbsp;&nbsp;エラーメッセージ | 出力 | | 文字 | | | | | 表示 | 活性 | | チェックエラーの内容を表示 |
| 69 | &nbsp;&nbsp;&nbsp;&nbsp;OKボタン | ボタン | | | | | | | 表示 | 活性 | | ダイアログを閉じる |
| | <備考ダイアログ> | | | | | | | | | | | |
| 70 | 備考ダイアログ | ダイアログ | | | | | | | 条件付き表示 | 活性 | | 備考の+アイコン押下時に表示 |
| 71 | &nbsp;&nbsp;&nbsp;&nbsp;タイトル | ラベル | | 文字 | | | | | 表示 | 活性 | 備考 | ダイアログのタイトル。位置: top: 6px |
| 72 | &nbsp;&nbsp;&nbsp;&nbsp;日付表示 | ラベル | | 文字 | | | | YYYY年MM月DD日X曜日 | 表示 | 活性 | | 対象日の日付（例: 2025年12月5日金曜日）。位置: top: 47px |
| 72-1 | &nbsp;&nbsp;&nbsp;&nbsp;打刻漏れ・手入力修正情報 | ラベル | | 文字 | | | | | 条件付き表示 | 活性 | | 黄色背景（#FFFF00）で黒文字表示。打刻漏れや手入力修正がある場合のみ表示。位置: top: 70px。表示される場合は備考入力欄の位置が下にずれる（動的配置） |
| 73 | &nbsp;&nbsp;&nbsp;&nbsp;備考入力欄 | 入力 | | 文字 | | | | | 表示 | 条件付き活性 | | 複数行テキストボックス。申請済み（APPROVAL_STATUS=PENDING/APPROVED）の場合はグレー背景で編集不可、未申請の場合は白色背景で編集可能。位置は打刻漏れ・手入力修正情報の表示有無により動的に変更（表示時: top: 95px/97px、非表示時: top: 78px/80px） |
| 74 | &nbsp;&nbsp;&nbsp;&nbsp;登録ボタン | ボタン | | | | | | | 条件付き表示 | 活性 | | 未申請時のみ表示。押下で備考を保存してダイアログを閉じる。位置: top: 203px/208px |
| 75 | &nbsp;&nbsp;&nbsp;&nbsp;キャンセルボタン | ボタン | | | | | | | 条件付き表示 | 活性 | | 未申請時のみ表示。押下で保存せずダイアログを閉じる。位置: top: 208px |
| 76 | &nbsp;&nbsp;&nbsp;&nbsp;閉じるボタン | ボタン | | | | | | | 条件付き表示 | 活性 | | 申請済み時のみ表示。押下でダイアログを閉じる。位置: left: 245px, top: 208px |
| | <ステータスダイアログ> | | | | | | | | | | | |
| 77 | ステータスダイアログ | ダイアログ | | | | | | | 条件付き表示 | 活性 | | ステータス表示のリンク押下時に表示 |
| 78 | &nbsp;&nbsp;&nbsp;&nbsp;タイトル | ラベル | | 文字 | | | | | 表示 | 活性 | ステータス | ダイアログのタイトル |
| 79 | &nbsp;&nbsp;&nbsp;&nbsp;承認履歴テーブル | テーブル | | | | | | | 表示 | 活性 | | 承認履歴を表示するテーブル |
| 80 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# | 出力 | | 整数 | | | | | 表示 | 活性 | | 履歴の連番 |
| 81 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日時 | 出力 | | 日時 | | | | YYYY-MM-DD HH:MM | 表示 | 活性 | | アクション日時 |
| 82 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;状況 | 出力 | | 文字 | | | | | 表示 | 活性 | | アクション種別（申請/承認/却下/取消） |
| 83 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実行者 | 出力 | | 文字 | | | | | 表示 | 活性 | | アクションを実行した人の名前 |
| 84 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コメント | 出力 | | 文字 | | | | | 表示 | 活性 | | 承認/却下時のコメント |
| 85 | &nbsp;&nbsp;&nbsp;&nbsp;承認履歴なしメッセージ | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | 承認履歴はありません | 承認履歴が0件の場合に表示 |
| 86 | &nbsp;&nbsp;&nbsp;&nbsp;申請取消ボタン | ボタン | | | | | | | 条件付き表示 | 条件付き活性 | | 月次確定申請中（MONTHLY_APPROVAL_STATUS=PENDING）の場合のみ活性。押下で申請を取り消す |
| 87 | &nbsp;&nbsp;&nbsp;&nbsp;閉じるリンク | リンク | | | | | | | 表示 | 活性 | | ダイアログを閉じる |
| | <申請状況詳細ダイアログ> | | | | | | | | | | | |
| 88 | 申請状況詳細ダイアログ | ダイアログ | | | | | | | 条件付き表示 | 活性 | | 申請状況アイコン押下時に表示 |
| 89 | &nbsp;&nbsp;&nbsp;&nbsp;タイトル | ラベル | | 文字 | | | | | 表示 | 活性 | 申請状況 | ダイアログのタイトル |
| 90 | &nbsp;&nbsp;&nbsp;&nbsp;日付表示 | ラベル | | 文字 | | | | YYYY年MM月DD日X曜日 | 表示 | 活性 | | 対象日の日付（例: 2025年12月5日金曜日） |
| 91 | &nbsp;&nbsp;&nbsp;&nbsp;申請状態 | 出力 | | 文字 | | | | | 表示 | 活性 | | 申請中/承認済み/却下 |
| 92 | &nbsp;&nbsp;&nbsp;&nbsp;申請日時 | 出力 | | 日時 | | | | YYYY-MM-DD HH:MM | 表示 | 活性 | | 日次確定申請を行った日時 |
| 93 | &nbsp;&nbsp;&nbsp;&nbsp;承認日時 | 出力 | | 日時 | | | | YYYY-MM-DD HH:MM | 条件付き表示 | 活性 | | 承認済みの場合のみ表示。承認された日時 |
| 94 | &nbsp;&nbsp;&nbsp;&nbsp;却下日時 | 出力 | | 日時 | | | | YYYY-MM-DD HH:MM | 条件付き表示 | 活性 | | 却下の場合のみ表示。却下された日時 |
| 95 | &nbsp;&nbsp;&nbsp;&nbsp;承認者 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 申請中/承認済みの場合に表示。承認者名 |
| 96 | &nbsp;&nbsp;&nbsp;&nbsp;却下者 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 却下の場合のみ表示。却下を行った承認者名 |
| 97 | &nbsp;&nbsp;&nbsp;&nbsp;コメント | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 申請時/承認時/却下時のコメント（該当する場合） |
| 98 | &nbsp;&nbsp;&nbsp;&nbsp;却下理由 | 出力 | | 文字 | | | | | 条件付き表示 | 活性 | | 却下の場合のみ表示。却下時のコメント |
| 99 | &nbsp;&nbsp;&nbsp;&nbsp;閉じるボタン | ボタン | | | | | | | 表示 | 活性 | | ダイアログを閉じる |

## 入出力項目定義

| No | 項目名 | 種別 | 画面遷移 | ドメイン | 必須 | デフォルト値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |
| 1 | 従業員ID | 入力 | ホーム画面 | 文字 | 必須 | | ログイン中の従業員ID |
| 2 | 表示年月 | 入力 | ホーム画面 | 文字 | 任意 | システム日付の年月 | YYYY-MM形式 |
| 3 | 勤務日 | 出力 | 勤怠情報入力画面 | 日付 | 必須 | | 選択した日付 |
| 4 | 勤怠ID | 出力 | 勤怠情報入力画面 | 整数 | 任意 | | 既存の勤怠記録がある場合 |
| 5 | 勤務日 | 出力 | 工数実績入力画面 | 日付 | 必須 | | 選択した日付 |
| 6 | 勤務日 | 出力 | 備考入力画面 | 日付 | 必須 | | 選択した日付 |

## その他の項目定義

| No | 項目名 | ドメイン | 正常異常区分 | デフォルト値 | 備考 |
| :----- | :----- | :----- | :----- | :----- | :----- |
| 1 | 月間勤務データ | リスト | 正常 | | 月間の勤務記録リスト |
| 2 | &nbsp;&nbsp;&nbsp;&nbsp;日次勤務データ | オブジェクト | 正常 | | 1日分の勤務記録 |
| 3 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤怠ID | 整数 | 正常 | | ATTENDANCE_ID |
| 4 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |
| 5 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務日 | 日付 | 正常 | | WORK_DATE |
| 6 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | 日時 | 正常 | | CLOCK_IN_TIME |
| 7 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | 日時 | 正常 | | CLOCK_OUT_TIME |
| 8 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤打刻種別 | 文字 | 正常 | | CLOCK_IN_TYPE (STAMP/MANUAL/SCHEDULED) |
| 9 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤打刻種別 | 文字 | 正常 | | CLOCK_OUT_TYPE (STAMP/MANUAL/SCHEDULED) |
| 10 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務場所コード | 文字 | 正常 | | WORK_LOCATION_CODE |
| 11 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 小数 | 正常 | | ACTUAL_WORK_HOURS |
| 12 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 小数 | 正常 | 8.00 | SCHEDULED_WORK_HOURS |
| 13 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;残業時間 | 小数 | 正常 | 0 | OVERTIME_HOURS |
| 14 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | 小数 | 正常 | 0 | NIGHT_WORK_HOURS |
| 15 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日労働時間 | 小数 | 正常 | 0 | HOLIDAY_WORK_HOURS |
| 16 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定フラグ | フラグ | 正常 | FALSE | IS_DAILY_CONFIRMED |
| 17 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定日時 | 日時 | 正常 | | DAILY_CONFIRMED_AT |
| 18 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;承認状態 | 文字 | 正常 | NOT_SUBMITTED | APPROVAL_STATUS (NOT_SUBMITTED/PENDING/APPROVED/REJECTED) |
| 19 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;備考 | 文字 | 正常 | | REMARK_TEXT |
| 20 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間リスト | リスト | 正常 | | BREAK_TIME |
| 21 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公用外出リスト | リスト | 正常 | | OFFICIAL_OUTING |
| 22 | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;工数実績リスト | リスト | 正常 | | WORK_HOURS |
| 23 | 月次サマリーデータ | オブジェクト | 正常 | | 月間集計データ |
| 24 | &nbsp;&nbsp;&nbsp;&nbsp;所定出勤日数 | 整数 | 正常 | | SCHEDULED_WORK_DAYS |
| 25 | &nbsp;&nbsp;&nbsp;&nbsp;実出勤日数 | 整数 | 正常 | | ACTUAL_WORK_DAYS（出勤時刻と退勤時刻が両方記録されている日数） |
| 26 | &nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 文字 | 正常 | | SCHEDULED_WORK_HOURS |
| 27 | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 文字 | 正常 | | TOTAL_WORK_HOURS |
| 28 | &nbsp;&nbsp;&nbsp;&nbsp;過不足時間 | 文字 | 正常 | | OVER_UNDER_TIME |
| 29 | &nbsp;&nbsp;&nbsp;&nbsp;法定休日労働 | 文字 | 正常 | | LEGAL_HOLIDAY_WORK_HOURS |
| 30 | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 文字 | 正常 | | WITHIN_LEGAL_OVERTIME_HOURS |
| 31 | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 文字 | 正常 | | OVER_LEGAL_OVERTIME_HOURS |
| 32 | 勤務場所マスタ | リスト | 正常 | | WORK_LOCATION |
| 33 | 休暇申請データ | リスト | 正常 | | VACATION_HISTORY（該当月の休暇申請情報） |
| 34 | 月次承認状態 | 文字 | 正常 | NOT_SUBMITTED | MONTHLY_APPROVAL_STATUS (NOT_SUBMITTED/PENDING/APPROVED/REJECTED) |
| 35 | 月次承認履歴 | リスト | 正常 | | MONTHLY_APPROVAL_HISTORY（月次確定の承認履歴） |
| 36 | &nbsp;&nbsp;&nbsp;&nbsp;履歴ID | 整数 | 正常 | | HISTORY_ID |
| 37 | &nbsp;&nbsp;&nbsp;&nbsp;従業員ID | 文字 | 正常 | | EMPLOYEE_ID |
| 38 | &nbsp;&nbsp;&nbsp;&nbsp;対象年月 | 文字 | 正常 | | TARGET_YEAR_MONTH (YYYY-MM形式) |
| 39 | &nbsp;&nbsp;&nbsp;&nbsp;順序番号 | 整数 | 正常 | | SEQ_NO |
| 40 | &nbsp;&nbsp;&nbsp;&nbsp;アクション日時 | 日時 | 正常 | | ACTION_DATETIME |
| 41 | &nbsp;&nbsp;&nbsp;&nbsp;アクション種別 | 文字 | 正常 | | ACTION_TYPE (SUBMIT/APPROVE/REJECT/CANCEL) |
| 42 | &nbsp;&nbsp;&nbsp;&nbsp;実行者ID | 文字 | 正常 | | ACTOR_ID |
| 43 | &nbsp;&nbsp;&nbsp;&nbsp;実行者名 | 文字 | 正常 | | ACTOR_NAME |
| 44 | &nbsp;&nbsp;&nbsp;&nbsp;コメント | 文字 | 正常 | | COMMENT |
| 45 | エラーメッセージ | 文字 | 異常 | | エラー時に表示するメッセージ |

## イベント処理説明

#### 名称：初期表示処理、英名：initializeScreen、処理タイミング：-

1. ローディング表示開始
   - ローディングマークを表示する。

2. 従業員情報取得
   - 編集仕様に従い、ログイン中の従業員情報を取得する。
   - 【編集仕様 No.1（従業員情報取得）】

3. 月間勤務データ取得
   - API利用仕様に従い、指定年月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. 勤務場所マスタ取得
   - API利用仕様に従い、勤務場所マスタを取得する。
   - 【API利用仕様 No.2（勤務場所マスタ取得API）】

5. ローディング表示終了
   - ローディングマークを非表示にする。

6. 画面表示
   - 編集仕様に従い、勤務表を表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：年月変更処理（ヘッダー）、英名：changeYearMonthHeader、処理タイミング：ヘッダー部分（青色バー）.年月選択.変更

1. ローディング表示開始
   - ローディングマークを表示する。

2. 月間勤務データ取得
   - API利用仕様に従い、選択した年月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

3. ローディング表示終了
   - ローディングマークを非表示にする。

4. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：前月ボタン押下処理（ヘッダー）、英名：previousMonthHeader、処理タイミング：ヘッダー部分（青色バー）.前月ボタン.押下

1. 年月計算
   - 現在表示中の年月から1ヶ月前の年月を計算する。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 月間勤務データ取得
   - API利用仕様に従い、前月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：次月ボタン押下処理（ヘッダー）、英名：nextMonthHeader、処理タイミング：ヘッダー部分（青色バー）.次月ボタン.押下

1. 年月計算
   - 現在表示中の年月から1ヶ月後の年月を計算する。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 月間勤務データ取得
   - API利用仕様に従い、次月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：年月変更処理（テーブル上部）、英名：changeYearMonthTable、処理タイミング：テーブル上部操作エリア.年月選択（テーブル用）.変更

1. ローディング表示開始
   - ローディングマークを表示する。

2. ヘッダー年月選択と連動
   - ヘッダー部分の年月選択も同じ年月に更新する。

3. 月間勤務データ取得
   - API利用仕様に従い、選択した年月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：前月リンク押下処理、英名：previousMonthLink、処理タイミング：テーブル上部操作エリア.前月リンク.押下

1. 年月計算
   - 現在表示中の年月から1ヶ月前の年月を計算する。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 月間勤務データ取得
   - API利用仕様に従い、前月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：今月リンク押下処理、英名：currentMonthLink、処理タイミング：テーブル上部操作エリア.今月リンク.押下

1. 年月計算
   - システム日付から当月の年月を取得する。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 月間勤務データ取得
   - API利用仕様に従い、当月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：次月リンク押下処理、英名：nextMonthLink、処理タイミング：テーブル上部操作エリア.次月リンク.押下

1. 年月計算
   - 現在表示中の年月から1ヶ月後の年月を計算する。

2. ローディング表示開始
   - ローディングマークを表示する。

3. 月間勤務データ取得
   - API利用仕様に従い、次月の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：お知らせリンク押下処理、英名：showNotice、処理タイミング：テーブル上部操作エリア.お知らせリンク.押下

1. お知らせ画面表示
   - お知らせ画面を表示する。

#### 名称：承認申請ボタン押下処理、英名：showApprovalRequest、処理タイミング：テーブル上部操作エリア.承認申請ボタン.押下

1. 承認申請画面表示
   - 承認申請画面へ遷移する。

#### 名称：出勤時刻テキストボックス押下処理、英名：clickClockInTextbox、処理タイミング：勤務表テーブル.出勤時刻テキストボックス.押下

**前提条件**: 平日かつ未申請（APPROVAL_STATUS = NOT_SUBMITTED）または却下（REJECTED）の場合にテキストボックスが表示される。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックスが表示される。それ以外の土日祝の場合はテキストボックスは表示されない。

1. 日次勤怠データ取得
   - API利用仕様に従い、選択した日付の勤怠データを取得する。
   - 【API利用仕様 No.3（日次勤怠記録取得API）】

2. 勤怠情報入力ダイアログ表示（編集モード）
   - 勤怠情報入力ダイアログを表示する。
   - 選択した日付と勤怠IDを渡す。
   - 「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスを表示
   - 各項目（出社、退社、休憩1、休憩2、公用外出1、公用外出2、勤務場所）は編集可能

#### 名称：出勤時刻編集処理、英名：editClockInTime、処理タイミング：勤務表テーブル.出勤時刻テキストボックス.変更

**前提条件**: 平日かつ未申請（APPROVAL_STATUS = NOT_SUBMITTED）または却下（REJECTED）の場合のみ、テキストボックスが表示され編集可能。土日祝の場合はテキストボックスは表示されない。

1. 入力値チェック
   - HH:MM形式であることを確認
   - 24時間制で正しい時刻であることを確認

2. 打刻時刻との比較
   - 入力された時刻が打刻時刻（ORIGINAL_CLOCK_IN_TIME）と異なる場合:
     - 出勤打刻種別をMANUALに設定（CLOCK_IN_TYPE = 'MANUAL'）
     - 背景色を黄色（#FFFF00）に変更
     - 勤務状況アイコンを警告アイコン（黄色の丸の中に「!」マーク）に変更
   - 入力された時刻が打刻時刻（ORIGINAL_CLOCK_IN_TIME）と同じ場合:
     - 出勤打刻種別をSTAMPまたはSCHEDULEDに設定（元の打刻種別に戻す）
     - 背景色を白色に変更
     - 勤務状況アイコンをNIKKORIアイコンに戻す

3. 勤怠データ更新
   - 入力された時刻をCLOCK_IN_TIMEとして保存
   - 【API利用仕様 No.5（勤怠記録更新API）】を呼び出す

4. 画面再描画
   - 更新後のデータで画面を再表示

#### 名称：出勤欄押下処理（テキストのみ）、英名：clickClockInText、処理タイミング：勤務表テーブル.出勤時刻（テキストのみ表示）.押下

**前提条件**: 申請中（APPROVAL_STATUS = PENDING）または承認済み（APPROVED）の場合にテキストのみ表示される

1. 日次勤怠データ取得
   - API利用仕様に従い、選択した日付の勤怠データを取得する。
   - 【API利用仕様 No.3（日次勤怠記録取得API）】

2. 勤怠情報入力ダイアログ表示（閲覧モード）
   - 勤怠情報入力ダイアログを表示する。
   - 選択した日付と勤怠IDを渡す。
   - 各項目（出社、退社、休憩1、休憩2、公用外出1、公用外出2、勤務場所）は編集不可（閲覧のみ）
   - 「閉じる」リンクのみ表示（「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスは非表示）

#### 名称：退勤時刻テキストボックス押下処理、英名：clickClockOutTextbox、処理タイミング：勤務表テーブル.退勤時刻テキストボックス.押下

**前提条件**: 平日かつ未申請（APPROVAL_STATUS = NOT_SUBMITTED）または却下（REJECTED）の場合にテキストボックスが表示される。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックスが表示される。それ以外の土日祝の場合はテキストボックスは表示されない。

1. 日次勤怠データ取得
   - API利用仕様に従い、選択した日付の勤怠データを取得する。
   - 【API利用仕様 No.3（日次勤怠記録取得API）】

2. 勤怠情報入力ダイアログ表示（編集モード）
   - 勤怠情報入力ダイアログを表示する。
   - 選択した日付と勤怠IDを渡す。
   - 「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスを表示
   - 各項目（出社、退社、休憩1、休憩2、公用外出1、公用外出2、勤務場所）は編集可能

#### 名称：退勤時刻編集処理、英名：editClockOutTime、処理タイミング：勤務表テーブル.退勤時刻テキストボックス.変更

**前提条件**: 平日かつ未申請（APPROVAL_STATUS = NOT_SUBMITTED）または却下（REJECTED）の場合のみ、テキストボックスが表示され編集可能。土日祝の場合はテキストボックスは表示されない。

1. 入力値チェック
   - HH:MM形式であることを確認
   - 24時間制で正しい時刻であることを確認
   - 出勤時刻より後の時刻であることを確認

2. 打刻時刻との比較
   - 入力された時刻が打刻時刻（ORIGINAL_CLOCK_OUT_TIME）と異なる場合:
     - 退勤打刻種別をMANUALに設定（CLOCK_OUT_TYPE = 'MANUAL'）
     - 背景色を黄色（#FFFF00）に変更
     - 勤務状況アイコンを警告アイコン（黄色の丸の中に「!」マーク）に変更
   - 入力された時刻が打刻時刻（ORIGINAL_CLOCK_OUT_TIME）と同じ場合:
     - 退勤打刻種別をSTAMPまたはSCHEDULEDに設定（元の打刻種別に戻す）
     - 背景色を白色に変更
     - 勤務状況アイコンをNIKKORIアイコンに戻す

3. 実労働時間の計算
   - 退勤時刻 - 出勤時刻 - 休憩時間 = 実労働時間
   - ACTUAL_WORK_HOURSを更新

4. 勤怠データ更新
   - 入力された時刻をCLOCK_OUT_TIMEとして保存
   - 【API利用仕様 No.5（勤怠記録更新API）】を呼び出す

5. 画面再描画
   - 更新後のデータで画面を再表示

#### 名称：退勤欄押下処理（テキストのみ）、英名：clickClockOutText、処理タイミング：勤務表テーブル.退勤時刻（テキストのみ表示）.押下

**前提条件**: 申請中（APPROVAL_STATUS = PENDING）または承認済み（APPROVED）の場合にテキストのみ表示される

1. 日次勤怠データ取得
   - API利用仕様に従い、選択した日付の勤怠データを取得する。
   - 【API利用仕様 No.3（日次勤怠記録取得API）】

2. 勤怠情報入力ダイアログ表示（閲覧モード）
   - 勤怠情報入力ダイアログを表示する。
   - 選択した日付と勤怠IDを渡す。
   - 各項目（出社、退社、休憩1、休憩2、公用外出1、公用外出2、勤務場所）は編集不可（閲覧のみ）
   - 「閉じる」リンクのみ表示（「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスは非表示）

#### 名称：工数欄押下処理、英名：clickWorkHoursColumn、処理タイミング：勤務表テーブル.工数.押下

1. 工数実績データ取得
   - API利用仕様に従い、選択した日付の工数実績データを取得する。
   - 【API利用仕様 No.4（工数実績取得API）】

2. 工数実績入力画面表示
   - 工数実績入力画面を表示する。
   - 選択した日付を渡す。

#### 名称：備考欄押下処理（+アイコン押下）、英名：clickRemarksIcon、処理タイミング：勤務表テーブル.備考の+アイコン.押下

1. 日次勤務データ取得
   - API利用仕様に従い、選択した日付の勤怠データを取得する。
   - 【API利用仕様 No.3（日次勤怠記録取得API）】
   - 備考内容（REMARK_TEXT）と承認状態（APPROVAL_STATUS）を取得

2. 備考ダイアログ表示
   - 備考ダイアログを表示する。
   - ダイアログタイトル: 「備考」（位置: top: 6px）
   - 日付表示: 対象日をYYYY年MM月DD日X曜日形式で表示（例: 2025年12月5日金曜日、位置: top: 47px）
   - 打刻漏れ・手入力修正情報の表示判定
     - 該当日の勤怠データから打刻漏れや手入力修正の情報を取得
     - 打刻漏れがある場合（打刻のし忘れなどで手入力で入力した場合）: 「出退打刻なし」「出社打刻なし」「退社打刻なし」を表示
     - 手入力修正がある場合: 「(出社打刻 HH:MM)」「(退社打刻 HH:MM)」を表示
     - 黄色背景（#FFFF00）で黒文字表示（位置: top: 70px）
   - 備考入力欄に現在の備考内容を設定
     - 打刻漏れ・手入力修正情報が表示される場合: 位置 top: 95px（背景）/ 97px（テキストエリア）
     - 打刻漏れ・手入力修正情報が表示されない場合: 位置 top: 78px（背景）/ 80px（テキストエリア）
   
3. 承認状態による表示制御
   - APPROVAL_STATUS = PENDING（申請中）またはAPPROVED（承認済み）の場合:
     - 備考入力欄: グレー背景、編集不可（disabled）
     - ボタン: 「閉じる」ボタンのみ表示
   - APPROVAL_STATUS = NOT_SUBMITTED（未申請）またはREJECTED（却下）の場合:
     - 備考入力欄: 白色背景、編集可能
     - ボタン: 「登録」ボタンと「キャンセル」ボタンを表示

4. 登録ボタン押下時
   - 備考内容をAPI経由で保存
   - 【API利用仕様 No.5（勤怠記録更新API）】
   - 保存成功後、ダイアログを閉じる
   - 月間勤務データを再取得して画面を更新

5. キャンセルボタン/閉じるボタン押下時
   - 変更を保存せずダイアログを閉じる

#### 名称：日次確定ボタン押下処理、英名：clickDailyConfirmButton、処理タイミング：勤務表テーブル.日次確定ボタン（+アイコン）.押下

1. 日次確定チェック
   - チェック仕様に従い、日次確定が可能かチェックする。
   - 【チェック仕様 No.1（日次確定チェック）】

   - エラー処理
     1. エラー内容を「確認」ダイアログで表示する。
     2. ダイアログにはエラーメッセージと「OK」ボタンを表示する。
     3. 「OK」ボタン押下で処理を終了する。
     
     - エラーメッセージの例:
       - 出退社時刻が未入力の場合: 「出退社時刻が未入力のため、日次確定できません。」
       - 工数合計と実労働時間が一致しない場合: 「工数の合計と実労働時間が合いません」
       - 勤務場所が未選択の場合: 「勤務場所を選択してください」

2. ローディング表示開始
   - ローディングマークを表示する。

3. 日次確定申請
   - API利用仕様に従い、日次確定申請を行う。
   - 【API利用仕様 No.6（日次確定申請API）】

4. ローディング表示終了
   - ローディングマークを非表示にする。

5. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：申請欄押下処理、英名：clickApprovalColumn、処理タイミング：勤務表テーブル.申請状況アイコン.押下

**前提条件**: 申請状況アイコンの状態に応じて処理が異なる。複数の申請がある場合は優先順位: 日次確定 > 休日出勤 > 休暇

1. 申請状況の判定
   - 日次勤務データの承認状態（APPROVAL_STATUS）を確認する。
   - 日次確定申請がない場合は、休日出勤申請（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'）の承認状態を確認する。
   - 日次確定申請・休日出勤申請がない場合は、休暇申請（VACATION_HISTORY.APPROVAL_STATUS）の承認状態を確認する。

2. 申請状況に応じた処理
   
   **2-1. 未申請（NOT_SUBMITTED）の場合**
   - 日次確定ボタン押下処理を実行する。
   - 【イベント処理説明: 日次確定ボタン押下処理】

   **2-2. 申請中（PENDING）または承認済み（APPROVED）の場合**
   - 勤怠関連申請ダイアログを表示する。
   - 申請タイプに応じたタブを開く（日次確定/休日出勤申請/休暇申請）
   - ダイアログタイトル: 「勤怠関連申請」
   - 日付表示: 対象日をYYYY年MM月DD日X曜日形式で表示（例: 2025年12月5日金曜日）
   - 申請フォーム: 申請タイプに応じたフォームを表示（申請中または承認済みの場合は編集不可）
   - 申請情報セクション（申請中または承認済みの場合のみ表示）:
     - 申請日時: 申請を行った日時をYYYY-MM-DD HH:MM形式で表示
     - 状況: 申請中/承認済みを表示
     - 承認履歴: 承認履歴テーブルを表示（#、日時、状況、実行者、コメント）
   - 取消ボタン: 申請中（PENDING）の場合は「申請取消」、承認済み（APPROVED）の場合は「承認取消」を表示
   - 「キャンセル」リンク: ダイアログを閉じる

   **2-3. 却下（REJECTED）の場合（日次確定申請のみ）**
   - 申請状況詳細ダイアログを表示する。
   - ダイアログタイトル: 「申請状況」
   - 日付表示: 対象日をYYYY年MM月DD日X曜日形式で表示（例: 2025年12月5日金曜日）
   - 申請状態: 「却下」と表示
   - 申請日時: 日次確定申請を行った日時を表示
   - 却下日時: 却下された日時を表示
   - 却下者: 却下を行った承認者名を表示
   - 却下理由: 却下時のコメントを表示（該当する場合）
   - 「閉じる」ボタンを表示
   - 備考: 却下された場合は、修正後に再度日次確定申請を行う必要がある

3. ダイアログの閉じる処理
   - 「キャンセル」リンクまたは「閉じる」ボタン押下でダイアログを閉じる。

#### 名称：月次サマリーリンク押下処理、英名：showMonthlySummary、処理タイミング：テーブル上部操作エリア.月次サマリーリンク.押下

1. 月次サマリーデータ取得
   - API利用仕様に従い、月次サマリーデータを取得する。
   - 【API利用仕様 No.7（月次サマリー取得API）】

2. 月次サマリー画面表示
   - 月次サマリー画面を表示する。

#### 名称：ステータス表示押下処理、英名：showStatusDialog、処理タイミング：テーブル上部操作エリア.ステータス表示.押下

1. 月次承認履歴取得
   - API利用仕様に従い、表示年月の月次承認履歴を取得する。
   - 【API利用仕様 No.9（月次承認履歴取得API）】

2. ステータスダイアログ表示
   - ステータスダイアログを表示する。
   - ダイアログタイトル: 「ステータス」
   - 承認履歴テーブルに取得した履歴を表示
   - 承認履歴が0件の場合は「承認履歴はありません」と表示

3. 申請取消ボタンの活性制御
   - 月次確定申請中（MONTHLY_APPROVAL_STATUS=PENDING）の場合: 活性（青色ボタン）
   - 上記以外の場合: 非活性（グレーボタン）

#### 名称：申請取消ボタン押下処理、英名：cancelMonthlyApproval、処理タイミング：ステータスダイアログ.申請取消ボタン.押下

1. 確認ダイアログ表示
   - 「月次確定申請を取り消しますか？」の確認ダイアログを表示する。
   - 「OK」ボタンと「キャンセル」ボタンを表示

2. 取消処理
   - 「OK」ボタン押下時:
     - API利用仕様に従い、月次確定申請を取り消す。
     - 【API利用仕様 No.10（月次確定申請取消API）】
     - 成功時: ステータスダイアログを閉じ、画面を再表示
   - 「キャンセル」ボタン押下時: 何もせず確認ダイアログを閉じる

#### 名称：ステータスダイアログ閉じる処理、英名：closeStatusDialog、処理タイミング：ステータスダイアログ.閉じるリンク.押下

1. ダイアログ閉じる
   - ステータスダイアログを閉じる。

#### 名称：休暇情報ボタン押下処理、英名：showVacationInfo、処理タイミング：ヘッダー部分（青色バー）.休暇情報ボタン.押下

1. 休暇情報データ取得
   - API利用仕様に従い、休暇情報データを取得する。
   - 【API利用仕様 No.8（休暇情報取得API）】

2. 休暇情報画面表示
   - 休暇情報画面を表示する。

#### 名称：勤怠情報入力画面からの戻り処理、英名：returnFromAttendanceInput、処理タイミング：勤怠情報入力画面.登録.押下後

1. 月間勤務データ再取得
   - API利用仕様に従い、最新の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

2. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】
   - 打刻種別がSTAMPまたはSCHEDULEDに戻った場合、勤務状況アイコンはNIKKORIマークに戻り、出社・退社のテキストボックスの背景色も白色に戻る
   - 打刻種別がMANUALのままの場合、勤務状況アイコンは警告アイコン（黄色の丸の中に「!」マーク）のまま、出社・退社のテキストボックスの背景色も黄色のまま

#### 名称：工数実績入力画面からの戻り処理、英名：returnFromWorkHoursInput、処理タイミング：工数実績入力画面.登録.押下後

1. 月間勤務データ再取得
   - API利用仕様に従い、最新の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

2. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：備考入力画面からの戻り処理、英名：returnFromRemarksInput、処理タイミング：備考入力画面.登録.押下後

1. 月間勤務データ再取得
   - API利用仕様に従い、最新の勤務データを取得する。
   - 【API利用仕様 No.1（月間勤務表取得API）】

2. 画面再表示
   - 編集仕様に従い、勤務表を再表示する。
   - 【編集仕様 No.2（勤務表表示）】

#### 名称：勤務グラフホバー処理、英名：hoverWorkGraph、処理タイミング：勤務表テーブル.勤務グラフ.マウスホバー

1. ツールチップ表示
   - 編集仕様に従い、勤務グラフツールチップを表示する。
   - 【編集仕様 No.3（勤務グラフツールチップ表示）】

2. ツールチップ非表示
   - マウスがグラフから離れた際、ツールチップを非表示にする。

#### 名称：勤務状況アイコンホバー処理、英名：hoverWorkStatusIcon、処理タイミング：勤務表テーブル.勤務状況アイコン.マウスホバー

1. ツールチップ表示
   - 編集仕様に従い、勤務状況アイコンのツールチップを表示する。
   - 【編集仕様 No.5（勤務状況アイコンツールチップ表示）】
   - 通常勤務の場合: 「通常勤務日」と表示
   - 注意が必要な勤務の場合: 該当する注意事項を表示

2. ツールチップ非表示
   - マウスがアイコンから離れた際、ツールチップを非表示にする。

## 編集仕様

#### No.1
- 編集仕様名：従業員情報取得
- 関連する取得仕様名：テーブル取得仕様 No.1（従業員情報取得）
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | 従業員ID | 従業員情報取得.従業員ID | |
  | 従業員名 | 従業員情報取得.従業員名 | |
  | 部署 | 従業員情報取得.部署 | |

#### No.2
- 編集仕様名：勤務表表示
- 関連する取得仕様名：-
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | 勤務表行 | 月間勤務データの各日次データを1行ずつ表示 | 背景色: 日曜日=#FFE8D9（薄いピンク）、土曜日・祝日=#E8F5FF（薄い青）、休暇申請済み=#FFCFA5（オレンジ色・平日のみ）、平日=白色。休暇申請は基本的に平日に行うため、平日の休暇申請日はオレンジ色で表示される。日曜日に祝日イベントがあっても日曜日と同じ扱い（背景色#FFE8D9） |
  | &nbsp;&nbsp;&nbsp;&nbsp;日付 | 日次勤務データ.勤務日をM/D形式で表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;曜日 | 日次勤務データ.勤務日から曜日を計算 | 日曜日=#FF0000（赤色）、土曜日・祝日=#0000FF（青色）、平日=黒色。日曜日に祝日イベントがあっても日曜日と同じ扱い（ラベル色#FF0000） |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務状況アイコン | 日次勤務データの状態に応じてアイコンを表示 | 通常勤務時はNIKKORIアイコン（青色の丸の中に白い笑顔）、打刻時刻と入力時刻が異なる場合は黄色の丸の中に「!」マーク（警告アイコン）、注意が必要な場合は青色の丸の中に「!」マーク、有給休暇は水色の丸の中に白いコーヒーカップアイコン、代休は水色の丸の中に白いコーヒーカップアイコン（有給休暇と同じ）、その他の休暇・休日は休暇種別に応じたアイコン。マウスホバーでツールチップ表示（通常勤務の場合は「通常勤務日」と表示、打刻時刻と入力時刻が異なる場合は「通常勤務日　打刻時刻と入力時刻が異なる理由を備考に入力してください」と表示）。表示条件：通常勤務日に出社と退社ボタンが押された際に表示。打刻時刻（ORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIME）と入力時刻が一致し、かつ打刻種別がSTAMPまたはSCHEDULEDの場合はNIKKORIアイコン、打刻時刻と入力時刻が異なる場合（打刻種別がMANUALで時刻が変更されている場合）は警告アイコン（黄色の丸の中に「!」マーク）。勤怠情報入力画面で打刻時刻と同じ時刻に変更し、打刻種別をSTAMPまたはSCHEDULEDに戻した場合、NIKKORIアイコンに戻る |
  | &nbsp;&nbsp;&nbsp;&nbsp;申請状況アイコン | 日次勤務データの承認状態に応じてアイコンを表示 | 日次確定申請: APPROVAL_STATUS=PENDING：↑マーク・黒色（申請中）、APPROVED：青色の丸の中に白い✓チェックマーク（承認済み）、REJECTED：×マーク・赤色（却下）、NOT_SUBMITTED：+マーク・グレー色（未申請、日次確定ボタンとして機能）。休暇申請: VACATION_HISTORY.APPROVAL_STATUS=PENDING：↑マーク・黒色（申請中）、APPROVED：青色の丸の中に白い✓チェックマーク（承認済み）。休日出勤申請: APPLICATION_HISTORY.APPROVAL_STATUS=PENDING：↑マーク・黒色（申請中）、APPROVED：青色の丸の中に白い✓チェックマーク（承認済み）。複数の申請がある場合は優先順位: 日次確定 > 休日出勤 > 休暇 |
  | &nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | 日次勤務データ.出勤時刻をHH:MM形式で表示 | 打刻種別がMANUALの場合は黄色背景（#FFFF00）、STAMPまたはSCHEDULEDの場合は白色背景。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示（テキストボックスは表示されない） |
  | &nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | 日次勤務データ.退勤時刻をHH:MM形式で表示 | 打刻種別がMANUALの場合は黄色背景（#FFFF00）、STAMPまたはSCHEDULEDの場合は白色背景。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示（テキストボックスは表示されない） |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務場所 | 日次勤務データ.勤務場所コードに対応する勤務場所名を表示 | 勤務場所マスタから取得。休暇申請がある場合はテキストボックスを表示しない（非表示）。土日祝の場合、休日出勤申請が承認されている（APPLICATION_HISTORY.APPLICATION_TYPE='HOLIDAY_WORK'かつAPPROVAL_STATUS='APPROVED'または'PENDING'）場合はテキストボックス表示、それ以外の場合はテキストボックスを表示しない。平日の場合、未申請（NOT_SUBMITTED）または却下（REJECTED）の場合はテキストボックス表示、申請中（PENDING）または承認済み（APPROVED）の場合はテキストのみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務グラフ | 日次勤務データの出退勤時刻、休憩時間、公用外出時間から勤務グラフを生成 | 0-48時の時間軸を上部と下部に配置して表示。平日は標準勤務時間帯（9:00-17:30）をグレーの長方形で常時表示。休日出勤申請が承認されている土日祝の場合も、標準勤務時間帯（9:00-17:30）と休憩時間をグレーの長方形で表示。休憩時間は四角形で表示（出勤していない場合：#BBBBBB、出勤していて出勤時刻が休憩時間より前の場合：#1A69AB、出勤時刻が休憩時間より後の場合は表示しない）。出勤/退勤時刻が記録されると該当時間帯をバーで表示し、出勤時刻と退勤時刻の位置に▼（下向き三角）マークを表示。土曜日または祝日（所定休日）の場合は法定時間内残業と同じ色（#B0B000 黄土色）、日曜日（法定休日）の場合は#DE9EDD（薄い紫色/ラベンダー色）で表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;工数 | 日次勤務データ.工数実績リストから工数合計を表示 | 未登録の場合は+アイコン。休暇申請がある場合は+アイコンを表示しない（非表示） |
  | &nbsp;&nbsp;&nbsp;&nbsp;備考 | 常に+アイコンを表示 | 押下すると備考ダイアログを開く |
  | &nbsp;&nbsp;&nbsp;&nbsp;エラーアイコン | 工数合計と実労働時間が一致しない場合に赤い!マークを表示 | 工数合計 ≠ 実労働時間 |
  | サマリー部分 | 月次サマリーデータを表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定出勤日数 | 月次サマリーデータ.所定出勤日数 | 例: 20日 |
  | &nbsp;&nbsp;&nbsp;&nbsp;実出勤日数 | 月次サマリーデータ.実出勤日数 | 例: 4日（出勤時刻と退勤時刻が両方記録されている日数） |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 月次サマリーデータ.所定労働時間をHHH:MM形式で表示 | 例: 150:00 |
  | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 月次サマリーデータ.総労働時間をHHH:MM形式で表示 | 例: 70:01 |
  | &nbsp;&nbsp;&nbsp;&nbsp;過不足時間 | 月次サマリーデータ.過不足時間を+/-H:MM形式で表示 | 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。例: +2:31（当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間） |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定休日労働 | 月次サマリーデータ.法定休日労働をH:MM形式で表示 | 例: 0:00 |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 月次サマリーデータ.法定時間内残業をH:MM形式で表示 | 所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間))。例: 0:00 |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 月次サマリーデータ.法定時間外残業をH:MM形式で表示 | 法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00))。例: 0:00 |

#### No.3
- 編集仕様名：ステータス表示
- 関連する取得仕様名：API利用仕様 No.9（月次承認履歴取得API）
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | ステータス表示 | 「ステータス - 」+ ステータスアイコン + ステータステキスト | テーブル上部に表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;ステータスアイコン | 月次確定状態に応じたアイコンを表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;未確定アイコン | -（ハイフン） | MONTHLY_APPROVAL_STATUS = NOT_SUBMITTED の場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;承認中アイコン | ↑（上向き矢印、黒色） | MONTHLY_APPROVAL_STATUS = PENDING の場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;承認済みアイコン | ✓（チェックマーク、青色） | MONTHLY_APPROVAL_STATUS = APPROVED の場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;ステータステキスト | 月次確定状態に応じたテキストを表示 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;未確定 | 「未確定」 | MONTHLY_APPROVAL_STATUS = NOT_SUBMITTED の場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;承認中 | 「承認中」 | MONTHLY_APPROVAL_STATUS = PENDING の場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;承認済み | 「承認済み」 | MONTHLY_APPROVAL_STATUS = APPROVED の場合 |

#### No.4
- 編集仕様名：勤務グラフツールチップ表示
- 関連する取得仕様名：-
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | グラフツールチップ | マウスホバー時にツールチップを表示 | 勤務グラフにマウスカーソルがある場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;標準の勤務時間（見出し） | 「標準の勤務時間」という見出しを表示 | ■マーク（グレー）付き |
  | &nbsp;&nbsp;&nbsp;&nbsp;標準勤務時間 | 従業員マスタ.定時出勤時刻-定時退勤時刻をHH:MM-HH:MM形式で表示 | 例: 9:00-17:30。■マーク（グレー）付き |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定休憩時間 | 所定の休憩時間帯をHH:MM-HH:MM形式で表示 | 例: 12:00-13:00（固定値または設定値）。■マーク（グレー）付き |
  | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間（休暇時） | 7:30（固定値）をH:MM形式で表示 | 例: 7:30。■マーク（グレー）付き。有給休暇、代休、無給休暇などの休暇取得日の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;区切り線 | 標準の勤務時間セクションと実際の勤務詳細セクションの間に区切り線を表示 | 通常勤務の場合のみ表示。休暇取得日の場合は表示しない |
  | &nbsp;&nbsp;&nbsp;&nbsp;出退社時刻 | 日次勤務データ.出勤時刻-退勤時刻をHH:MM-HH:MM形式で表示 | 例: 8:45-17:45。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;休憩時間 | 日次勤務データ.休憩時間リストから休憩時間帯を表示 | 複数の休憩時間がある場合はカンマ区切り。例: 12:00-13:00。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間（通常勤務時） | 退勤時刻-出勤時刻をH:MM形式で表示 | 例: 8:25。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | 日次勤務データ.実労働時間をH:MM形式で表示 | 例: 8:00。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;休憩時間合計 | 日次勤務データ.休憩時間リストの合計をH:MM形式で表示 | 例: 1:00。■マーク（青色）付き。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定内労働 | 月の所定労働時間の残りまでの労働時間をH:MM形式で表示 | 例: 0:45。■マーク（ライトブルー）付き。月次累積で計算。前日までの累積実労働時間が月の所定労働時間（所定出勤日数 * 7.5時間）を超えていない場合、その日の実労働時間のうち、月の所定労働時間の残り分までを表示。残りが0:45の場合、その日の実労働時間のうち最初の0:45が所定内労働として表示される。通常勤務の場合のみ表示 |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 月の法定労働時間の残りまでの残業時間をH:MM形式で表示 | 例: 7:58。■マーク（黄土色）付き。月次累積で計算。前日までの累積実労働時間が月の所定労働時間を超えている場合、その日の実労働時間のうち、月の法定労働時間（所定出勤日数 * 8時間）の残り分までを表示。残りが4:10の場合、その日の実労働時間のうち最初の4:10が法定時間内残業として表示される |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 月の法定労働時間を超えた残業時間をH:MM形式で表示 | 例: 3:49。■マーク（オレンジ色）付き。月次累積で計算。前日までの累積実労働時間が月の法定労働時間を超えている場合、その日の実労働時間のうち法定労働時間を超えた分を表示。例：その日の実労働時間が7:59で法定時間内残業が4:10の場合、残りの3:49が法定時間外残業として表示される |

#### No.5
- 編集仕様名：勤務状況アイコンツールチップ表示
- 関連する取得仕様名：-
  | 項目名 | 編集内容 | 条件or前提 |
  | :--- | :--- | :--- |
  | 勤務状況ツールチップ | マウスホバー時にツールチップを表示 | 勤務状況アイコンにマウスカーソルがある場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;通常勤務 | 「通常勤務日」と表示 | 通常勤務アイコン（NIKKORI）にホバーした場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;打刻時刻と入力時刻が異なる場合 | 「通常勤務日　打刻時刻と入力時刻が異なる理由を備考に入力してください」と表示 | 打刻時刻と入力時刻が異なる場合の警告アイコン（黄色の丸の中に「!」マーク）にホバーした場合 |
  | &nbsp;&nbsp;&nbsp;&nbsp;注意が必要な勤務 | 該当する注意事項を表示 | 注意が必要な勤務アイコン（青色の丸の中に「!」マーク）にホバーした場合 |

## チェック仕様

#### No.1
- チェック仕様：日次確定チェック
- 分類：特殊・システム系チェック
- 取得元：その他の項目定義
  | 項目名 | 区分 | チェック内容 | メッセージコード | メッセージ |
  | :--- | :--- | :--- | :--- | :--- |
  | 出勤時刻 | 必須 | 出勤時刻がNULLまたは空の場合、エラー | E_ATT_001 | 出退社時刻が未入力のため、日次確定できません。 |
  | 退勤時刻 | 必須 | 退勤時刻がNULLまたは空の場合、エラー | E_ATT_002 | 出退社時刻が未入力のため、日次確定できません。 |
  | 勤務場所コード | 必須 | 勤務場所コードがNULLまたは空の場合、エラー | E_ATT_005 | 勤務場所を選択してください |
  | 工数合計 | 一致 | 工数合計と実労働時間が一致しない場合、エラー | E_ATT_007 | 工数の合計と実労働時間が合いません |
  | 備考 | 依存 | 出勤打刻種別または退勤打刻種別がMANUALで、備考が空の場合、エラー | E_ATT_006 | 手入力の場合は備考に理由を入力してください |

## テーブル取得仕様

#### No.1
- 取得仕様名：従業員情報取得
- テーブル名：EMPLOYEE
  | 項目名 | 取得内容 | 補足 |
  | :--- | :--- | :--- |
  | 従業員ID | EMPLOYEE.EMPLOYEE_ID | |
  | 従業員名 | EMPLOYEE.EMPLOYEE_NAME | |
  | 部署 | EMPLOYEE.DEPARTMENT | |
  | 役職 | EMPLOYEE.POSITION | |
- 関連する取得仕様
  - なし
- 取得条件
  - EMPLOYEE.EMPLOYEE_ID = 入出力項目定義.従業員ID
  - EMPLOYEE.IS_ACTIVE = TRUE
- その他
  - なし

## テーブル更新仕様

本画面では直接的なテーブル更新は行わず、各入力画面（勤怠情報入力画面、工数実績入力画面、備考入力画面）でテーブル更新を行います。

## API利用仕様

#### No.1
- API仕様名：月間勤務表取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/attendance/monthly | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |
  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 月間勤務データ | 指定年月の勤務記録リスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;日次勤務データ | 1日分の勤務記録 | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤怠ID | ATTENDANCE_RECORD.ATTENDANCE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;従業員ID | ATTENDANCE_RECORD.EMPLOYEE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務日 | ATTENDANCE_RECORD.WORK_DATE | YYYY-MM-DD形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | ATTENDANCE_RECORD.CLOCK_IN_TIME | YYYY-MM-DD HH:MM:SS形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | ATTENDANCE_RECORD.CLOCK_OUT_TIME | YYYY-MM-DD HH:MM:SS形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出勤打刻種別 | ATTENDANCE_RECORD.CLOCK_IN_TYPE | STAMP/MANUAL/SCHEDULED |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;退勤打刻種別 | ATTENDANCE_RECORD.CLOCK_OUT_TYPE | STAMP/MANUAL/SCHEDULED |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;勤務場所コード | ATTENDANCE_RECORD.WORK_LOCATION_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実労働時間 | ATTENDANCE_RECORD.ACTUAL_WORK_HOURS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | ATTENDANCE_RECORD.SCHEDULED_WORK_HOURS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;残業時間 | ATTENDANCE_RECORD.OVERTIME_HOURS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;深夜労働時間 | ATTENDANCE_RECORD.NIGHT_WORK_HOURS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休日労働時間 | ATTENDANCE_RECORD.HOLIDAY_WORK_HOURS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定フラグ | ATTENDANCE_RECORD.IS_DAILY_CONFIRMED | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日次確定日時 | ATTENDANCE_RECORD.DAILY_CONFIRMED_AT | YYYY-MM-DD HH:MM:SS形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;休憩時間リスト | BREAK_TIME | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公用外出リスト | OFFICIAL_OUTING | |
  | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;工数実績リスト | WORK_HOURS | |
  | 月次サマリーデータ | 月間集計データ | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数 |
  | &nbsp;&nbsp;&nbsp;&nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |
  | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |
  | &nbsp;&nbsp;&nbsp;&nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |
- 関連する取得仕様
  - テーブル取得仕様 No.1（従業員情報取得）
- その他
  - ATTENDANCE_RECORD、BREAK_TIME、OFFICIAL_OUTING、WORK_HOURSを結合して返却
  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算

#### No.2
- API仕様名：勤務場所マスタ取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/master/work-locations | |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 勤務場所マスタ | 勤務場所マスタリスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務場所コード | WORK_LOCATION.LOCATION_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務場所名 | WORK_LOCATION.LOCATION_NAME | |
  | &nbsp;&nbsp;&nbsp;&nbsp;表示順 | WORK_LOCATION.DISPLAY_ORDER | |
- 関連する取得仕様
  - なし
- その他
  - IS_ACTIVE=TRUEの勤務場所をDISPLAY_ORDER順で取得

#### No.3
- API仕様名：日次勤怠記録取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/attendance/daily | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
  | WORK_DATE | 選択した日付 | クエリパラメータ、YYYY-MM-DD形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 日次勤務データ | 1日分の勤務記録 | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤怠ID | ATTENDANCE_RECORD.ATTENDANCE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;従業員ID | ATTENDANCE_RECORD.EMPLOYEE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務日 | ATTENDANCE_RECORD.WORK_DATE | YYYY-MM-DD形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;出勤時刻 | ATTENDANCE_RECORD.CLOCK_IN_TIME | YYYY-MM-DD HH:MM:SS形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;退勤時刻 | ATTENDANCE_RECORD.CLOCK_OUT_TIME | YYYY-MM-DD HH:MM:SS形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;出勤打刻種別 | ATTENDANCE_RECORD.CLOCK_IN_TYPE | STAMP/MANUAL/SCHEDULED |
  | &nbsp;&nbsp;&nbsp;&nbsp;退勤打刻種別 | ATTENDANCE_RECORD.CLOCK_OUT_TYPE | STAMP/MANUAL/SCHEDULED |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤務場所コード | ATTENDANCE_RECORD.WORK_LOCATION_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;備考 | ATTENDANCE_RECORD.REMARK_TEXT | |
  | &nbsp;&nbsp;&nbsp;&nbsp;休憩時間リスト | BREAK_TIME | |
  | &nbsp;&nbsp;&nbsp;&nbsp;公用外出リスト | OFFICIAL_OUTING | |
- 関連する取得仕様
  - なし
- その他
  - ATTENDANCE_RECORD、BREAK_TIME、OFFICIAL_OUTINGを結合して返却

#### No.4
- API仕様名：工数実績取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/work-hours/daily | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
  | WORK_DATE | 選択した日付 | クエリパラメータ、YYYY-MM-DD形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 工数実績リスト | 工数実績リスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;工数実績ID | WORK_HOURS.WORK_HOURS_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;勤怠ID | WORK_HOURS.ATTENDANCE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;従業員ID | WORK_HOURS.EMPLOYEE_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;作業日 | WORK_HOURS.WORK_DATE | YYYY-MM-DD形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;ジョブコード | WORK_HOURS.JOB_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;作業コード | WORK_HOURS.WORK_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;工数時間 | WORK_HOURS.WORK_HOURS_VALUE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;作業ボリューム | WORK_HOURS.WORK_VOLUME | |
  | &nbsp;&nbsp;&nbsp;&nbsp;入力種別 | WORK_HOURS.INPUT_TYPE | TIME/VOLUME |
- 関連する取得仕様
  - なし
- その他
  - WORK_HOURSテーブルから該当日の工数実績を取得

#### No.5
- API仕様名：勤怠記録更新API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | PUT | |
  | エンドポイント | /api/attendance/record | |
  | ATTENDANCE_ID | 勤怠ID | リクエストボディ |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |
  | WORK_DATE | 勤務日 | リクエストボディ、YYYY-MM-DD形式 |
  | CLOCK_IN_TIME | 出勤時刻 | リクエストボディ、YYYY-MM-DD HH:MM:SS形式（任意） |
  | CLOCK_OUT_TIME | 退勤時刻 | リクエストボディ、YYYY-MM-DD HH:MM:SS形式（任意） |
  | CLOCK_IN_TYPE | 出勤打刻種別 | リクエストボディ、STAMP/MANUAL/SCHEDULED（任意） |
  | CLOCK_OUT_TYPE | 退勤打刻種別 | リクエストボディ、STAMP/MANUAL/SCHEDULED（任意） |
  | WORK_LOCATION_CODE | 勤務場所コード | リクエストボディ（任意） |
  | REMARK_TEXT | 備考 | リクエストボディ（任意） |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 成功フラグ | 成功/失敗 | true/false |
  | メッセージ | 処理結果メッセージ | |
  | 更新後の勤怠データ | 更新後のATTENDANCE_RECORDデータ | JSON形式 |
- 関連する取得仕様
  - なし
- その他
  - 日次確定済み（IS_DAILY_CONFIRMED=TRUE）の場合は更新不可
  - 出勤時刻・退勤時刻を更新した場合、ACTUAL_WORK_HOURSを自動計算
  - 手入力（MANUAL）の場合、備考の入力を推奨

#### No.6
- API仕様名：日次確定申請API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | POST | |
  | エンドポイント | /api/attendance/daily-confirmation | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |
  | WORK_DATE | 選択した日付 | リクエストボディ、YYYY-MM-DD形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 成功フラグ | 成功/失敗 | true/false |
  | メッセージ | 処理結果メッセージ | |
- 関連する取得仕様
  - なし
- その他
  - 勤務場所が設定されているか、工数合計と実労働時間が一致するかをチェック
  - 問題なければIS_DAILY_CONFIRMED=TRUE、DAILY_CONFIRMED_ATを現在時刻で更新

#### No.7
- API仕様名：月次サマリー取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/attendance/monthly-summary | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |
  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 月次サマリーデータ | 月間集計データ | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定出勤日数 | 月間の所定出勤日数 | 整数（例: 20） |
  | &nbsp;&nbsp;&nbsp;&nbsp;実出勤日数 | 月間の実出勤日数（出勤時刻と退勤時刻が両方記録されている日数） | 整数（例: 4） |
  | &nbsp;&nbsp;&nbsp;&nbsp;所定労働時間 | 月間の所定労働時間 | HHH:MM形式（例: 150:00） |
  | &nbsp;&nbsp;&nbsp;&nbsp;総労働時間 | 月間の総労働時間 | HHH:MM形式（例: 70:01） |
  | &nbsp;&nbsp;&nbsp;&nbsp;過不足時間 | 過不足時間 | +/-H:MM形式（例: +2:31）。計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間 |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定休日労働 | 法定休日の労働時間 | H:MM形式（例: 0:00） |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間内残業 | 法定時間内の残業時間 | H:MM形式（例: 0:00）。所定労働時間（7.5時間/日）を超えて法定労働時間（8時間/日）以内の残業時間。計算方法: 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分。max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間)) |
  | &nbsp;&nbsp;&nbsp;&nbsp;法定時間外残業 | 法定時間外の残業時間 | H:MM形式（例: 0:00）。法定労働時間（8時間/日）を超えた残業時間。計算方法: 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分。max(0, 実作業時間 - (所定出勤日数 * 8:00)) |
- 関連する取得仕様
  - なし
- その他
  - V_MONTHLY_ATTENDANCEビューや関連テーブルから月間の勤務時間集計を取得
  - 過不足時間は前日までの実作業時間と前日までの想定出勤日数に基づいて計算

#### No.8
- API仕様名：休暇情報取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/vacation/info | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 休暇残日数リスト | 休暇残日数リスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;休暇種別コード | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;休暇種別名 | V_VACATION_BALANCE_SUMMARY.VACATION_TYPE_NAME | |
  | &nbsp;&nbsp;&nbsp;&nbsp;付与日数 | V_VACATION_BALANCE_SUMMARY.GRANTED_DAYS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;使用日数 | V_VACATION_BALANCE_SUMMARY.USED_DAYS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;残日数 | V_VACATION_BALANCE_SUMMARY.REMAINING_DAYS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;有効期限 | V_VACATION_BALANCE_SUMMARY.EXPIRATION_DATE | YYYY-MM-DD形式 |
  | 休暇取得履歴リスト | 休暇取得履歴リスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;休暇取得ID | VACATION_HISTORY.VACATION_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;休暇種別コード | VACATION_HISTORY.VACATION_TYPE_CODE | |
  | &nbsp;&nbsp;&nbsp;&nbsp;開始日 | VACATION_HISTORY.START_DATE | YYYY-MM-DD形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;終了日 | VACATION_HISTORY.END_DATE | YYYY-MM-DD形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;取得日数 | VACATION_HISTORY.VACATION_DAYS | |
  | &nbsp;&nbsp;&nbsp;&nbsp;取得理由 | VACATION_HISTORY.REASON | |
  | &nbsp;&nbsp;&nbsp;&nbsp;承認状態 | VACATION_HISTORY.APPROVAL_STATUS | PENDING/APPROVED/REJECTED |
- 関連する取得仕様
  - なし
- その他
  - V_VACATION_BALANCE_SUMMARYビューから休暇残日数、VACATION_HISTORYテーブルから取得履歴を取得

#### No.9
- API仕様名：月次承認履歴取得API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | GET | |
  | エンドポイント | /api/attendance/monthly-approval-history | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | クエリパラメータ |
  | YEAR | 表示対象年 | クエリパラメータ、YYYY形式 |
  | MONTH | 表示対象月 | クエリパラメータ、MM形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 月次承認状態 | 月次確定の承認状態 | NOT_SUBMITTED/PENDING/APPROVED/REJECTED |
  | 月次承認履歴リスト | 月次確定の承認履歴リスト | JSON形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;履歴ID | MONTHLY_APPROVAL_HISTORY.HISTORY_ID | |
  | &nbsp;&nbsp;&nbsp;&nbsp;順序番号 | MONTHLY_APPROVAL_HISTORY.SEQ_NO | 1から始まる連番 |
  | &nbsp;&nbsp;&nbsp;&nbsp;アクション日時 | MONTHLY_APPROVAL_HISTORY.ACTION_DATETIME | YYYY-MM-DD HH:MM形式 |
  | &nbsp;&nbsp;&nbsp;&nbsp;アクション種別 | MONTHLY_APPROVAL_HISTORY.ACTION_TYPE | SUBMIT=申請、APPROVE=承認、REJECT=却下、CANCEL=取消 |
  | &nbsp;&nbsp;&nbsp;&nbsp;実行者名 | 実行者の従業員名 | EMPLOYEE.EMPLOYEE_NAMEから取得 |
  | &nbsp;&nbsp;&nbsp;&nbsp;コメント | MONTHLY_APPROVAL_HISTORY.COMMENT | |
- 関連する取得仕様
  - なし
- その他
  - MONTHLY_APPROVAL_HISTORYテーブルから該当年月の承認履歴を取得
  - SEQ_NO順にソートして返却

#### No.10
- API仕様名：月次確定申請取消API
- リクエスト
  | 項目名 | リクエスト内容 | 補足 |
  | :--- | :--- | :--- |
  | HTTPメソッド | POST | |
  | エンドポイント | /api/attendance/monthly-approval/cancel | |
  | EMPLOYEE_ID | 入出力項目定義.従業員ID | リクエストボディ |
  | YEAR | 表示対象年 | リクエストボディ、YYYY形式 |
  | MONTH | 表示対象月 | リクエストボディ、MM形式 |
- レスポンス
  | 項目名 | レスポンス内容 | 補足 |
  | :--- | :--- | :--- |
  | 成功フラグ | 成功/失敗 | true/false |
  | メッセージ | 処理結果メッセージ | |
- 関連する取得仕様
  - なし
- その他
  - 月次確定申請中（MONTHLY_APPROVAL_STATUS=PENDING）の場合のみ取消可能
  - MONTHLY_APPROVAL_HISTORYにCANCEL履歴を追加
  - MONTHLY_ATTENDANCEのMONTHLY_APPROVAL_STATUSをNOT_SUBMITTEDに更新

## 補足説明

### ホーム画面からの連携
ホーム画面で出勤ボタン・定時出勤ボタン・退勤ボタン・定時退勤ボタンが押されると、バックエンドAPIを通じてATTENDANCE_RECORDテーブルに勤怠データが記録されます。勤務表画面では、このデータを取得して該当日の出社・退社の列に時刻を表示します。

### フレックスタイム制の労働時間管理
本システムはフレックスタイム制を採用しており、以下の規定に基づいて労働時間を管理します：

#### 基本規定
- **標準勤務時間**: 9:00-17:30（標準勤務時間帯、グラフ上でグレー表示）
- **1日の標準労働時間**: 7時間30分（7.5時間）
- **最小勤務時間**: 3時間45分/日
- **清算期間**: 1ヶ月単位
- **遅刻・早退の扱い**: フレックスタイム適用社員には遅刻・早退・私用外出の定義は適用しない

#### 残業時間の計算方法
フレックスタイム制では、月次で残業を判定します：

1. **法定時間内残業**:
   - 計算方法: 実作業時間 - 所定労働時間
   - 表示できる時間の下限上限: 0:00 <= time <= (所定出勤日数 * 8:00) - 所定労働時間
   - 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間

2. **法定時間外残業**:
   - 計算方法: 実作業時間 - 所定出勤日数 * 8:00
   - 清算期間の法定労働時間（所定出勤日数 * 8時間）を超えた部分の残業時間

### 月次サマリーデータの表示
画面下部に月間の集計データが表示されます：

1. **所定出勤日数**: 月間の所定出勤日数（平日など、出勤予定の日数）
2. **実出勤日数**: 実際に出勤した日数（出勤時刻と退勤時刻が両方記録されている日数）
3. **所定労働時間**: 月間の所定労働時間（標準勤務時間: 9:00-17:30、所定労働7.5時間/日、例: 150:00）
4. **総労働時間**: 月間の総労働時間（清算期間内の実労働時間の合計、例: 70:01）
5. **過不足時間**: 過不足時間を+/-H:MM形式で表示（例: +2:31）
   - 計算方法: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)
   - 正の値（プラス）: 所定労働時間より多く働いている → 翌清算期間に繰越可能
   - 負の値（マイナス）: 所定労働時間より少ない → 賃金控除または翌清算期間から控除
   - 計算基準日: 当日退勤済みの場合は当日まで、退勤していない場合は前日までの過不足時間を計算
   - 画面表示時は「過不足時間（MM/DDまで）」のように計算基準日が表示されます
6. **法定休日労働**: 法定休日（週1回の休日）に働いた時間（例: 0:00）
7. **法定時間内残業**: 所定労働時間（7.5h/日）を超えて法定労働時間（8h/日）以内の残業時間（例: 0:00）
   - 実作業時間が所定労働時間を超えている場合、その超過分のうち法定労働時間（所定出勤日数 * 8:00）以内の部分
   - 計算方法: max(0, min(実作業時間 - 所定労働時間, (所定出勤日数 * 8:00) - 所定労働時間))
8. **法定時間外残業**: 法定労働時間（8h/日）を超えた残業時間（例: 0:00）
   - 実作業時間が法定労働時間（所定出勤日数 * 8:00）を超えた部分
   - 計算方法: max(0, 実作業時間 - (所定出勤日数 * 8:00))

### 欠勤・休暇の扱い

#### 欠勤
- 就業日に勤務をしない場合は欠勤とし、事前または事後速やかに届出が必要
- フレックスタイム制では、欠勤日は消滅時効の対象期間において確定労働時間数を計算した時に控除される
- 副業従事は定期休暇、子の看護休暇、介護休暇を取得した場合に管理される

#### 有給休暇
- 有給休暇の取得日は標準労働時間（7.5時間）を勤務したものとみなす
- 清算期間の所定労働時間に算入される

#### 振替休暇
- 振替休暇の取得日は標準労働時間（7.5時間）を勤務したものとみなす

### 打刻と手入力の区別

#### 背景色による区別
- **手入力（MANUAL）**: 黄色背景で表示
  - 従業員が手動で時刻を入力した場合
  - 打刻忘れなどで後から入力した場合
- **打刻（STAMP）または定時打刻（SCHEDULED）**: 白色背景で表示
  - 打刻ボタンで記録された場合（STAMP）
  - 定時出勤/定時退勤ボタンで記録された場合（SCHEDULED）

#### 出社・退社列の表示形式と押下動作

##### 表示形式（承認状態と曜日による切り替え）
| 曜日 | 承認状態 | 休日出勤申請 | 表示形式 | 編集可否 |
| --- | --- | --- | --- | --- |
| 土日祝 | すべて | 未申請または未承認 | テキストボックスなし（表示しない） | - |
| 土日祝 | すべて | 申請中（PENDING）または承認済み（APPROVED） | テキストボックス | 編集可能 |
| 平日 | 未申請（NOT_SUBMITTED） | - | テキストボックス | 編集可能 |
| 平日 | 却下（REJECTED） | - | テキストボックス | 編集可能 |
| 平日 | 申請中（PENDING） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |
| 平日 | 承認済み（APPROVED） | - | テキストのみ（テキストボックスは表示されない） | 編集不可 |

##### 押下時の動作
| 表示形式 | 押下時の動作 |
| --- | --- |
| テキストボックス | 勤怠情報入力ダイアログ（編集モード）を表示。「登録」ボタン、「キャンセル」リンク、「リセット」リンク、「日次確定する」チェックボックスが表示され、各項目を編集可能 |
| テキストのみ | 勤怠情報入力ダイアログ（閲覧モード）を表示。各項目は閲覧のみで編集不可。「閉じる」リンクのみ表示 |

##### 勤怠情報入力ダイアログの項目
- 出社: 出勤時刻（HH:MM形式）
- 退社: 退勤時刻（HH:MM形式）
- 休憩1: 休憩開始時刻 〜 休憩終了時刻
- 休憩2: 休憩開始時刻 〜 休憩終了時刻（追加ボタンで行追加可能）
- 公用外出1: 外出開始時刻 〜 外出終了時刻
- 公用外出2: 外出開始時刻 〜 外出終了時刻（追加ボタンで行追加可能）
- 勤務場所: プルダウンで選択（通勤/在宅/直行直帰/出張）

##### 土日祝の扱い
- **土日祝の基本テキストボックス非表示**: 土曜日、日曜日、祝日の行では、休日出勤申請が未申請または未承認の場合、出社・退社・勤務場所の基本テキストボックスは表示されません
- **休日出勤申請が承認されている場合の例外**: 休日出勤申請が申請中（PENDING）または承認済み（APPROVED）の場合、土日祝でも出社・退社・勤務場所のテキストボックスが表示され、編集可能になります
- 土日祝の行で休日出勤申請が未申請または未承認の場合、勤務データが入力されていてもテキストのみで表示され、テキストボックスは表示されません
- これは、土日祝は通常の勤務日ではないため、基本の入力フィールドを非表示にする仕様です。ただし、休日出勤申請が承認されている場合は例外として入力可能になります
- **土日祝のセルはクリック不可（休日出勤申請未承認の場合）**: 土日祝の行で休日出勤申請が未申請または未承認の場合、出社・退社・勤務場所のセルをクリックしても勤怠情報入力ダイアログは開きません
- **土日祝のセルはハイライトなし（休日出勤申請未承認の場合）**: 土日祝の行で休日出勤申請が未申請または未承認の場合、出社・退社・勤務場所のセルにマウスホバーしてもハイライト（背景色変更）は表示されません
- カーソルも通常のポインター（pointer）ではなく、デフォルトカーソル（default）で表示されます
- **休日出勤申請が承認されている場合**: 土日祝でも出社・退社・勤務場所のセルをクリックして勤怠情報入力ダイアログを開くことができ、マウスホバー時にハイライトが表示されます

#### その他
- フレックスタイム適用社員には遅刻・早退・私用外出の定義は適用されない

### 申請状況アイコンの表示

#### アイコンの種類と表示条件
申請状況は以下のアイコンで表示されます（APPROVAL_STATUSフィールドの値に基づく）：

1. **未申請（NOT_SUBMITTED）**: +マーク（グレー色）
   - 日次確定申請をまだ行っていない状態
   - +マークが日次確定ボタンとして機能する
   - クリックすると日次確定申請を実行

2. **申請中（PENDING）**: ↑マーク（黒色、上向き矢印）
   - 日次確定申請を行い、承認待ちの状態
   - 上司や管理者による承認を待っている
   - この状態では編集不可

3. **承認済み（APPROVED）**: 青色の丸の中に白い✓チェックマーク
   - 申請が承認された状態
   - 確定されており、編集不可
   - 承認済みであることを明確に示す

4. **却下（REJECTED）**: ×マーク（赤色）
   - 申請が却下された状態
   - 再申請や修正が必要
   - +マークに戻り、再度申請可能

### 勤務状況アイコンの表示

#### 勤務状況アイコンの種類
勤務状況に応じて、日付列の左側に表示されるアイコン：

1. **通常勤務**: NIKKORIアイコン（青色の丸の中に白い笑顔）
   - 通常の出勤日で特に注意事項がない場合
   - **表示条件**: 通常勤務日に出社と退社ボタンが押された際に表示される
   - **ツールチップ**: マウスホバー時に「通常勤務日」と表示される
   - NIKKORIアイコンは青色の円（rgb(94, 168, 198)）の中に白い目と笑顔の口が描かれたアイコン

2. **打刻時刻と入力時刻が異なる場合**: 黄色の丸の中に「!」マーク（警告アイコン）
   - 打刻した時刻と手入力した時刻が一致しない場合に表示される
   - **表示条件**: 出勤時刻または退勤時刻の打刻種別がSTAMPまたはSCHEDULEDで、かつ手入力（MANUAL）で時刻が変更されている場合
   - **ツールチップ**: マウスホバー時に「通常勤務日　打刻時刻と入力時刻が異なる理由を備考に入力してください」と表示される
   - 備考欄に理由を入力することを促す警告アイコン
   - **背景色**: 出社・退社のテキストボックスの背景色が黄色（#FFFF00）で表示される
   - **戻り処理**: 勤怠情報入力画面で打刻時刻（ORIGINAL_CLOCK_IN_TIME/ORIGINAL_CLOCK_OUT_TIME）と同じ時刻に変更し、打刻種別をSTAMPまたはSCHEDULEDに戻した場合、勤務状況アイコンはNIKKORIマークに戻り、背景色も白色に戻る

3. **注意が必要な勤務**: 青色の丸の中に白い「!」マーク
   - 打刻漏れや手入力による修正が必要な場合
   - 工数未入力など、注意が必要な項目がある場合
   - エラーアイコン（赤い!マーク）とは別に表示

4. **有給休暇**: 水色の背景に白いコーヒーカップのアイコン
   - 有給休暇取得日を示す
   - 行全体がオレンジ色の背景で表示される
   - アイコンは水色の円の中に白いコーヒーカップ（湯気付き）が描かれたアイコン

5. **代休**: 水色の背景に白いコーヒーカップのアイコン（有給休暇と同じ）
   - 代休取得日を示す
   - 行全体がオレンジ色の背景で表示される
   - アイコンは水色の円の中に白いコーヒーカップ（湯気付き）が描かれたアイコン（有給休暇と同じコーヒーマーク）

6. **休日（法定休日・所定休日）**: 休日種別に応じたアイコン
   - 土日祝日など、法定休日や所定休日を示すアイコン

7. **その他の休暇**: 休暇種別に応じたアイコン
   - 特別休暇など、その他の休暇種別によって異なるアイコンを表示

### 曜日による行の背景色

勤務表の各行は、曜日や休日区分に応じて背景色が変更されます：

#### 背景色の種類
1. **日曜日**: #FFE8D9（薄いピンク・赤系）
   - 法定休日として扱われる
   - 曜日ラベルも#FF0000（赤色）で表示
   - **日曜日に祝日イベントがあっても日曜日と同じ扱い**（背景色#FFE8D9、ラベル色#FF0000）

2. **土曜日**: #E8F5FF（薄い青）
   - 所定休日として扱われる
   - 曜日ラベルも#0000FF（青色）で表示

3. **祝日**: #E8F5FF（薄い青）
   - 法定休日または所定休日として扱われる
   - 曜日ラベルも#0000FF（青色）で表示

4. **平日（月〜金）**: 白色（デフォルト）
   - 通常の勤務日
   - 曜日ラベルは黒色で表示

5. **休暇申請済み**: オレンジ色（#FFCFA5）
   - 有給休暇、特別休暇などの申請がある日（基本的に平日）
   - **平日の休暇申請日はオレンジ色の背景で表示される**（最優先）

#### 祝日の判定
祝日の判定は以下の方法で行われます：
- システム内の祝日マスタまたはカレンダーAPIを使用
- または、フロントエンドで日本の祝日を判定するライブラリ（例：japanese-holidays）を使用
- 祝日と判定された場合、曜日が平日（月〜金）であっても土曜日と同じ背景色（#E8F5FF）とラベル色（#0000FF）で表示
- **日曜日に祝日イベントがあっても日曜日と同じ扱い**（背景色#FFE8D9、ラベル色#FF0000）とする

#### 背景色の優先順位
複数の条件に該当する場合の優先順位：
1. 日曜日（薄いピンク #FFE8D9）- 祝日より優先（日曜日に祝日イベントがあっても日曜日と同じ扱い）
2. 祝日（薄い青 #E8F5FF）- 日曜日でない場合のみ
3. 土曜日（薄い青 #E8F5FF）
4. 休暇申請済み（オレンジ色 #FFCFA5）- 平日の休暇申請日
5. 平日（白色）- デフォルト

### 備考ダイアログの表示

備考列の+アイコンを押下すると、備考入力ダイアログが表示されます。

#### ダイアログの構成
- **タイトル**: 「備考」（位置: top: 6px）
- **日付表示**: 対象日をYYYY年MM月DD日X曜日形式で表示（位置: top: 47px）
  - 例: 2025年12月5日金曜日
- **打刻漏れ・手入力修正情報**（条件付き表示）:
  - 黄色背景（#FFFF00）で黒文字表示（位置: top: 70px）
  - 打刻漏れがある場合（打刻のし忘れなどで手入力で入力した場合）: 「出退打刻なし」「出社打刻なし」「退社打刻なし」を表示
  - 手入力修正がある場合: 「(出社打刻 HH:MM)」「(退社打刻 HH:MM)」を表示
  - 複数の情報がある場合は「、」で区切って表示
- **備考入力欄**: 複数行テキストボックス
  - 打刻漏れ・手入力修正情報が表示される場合: 位置 top: 95px（背景）/ 97px（テキストエリア）
  - 打刻漏れ・手入力修正情報が表示されない場合: 位置 top: 78px（背景）/ 80px（テキストエリア）
- **ボタン**: 承認状態により異なる
  - 登録ボタン・キャンセルボタン: 位置 top: 203px（背景）/ 208px（テキスト）
  - 閉じるボタン: 位置 left: 245px, top: 208px

#### 承認状態による表示制御

##### 1. 申請済み（APPROVAL_STATUS = PENDING または APPROVED）の場合
- **備考入力欄**:
  - グレー背景
  - 編集不可（disabled状態）
  - 現在の備考内容を表示（閲覧のみ）
- **ボタン**:
  - 「閉じる」ボタンのみ表示（青色リンク）
  - 押下するとダイアログを閉じる
- **説明**: 日次確定申請済み（承認申請後）のため、備考の編集はできません

##### 2. 未申請（APPROVAL_STATUS = NOT_SUBMITTED または REJECTED）の場合
- **備考入力欄**:
  - 白色背景
  - 編集可能
  - 現在の備考内容を表示（編集可）
- **ボタン**:
  - 「登録」ボタン（青色）: 押下すると備考を保存してダイアログを閉じる
  - 「キャンセル」ボタン: 押下すると保存せずダイアログを閉じる
- **説明**: 日次確定申請前のため、備考の編集が可能です

#### 打刻漏れ・手入力修正情報の表示

備考ダイアログでは、該当日の勤怠データに基づいて打刻漏れや手入力修正の情報を黄色背景で表示します。

##### 表示条件と内容

1. **打刻漏れの判定**（打刻のし忘れなどで手入力で入力した場合）
   - 出勤打刻種別（CLOCK_IN_TYPE）が'MANUAL'で、元の出勤打刻時刻（ORIGINAL_CLOCK_IN_TIME）が存在せず、かつ手入力で出勤時刻（CLOCK_IN_TIME）が入力されている場合
   - 退勤打刻種別（CLOCK_OUT_TYPE）が'MANUAL'で、元の退勤打刻時刻（ORIGINAL_CLOCK_OUT_TIME）が存在せず、かつ手入力で退勤時刻（CLOCK_OUT_TIME）が入力されている場合
   - 表示内容:
     - 出勤・退勤両方漏れ: 「出退打刻なし」
     - 出勤のみ漏れ: 「出社打刻なし」
     - 退勤のみ漏れ: 「退社打刻なし」

2. **手入力修正の判定**
   - 元の出勤打刻時刻（ORIGINAL_CLOCK_IN_TIME）が存在し、現在の出勤時刻（CLOCK_IN_TIME）と異なる場合
   - 元の退勤打刻時刻（ORIGINAL_CLOCK_OUT_TIME）が存在し、現在の退勤時刻（CLOCK_OUT_TIME）と異なる場合
   - 表示内容:
     - 出勤時刻修正: 「(出社打刻 HH:MM)」（例: (出社打刻 8:51)）
     - 退勤時刻修正: 「(退社打刻 HH:MM)」（例: (退社打刻 18:30)）

3. **表示スタイル**
   - 背景色: 黄色（#FFFF00）
   - 文字色: 黒色（#000000）
   - 位置: top: 70px
   - 複数の情報がある場合は「、」で区切って表示

4. **動的レイアウト調整**
   - 打刻漏れ・手入力修正情報が表示される場合:
     - 備考入力欄の位置を下にずらす（top: 95px/97px）
   - 打刻漏れ・手入力修正情報が表示されない場合:
     - 備考入力欄を元の位置に配置（top: 78px/80px）

#### 備考の保存
登録ボタン押下時の処理：
1. 入力された備考内容をバリデーション
2. API経由で勤怠記録を更新（勤怠記録更新API No.5）
3. 保存成功後、ダイアログを閉じる
4. 月間勤務データを再取得して画面を更新

### 休暇申請時の行の表示

#### 休暇申請済み行の背景色
- **背景色**: オレンジ色（#FFCFA5）
  - **平日の休暇申請日はオレンジ色で表示される**
  - 休暇申請は基本的に平日に行うため、平日の背景色（白色）よりも優先される
- **曜日ラベルの色**: 平日のため黒色で表示
- **申請状況アイコン**: ↑マーク（申請中の場合）、✓チェックマーク（承認済みの場合）
- **表示条件**: 
  - 有給休暇、特別休暇など、休暇種別が設定されている日
  - VACATION_HISTORYテーブルに該当日の休暇申請レコードが存在する
  - APPROVAL_STATUS=PENDING（申請中）またはAPPROVED（承認済み）

#### 休暇申請の扱い
- 休暇申請が承認されると、その日は標準労働時間（7.5時間）を勤務したものとみなされる
- 清算期間の所定労働時間に算入される
- 休暇申請中（オレンジ色の行）は、出勤時刻・退勤時刻の編集不可

#### 休暇申請時の表示制御
休暇申請がある日（`hasVacation=true`）の場合、以下の表示制御を行う：

1. **申請状況アイコンの表示**
   - 休暇申請の承認状態（`VACATION_HISTORY.APPROVAL_STATUS`）に応じて表示
   - `PENDING`（申請中）: ↑マーク（黒色）を表示
   - `APPROVED`（承認済み）: ✓チェックマーク（青色の丸に白い✓）を表示
   - 日次確定申請の状態とは独立して表示される

2. **日次確定ボタンの非表示**
   - 休暇申請がある場合は、日次確定ボタン（+アイコン）を非表示にする
   - 休暇申請日は日次確定申請を行わないため

3. **出社・退社・勤務場所のテキストボックスの非表示**
   - 休暇申請がある場合は、出社時刻・退社時刻・勤務場所のテキストボックスを非表示にする
   - 休暇申請日は出退社時刻や勤務場所の入力が不要なため

4. **工数実績の+アイコンの非表示**
   - 休暇申請がある場合は、工数実績の+アイコンを非表示にする
   - 休暇申請日は工数実績の入力が不要なため

### 日次確定申請の条件
以下の条件を満たす必要があります:
1. 出退社時刻が入力されていること
2. 勤務場所が設定されていること
3. 工数合計と実労働時間が一致していること
4. 手入力の場合は備考に理由が入力されていること

### 工数合計と実労働時間の不一致
工数合計と実労働時間が一致しない場合、該当日の行に赤い!マークが表示され、日次確定申請ができません。

### 日次確定申請時のエラーダイアログ
日次確定申請時に以下のエラーが発生した場合、「確認」ダイアログが表示されます:

1. **出退社時刻が未入力の場合**
   - メッセージ: 「出退社時刻が未入力のため、日次確定できません。」
   - 出勤時刻または退勤時刻が空の場合に表示されます。

2. **工数合計と実労働時間が一致しない場合**
   - メッセージ: 「工数の合計と実労働時間が合いません」
   - 工数実績として登録された作業時間の合計が実労働時間と異なる場合に表示されます。

3. **勤務場所が未選択の場合**
   - メッセージ: 「勤務場所を選択してください」
   - 勤務場所が設定されていない場合に表示されます。

4. **手入力で備考が未入力の場合**
   - メッセージ: 「手入力の場合は備考に理由を入力してください」
   - 打刻種別がMANUALで備考が空の場合に表示されます。

確認ダイアログには「OK」ボタンが表示され、押下するとダイアログが閉じます。

### 時間外労働・休日労働の扱い

#### 事前申請と承認
- フレックスタイム制における所定労働時間を超えての勤務、および休日勤務を行う場合は、事前に所属長の許可を得る必要がある
- 許可を受けた社員は、実際に課される労働を前提とした時間外労働または休日労働に従事する
- 清算期間を平均し、その期間における所定労働時間を超えた労働については、会社は時間外労働手当を支給する

#### 割増賃金
- 会社は、所定の割増率に基づき割増賃金を算定する
- 第5条および第8条に基づく業者相談または割増賃金の体系を定時期において認識する

### 深夜勤務時間の課税
- 一清算期間における所定労働時間を超える実定労働時間（プラス）と、マイナスの時間部分が清算される
- プラスの時間部分が所定労働時間を超える部分については、翌清算期間における人の実定労働時間から控除し勤務したものとみなし振り替えることができる
- 一清算期間の実定労働時間が所定労働時間を超えた場合は、時間外労働手当の対象となる
- マイナスの場合、一清算期間の実定労働時間が所定労働時間より不足した場合は、マイナス時間部分の賃金を控除することができる

### 日次確定ボタン（+マーク）
日付列に表示される+マーク（グレー色）は、日次確定申請を行うためのボタンです。このマークは申請状況アイコンの一部として、未申請状態（APPROVAL_STATUS=NOT_SUBMITTED）を表します。

- **表示条件**: 日次確定が未完了の日（APPROVAL_STATUS=NOT_SUBMITTED）のみ表示
- **デザイン**: グレー色の+マーク
- **押下時の動作**:
  1. 日次確定のチェックを実行
  2. チェックエラーがある場合は「確認」ダイアログでエラー内容を表示
  3. チェックが正常に通過した場合は、ローディングマークを表示してAPI通信を実行
  4. 日次確定申請が完了すると、+マークは↑マーク（申請中）に変更されます
  5. 承認されると、青色の丸の中に白い✓チェックマークに変更されます

### ローディング表示
API通信中やデータ処理中は、ローディングマークが表示されます。

**表示タイミング**:
- 初期表示処理
- 年月変更時
- 前月/次月ボタン押下時
- 日次確定申請時
- 各種入力画面から戻ってきた際のデータ再取得時

ローディング表示中は、ユーザーが画面操作できないようにする（ローディングマークの背後にオーバーレイを表示するなど）ことを推奨します。

### 勤務グラフの表示
勤務グラフは0-48時の時間軸を上部と下部に配置して表示され、以下の情報を視覚的に表現します:

#### グラフの基本構成

##### 1. グレーの長方形（標準勤務時間帯）
- **平日**の各行には、出勤/退勤データの有無に関わらず、**9:00〜17:30**の範囲にグレーの長方形（塗りつぶし）が**常時表示**される
- これは標準勤務時間帯を示すベースラインとなる
- グレー色（rgb(228, 228, 228)）で表示
- **土日祝**の行にはグレーの長方形は**表示されない**（休日のため）

##### 2. 青色のバー（実際の勤務時間）
- 出勤・退勤時刻が記録されている日は、その時間帯を**青色のバー**で表示
- 例：出勤8:46、退勤18:00の場合、8:46〜18:00の範囲に青色のバーが表示される

##### 3. 休憩時間の四角形
- **休憩時間**は四角形で表示される
- 基本休憩時間（12:00〜13:00）は平日の場合、デフォルトで表示される
- 勤怠情報入力画面で入力された休憩時間も同様に表示される
- 複数の休憩時間がある場合は、それぞれ個別の四角形として表示される
- **色のルール**:
  - **出勤していない場合（勤務予定日）**: グレー色（#BBBBBB）で表示
  - **出勤している場合**: 
    - 出勤時刻が休憩時間（12:00）より前の場合：青色（#1A69AB）で表示
    - 出勤時刻が休憩時間（12:00）より後の場合：四角形を表示しない（休憩時間が過ぎてから出勤した場合は休憩時間の四角形を表示しない）

##### 4. 青色の▼マーク（出退勤時刻マーカー）
- **出勤時刻**の位置に**青色の▼（下向き三角）**マークが表示される
- **退勤時刻**の位置にも**青色の▼（下向き三角）**マークが表示される
- 出勤のみで退勤前の状態（勤務中）では、**出勤時刻の位置にのみ▼が表示**される
- ▼マークは長方形の左上の角（出勤時刻）と右上の角（退勤時刻）に配置される

##### 5. 有給休暇または夏季休暇のグラフ表示
- **有給休暇または夏季休暇の取得日**の場合、出勤・退勤データの有無に関わらず、以下のグラフが表示される：
  - **所定内労働時間帯（9:00-17:30）**: 薄い青（#4B9EE4）の長方形で表示
  - **休憩時間（12:00-13:00）**: 青色（#1A69AB）の長方形で表示
  - **細い白線**: 所定内労働時間帯と休憩時間の長方形の上に細い白線（1px）を表示
- これは有給休暇または夏季休暇の取得日であることを視覚的に示す

##### 6. 代休のグラフ表示
- **代休の取得日**の場合、出勤・退勤データの有無に関わらず、以下のグラフが表示される：
  - **所定内労働時間帯（9:00-17:30）**: 青色（#1A69AB）の長方形で表示
  - **細い白線**: 所定内労働時間帯の長方形の上に細い白線（1px）を表示
- 休憩時間の長方形は表示しない
- これは代休の取得日であることを視覚的に示す

#### グラフの色分け（凡例）
- **標準勤務時間帯（グレー）**: 9:00-17:30の時間帯をグレーの長方形（rgb(228, 228, 228)）で表示（平日のみ）
- **休憩時間**: 休憩時間帯を四角形で表示。基本休憩時間（12:00-13:00）は平日の場合デフォルトで表示され、勤怠情報入力画面で入力された休憩時間も同様に表示される。色は出勤状態により変化する：
  - 出勤していない場合（勤務予定日）：グレー色（#BBBBBB）
  - 出勤している場合で、出勤時刻が休憩時間より前：青色（#1A69AB）
  - 出勤している場合で、出勤時刻が休憩時間より後：表示しない
- **未出勤日の所定勤務時間**: 薄いグレーの塗りつぶし
- **平日の所定内の労働時間、残業時間**: 青色の塗りつぶし（濃い青と薄い青のセグメント）
- **休日（法定時間内かつ法定休日ではない）の労働時間**: 黄色系の塗りつぶし（濃い黄色/オリーブグリーンと薄い黄色のセグメント）
- **法定休日の労働時間**: 紫色の塗りつぶし
- **有給の休暇の取得日または裁量労働日の労働時間**: 青色の塗りつぶし（濃い青と薄い青のセグメント）。勤務状況のアイコンで区別
- **有給休暇または夏季休暇の取得日（出勤・退勤データなし）**: 所定内労働時間帯（9:00-17:30）を薄い青（#4B9EE4）の長方形で表示し、休憩時間（12:00-13:00）を青色（#1A69AB）の長方形で表示。その上に細い白線（1px）を表示
- **代休の取得日（出勤・退勤データなし）**: 所定内労働時間帯（9:00-17:30）を青色（#1A69AB）の長方形で表示（グラフの長方形全部が#1A69AB）。その上に細い白線（1px）を表示。休憩時間の長方形は表示しない
- **無給の休暇の取得日**: 薄いグレーの塗りつぶし
- **法定時間外割増時間**: セグメント内の紫色の部分
- **深夜労働時間**: セグメント内の赤色の部分
- **公用外出時間**: セグメント内の水色の部分

#### 表示例

| 状態 | グラフ表示 |
| --- | --- |
| 平日・勤怠データなし | グレーの長方形（9:00-17:30）+ 休憩時間のグレー四角形（12:00-13:00、#BBBBBB） |
| 平日・出勤済み（勤務中、出勤時刻が休憩時間より前） | グレーの長方形 + 休憩時間の青色四角形（12:00-13:00、#1A69AB）+ 出勤時刻から現在までの青色バー + 出勤位置に▼ |
| 平日・出勤済み（勤務中、出勤時刻が休憩時間より後） | グレーの長方形 + 出勤時刻から現在までの青色バー + 出勤位置に▼（休憩時間の四角形は表示しない） |
| 平日・出退勤済み（出勤時刻が休憩時間より前） | グレーの長方形 + 休憩時間の青色四角形（12:00-13:00、#1A69AB）+ 出勤〜退勤の青色バー + 出勤・退勤位置に▼ |
| 平日・出退勤済み（出勤時刻が休憩時間より後） | グレーの長方形 + 出勤〜退勤の青色バー + 出勤・退勤位置に▼（休憩時間の四角形は表示しない） |
| 有給休暇または夏季休暇の取得日 | 薄い青の長方形（9:00-17:30、#4B9EE4）+ 休憩時間の青色四角形（12:00-13:00、#1A69AB）+ 細い白線（1px） |
| 代休の取得日 | 青色の長方形（9:00-17:30、#1A69AB）+ 細い白線（1px） |
| 土日祝・勤怠データなし | グラフなし（空白） |
| 土日祝・出退勤あり | 出勤〜退勤の緑色/紫色バー + 出勤・退勤位置に▼ |

### 勤務グラフツールチップ
勤務グラフにマウスカーソルを当てると、ツールチップが表示され、以下の詳細情報を確認できます:

#### 通常勤務の場合

**標準の勤務時間セクション（■マーク付き見出し）:**
1. **標準勤務時間**: 所定の勤務時間帯（例: 9:00-17:30）
2. **所定休憩時間**: 所定の休憩時間帯（例: 12:00-13:00）

**区切り線**

**実際の勤務詳細セクション（必須項目）:**
3. **出退社時刻**: 実際の出退社時刻（例: 8:37-18:02）
4. **休憩時間**: 実際の休憩時間帯（例: 12:00-13:00）
5. **総労働時間**: 出勤から退勤までの時間（例: 8:25）
6. **実労働時間**: 休憩時間を除いた実際の労働時間（例: 8:25）
7. **休憩時間合計**: 休憩時間の合計（例: 1:00）■マーク（青色）付き
8. **所定内労働**: 月の所定労働時間の残りまでの労働時間（例: 0:45）■マーク（ライトブルー）付き
   - 月次累積で計算。前日までの累積実労働時間が月の所定労働時間（所定出勤日数 * 7.5時間）を超えていない場合に表示
   - 前日までの累積で月の所定労働時間の残りがX時間の場合、その日の実労働時間のうち最初のX時間分が所定内労働として表示される
   - 例：月の所定労働時間が165:00で、前日までの累積が164:15の場合、残りは0:45。その日の実労働時間が8:43の場合、最初の0:45が所定内労働として表示される
   - 前日までの累積実労働時間が月の所定労働時間を超えている場合は表示しない

**実際の勤務詳細セクション（必要に応じて表示）:**
9. **法定時間内残業**: 月の法定労働時間の残りまでの残業時間（例: 7:58）■マーク（黄土色）付き
   - 月次累積で計算。前日までの累積実労働時間が月の所定労働時間を超えている場合に表示
   - 前日までの累積で月の法定労働時間（所定出勤日数 * 8時間）の残りがX時間の場合、その日の実労働時間のうち最初のX時間分が法定時間内残業として表示される
   - 例：月の法定労働時間が176:00で、前日までの累積が172:50の場合、残りは3:10。その日の実労働時間が7:59の場合、最初の3:10が法定時間内残業として表示される（ただし、所定内労働の残りがある場合は、その残りを除いた分が法定時間内残業となる）
   - 前日までの累積実労働時間が月の法定労働時間を超えている場合は表示しない
10. **法定時間外残業**: 月の法定労働時間を超えた残業時間（例: 3:49）■マーク（オレンジ色）付き
    - 月次累積で計算。前日までの累積実労働時間が月の法定労働時間を超えている場合に表示
    - その日の実労働時間のうち、法定時間内残業として表示された分を除いた残りが法定時間外残業として表示される
    - 例：その日の実労働時間が7:59で、法定時間内残業が4:10の場合、残りの3:49が法定時間外残業として表示される

**表示条件:**
- 前日までの累積実労働時間が月の所定労働時間以下の場合: 「所定内労働」を表示し、「法定時間内残業」と「法定時間外残業」は表示しない（ただし、その日の実労働時間が所定労働時間の残りを超える場合は、超えた分が「法定時間内残業」として表示される）
- 前日までの累積実労働時間が月の所定労働時間を超えている場合: 「所定内労働」は表示せず、「法定時間内残業」と「法定時間外残業」を表示（該当する場合）

#### 有給休暇・代休・無給休暇等の場合

**標準の勤務時間セクション（■マーク付き見出し）:**
1. **標準勤務時間**: 所定の勤務時間帯（例: 9:00-17:30）■マーク（グレー）付き
2. **所定休憩時間**: 所定の休憩時間帯（例: 12:00-13:00）■マーク（グレー）付き
3. **総労働時間**: 7:30（固定値）■マーク（グレー）付き

**表示条件:**
- 有給休暇、代休、無給休暇などの休暇取得日の場合、標準の勤務時間セクションのみ表示
- 実際の勤務詳細セクション（出退社時刻、休憩時間、実労働時間、所定内労働、法定時間内残業、法定時間外残業など）は表示しない
- 区切り線も表示しない

ツールチップはマウスカーソルがグラフの長方形部分（勤務時間バー）上にある間表示され、グラフから離れると非表示になります。

#### 残業時間の計算ロジック

残業時間は月次累積で計算されます。その日の実労働時間を、前日までの累積で残っている月の枠に基づいて上から順に埋めるロジックです。

**前提条件:**
- 月の所定労働時間 = 所定出勤日数 * 7.5時間
- 月の法定労働時間 = 所定出勤日数 * 8時間
- 前日までの累積実労働時間 = 月初から前日までの実労働時間の合計
- 月の所定労働時間の残り = 月の所定労働時間 - 前日までの累積実労働時間
- 月の法定労働時間の残り = 月の法定労働時間 - 前日までの累積実労働時間

**計算方法:**
- **所定内労働（ライトブルー）**: 月の所定労働時間の残りまで
  - 前日までの累積実労働時間が月の所定労働時間以下の場合:
    - 月の所定労働時間の残りがX時間の場合、その日の実労働時間のうち最初のX時間分が所定内労働として表示される
    - その日の実労働時間が残りを超える場合、超えた分は法定時間内残業として表示される
  - 前日までの累積実労働時間が月の所定労働時間を超えている場合: 表示しない

- **法定時間内残業（黄土色）**: 月の法定労働時間の残りまで
  - 前日までの累積実労働時間が月の所定労働時間を超えている場合:
    - 月の法定労働時間の残りがX時間の場合、その日の実労働時間のうち最初のX時間分が法定時間内残業として表示される
    - ただし、所定内労働の残りがある場合は、その残りを除いた分が法定時間内残業となる
  - 前日までの累積実労働時間が月の法定労働時間を超えている場合: 表示しない

- **法定時間外残業（オレンジ色）**: 月の法定労働時間を超えた分
  - その日の実労働時間のうち、所定内労働と法定時間内残業として表示された分を除いた残りが法定時間外残業として表示される

**計算例（所定出勤日数が22日の場合）:**
- 月の所定労働時間 = 22日 * 7.5時間 = 165:00
- 月の法定労働時間 = 22日 * 8時間 = 176:00

- 例1: 前日までの累積実労働時間が140:00、その日の実労働時間が8:00の場合:
  - 月の所定労働時間の残り = 165:00 - 140:00 = 25:00
  - 所定内労働: 8:00（残り25:00のうち、その日の実労働時間8:00分）
  - 法定時間内残業: 表示しない
  - 法定時間外残業: 表示しない

- 例2: 前日までの累積実労働時間が164:15、その日の実労働時間が8:43の場合:
  - 月の所定労働時間の残り = 165:00 - 164:15 = 0:45
  - 所定内労働: 0:45（残り0:45分のみ）
  - 法定時間内残業: 7:58（その日の実労働時間8:43のうち、所定内労働0:45を除いた残り7:58）
  - 法定時間外残業: 表示しない
  - ※ 0:45 + 7:58 = 8:43 となり、その日の実労働時間と一致

- 例3: 前日までの累積実労働時間が171:50、その日の実労働時間が7:59の場合:
  - 月の所定労働時間の残り = 165:00 - 171:50 = -6:50（既に超過）
  - 月の法定労働時間の残り = 176:00 - 171:50 = 4:10
  - 所定内労働: 表示しない（既に月の所定労働時間を超過）
  - 法定時間内残業: 4:10（残り4:10分のみ）
  - 法定時間外残業: 3:49（その日の実労働時間7:59のうち、法定時間内残業4:10を除いた残り3:49）
  - ※ 4:10 + 3:49 = 7:59 となり、その日の実労働時間と一致

### ステータス表示

#### 表示形式
ステータスはテーブル上部操作エリアに「ステータス - 」の形式で表示され、月次確定状態に応じてアイコンとテキストが変化します：

1. **未確定（MONTHLY_APPROVAL_STATUS = NOT_SUBMITTED）**
   - 表示: 「ステータス - - 未確定」
   - アイコン: -（ハイフン）
   - テキスト: 未確定
   - 説明: 月次確定申請をまだ行っていない状態

2. **承認中（MONTHLY_APPROVAL_STATUS = PENDING）**
   - 表示: 「ステータス - ↑ 承認中」
   - アイコン: ↑（上向き矢印、黒色）
   - テキスト: 承認中
   - 説明: 月次確定申請を行い、承認待ちの状態

3. **承認済み（MONTHLY_APPROVAL_STATUS = APPROVED）**
   - 表示: 「ステータス - ✓ 承認済み」
   - アイコン: ✓（チェックマーク、青色）
   - テキスト: 承認済み
   - 説明: 月次確定申請が承認された状態

#### リンク動作
ステータス表示をクリックすると、ステータスダイアログが表示されます。

### ステータスダイアログ

ステータス表示のリンクを押下すると、月次確定の承認履歴を表示するダイアログが開きます。

#### ダイアログの構成
- **タイトル**: 「ステータス」（青色のヘッダーバー）
- **承認履歴テーブル**: 以下の列で構成
  - **#**: 履歴の連番（1, 2, 3...）
  - **日時**: アクションが行われた日時（YYYY-MM-DD HH:MM形式）
  - **状況**: アクション種別
    - 「申請」: 月次確定を申請した
    - 「承認」: 申請が承認された
    - 「却下」: 申請が却下された
    - 「取消」: 申請を取り消した
  - **実行者**: アクションを実行した人の名前
  - **コメント**: 承認/却下時に入力されたコメント
- **承認履歴なしメッセージ**: 履歴が0件の場合、「承認履歴はありません」と表示
- **申請取消ボタン**: グレー/青色のボタン
  - 月次確定申請中（PENDING）の場合: 青色で活性、押下で申請取消
  - それ以外の場合: グレーで非活性
- **閉じるリンク**: 青色のリンク、押下でダイアログを閉じる

#### 申請取消処理
申請取消ボタンを押下すると：
1. 確認ダイアログ「月次確定申請を取り消しますか？」を表示
2. OKを押すと申請が取り消され、ステータスが「未確定」に戻る
3. 承認履歴テーブルに「取消」の履歴が追加される

### 申請状況詳細ダイアログ

申請状況アイコン（申請中、承認済み）を押下すると、勤怠関連申請ダイアログが開き、申請タイプに応じたタブが表示されます。

#### ダイアログの構成
- **タイトル**: 「勤怠関連申請」（青色のヘッダーバー）
- **日付表示**: 対象日をYYYY年MM月DD日X曜日形式で表示（例: 2025年12月5日金曜日）
- **申請タイプタブ**: 申請タイプに応じたタブを表示（日次確定/休日出勤申請/休暇申請）
- **申請フォーム**: 申請タイプに応じたフォームを表示（申請中または承認済みの場合は編集不可）
- **申請情報セクション**（申請中または承認済みの場合のみ表示）:
  - **申請日時**: 申請を行った日時をYYYY-MM-DD HH:MM形式で表示
  - **状況**: 申請中/承認済みを表示
  - **承認履歴**: 承認履歴テーブルを表示（#、日時、状況、実行者、コメント）
- **取消ボタン**: 申請中（PENDING）の場合は「申請取消」、承認済み（APPROVED）の場合は「承認取消」を表示
- **キャンセルリンク**: ダイアログを閉じる

#### 申請タイプによる表示内容の違い

##### 1. 日次確定申請の場合
- **申請フォーム**: 出退社時刻、休憩時間、総労働時間、実労働時間、備考を表示
- **申請情報セクション**: 申請日時、状況、承認履歴を表示
- **取消ボタン**: 申請中または承認済みの場合に表示

##### 2. 休日出勤申請の場合
- **申請フォーム**: 開始時刻、終了時刻、休憩時間、備考を表示
- **申請情報セクション**: 申請日時、状況、承認履歴を表示
- **取消ボタン**: 申請中または承認済みの場合に表示

##### 3. 休暇申請の場合
- **申請フォーム**: 休暇種類、期間（開始日、終了日）、備考、連絡先を表示
- **申請情報セクション**: 申請日時、状況、承認履歴を表示
- **取消ボタン**: 申請中または承認済みの場合に表示

#### 申請状態による表示内容の違い

##### 1. 申請中（PENDING）の場合
- **申請状態**: 「申請中」と表示
- **申請日時**: 申請を行った日時を表示
- **承認履歴**: 申請時の履歴を表示
- **取消ボタン**: 「申請取消」と表示

##### 2. 承認済み（APPROVED）の場合
- **申請状態**: 「承認済み」と表示
- **申請日時**: 申請を行った日時を表示
- **承認履歴**: 申請時から承認時までの履歴を表示
- **取消ボタン**: 「承認取消」と表示

#### ダイアログの閉じる処理
「キャンセル」リンクを押下すると、ダイアログが閉じます。

#### 備考
- 未申請（NOT_SUBMITTED）の場合は、申請状況アイコンが+マーク（申請ボタン）として機能するため、このダイアログは表示されません。
- 複数の申請がある場合は、優先順位（日次確定 > 休日出勤 > 休暇）に応じた申請タイプのタブが開きます。
- 申請中または承認済みの場合は、申請フォームは編集不可（disabled/readonly）になります。

### 複数の休憩時間・公用外出時間
休憩時間と公用外出時間は複数登録可能です（BREAK_SEQ、OUTING_SEQで管理）。勤怠情報入力画面で追加できます。

### 勤務場所の選択
勤務場所は「通勤」「在宅」「直行直帰」「出張」から選択可能です。同日内で通勤と在宅が混在した場合は「通勤」として入力します。在宅を選択すると通勤手当は支給されません。

## 変更履歴

| 日付 | 変更内容 | 変更者 |
| --- | --- | --- |
| 2025-12-20 | 休日出勤申請が承認された場合の表示仕様を追加。土日祝でも休日出勤申請が申請中（PENDING）または承認済み（APPROVED）の場合は、出社・退社・勤務場所のテキストボックスを表示し編集可能にする仕様を追加。勤務グラフに標準勤務時間帯（9:00-17:30）と休憩時間をグレーの長方形で表示する仕様を追加。グラフの色を修正：土曜日または祝日（所定休日）は法定時間内残業と同じ色（#B0B000）、日曜日（法定休日）は#DE9EDDに変更 | AI Assistant |
| 2025-12-10 | 打刻時刻を手入力で変更した場合の動作を明確化。打刻時刻と入力時刻が異なる場合は警告アイコン（黄色の丸の中に「!」マーク）を表示し、出社・退社のテキストボックスの背景色を黄色（#FFFF00）に変更する仕様を追加。勤怠情報入力画面で打刻時刻と同じ時刻に変更し、打刻種別をSTAMPまたはSCHEDULEDに戻した場合、勤務状況アイコンがNIKKORIマークに戻り、背景色も白色に戻る仕様を追加。申請後のテキストボックス非表示を明確化（申請中・承認済みの場合はテキストのみ表示、テキストボックスは表示されない）。出勤時刻編集処理・退勤時刻編集処理に打刻時刻との比較ロジックを追加。勤怠情報入力画面からの戻り処理に打刻種別による表示制御を追加 | AI Assistant |
| 2025-12-04 | 初版作成 | AI Assistant |
| 2025-12-09 | 土日祝の出社・退社・勤務場所の基本テキストボックスを非表示にする仕様を追加。編集仕様、イベント処理説明、補足説明を更新 | AI Assistant |
| 2025-12-05 | 日次確定申請時のエラーダイアログの詳細を追加。チェック仕様に出退社時刻の必須チェックを追加。エラーメッセージを実際の画面に合わせて修正 | AI Assistant |
| 2025-12-05 | 画面レイアウトセクションにFigmaデザインのURLを追加。PNG画像は参考として位置付け | AI Assistant |
| 2025-12-05 | 勤務グラフツールチップ機能を追加。画面項目定義にグラフツールチップ（No.19-28）を追加。イベント処理説明に勤務グラフホバー処理を追加。編集仕様No.3（勤務グラフツールチップ表示）を追加。補足説明に勤務グラフツールチップのセクションを追加 | AI Assistant |
| 2025-12-05 | 勤務グラフの時間軸を1-24時から0-48時に修正。グラフ凡例に法定時間内残業（#B0B000 黄緑色）と法定時間外残業（#E28E1C オレンジ色）を明記 | AI Assistant |
| 2025-12-05 | 日次確定ボタン（+アイコン）を追加（No.13）。ローディングマーク表示機能を追加（No.53）。日付欄押下処理を日次確定ボタン押下処理に変更。初期表示、年月変更、前月/次月ボタン押下処理にローディング表示を追加。補足説明に日次確定ボタンとローディング表示のセクションを追加 | AI Assistant |
| 2025-12-05 | 月次サマリー項目の詳細を更新。所定出勤日数、実出勤日数、所定労働時間、過不足時間、法定休日労働、法定時間内残業、法定時間外残業を追加。実出勤日数の定義を「出勤時刻と退勤時刻が両方記録されている日数」に変更。標準勤務時間を9:00-17:30（所定労働7.5時間）に設定。勤務グラフに標準勤務時間帯のグレー表示を追加 | AI Assistant |
| 2025-12-05 | フレックスタイム制に基づく労働時間管理の詳細を追加。標準勤務時間（9:00-17:30）、最小勤務時間（3時間45分）、清算期間（1ヶ月）、遅刻・早退の扱い（適用しない）を明記。残業時間の計算方法（日次判定と月次判定）を詳細化。欠勤・休暇の扱い、時間外労働の事前申請と承認、割増賃金、深夜勤務時間の課税に関する規定を追加 | AI Assistant |
| 2025-12-05 | 打刻と手入力の背景色を修正（手入力=黄色、打刻=白色）。出勤時刻・退勤時刻の項目種別を「入出力」に変更し、日次確定前または未来の日付の場合はテキストボックスで編集可能とする仕様を追加。出勤時刻編集処理・退勤時刻編集処理をイベント処理説明に追加。API利用仕様No.5として勤怠記録更新APIを追加（既存のNo.5-7をNo.6-8にリナンバリング）。補足説明の「打刻と手入力の区別」セクションを詳細化し、編集可能性について明記 | AI Assistant |
| 2025-12-05 | 申請状況アイコンの仕様を明確化。未申請（+マーク・グレー色）、申請中（↑マーク・黒色）、承認済み（青色の丸に白✓）、却下（×マーク・赤色）を定義。休暇申請時の行表示をオレンジ色の背景に設定。入出力項目定義にAPPROVAL_STATUS（承認状態）を追加（No.18）。休暇申請データ（VACATION_HISTORY）を入出力項目定義に追加（No.33）。編集仕様の勤務表表示に休暇申請時の行の背景色と申請状況アイコンの詳細を追加。補足説明に「申請状況アイコンの表示」「勤務状況アイコンの表示」「休暇申請時の行の表示」セクションを追加。アイコンの色とスタイル（青色の丸、グレー色、黒色、赤色など）を明記 | AI Assistant |
| 2025-12-05 | 曜日による行の背景色と曜日ラベルの色を明確化。日曜日は背景色#FFE8D9（薄いピンク）・ラベル#FF0000（赤色）、土曜日・祝日は背景色#E8F5FF（薄い青）・ラベル#0000FF（青色）、平日は白色背景・黒色ラベルと定義。休暇申請時の背景色を#FFA500（オレンジ色）に明確化し、曜日色より優先されることを明記。画面項目定義の曜日（No.12）に色情報を追加。編集仕様の勤務表行と曜日に背景色とラベル色の詳細を追加。補足説明に「曜日による行の背景色」セクションを追加し、5種類の背景色（日曜日、土曜日、祝日、平日、休暇申請済み）とその優先順位を明記 | AI Assistant |
| 2025-12-05 | 休暇申請時の背景色を明確化。休暇申請は基本的に平日に行うため、平日の休暇申請日はオレンジ色（#FFCFA5）で表示されることを明記。編集仕様の勤務表行に「平日の休暇申請日はオレンジ色」を追加。補足説明の「休暇申請時の行の表示」セクションを追加 | AI Assistant |
| 2025-12-05 | 備考ダイアログの仕様を追加。備考列には常に+アイコンを表示し、押下すると備考ダイアログが開く。日次確定申請済み（APPROVAL_STATUS=PENDING/APPROVED）の場合はグレー背景で編集不可・「閉じる」ボタンのみ表示、未申請（NOT_SUBMITTED/REJECTED）の場合は白色背景で編集可能・「登録」「キャンセル」ボタンを表示。画面項目定義に備考ダイアログの項目（No.58-64）を追加。備考欄押下処理を修正し、承認状態による表示制御ロジックを追加。編集仕様の備考表示を「常に+アイコン表示」に変更。補足説明に「備考ダイアログの表示」セクションを追加し、承認状態による表示制御の詳細を記載 | AI Assistant |
| 2025-12-XX | 備考ダイアログに打刻漏れ・手入力修正情報の表示機能を追加。黄色背景（#FFFF00）で黒文字表示。打刻漏れがある場合は「出退打刻なし」「出社打刻なし」「退社打刻なし」を表示。手入力修正がある場合は「(出社打刻 HH:MM)」「(退社打刻 HH:MM)」を表示。画面項目定義に打刻漏れ・手入力修正情報（No.72-1）を追加。タイトル位置をtop: 6px、日付表示位置をtop: 47px、打刻漏れ・手入力修正情報位置をtop: 70pxに設定。備考入力欄の位置を動的に調整（情報表示時: top: 95px/97px、非表示時: top: 78px/80px）。登録ボタン・キャンセルボタンの位置をtop: 203px/208px、閉じるボタンの位置をleft: 245px, top: 208pxに設定。補足説明に「打刻漏れ・手入力修正情報の表示」セクションを追加 | AI Assistant |
| 2025-12-15 | 備考ダイアログの打刻漏れの判定条件を修正。打刻種別がMANUALで、かつ元の打刻時刻がなく、かつ手入力で時刻が入力されている場合に「出退打刻なし」「出社打刻なし」「退社打刻なし」を表示するように修正。打刻のし忘れなどで手入力で入力した場合に表示されることを明確化 | AI Assistant |
| 2025-12-06 | 勤務グラフの時間軸表示を「上部と下部に配置」と明記。画面項目定義No.19、編集仕様No.2、補足説明の「勤務グラフの表示」セクションを修正 | AI Assistant |
| 2025-12-06 | 画面構成を実際の画面に合わせて全面的に修正。ヘッダー部分（青色バー）にメニューアイコン、勤務表タイトル、年月選択、前月/次月ボタン、社員名表示、所属部署表示、申請ボタン、休暇情報ボタン、ヘルプボタンを配置（No.1-10）。新たに「テーブル上部操作エリア」セクションを追加し、年月選択（テーブル用）、前月リンク、今月リンク、次月リンク、お知らせリンク、月次サマリーリンク、ステータスリンク、承認履歴リンク、承認申請ボタンを配置（No.11-19）。承認申請ボタンをヘッダーからテーブル上部操作エリアに移動。勤務表テーブルはNo.20以降に再採番。イベント処理説明に「年月変更処理（テーブル上部）」「前月リンク押下処理」「今月リンク押下処理」「次月リンク押下処理」「お知らせリンク押下処理」「承認申請ボタン押下処理」を追加。既存のヘッダー関連処理のタイミングを「ヘッダー部分（青色バー）」に明確化。勤務表ボタンを削除 | AI Assistant |
| 2025-12-08 | 「承認履歴リンク」を削除し、「ステータス表示」に変更。ステータス表示は月次確定状態に応じて「- 未確定」「↑ 承認中」「✓ 承認済み」を表示。ステータスダイアログを追加（承認履歴テーブル、申請取消ボタン、閉じるリンク）。画面項目定義にステータス表示（No.17-19）、ステータスダイアログ（No.77-87）を追加。その他の項目定義に月次承認状態、月次承認履歴を追加（No.34-44）。API利用仕様にNo.9（月次承認履歴取得API）、No.10（月次確定申請取消API）を追加。イベント処理説明に「ステータス表示押下処理」「申請取消ボタン押下処理」「ステータスダイアログ閉じる処理」を追加。編集仕様No.3（ステータス表示）を追加。補足説明に「ステータス表示」「ステータスダイアログ」セクションを追加 | AI Assistant |
| 2025-12-08 | 申請欄押下処理を追加。申請状況アイコン（申請中、承認済み、却下）を押下した際の処理を追加。申請状況詳細ダイアログを追加（画面項目定義No.88-99）。イベント処理説明に「申請欄押下処理」を追加。補足説明に「申請状況詳細ダイアログ」セクションを追加。申請状態（申請中、承認済み、却下）に応じた表示内容の違いを明記 | AI Assistant |
| 2025-12-09 | 勤務グラフの詳細仕様を追加。グレーの数直線（標準勤務時間帯9:00-17:30）は平日のみ常時表示し、土日祝は非表示とする仕様を明記。出勤/退勤時刻が記録されると青色バーで表示し、出勤時刻と退勤時刻の位置に青色の▼（下向き三角）マークを表示する仕様を追加。出勤のみで退勤前の状態では出勤位置のみに▼を表示。画面項目定義No.31、編集仕様No.2の勤務グラフ、補足説明「勤務グラフの表示」セクションを更新。表示例の表を追加 | AI Assistant |
| 2025-12-09 | 出社・退社列の表示形式と押下動作を詳細化。承認状態（NOT_SUBMITTED/REJECTED）の場合はテキストボックス表示、（PENDING/APPROVED）の場合はテキストのみ表示とする仕様を明記。テキストボックス押下時は勤怠情報入力ダイアログ（編集モード）を表示、テキストのみ押下時は勤怠情報入力ダイアログ（閲覧モード）を表示。画面項目定義No.28-29を更新。イベント処理説明に「出勤時刻テキストボックス押下処理」「出勤欄押下処理（テキストのみ）」「退勤時刻テキストボックス押下処理」「退勤欄押下処理（テキストのみ）」を追加。補足説明「打刻と手入力の区別」セクションに「出社・退社列の表示形式と押下動作」を追加 | AI Assistant |
| 2025-12-09 | 勤務グラフの表示仕様を更新。標準勤務時間帯（9:00-17:30）をグレーの数直線からグレーの長方形（rgb(228, 228, 228)）に変更。休憩時間を青色の四角形（#1A69AB）で表示する仕様を追加。基本休憩時間（12:00-13:00）は平日の場合デフォルトで表示され、勤怠情報入力画面で入力された休憩時間も同様に表示される。複数の休憩時間に対応。▼マークは長方形の左上の角（出勤時刻）と右上の角（退勤時刻）に配置される。グラフの色分け（凡例）に休憩時間の色を追加。表示例の表を更新 | AI Assistant |
| 2025-12-09 | 休憩時間の表示色を更新。出勤していない場合（勤務予定日）はグレー色（#BBBBBB）で表示し、出勤している場合で出勤時刻が休憩時間より前の場合は青色（#1A69AB）で表示する。出勤時刻が休憩時間より後の場合は休憩時間の四角形を表示しない。グラフの基本構成、グラフの色分け（凡例）、表示例の表、編集仕様No.2の勤務グラフを更新 | AI Assistant |
| 2025-12-09 | 通常勤務時の勤務状況アイコンをNIKKORIアイコン（青色の丸の中に白い笑顔）に変更。表示条件を「通常勤務日に出社と退社ボタンが押された際に表示」と明記。勤務状況アイコンのツールチップ機能を追加（通常勤務の場合は「通常勤務日」と表示）。画面項目定義に勤務状況ツールチップ（No.26-1）を追加。イベント処理説明に「勤務状況アイコンホバー処理」を追加。編集仕様No.5（勤務状況アイコンツールチップ表示）を追加。補足説明の「勤務状況アイコンの表示」セクションを更新 | AI Assistant |
| 2025-12-09 | 過不足時間、法定時間内残業、法定時間外残業の計算方法を修正。法定時間内残業: 実作業時間 - 所定労働時間（表示範囲: 0:00 <= time <= (所定出勤日数 * 8:00) - 所定労働時間）。法定時間外残業: 実作業時間 - 所定出勤日数 * 8:00。過不足時間: 前日までの実作業時間 - (前日までの想定出勤日数 * 7:30)。残業時間の計算方法セクション、月次サマリーデータの表示セクション、API利用仕様を更新 | AI Assistant |


